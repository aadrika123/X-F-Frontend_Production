import{r as l,c as g,a as b,k as y,d as N,f as d,m as P,g as v,b as e,F as S,j as a,A as C,h as F,P as j}from"./index-aa793834.js";import{R as k}from"./Blocks-9e9cbffa.js";import{b as A}from"./PowerupFunctions-c5e50f78.js";import{u as E}from"./useSetTitle-c62550cd.js";const R=$=>{const{notify:i}=l.useContext(g);E("Change Password");const[c,n]=l.useState(!1),{api_changePassword:w,api_forgotPassword:q}=j();b();const[u,I]=l.useState();l.useState(!1),l.useState("");const{type:x}=y(),h=N().shape({oldPassword:d().when([],{is:()=>x=="change",then:()=>d().required("Enter old password")}),newPassword:d().min(6,"Minimum six character !").max(50,"Too Long!").required("Enter new password !").matches(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{6,}$/,"Password Must Contains (Capital, Smail, Number, Special) eg - Abc123#."),matchNewPassword:d().required("Confirm your new password").oneOf([P("newPassword"),null],"Password not match")}),s=v({initialValues:{oldPassword:"",newPassword:"",matchNewPassword:""},onSubmit:(o,r)=>{console.log("post data",o),f(o)},validationSchema:h}),f=o=>{let r={password:o.oldPassword,newPassword:o.newPassword};console.log("request body before hit api => ",r),n(!0),C.post(w,r,F()).then(t=>{var m,p;((m=t==null?void 0:t.data)==null?void 0:m.status)==!0&&(console.log("successfully changed => ",t),i("Password changed successfully !!!","success"),window.location.replace("/property/mobile-property-options")),((p=t==null?void 0:t.data)==null?void 0:p.status)==!1&&i("Please try after sometime !!!","error"),n(!1)}).catch(t=>{console.log("change pwd error  => ",t),i("Please try after sometime !!!","error"),n(!1)})};return e(S,{children:e("div",{className:"flex justify-center items-center h-full pt-[15%]",children:e("form",{onChange:o=>{let r=o.target.name,t=o.target.value;r=="mobile"&&s.setFieldValue("mobile",A(t,s.values.mobile,10))},className:"w-[25rem] px-8 rounded-lg bg-white shadow-xl",children:e("div",{className:"grid grid-cols-12 px-4 md:px-0 ",children:e("div",{className:"w-full col-span-12 md:col-span-12 md:shadow-none py-10",children:a("div",{className:"w-full  py-6  text-gray-700",children:[e("h1",{className:"text-center text-md font-semibold my-1 capitalize w-full"}),e("h1",{className:"text-center font-semibold my-1 flex justify-center",children:e("span",{className:"px-1 text-indigo-500 text-semibold text-2xl poppins uppercase",children:"Change Password"})}),a("div",{className:"my-3 relative text-sm",children:[e("div",{className:"text-gray-600 static mb-1 font-semibold text-left poppins",children:"Old Password"}),a("div",{className:"flex flex-row flex-wrap gap-x-2 gap-y-2",children:[e("input",{type:"password",...s.getFieldProps("oldPassword"),className:"form-control px-3 text-xs 2xl:text-sm py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md poppins w-full",placeholder:"Enter Your Old Password"}),e("div",{className:"w-full text-start",children:e("span",{className:"text-red-600 text-xs poppins text-start",children:s.touched.oldPassword&&s.errors.oldPassword?s.errors.oldPassword:null})})," "]})]}),a("div",{className:"my-3 relative text-sm",children:[e("div",{className:"text-gray-600 static mb-1 font-semibold text-left poppins",children:"New Password"}),a("div",{className:"flex flex-row flex-wrap gap-x-2 gap-y-2",children:[e("input",{type:"password",...s.getFieldProps("newPassword"),className:"form-control px-3 text-xs 2xl:text-sm py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md poppins w-full",placeholder:"Enter Your New Password"}),e("div",{className:"w-full text-start",children:e("span",{className:"text-red-600 text-xs poppins text-start",children:s.touched.newPassword&&s.errors.newPassword?s.errors.newPassword:null})})," "]})]}),a("div",{className:"my-3 relative text-sm",children:[e("div",{className:"text-gray-600 static mb-1 font-semibold text-left poppins",children:"Confirm New Password"}),a("div",{className:"flex flex-row flex-wrap gap-x-2 gap-y-2",children:[e("input",{type:"password",...s.getFieldProps("matchNewPassword"),className:"form-control px-3 text-xs 2xl:text-sm py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md poppins w-full",placeholder:"Confirm Your New Password"}),e("div",{className:"w-full text-start",children:e("span",{className:"text-red-600 text-xs poppins text-start",children:s.touched.matchNewPassword&&s.errors.matchNewPassword?s.errors.matchNewPassword:null})})," "]})]}),e("div",{className:" my-10"}),e("div",{className:"text-center mt-3 text-xs"}),a("div",{className:"my-5 relative",children:[a("div",{className:"text-red-600 text-sm font-semibold my-3 ",children:[" ",a("span",{className:"",children:[" ",u]})]}),c?e("div",{className:"flex w-full justify-center",children:e(k,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})}):e("button",{type:"submit",onClick:s.handleSubmit,disabled:c,className:" bg-indigo-500 hover:bg-indigo-700 px-5 shadow-xl py-2 w-full  rounded-md text-white text-lg font-semibold",children:"Submit"})]})]})})})})})})};export{R as default};
