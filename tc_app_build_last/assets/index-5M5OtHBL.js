import{u as g,l as u,p as N,j as e,r as i,L as m}from"./index-Zx9x37GE.js";import{I as y,a as v}from"./index.esm-b7O-_-eB.js";import{u as w,T as P}from"./TextField-mGG00NNs.js";import{c as I,a as B}from"./index.esm-T940qXBK.js";import{U as F,P as H}from"./index-bDHS_Kvn.js";import{F as S}from"./FormProvider-gK3su93h.js";import{L as _}from"./LoaderButton-Zmy-8Nzf.js";import{S as n}from"./SelectField-oy77f6hw.js";import"./tiny-warning.esm-rFRgECTd.js";const z=[{id:1,label:"Old Property No",value:"propertyNo"},{id:2,label:"Holding No",value:"holdingNo"},{id:3,label:"Mobile",value:"mobileNo"},{id:4,label:"Owner Name",value:"ownerName"}],C=[{id:1,label:"Zone A-East",value:"1"},{id:2,label:"Zone B-West",value:"2"},{id:3,label:"Zone C-North",value:"3"},{id:4,label:"Zone D-South",value:"4"}],L=I().shape({filteredBy:B().required("Filter By is required")});function Q(){var x,p,h,j,b,f;const{searchProperty:a,setSearchProperty:r}=g();F("Search Holding");const{data:t,isPending:Z,isLoading:d,isError:A,refetch:E,isRefetching:k,isFetching:$}=u({api:N.getFilterPropDetails,config:a,value:[a.filteredBy,a.parameter,a.zoneId,a.wardId,a.page,a.perPage],options:{enabled:!!a.filteredBy}}),l=w({enableReinitialize:!0,initialValues:a,validationSchema:L,onSubmit:async s=>{r({...a,filteredBy:s.filteredBy,parameter:s.parameter,zoneId:s.zoneId,wardId:s.wardId})}}),{values:o}=l,{data:c,isPending:D,isError:R,error:T,isLoading:O}=u({api:N.getWardByZone,config:{zoneId:o.zoneId},value:[o.zoneId],options:{enabled:!!o.zoneId}});return e.jsx(H,{title:"Search Holding",children:e.jsx("div",{className:"px-4 py-4 flex-1",children:e.jsxs(S,{formik:l,children:[e.jsx(i.Card,{className:"w-full",children:e.jsxs(i.CardBody,{children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Search Holding"})}),e.jsx("div",{className:"my-4 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(n,{label:"Filter By",name:"filteredBy",formik:l,children:[e.jsx("option",{value:"",children:"select"}),z.map(s=>e.jsx("option",{value:s.value,children:s.label},s.id))]}),e.jsxs(n,{label:"Zone",name:"zoneId",formik:l,children:[e.jsx("option",{value:"",children:"select"}),C.map(s=>e.jsx("option",{value:s.value,children:s.label},s.id))]}),e.jsxs(n,{label:"select",formik:l,name:"wardId",children:[e.jsx("option",{value:"1",children:"select"}),(x=c==null?void 0:c.data)==null?void 0:x.map(s=>e.jsx("option",{value:s.id,children:s.ward_name},s.id))]}),e.jsx(P,{label:"Parameter",name:"parameter",type:"text",formik:l})]}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(_,{type:"submit",disabled:d,loading:d,children:"Search"})})]})}),d?e.jsx("div",{className:"text-center py-52",children:"Loading..."}):e.jsx(e.Fragment,{children:((h=(p=t==null?void 0:t.data)==null?void 0:p.data)==null?void 0:h.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 border-b-2"}),e.jsxs("div",{className:"flex justify-between items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex justify-start items-center gap-2",children:[e.jsx(y,{className:"text-2xl",onClick:()=>{r({...a,page:a.page-1})}}),e.jsxs(i.Typography,{color:"gray",children:[a.page," of"," ",(j=t==null?void 0:t.data)==null?void 0:j.last_page]}),e.jsx(v,{className:"text-2xl",onClick:()=>{r({...a,page:a.page+1})}})]}),e.jsx("h1",{className:"text-sm font-semibold",children:"Holding List"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(n,{name:"perPage",value:l.values.perPage,onChange:s=>{r({...a,perPage:s.target.value})},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"30",children:"50"}),e.jsx("option",{value:"40",children:"100"})]})})]}),e.jsx("div",{className:"my-4 border-b-2"}),(f=(b=t==null?void 0:t.data)==null?void 0:b.data)==null?void 0:f.map(s=>e.jsx(i.Card,{className:"w-full mb-5",children:e.jsxs(i.CardBody,{children:[e.jsx("div",{className:"flex items-center justify-between -mt-1",children:e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"font-bold text-sm",children:"Details"})})}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Holding No:"}),e.jsx("p",{className:"text-sm text-end",children:s.holding_no})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Property No:"}),e.jsx("p",{className:"text-sm text-end",children:s.property_no})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Zone:"}),e.jsx("p",{className:"text-sm text-end",children:s.zone_name})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Address:"}),e.jsx("p",{className:"text-sm text-end truncate w-60",children:s.prop_address})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Mobile No:"}),e.jsx("p",{className:"text-sm text-end",children:s.mobile_no})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Owner Name:"}),e.jsx("p",{className:"text-sm text-end truncate w-60",children:s.owner_name})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Payment Status:"}),e.jsx("p",{className:"text-sm font-semibold ".concat(s.paid_status===1?"text-green-500":"text-red-500"),children:s.paid_status===1?"Paid":"Pending"})]}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsxs("div",{className:"flex items-center justify-around mt-4 -mb-1 gap-6",children:[e.jsx(m,{to:"/amc-app/property/pro-basic-details/".concat(s.id),className:"text-xs font-bold text-blue-600",children:"Basic Details"}),e.jsx(m,{to:"/amc-app/property/demand-details/".concat(s.id),className:"text-xs font-bold text-blue-600",children:"Demand Details"}),e.jsx(m,{to:"/amc-app/property/payment-history/".concat(s.id),className:"text-xs font-bold text-blue-600",children:"Payment History"})]})]})},s.id))]}):e.jsx("div",{className:"text-center py-52",children:"No Record Found!"})}),e.jsx("div",{className:"my-4 border-b-2"})]})})})}export{Q as default};
