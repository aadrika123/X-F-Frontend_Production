import{l,y as U,m as Z,z as K,W as X,B as F,D as C,E as ee,q as $,j as e,o as j,a4 as re,k as a,G as Y,a5 as te,a6 as ae,a7 as ne,x as se,v as oe,A as de}from"./index-04f996a4.js";function le(d){const{handlePayment:z}=ne(),[G,I]=l.useState(""),[r,u]=l.useState("no");l.useState();const[S,V]=l.useState(),[J,D]=l.useState(0),[f,h]=l.useState();l.useState();const[P,c]=l.useState(!1),{notify:g}=l.useContext(U);l.useState(!1),l.useState(!1);const[v,M]=l.useState(!1),x=Z(),i=d==null?void 0:d.data,m=d==null?void 0:d.installment,y=d==null?void 0:d.applicationId,A=d==null?void 0:d.connCat,b=d==null?void 0:d.amount;K("Payment Page");const{api_waterinitatePayment:q,api_newwaterconnectionupdate:E,api_waterPayConnectionCharges:O,header:p}=X(),T=F({paymentMode:C().required("select payment mode"),remarks:C().required("Enter remarks"),branchName:C(),cheque_dd_no:C(),cheque_dd_date:C()}),n=ee({enableReinitialize:!0,initialValues:{paymentMode:"",remarks:"",bankName:"",branchName:"",cheque_dd_no:"",cheque_dd_date:"",applicationId:y,chargeCategory:A,selectInstallment:"",isInstallmentRadio:"no"},onSubmit:(t,o)=>{if(t.paymentMode==="Online"){N(t);return}W(t),c(!0)},validationSchema:T}),w=()=>{M(!v)},W=t=>{console.log("items",t);const o={paymentMode:t==null?void 0:t.paymentMode,remarks:t==null?void 0:t.remarks,bankName:t==null?void 0:t.bankName,branchName:t==null?void 0:t.branchName,chequeNo:t==null?void 0:t.cheque_dd_no,chequeDate:t==null?void 0:t.cheque_dd_date,amount:b,isInstallment:r,penaltyAmount:i==null?void 0:i.penalty,applicationId:t==null?void 0:t.applicationId,penaltyIds:f,chargeCategory:t==null?void 0:t.chargeCategory};console.log("Final Payload",o),$.post(O,o,p).then(s=>{var k,_,Q;((k=s==null?void 0:s.data)==null?void 0:k.status)==!0?(c(!1),x(`/water-payment-receipt/${(Q=(_=s==null?void 0:s.data)==null?void 0:_.data)==null?void 0:Q.tranNo}/application`),console.log("Payment Done",s),g("Payment Done Successfully","success")):(c(!1),g("Error While Payment","error"))}).catch(s=>{c(!1),g("Something Went Wrong","error"),console.log("Expecption while payment",s)})},B=t=>{console.log("This..",t.target.selectedIndex,m[0].id),t.target.selectedIndex==1&&h([m[0].id]),t.target.selectedIndex==2&&h([m[0].id,m[1].id]),t.target.selectedIndex==3&&(h([m[0].id,m[1].id,m[2].id]),u("no"),h(void 0))},L=t=>{let o=t.target.name,s=t.target.value;console.log(o,s),o=="paymentMode"&&V(s),o=="selectInstallment"&&B(t),o=="selectInstallment"&&t.target.selectedIndex==3&&u("no"),o=="selectInstallment"&&D(Number(s)),o=="isInstallmentRadio"&&u(t.target.value)},R=t=>{console.log(t),console.log("afterSuccessssssssssssssssssssss"),$.post(E,{txnid:t==null?void 0:t.merchantTransactionIdentifier,applycationType:"Demand Collection"},p).then(o=>{o.data.status===!0?(x(`/waterApplicationPaymentHistory/${y}`),console.log("Data Really Saved",o)):console.log("Error While paying Online Payment ",o)}).catch(o=>{console.log("Online payment not done successfully",o)})},H=()=>{console.log("Error:fasdasdas "),x(`/waterViewApplication/${y}`)},N=t=>{c(!0),console.log("payOnline data:",t);const o={paymentMode:"Online",remarks:t==null?void 0:t.remarks,bankName:t==null?void 0:t.bankName,branchName:t==null?void 0:t.branchName,chequeNo:t==null?void 0:t.cheque_dd_no,chequeDate:t==null?void 0:t.cheque_dd_date,amount:b,isInstallment:r,penaltyAmount:t==null?void 0:t.penalty,applicationId:t==null?void 0:t.applicationId,penaltyIds:f,chargeCategory:t==null?void 0:t.chargeCategory,applycationType:"NewConnectionCharge"};console.log("Payment online Button Clicked..",o),$.post(q,o,p).then(s=>{var k,_;c(!1),console.log("Order ID Generated",s),console.log((_=(k=s==null?void 0:s.data)==null?void 0:k.data)==null?void 0:_.hash,"Order ID Generated.............."),s.data.status===!0?(c(!1),z(s,R,H)):c(!1)}).catch(s=>{c(!1),setIsGeneratingOrderId(!1),console.error("Error generating Order ID",s)})};return G==!0?e(j,{children:e(re,{})}):(console.log("connId",d.connId),a(j,{children:[P&&e(Y,{}),e(te,{position:"top-right",autoClose:2e3}),e("div",{className:" block p-4 mt-4 w-full md:py-4 md:px-40 md:pb-0 md:pt-0 rounded-lg shadow-lg bg-white md:w-full mx-auto  overflow-x-auto mb-20 ",children:e("div",{className:" block p-4 w-full md:py-6 rounded-lg bg-white mx-auto ",children:a("form",{onSubmit:n.handleSubmit,onChange:L,className:"p-4 relative",children:[(i==null?void 0:i.chargeCatagoryId)===2&&(i==null?void 0:i.paidStatus)==0&&e("div",{className:"text-center text-green-600 font-semibold pb-2",children:"Note: 10% rebate on penalty in case whole penalty is paid"}),a("div",{className:"grid grid-cols-12",children:[a("div",{className:"bg-white col-span-12 grid grid-cols-12 pt-6 mb-4 border border-gray-200",children:[a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e("span",{children:"Connection Fee :"})," ",e("span",{className:"font-mono font-semibold",children:b})]}),e("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:a("div",{className:"w-full",children:[e("span",{children:"Total Payable Amount :"})," ",a("span",{className:"font-mono font-semibold text-xl",children:[" â‚¹",b]})]})})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Mode"]}),a("select",{...n.getFieldProps("paymentMode"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),e("option",{value:"CASH",children:"Cash"}),e("option",{value:"CHEQUE",children:"Cheque"}),e("option",{value:"DD",children:"DD"}),e("option",{value:"Online",children:"Online"})]}),e("span",{className:"text-red-600 absolute text-xs",children:n.touched.paymentMode&&n.errors.paymentMode?n.errors.paymentMode:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Remarks"]}),e("input",{...n.getFieldProps("remarks"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Enter remarks"}),e("span",{className:"text-red-600 absolute text-xs",children:n.touched.remarks&&n.errors.remarks?n.errors.remarks:null})]}),(S=="CHEQUE"||S=="DD")&&a(j,{children:[a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Bank Name"]}),e("input",{...n.getFieldProps("bankName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Bank Name."}),e("span",{className:"text-red-600 absolute text-xs",children:n.touched.bankName&&n.errors.bankName?n.errors.bankName:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Branch Name"]}),e("input",{...n.getFieldProps("branchName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Branch Name"}),e("span",{className:"text-red-600 absolute text-xs",children:n.touched.branchName&&n.errors.branchName?n.errors.branchName:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD No"]}),e("input",{...n.getFieldProps("cheque_dd_no"),type:"text",placeholder:"Enter Check/DD",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("span",{className:"text-red-600 absolute text-xs",children:n.touched.cheque_dd_no&&n.errors.cheque_dd_no?n.errors.cheque_dd_no:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD Date"]}),e("input",{...n.getFieldProps("cheque_dd_date"),type:"date",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Enter new ward no."}),e("span",{className:"text-red-600 absolute text-xs",children:n.touched.cheque_dd_date&&n.errors.cheque_dd_date?n.errors.cheque_dd_date:null})]})]}),e("div",{className:"col-span-12"}),e("div",{className:"col-span-12 grid grid-cols-2 mt-10",children:e("div",{className:""})})]}),a("div",{children:[e("div",{className:"",children:e("h1",{className:"underline text-1xl text-blue-600 cursor-pointer font-semibold",onClick:w,children:"View Rate Chart"})}),e("div",{className:"md:pl-10 flex justify-between",children:e("button",{type:"submit",className:" px-6 py-2.5 bg-green-600 text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out cursor-pointer ml-[80%]",children:"Pay Tax"})}),v&&a("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e("div",{className:"absolute inset-0 bg-black opacity-50"}),e("div",{className:"bg-white p-7 rounded-lg shadow-md relative z-10",children:a("div",{children:[e("button",{onClick:w,className:" text-black underline ml-[98%] text-2xl bg-gray-300 hover:bg-red-500",children:e(ae,{})}),a("div",{children:[e("h2",{className:"text-xl font-bold mb-4 text-center text-gray-800",children:"Tap Size Wise Rate Chart"}),a("table",{className:"w-full text-sm font-semibold border-collapse border border-gray-300 shadow-lg",children:[e("thead",{children:a("tr",{className:"bg-gray-200 text-center",children:[e("th",{className:"px-4 py-2 border border-gray-300",children:"Sl.No."}),e("th",{className:"px-4 py-2 border border-gray-300",children:"Charge Category"}),e("th",{className:"px-4 py-2 border border-gray-300",children:"15 MM"}),e("th",{className:"px-4 py-2 border border-gray-300",children:"20 MM"}),e("th",{className:"px-4 py-2 border border-gray-300",children:"25 MM"}),e("th",{className:"px-4 py-2 border border-gray-300",children:"50 MM"})]})}),a("tbody",{children:[a("tr",{className:"hover:bg-gray-50",children:[e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"1"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"Anamat Amount"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹1,500"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹3,000"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹9,000"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹20,000"})]}),a("tr",{className:"hover:bg-gray-50",children:[e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"2"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"Bore Charge"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹500"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹500"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹500"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹500"})]}),a("tr",{className:"hover:bg-gray-50",children:[e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"3"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"Inspection Fee"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹500"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹500"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹500"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹500"})]}),a("tr",{className:"hover:bg-gray-50",children:[e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"4"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"Pipe Connection Charge"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹750"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹750"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹750"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹750"})]}),a("tr",{className:"bg-gray-200 font-bold text-gray-900",children:[e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"5"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"TOTAL"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹3,250"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹4,750"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹10,750"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹21,750"})]})]})]})]}),a("table",{className:"w-full text-sm font-semibold border-collapse border border-gray-300 mt-1",children:[a("thead",{children:[e("tr",{className:"bg-gray-200 text-center",children:e("th",{className:"px-6 py-1 border border-gray-300 text-lg",colSpan:"3",children:"Road Cutter Charge"})}),a("tr",{className:"bg-gray-100 text-gray-700",children:[e("th",{className:"px-4 py-2 border border-gray-300",children:"Sl.No."}),e("th",{className:"px-4 py-2 border border-gray-300",children:"Road Type"}),e("th",{className:"px-4 py-2 border border-gray-300",children:"Amount"})]})]}),a("tbody",{children:[a("tr",{className:"hover:bg-gray-50",children:[e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"1"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"Damber Road (Per Meter)"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹1,500"})]}),a("tr",{className:"hover:bg-gray-50",children:[e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"2"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"Concrete Road (Per Meter)"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹2,300"})]}),a("tr",{className:"hover:bg-gray-50",children:[e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"3"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"Khadikaran Road (Per Meter)"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹300"})]}),a("tr",{className:"hover:bg-gray-50",children:[e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"4"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"Muddy Road (Per Meter)"}),e("td",{className:"px-4 py-2 border border-gray-300 text-center",children:"â‚¹80"})]})]})]})]})})]})]})]})})})]}))}function ie(d){var f,h,P,c,g,v,M,x,i,m,y,A,b,q,E,O,p,T,n,w,W,B,L,R,H;const{t:z}=se(),[G,I]=l.useState(!1),[r,u]=l.useState(),{id:S}=oe(),{notify:V}=l.useContext(U),{api_WaterGetDetailsById:J}=X();K(`${z("tranWaterHomePage.waterApplicationPaymentLabel.label")}`);const D=()=>{I(!0),console.log("before fetch property details in deactivation"),$.post(J,{applicationId:S},de()).then(function(N){console.log("view water details by id...",N.data.data),u(N.data.data),I(!1)}).catch(function(N){console.log("==2 details by id error...",N),I(!1),V("Something Went Wrong","error")})};return l.useEffect(()=>{D()},[]),console.log("applicationFullData?.applicationDetails",(f=r==null?void 0:r.applicationDetails)==null?void 0:f.connection_type_id),a(j,{children:[G&&e(Y,{}),e("div",{className:"w-full bg-white shadow-xl mb-6",children:e("div",{className:"",children:a("div",{className:"py-6 mt-2 bg-white rounded-lg shadow-lg p-4",children:[a("div",{className:"flex space-x-5 pl-4 ",children:[a("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:(h=r==null?void 0:r.applicationDetails)!=null&&h.application_no?(P=r==null?void 0:r.applicationDetails)==null?void 0:P.application_no:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Application No"})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:(c=r==null?void 0:r.applicationDetails)!=null&&c.category?(g=r==null?void 0:r.applicationDetails)==null?void 0:g.category:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Category"})]}),a("div",{className:"flex-1",children:[a("div",{className:"font-semibold text-md",children:[(v=r==null?void 0:r.applicationDetails)!=null&&v.address?(M=r==null?void 0:r.applicationDetails)==null?void 0:M.address:"N/A"," "]}),e("div",{className:"text-gray-500 text-xs",children:"Address"})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:(x=r==null?void 0:r.applicationDetails)!=null&&x.charge_category?(i=r==null?void 0:r.applicationDetails)==null?void 0:i.charge_category:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Charge Category"})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:(m=r==null?void 0:r.applicationDetails)!=null&&m.property_no?(y=r==null?void 0:r.applicationDetails)==null?void 0:y.property_no:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Property No"})]})]}),a("div",{className:"flex space-x-10  pl-4 mt-4",children:[a("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:(A=r==null?void 0:r.applicationDetails)!=null&&A.mobile_no?(b=r==null?void 0:r.applicationDetails)==null?void 0:b.mobile_no:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Mobile No"})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:(q=r==null?void 0:r.applicationDetails)!=null&&q.apply_date?(E=r==null?void 0:r.applicationDetails)==null?void 0:E.apply_date:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Apply Date"})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:(O=r==null?void 0:r.applicationDetails)!=null&&O.landmark?(p=r==null?void 0:r.applicationDetails)==null?void 0:p.landmark:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Land Mark"})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:(T=r==null?void 0:r.applicationDetails)!=null&&T.amount?(n=r==null?void 0:r.applicationDetails)==null?void 0:n.amount:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Amount"})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:(w=r==null?void 0:r.applicationDetails)!=null&&w.building_type?(W=r==null?void 0:r.applicationDetails)==null?void 0:W.building_type:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Building Type"})]})]})]})})}),e("div",{children:e(le,{amount:(B=r==null?void 0:r.applicationDetails)==null?void 0:B.amount,connId:(L=r==null?void 0:r.applicationDetails)==null?void 0:L.connection_type_id,connCat:(R=r==null?void 0:r.applicationDetails)==null?void 0:R.connection_type,applicationId:(H=r==null?void 0:r.applicationDetails)==null?void 0:H.id,installment:r==null?void 0:r.penaltyInstallments,data:r==null?void 0:r.calculation})}),e("div",{className:"w-full h-40 md:none"})]})}export{ie as default};
