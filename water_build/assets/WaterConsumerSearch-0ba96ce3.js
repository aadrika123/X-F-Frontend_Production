import{x as P,l,y as H,v as g,W as k,A as f,m as D,z as q,B as Z,D as x,E as T,k as t,o as F,j as e,G as V,H as O,I as j,J as c,q as E}from"./index-d31789dc.js";function G(){const{t:o}=P(),[y,n]=l.useState(),[U,d]=l.useState(!1),[v,u]=l.useState(!1);l.useState(),l.useState(!1),l.useContext(H),l.useState();const[p,w]=l.useState();l.useState(1),l.useState(""),l.useState(5),l.useState(""),l.useState(0);const[m,h]=l.useState(null),[N,b]=l.useState(0);g();const{api_waterSearchConsumer:S,api_newWardByZoneId:C}=k();g(),f();const B=D();q("Water Consumer Details");const A=Z({filterBy:x().required("This is a required field !"),parameter:x().required("This is a required field !")}),a=T({initialValues:{filterBy:"",parameter:"",wardId:"",zoneId:""},onSubmit:r=>{I(),h({filterBy:a.values.filterBy,zoneId:a.values.zoneId,wardId:a.values.wardId,parameter:a.values.parameter,wardId:a.values.wardId}),b(s=>s+1)},validationSchema:A}),I=r=>{h({filterBy:a.values.filterBy,zoneId:a.values.zoneId,wardId:a.values.wardId,parameter:a.values.parameter,wardId:a.values.wardId}),b(s=>s+1)},W=[{Header:"Sl No.",Cell:({row:r})=>e("div",{className:"pr-2",children:r.index+1})},{Header:"Zone",accessor:"zone_name",Cell:({cell:r})=>e("span",{children:c(r.row.original.zone_name)})},{Header:"Ward No.",accessor:"ward_name",Cell:({cell:r})=>e("span",{children:c(r.row.original.ward_name)})},{Header:"Owner Name",accessor:"owner_name"},{Header:"Consumer Name",accessor:"consumer_no"},{Header:"Property No",accessor:"property_no"},{Header:"Mobile No.",accessor:"mobile_no",Cell:({cell:r})=>e("span",{children:c(r.row.original.mobile_no)})},{Header:"Address",accessor:"address"},{Header:"Bill Amount",accessor:"balance_amount"},{Header:"Status",accessor:"payment_status",Cell:({cell:r})=>e("span",{children:c(r.row.original.payment_status)})},{Header:"Action",accessor:"id",Cell:({cell:r})=>e("button",{onClick:()=>{B(`/waterViewConsumer/${r.value}`)},className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:o("tranWaterApplicationSearchPage.viewLabel.label")})}],L=r=>{a.values.filterBy=r.target.value,r.target.value=="consumerNo"&&(n("Consumer No"),d(!0)),r.target.value=="propertyNo"&&(n("Property No"),d(!0)),r.target.value=="ownerDetails"&&(n("Owner Details"),d(!1)),r.target.value=="address"&&(n("Address"),d(!1)),r.target.value=="applicationNo"&&(n("Application No"),d(!1))},_=r=>{u(!0),a.setFieldValue("wardId","");let s={zoneId:r};console.log("before fetch wardby old ward...",s),E.post(C,s,f()).then(function(i){console.log("wardlist by zone id list ....",i.data.data),w(i.data.data),u(!1),a.setFieldValue("wardId","")}).catch(function(i){console.log("errorrr.... ",i),u(!1)})},z=r=>{let s=r.target.name,i=r.target.value;a.values&&n(a.values.filterBy),s==="zoneId"&&_(i)};return t(F,{children:[v&&e(V,{}),t("div",{className:"border shadow-xl rounded-md bg-white ",children:[e("div",{className:"flex   ",children:e("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:o("tranWaterApplicationSearchPage.searchWaterConsumerLabel.label")})}),e("form",{onChange:z,onSubmit:a.handleSubmit,children:t("div",{className:"flex flex-col sm:flex-row justify-center sm:space-x-8 my-5 m-10",children:[t("div",{children:[t("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[o("tranWaterApplicationSearchPage.filterByLabel.label"),e("span",{className:"text-red-500",children:"*"})]}),t("select",{name:"filterBy",onChange:L,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:o("tranWaterApplicationSearchPage.selectApplicationTypeLabel.label")}),t("option",{value:"consumerNo",children:[o("tranWaterApplicationSearchPage.consumerNoLabel.label")," "]}),e("option",{value:"propertyNo",children:o("tranWaterApplicationSearchPage.propertyNo.label")}),e("option",{value:"applicantName",children:o("tranWaterApplicationSearchPage.applicantNameLabel.label")}),e("option",{value:"mobileNo",children:o("tranWaterApplicationSearchPage.mobileNoLabel.label")}),e("option",{value:"applicationNo",children:o("tranWaterApplicationSearchPage.applicationNoLabel.label")})]}),e("p",{className:"text-red-500 text-xs",children:a.touched.filterBy&&a.errors.filterBy?a.errors.filterBy:null})]}),t("div",{children:[t("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Zone ",e("span",{className:"text-red-500",children:"*"})]}),t("select",{name:"zoneId",onChange:a.handleChange,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",disabled:!1,children:[e("option",{value:"",children:"All Zones"}),e("option",{value:"1",children:"Zone A-East"}),e("option",{value:"2",children:"Zone B-West"}),e("option",{value:"3",children:"Zone C-North"}),e("option",{value:"4",children:"Zone D-South"}),e("option",{value:"gov",children:"GOV"}),e("option",{value:"SUS",children:"SUS"})]}),e("p",{className:"text-red-500 text-xs",children:a.touched.zoneId&&a.errors.zoneId?a.errors.zoneId:null})]}),t("div",{children:[t("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Ward No",e("span",{className:"text-red-500",children:"*"})]}),t("select",{name:"wardId",onChange:a.handleChange,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",disabled:!1,children:[e("option",{value:"",children:"All Ward"}),p==null?void 0:p.map((r,s)=>e("option",{value:r.id,children:r.ward_name},s))]}),e("p",{className:"text-red-500 text-xs",children:a.touched.wardNo&&a.errors.wardNo?a.errors.wardNo:null})]}),t("div",{children:[t("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[o("tranWaterApplicationSearchPage.searchByLabel.label")," ",y," ",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"text",name:"parameter",onChange:a.handleChange,className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("p",{className:"text-red-500 text-xs",children:a.touched.parameter&&a.errors.parameter?a.errors.parameter:null})]}),e("div",{className:"mt-4",children:e("button",{type:"submit",className:"w-full border border-green-600 bg-green-600 hover:bg-green-500 text-white hover:text-black shadow-lg rounded-sm text-base font-semibold px-5 m-3 py-1",children:t("p",{className:"flex",children:[t("span",{className:"mt-1 mr-2",children:[" ",e(O,{})," "]})," ",o("tranWaterApplicationSearchPage.searchRecordLabel.label")," "]})})})]})})]}),e("div",{className:" rounded-md  mt-10",children:m!=null&&e(j,{columns:W,requestBody:m,changeData:N,api:S})}),e("div",{className:"w-full h-40"})]})}export{G as default};
