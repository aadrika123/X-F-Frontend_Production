import{l as r,v as d,W as F,z as L,B as P,D as u,E as V,m as W,k as o,o as j,j as t,G as M,H as O,I as T}from"./index-25d015de.js";function Q(){const[n,$]=r.useState();d(),r.useState(!1);const[D,h]=r.useState(),[_,s]=r.useState(),[m,z]=r.useState(!1),[p,R]=r.useState(1);r.useState("");const[g,U]=r.useState(5),[f,G]=r.useState(""),[y,I]=r.useState(0);r.useState(10);const{api_waterSearchActiveApplication:b,header:J}=F(),{filterBy:x,parameter:N}=d();L("Water Application Search");const[i,v]=r.useState(null),[w,S]=r.useState(null),B=P({filterBy:u().required("This is a required field !"),entry:u().required("This is a required field !")}),a=V({initialValues:{filterBy:"",entry:""},onSubmit:e=>{var l;v({filterBy:e==null?void 0:e.filterBy,parameter:(l=a==null?void 0:a.values)==null?void 0:l.entry}),c(e),S(q=>q+1)},validationSchema:B}),A=W();r.useEffect(()=>{y>0&&c()},[x,N]);const C=()=>{window.history.pushState(null,"",`/water/waterViewApplication/${a.values.filterBy}/${a.values.parameter} `)},c=e=>{const l={filterBy:e?e.filterBy:a.values.filterBy,parameter:e?e.entry:a.values.entry,pages:g,page:p,search:f};console.log("before fetch applied application..",l)};console.log("readymadeListData.data",n==null?void 0:n.data);const H=e=>{a.values.filterBy=e.target.value,e.target.value=="holdingNo"&&s("Enter Holding No."),e.target.value=="safNo"&&s("Enter SAF No."),e.target.value=="newConnection"&&s("Enter Application No."),e.target.value=="regularization"&&s("Enter Application No."),e.target.value=="name"&&s("Enter Owner Name"),e.target.value=="mobileNo"&&s("Enter Mobile No.")},E=()=>{h(),a.values&&s(a.values.filterBy)},k=[{Header:"Ward No.",accessor:"ward_name"},{Header:"Application No",accessor:"application_no"},{Header:" Holding No",accessor:"holding_no"},{Header:"Applicant Name",accessor:"applicantname"},{Header:"Address",accessor:"address"},{Header:"Mobile No",accessor:"mobileno"},{Header:"Action",accessor:"id",Cell:({cell:e})=>t("button",{onClick:()=>{C(),A(`/waterViewApplication/${e.row.values.id}`,{replace:!0})},className:"bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black",children:"View"})}];return console.log("readymadeListData.data",n==null?void 0:n.data),o(j,{children:[m&&t(M,{}),o("div",{className:"border shadow-xl bg-white mt-6",children:[t("div",{className:"flex ml-5 mt-2 ",children:t("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search Water Approved Applications"})}),t("form",{onChange:E,onSubmit:a.handleSubmit,children:o("div",{className:"flex max-sm:flex-col justify-center space-x-8 max-sm:space-x-0 max-sm:space-y-5 my-5 m-10",children:[o("div",{children:[o("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Application Type",t("span",{className:"text-red-500",children:"*"})]}),o("select",{name:"filterBy",onChange:H,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[t("option",{value:"",children:"Select"}),t("option",{value:"newConnection",children:"New Connection"}),t("option",{value:"name",children:"Name"}),t("option",{value:"holdingNo",children:"Holding No"}),t("option",{value:"reConnection",children:"Re Connection"})]}),t("p",{className:"text-red-500 text-xs",children:a.touched.filterBy&&a.errors.filterBy?a.errors.filterBy:null})]}),o("div",{children:[o("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Searching Parameter",t("span",{className:"text-red-500",children:"*"})]}),t("input",{type:"text",name:"entry",onChange:a.handleChange,className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),t("p",{className:"text-red-500 text-xs",children:a.touched.entry&&a.errors.entry?a.errors.entry:null})]}),t("div",{className:"mt-4",children:o("button",{type:"submit",className:"w-full border border-indigo-600 bg-indigo-600 hover:bg-indigo-500 text-white hover:text-black shadow-lg rounded-sm text-base font-semibold px-5 m-3 max-sm:m-0 py-1",children:[" ",o("p",{className:"flex justify-center",children:[" ",o("span",{className:"mt-1",children:[" ",t(O,{})," "]})," ","Search record"]})]})})]})}),t("div",{className:" rounded-md  mt-10",children:i!=null&&t(T,{columns:k,requestBody:i,changeData:w,api:b})})]})]})}export{Q as default};
