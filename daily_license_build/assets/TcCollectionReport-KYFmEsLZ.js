import{r as a,c as x,a as h,j as t}from"./index-RnSSbhwi.js";import{T as ct}from"./ThemeStyle-mSkMd4lv.js";import{u as nt}from"./formik.esm-m4X89L1X.js";import{R as rt}from"./RentalApiList-ukKT19VC.js";import{R as it,s as dt}from"./search-BgFcvB-o.js";import{L as mt}from"./Loader-V0ptvDoS.js";import"./ShopListViewInCard-o-ugwX2t.js";import"./PowerupFunctions-H1--Y6Dn.js";import"./TollListViewInCard-QL1V8kgX.js";function kt(){const{bgHeaderColor:xt,titleColor:d,nextButtonColor:ht,bgCardColor:ut,bgInfoColor:pt,infoTextColor:gt,backButtonColor:ft,backBtnHoverColor:jt,nextBtnHoverColor:yt,inputStyle:bt}=ct(),{api_UlbCircleList:E,api_locationByCircleList:R,api_tcCollectionReport:B,api_tcShopCollectionReport:H}=rt(),[Ct,_]=a.useState();a.useState(null);const[Nt,I]=a.useState();a.useState(null);const[r,P]=a.useState(null),[k,n]=a.useState(!1),[St,V]=a.useState(),[vt,A]=a.useState(),[wt,O]=a.useState(),[Dt,$]=a.useState(),[z,M]=a.useState(),[i,U]=a.useState(),[q,G]=a.useState(0),[u,J]=a.useState(1),[K,p]=a.useState(0),[g,Q]=a.useState(5),[f,W]=a.useState(""),[X,Lt]=a.useState(!1),l=nt({initialValues:{dateFrom:"",dateTo:"",collectionType:""},onSubmit:e=>{j(e==null?void 0:e.dateFrom,e==null?void 0:e.dateTo)}}),j=(e,c)=>{Y(e,c,u,g,f)},Y=(e,c,o,st,lt="")=>{n(!0);let m;i==1&&(m=H),i==2&&(m=B),x.post("".concat(m),{fromDate:e,toDate:c,page:o,perPage:st,key:lt},h()).then(s=>{var b,C,N,S,v,w,D,L,T,F;console.log("toll list",(C=(b=s==null?void 0:s.data)==null?void 0:b.data)==null?void 0:C.totalCollection),s.data.status&&(M((S=(N=s==null?void 0:s.data)==null?void 0:N.data)==null?void 0:S.totalCollection),P((w=(v=s==null?void 0:s.data)==null?void 0:v.data)==null?void 0:w.data),G((L=(D=s.data)==null?void 0:D.data)==null?void 0:L.total),p((F=(T=s.data)==null?void 0:T.data)==null?void 0:F.last_page)),n(!1)}).catch(s=>{console.log(s),n(!1)})},Z=[{Header:"Shop no.",accessor:"shop_no"},{Header:"Allottee",accessor:"allottee"},{Header:"Last paid on",accessor:"updated_at"},{Header:"Area",accessor:"circle_name"},{Header:"Rate",accessor:"rate"}];a.useEffect(()=>{tt()},[]);const tt=()=>{n(!0),x.post(E,{},h()).then(e=>{console.log("circle list 1",e.data),e.data.status&&_(e.data.data),n(!1)}).catch(e=>{console.log(e),n(!1)})},et=e=>{console.log("circle id ",e),n(!0);const c={circleId:e};x.post(R,c,h()).then(o=>{console.log("location list",o.data),o.data.status&&I(o.data.data),n(!1)}).catch(o=>{console.log(o),n(!1)})};console.log("shop list by location",r);const at=e=>{console.log("target type",e.target.type),console.log("check box name",e.target.name),console.log("target id..",e.target.value);let c=e.target.name,o=e.target.value;c=="circle"&&et(o),c=="location"&&V(o),c=="filterBy"&&A(o),c=="dateFrom"&&O(o),c=="dateTo"&&$(o),c=="collectionType"&&U(o)};console.log("===1==",i);let y="Collection Report";const ot={tittle:y,totalDataCount:q,currentPageIndex:u,setcurrentPageIndex:J,pageLength:g,setpageLength:Q,lastPageIndex:K,setlastPageIndex:p,searchValue:f,setsearchValue:W,refreshStatus:X,collectionTypeVal:i};return t.jsxs(t.Fragment,{children:[k&&t.jsx(mt,{}),t.jsx("div",{className:"h-auto bg-[#FDFCFE] flex flex-row flex-wrap justify-center items-center p-3",children:t.jsxs("div",{className:"bg-white shadow-xl rounded-tl-[44px]  h-full sm:w-1/2 lg:w-1/3 w-full rounded-xl",children:[t.jsx("div",{className:"bg-[#5846BE] h-32 w-full mx-auto rounded-br-[68px] rounded-tl-[44px]  opacity-90",children:t.jsxs("div",{className:"p-4 pt-12",children:[t.jsx("h1",{className:"text-gray-50 font-bold capitalize text-2xl",children:y}),t.jsx("h1",{className:"text-gray-50 capitalize text-[12px]",children:"Budgeting Essentials: Toll Rent Payment"})]})}),t.jsx("form",{onSubmit:l.handleSubmit,onChange:at,children:t.jsx("div",{className:"p-2 md:p-10 mt-2 flex justify-center items-center  overflow-hidden ",children:t.jsxs("div",{className:"grid grid-cols-12 bg-[#EDEDF4]  w-full md:w-1/3 p-6 md:p-10 rounded-xl shadow-md",children:[t.jsx("div",{className:"form-group mb-4 md:mb-6 col-span-12 mt-2 text-gray-600 ",children:t.jsxs("div",{className:"",children:[t.jsx("h1",{className:"".concat(d," text-sm py-2 text-gray-600"),children:"Collection"}),t.jsxs("select",{...l.getFieldProps("collectionType"),className:"border border-gray-100 w-full py-2 px-2 bg-white shadow-lg rounded-xl text-gray-600 font-normal text-sm",children:[t.jsx("option",{value:"",selected:!0,disabled:!0,children:"Select"}),t.jsx("option",{value:1,children:"Municipal Rental"}),t.jsx("option",{value:2,children:"Daily License"})]})]})}),t.jsx("div",{className:"form-group mb-4 md:mb-6 col-span-12 mt-2 text-gray-600 ",children:t.jsxs("div",{className:"",children:[t.jsx("h1",{className:"".concat(d," text-sm py-2 text-gray-600"),children:"Date From"}),t.jsx("input",{type:"date",name:"dateFrom",className:" border border-gray-100 w-full py-2 px-2 bg-white shadow-lg rounded-xl text-gray-600 font-normal text-sm",onChange:l.handleChange,value:l.values.dateFrom}),t.jsx("p",{className:"text-red-500 text-xs",children:l.touched.dateFrom&&l.errors.dateFrom?l.errors.dateFrom:null})]})}),t.jsx("div",{className:"form-group mb-4 md:mb-6 col-span-12  text-gray-600 ",children:t.jsxs("div",{className:"",children:[t.jsx("h1",{className:" ".concat(d," text-sm py-2 text-gray-600"),children:"Date To"}),t.jsx("input",{type:"date",name:"dateTo",className:" border border-gray-100 w-full py-2 px-2 bg-white shadow-lg rounded-xl text-gray-600 font-normal text-sm",onChange:l.handleChange,value:l.values.dateTo}),t.jsx("p",{className:"text-red-500 text-xs",children:l.touched.dateTo&&l.errors.dateTo?l.errors.dateTo:null})]})}),t.jsx("div",{className:"col-span-12 grid grid-cols-12  mt-4",children:t.jsxs("div",{className:"col-span-12",children:[" ",t.jsx("button",{type:"submit",className:"shadow-lg w-full px-6 py-3 bg-[#5846BE] text-white font-medium text-xs leading-tight rounded-xl   hover:shadow-lg  focus:shadow-lg focus:outline-none focus:ring-0  active:shadow-lg transition duration-150 ease-in-out",onClick:j,children:"Search"})]})})]})})}),t.jsx("div",{className:"p-3",children:t.jsxs("div",{className:"col-span-12 grid grid-cols-12  shadow-lg hover:shadow-lg   bg-[#EDEDF4] text-[#5846BE]",children:[t.jsx("div",{className:"col-span-10",children:t.jsxs("div",{type:"submit",className:" w-full px-4 py-3  font-bold text-lg  ",children:["COLLECTION - ",z]})}),t.jsx("div",{className:"col-span-2",children:t.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3592/3592606.png",className:"h-8 mt-2.5 opacity-80"})})]})}),t.jsx("div",{children:(r==null?void 0:r.length)>0?t.jsx(it,{canRefresh:!0,columns:Z,values:ot,dataList:r}):t.jsx("div",{className:"p-2 relative ",children:t.jsx("img",{src:dt,className:"mx-auto h-64 p-8 pt-4"})})})]})})]})}export{kt as default};
