import{u as J,p as W,j as e}from"./index-k8yqkKI_.js";import"./router-g9NwwHut.js";import{u as K}from"./formik.esm-MEJnthxH.js";import{h as Z}from"./moment-X--WQ6sg.js";import"./index.esm-lGQm42K_.js";import{r as l}from"./tailwind-xMhOhnt0.js";import{F as X}from"./FormProvider-8P9kTgS9.js";import"./index-KJUlVKah.js";import{P as $}from"./index-M3_1qG-R.js";import{u as G}from"./useCustomQuery-iWZaBnwd.js";import"./module-h8oLgeiQ.js";import"./reactQuery-m3ek4cLe.js";import"./reactQueryDevtools-6dm9iask.js";import"./axios-hq-Xw8mW.js";import"./reactIcons-TqjzQo_g.js";import"./headlessui-QgKi6LbN.js";function je(){var o,c,m,x,i,h,j,b,f,N,p,u,y,g,v,D,w,F,P,C,Y,_,M,z,A,I,S,E,k,B,L,T,H,O,U,q;const r=J(),t=G({api:(o=W)==null?void 0:o.collectionReport,config:{collectionType:["property","saf"],user:(c=r==null?void 0:r.user)==null?void 0:c.user_type,fromDate:(m=r==null?void 0:r.collectionReportProperty)==null?void 0:m.fromDate,uptoDate:(x=r==null?void 0:r.collectionReportProperty)==null?void 0:x.uptoDate,page:1,perPage:500},value:[(i=r==null?void 0:r.collectionReportProperty)==null?void 0:i.fromDate,(h=r==null?void 0:r.collectionReportProperty)==null?void 0:h.uptoDate],options:{enabled:!0}}),n=K({enableReinitialize:!0,initialValues:r==null?void 0:r.collectionReportProperty,onSubmit:s=>{r==null||r.setCollectionReportProperty(s)}}),{values:d}=n;return G({api:(j=W)==null?void 0:j.getWardByZone,config:{zoneId:d==null?void 0:d.zoneId},value:[d==null?void 0:d.zoneId],options:{enabled:!!(d!=null&&d.zoneId)}}),e.jsx($,{title:"Collection Summary",children:e.jsxs("div",{className:"p-4 ",children:[e.jsx(X,{formik:n,children:e.jsx(l.Card,{className:"w-full",children:e.jsxs(l.CardBody,{children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"font-semibold text-sm",children:"Collection Summary"})}),e.jsx("div",{className:"border-b-2 border-gray-300 w-full py-1"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsx("div",{className:"text-left",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Name:"})}),e.jsx("div",{className:"text-left",children:e.jsx("h1",{className:"text-sm",children:(b=r==null?void 0:r.user)==null?void 0:b.name})}),e.jsx("div",{className:"text-left",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Mobile:"})}),e.jsx("div",{className:"text-left",children:e.jsx("h1",{className:"text-sm",children:(f=r==null?void 0:r.user)==null?void 0:f.mobile})}),e.jsx("div",{className:"text-left",children:e.jsx("h1",{className:"text-sm font-semibold",children:"From Date:"})}),e.jsx("div",{className:"text-left",children:e.jsx("h1",{className:"text-sm",children:Z().format("YYYY-MM-DD")})}),e.jsx("div",{className:"text-left",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Upto Date:"})}),e.jsx("div",{className:"text-left",children:e.jsx("h1",{className:"text-sm",children:Z().format("YYYY-MM-DD")})})]})]})})}),e.jsx("div",{className:"border-b-2 border-gray-300 w-full py-2"}),t!=null&&t.isLoading?e.jsx("h1",{className:"mt-24 font-semibold text-sm text-center",children:"Loading..."}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"py-2 ",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("h1",{className:"font-semibold text-sm",children:["No of collection-:"," ",((u=(p=(N=t==null?void 0:t.data)==null?void 0:N.data)==null?void 0:p.data)==null?void 0:u.length)||0]})}),e.jsx("div",{className:"py-2",children:((v=(g=(y=t==null?void 0:t.data)==null?void 0:y.data)==null?void 0:g.data)==null?void 0:v.length)>0?e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",border:1,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-left text-sm p-2 border border-slate-300",children:e.jsx("small",{children:e.jsx("b",{children:"S.No"})})}),e.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:e.jsx("small",{children:e.jsx("b",{children:"Trans No"})})}),e.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:e.jsx("small",{children:e.jsx("b",{children:"Date"})})}),e.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:e.jsx("small",{children:e.jsx("b",{children:"Mode"})})}),e.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:e.jsx("small",{children:e.jsx("b",{children:"Amount"})})})]})}),e.jsx("tbody",{children:(F=(w=(D=t==null?void 0:t.data)==null?void 0:D.data)==null?void 0:w.data)==null?void 0:F.map((s,a)=>{var Q;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-left text-sm p-2 border border-slate-300",children:a+1}),e.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:e.jsx("h1",{className:"text-sm",children:"xxxx"+((Q=s==null?void 0:s.tran_no)==null?void 0:Q.slice(-5))})}),e.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:e.jsx("h1",{className:"text-sm",children:s==null?void 0:s.tran_date})}),e.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:e.jsx("h1",{className:"text-sm lowercase",children:s==null?void 0:s.transaction_mode})}),e.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:e.jsx("h1",{className:"text-sm",children:s==null?void 0:s.amount})})]},a)})})]}),e.jsx("div",{className:"border-b-2 border-gray-300 w-full py-1"}),e.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm p-2 border border-slate-300",children:[e.jsx("small",{className:"font-bold",children:"Cash"}),e.jsxs("h1",{className:"text-sm text-green-700 mr-2",children:["₹",((_=(Y=(C=(P=t==null?void 0:t.data)==null?void 0:P.data)==null?void 0:C.data)==null?void 0:Y.filter(s=>(s==null?void 0:s.transaction_mode)==="CASH"))==null?void 0:_.reduce((s,a)=>s+parseFloat(a==null?void 0:a.amount),0))||0]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm p-2 border border-slate-300",children:[e.jsx("small",{className:"font-bold",children:"Cheque"}),e.jsxs("h1",{className:"text-sm text-green-700 mr-2",children:["₹",((I=(A=(z=(M=t==null?void 0:t.data)==null?void 0:M.data)==null?void 0:z.data)==null?void 0:A.filter(s=>(s==null?void 0:s.transaction_mode)==="CHEQUE"))==null?void 0:I.reduce((s,a)=>s+parseFloat(a==null?void 0:a.amount),0))||0]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm p-2 border border-slate-300",children:[e.jsx("small",{className:"font-bold",children:"DD"}),e.jsxs("h1",{className:"text-sm text-green-700 mr-2",children:["₹",((B=(k=(E=(S=t==null?void 0:t.data)==null?void 0:S.data)==null?void 0:E.data)==null?void 0:k.filter(s=>(s==null?void 0:s.transaction_mode)==="DD"))==null?void 0:B.reduce((s,a)=>s+parseFloat(a==null?void 0:a.amount),0))||0]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm p-2 border border-slate-300",children:[e.jsx("small",{className:"font-bold",children:"Online"}),e.jsxs("h1",{className:"text-sm text-green-700 mr-2",children:["₹",((O=(H=(T=(L=t==null?void 0:t.data)==null?void 0:L.data)==null?void 0:T.data)==null?void 0:H.filter(s=>(s==null?void 0:s.transaction_mode)==="ONLINE"))==null?void 0:O.reduce((s,a)=>s+parseFloat(a==null?void 0:a.amount),0))||0]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm p-2 border border-slate-300",children:[e.jsx("small",{className:"font-bold",children:"Total"}),e.jsxs("h1",{className:"text-sm text-green-700 mr-2",children:["₹",Math.round((q=(U=t==null?void 0:t.data)==null?void 0:U.data)==null?void 0:q.totalAmt).toFixed(2)||0]})]}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(l.Button,{color:"blue",size:"sm",children:"Print"})})]}):e.jsx("h1",{className:"mt-24 font-semibold text-sm text-center",children:"No Data Found"})})]})})]})})}export{je as default};
