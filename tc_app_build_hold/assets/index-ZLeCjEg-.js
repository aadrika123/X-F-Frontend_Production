import{c as W,b as o,m as t,j as e}from"./index-tJbU7ayB.js";import{e as $}from"./router-vSHQYlWC.js";import{r as n}from"./tailwind-nPCoKmcy.js";import{u as L}from"./formik.esm-feHG9Gj_.js";import{I as T,a as h}from"./index.esm-ad4jnpi1.js";import{c as E,a as x}from"./index.esm-YegZWto1.js";import{F as H}from"./FormProvider-fBqmJEVl.js";import{L as O}from"./LoaderButton-OBeIHsxX.js";import{S as p}from"./SelectField-T4CMJ1yZ.js";import"./TranslateField-wCz68bV9.js";import{P as Z}from"./index-6o85-u81.js";import{S as G}from"./index-4i8apt2l.js";import"./reactQuery-xwoMMF6K.js";import"./axios-lPgvryBG.js";import"./reactIcons-jqXmw8S_.js";import"./headlessui-kWR29u24.js";import"./ArrowRightIcon-FriVY7EG.js";function te(){var m,f,b,N,u,y,g,v,S,I,w,C,k,F,P,z,_,q,A,B,M,R;const j=$(),r=W(),i=o({api:t.shopMaster,config:{},options:{enabled:!0}}),c=L({enableReinitialize:!0,initialValues:r==null?void 0:r.searchShopList,validationSchema:E({shopCategoryId:x().required("Search String is required"),circleId:x().required("Search String is required"),marketId:x().required("Search String is required")}),onSubmit:async(s,{resetForm:J})=>{console.log("values",r==null?void 0:r.searchShopList),r==null||r.setSearchShopList({...s,page:1})}}),{values:d}=c,l=o({api:t.listWiseCircleMarket,key:"marketList",config:{circleId:d==null?void 0:d.circleId},value:[d==null?void 0:d.circleId],options:{enabled:!!(d!=null&&d.circleId)}}),a=o({api:(m=t)==null?void 0:m.searchShopForPayment,config:r==null?void 0:r.searchShopList,value:[(f=r==null?void 0:r.searchShopList)==null?void 0:f.shopCategoryId,(b=r==null?void 0:r.searchShopList)==null?void 0:b.circleId,(N=r==null?void 0:r.searchShopList)==null?void 0:N.marketId,(u=r==null?void 0:r.searchShopList)==null?void 0:u.page,(y=r==null?void 0:r.searchShopList)==null?void 0:y.perPage],options:{enabled:!!((g=r==null?void 0:r.searchShopList)!=null&&g.marketId)}});return e.jsx(Z,{title:"Search Shop",children:e.jsx("div",{className:"px-4 py-4 flex-1",children:e.jsxs(H,{formik:c,children:[e.jsx(n.Card,{className:"w-full",children:e.jsxs(n.CardBody,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Search Shop list"}),e.jsxs("button",{className:"items-center flex justify-start px-2 py-1 border rounded-lg gap-1 cursor-pointer",onClick:()=>{c==null||c.resetForm(),r==null||r.setSearchShopList({page:1,perPage:10,shopCategoryId:"",circleId:"",marketId:""})},children:[e.jsx(T,{size:"1.2rem",className:"cursor-pointer text-blue-600"}),e.jsx("small",{className:" text-blue-600 ",children:"Reset"})]})]}),e.jsx("div",{className:"my-4 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsxs(p,{label:"Shop category",name:"shopCategoryId",formik:c,children:[e.jsx("option",{value:"",children:"select"}),(I=(S=(v=i==null?void 0:i.data)==null?void 0:v.data)==null?void 0:S.shopType)==null?void 0:I.map(s=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.shop_type},s==null?void 0:s.id))]})}),e.jsx("div",{children:e.jsxs(p,{label:"Zone",name:"circleId",formik:c,children:[e.jsx("option",{value:"",children:"select"}),(k=(C=(w=i==null?void 0:i.data)==null?void 0:w.data)==null?void 0:C.circleList)==null?void 0:k.map(s=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.circle_name},s==null?void 0:s.id))]})}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs(p,{label:"Market",formik:c,name:"marketId",disabled:l==null?void 0:l.isLoading,children:[e.jsx("option",{value:"",children:"select"}),(P=(F=l==null?void 0:l.data)==null?void 0:F.data)==null?void 0:P.map(s=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.market_name},s==null?void 0:s.id))]}),e.jsx("small",{className:"text-blue-500",children:(l==null?void 0:l.isLoading)&&"Please wait..."})]})]}),e.jsx("div",{className:"flex justify-center mt-1",children:e.jsx(O,{className:"w-full",type:"submit",disabled:a==null?void 0:a.isLoading,children:"Search"})})]})}),a!=null&&a.isFetching?e.jsx("div",{className:"text-center py-52 text-blue-600",children:"Please Wait..."}):e.jsx(e.Fragment,{children:((_=(z=a==null?void 0:a.data)==null?void 0:z.data.data)==null?void 0:_.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 border-b-2"}),(B=(A=(q=a==null?void 0:a.data)==null?void 0:q.data)==null?void 0:A.data)==null?void 0:B.map(s=>e.jsx(n.Card,{className:"w-full mb-5",children:e.jsxs(n.CardBody,{children:[e.jsx("div",{className:"flex items-center justify-between -mt-1",children:e.jsx("div",{className:"flex items-center",children:e.jsx("p",{className:"text-xs text-end font-bold",children:s==null?void 0:s.allottee})})}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Shop No:"}),e.jsx("p",{className:"text-xs text-end",children:s==null?void 0:s.id})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Shop Type:"}),e.jsx("p",{className:"text-xs text-end",children:s==null?void 0:s.shop_type})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Market:"}),e.jsx("p",{className:"text-xs text-end",children:(s==null?void 0:s.market_name)||"--"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Circle:"}),e.jsx("p",{className:"text-xs text-end truncate w-60",children:s==null?void 0:s.circle_name})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Contact:"}),e.jsx("div",{className:"w-44",children:e.jsx("p",{className:"text-xs text-end truncate",children:(s==null?void 0:s.contact_no)||"--"})})]}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsxs("div",{className:"flex items-center justify-center mt-6 gap-4",children:[e.jsx(n.Button,{fullWidth:!0,onClick:()=>j("/amc-app/adv-municipal-rental/receipt-list-by-shop?shop-id=".concat(s==null?void 0:s.id)),color:"blue-gray",size:"sm",className:"rounded-md py-1.5",children:e.jsxs("small",{className:"flex justify-center items-center space-x-1",children:["Payment History ","  ",e.jsx(h,{size:"1rem"})]})}),e.jsx(n.Button,{fullWidth:!0,onClick:()=>j("/amc-app/adv-municipal-rental/shop-details/".concat(s==null?void 0:s.id)),color:"blue",size:"sm",className:"rounded-md py-1.5",children:e.jsxs("small",{className:"flex justify-center items-center space-x-1",children:["View Details ","  ",e.jsx(h,{size:"1rem"})]})})]}),e.jsx("div",{className:"flex items-center justify-between mb-1 mt-2",children:e.jsx(n.Button,{fullWidth:!0,onClick:()=>window.location.href="/amc-app/adv-municipal-rental/add-shop-visit?shop-id=".concat(s==null?void 0:s.id),color:"green",size:"sm",className:"rounded-md py-1.5",children:e.jsxs("small",{className:"flex justify-center items-center space-x-1",children:["Add Visit ","  ",e.jsx(h,{size:"1rem"})]})})})]})},s==null?void 0:s.id)),e.jsx("div",{className:"my-4 border-b-2"}),e.jsx(G,{active:r==null?void 0:r.searchShopList,noOfPage:(R=(M=a==null?void 0:a.data)==null?void 0:M.data)==null?void 0:R.last_page,setActive:r==null?void 0:r.setSearchShopList})]}):e.jsx("div",{className:"text-center py-52",children:"No Record Found!"})}),e.jsx("div",{className:"my-4 border-b-2"})]})})})}export{te as default};
