import{c as m,b as A,p as M,j as e}from"./index-tJbU7ayB.js";import{f as F,e as W}from"./router-vSHQYlWC.js";import{r as a}from"./tailwind-nPCoKmcy.js";import{I as z}from"./index.esm-ad4jnpi1.js";import{T as I}from"./TextField-QPeamiX3.js";import{S as T}from"./SelectField-T4CMJ1yZ.js";import"./TranslateField-wCz68bV9.js";import{P as $}from"./index-6o85-u81.js";import{S as H}from"./index-4i8apt2l.js";import{u as R}from"./usePathWisePermission-aiZjDLzo.js";import"./reactQuery-xwoMMF6K.js";import"./axios-lPgvryBG.js";import"./reactIcons-jqXmw8S_.js";import"./headlessui-kWR29u24.js";import"./formik.esm-feHG9Gj_.js";import"./customInputValidation-jhKsg103.js";import"./ArrowRightIcon-FriVY7EG.js";const D=[{id:1,value:"applicationNo",label:"Application No"},{id:2,value:"mobileNo",label:"Mobile No"},{id:3,value:"name",label:"Name"}];function ds(){var t,h,x,g,p,f,j,v,N,y,b;const{pathname:C}=F(),{result:o}=R(C),r=m(),n=W(),{data:i,refetch:c,isFetching:P,isLoading:E,isPending:G}=A({api:M.safInbox,config:{[(t=r==null?void 0:r.searchVerification)==null?void 0:t.searchBy]:r==null?void 0:r.searchVerification.search,page:r==null?void 0:r.searchVerification.page,perPage:r==null?void 0:r.searchVerification.perPage},value:[(h=r==null?void 0:r.searchVerification)==null?void 0:h.page,(x=r==null?void 0:r.searchVerification)==null?void 0:x.perPage],options:{enabled:!!((g=r==null?void 0:r.searchVerification)!=null&&g.page)}}),B=()=>{r==null||r.setSearchVerification({...r==null?void 0:r.searchVerification,page:1}),c()},L=s=>{var l,d;if(((d=(l=r==null?void 0:r.user)==null?void 0:l.roleWithId[0])==null?void 0:d.role_id)==7){if(!(s!=null&&s.is_field_verified)){n("/amc-app/property/saf-site-verification/".concat(s==null?void 0:s.id));return}alert("Already Verified");return}else{if(!(s!=null&&s.is_agency_verified)){n("/amc-app/property/saf-site-verification/".concat(s==null?void 0:s.id));return}if(s!=null&&s.is_agency_verified&&!(s!=null&&s.is_geo_tagged)){n("/amc-app/property/geo-tagging/".concat(s==null?void 0:s.id));return}if(s!=null&&s.is_geo_tagged&&(s!=null&&s.is_agency_verified)){n("/amc-app/property/measurement-sheet/".concat(s==null?void 0:s.id));return}}};return e.jsx($,{title:"SAF Verification List",children:e.jsxs("div",{className:"p-4 ",children:[e.jsx(a.Card,{className:"w-full",children:e.jsxs(a.CardBody,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"font-semibold text-sm",children:"SAF Verification"}),e.jsxs("div",{className:"items-center flex justify-start px-2 py-1 border rounded-lg gap-1 cursor-pointer",onClick:()=>{r==null||r.setSearchVerification({searchBy:"",setSearchBy:"",search:"",setSearch:"",page:1,perPage:10}),c()},children:[e.jsx(z,{size:"1.2rem",className:"cursor-pointer text-blue-600"}),e.jsx("small",{className:" text-blue-600 ",children:"Reset"})]})]}),e.jsx("div",{className:"my-2 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[e.jsx("div",{children:e.jsxs(T,{label:"Search By",value:(p=r==null?void 0:r.searchVerification)==null?void 0:p.searchBy,onChange:s=>{r==null||r.setSearchVerification({...r==null?void 0:r.searchVerification,searchBy:s.target.value})},name:"searchBy",children:[e.jsx("option",{value:"",children:"Select"}),D.map(s=>e.jsx("option",{value:s==null?void 0:s.value,children:s==null?void 0:s.label},s==null?void 0:s.id))]})}),e.jsx("div",{children:e.jsx(I,{label:"Search",name:"search",value:(f=r==null?void 0:r.searchVerification)==null?void 0:f.search,onChange:s=>{r==null||r.setSearchVerification({...r==null?void 0:r.searchVerification,search:s.target.value})}})})]}),e.jsx(a.Button,{color:"blue",onClick:B,fullWidth:!0,children:"Search"})]})}),P?e.jsx("div",{className:"flex justify-center items-center py-52",children:e.jsx("h1",{children:"Loading..."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-b-2 border-gray-300 w-full py-2"}),((v=(j=i==null?void 0:i.data)==null?void 0:j.data)==null?void 0:v.length)>0?(y=(N=i==null?void 0:i.data)==null?void 0:N.data)==null?void 0:y.map((s,l)=>{var d,_,w,u,k,S;return e.jsxs(a.Card,{className:"mt-4 full",children:[e.jsx(a.CardBody,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 items-start",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-600",children:"SAF No :"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs  text-gray-600",children:s==null?void 0:s.saf_no})})]}),e.jsxs("div",{className:"grid grid-cols-2 items-start",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-600",children:"Name :"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs  text-gray-600 truncate w-40",children:s==null?void 0:s.owner_name})})]}),e.jsxs("div",{className:"grid grid-cols-2 items-start",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-600",children:"Ward :"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs  text-gray-600",children:s==null?void 0:s.ward_no})})]}),e.jsxs("div",{className:"grid grid-cols-2 items-start",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-600",children:"Assessment Type :"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs  text-gray-600",children:s==null?void 0:s.assessment})})]}),e.jsxs("div",{className:"grid grid-cols-2 items-start",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-600",children:"Mobile No :"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs  text-gray-600 truncate w-40",children:s==null?void 0:s.mobile_no})})]}),e.jsxs("div",{className:"grid grid-cols-2 items-start",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-600",children:"Property Type :"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs  text-gray-600 lowercase ",children:s==null?void 0:s.property_type})})]}),e.jsxs("div",{className:"grid grid-cols-2 items-start",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-600",children:"Verification Status :"})}),e.jsxs("div",{children:[((_=(d=r==null?void 0:r.user)==null?void 0:d.roleWithId[0])==null?void 0:_.role_id)==7&&(s!=null&&s.is_agency_verified&&!(s!=null&&s.is_field_verified)?e.jsx("h1",{className:"text-xs text-green-500 font-semibold  w-40",children:"Verified by TC"}):s!=null&&s.is_field_verified?e.jsx(e.Fragment,{children:e.jsx("h1",{className:"text-xs text-indigo-500 font-semibold ",children:"Pending Sanction Plan Verification"})}):e.jsx("h1",{className:"text-xs text-red-500 font-semibold",children:"Not Verified"})),((u=(w=r==null?void 0:r.user)==null?void 0:w.roleWithId[0])==null?void 0:u.role_id)==5&&(s!=null&&s.is_agency_verified&&!(s!=null&&s.is_geo_tagged)?e.jsx("h1",{className:"text-xs text-green-500 font-semibold  w-40",children:"Pending Geo Tagging"}):s!=null&&s.is_geo_tagged?e.jsx(e.Fragment,{children:e.jsx("h1",{className:"text-xs text-blue-500 font-semibold  w-40",children:"Pending Measurement Sheet"})}):e.jsx("h1",{className:"text-xs text-red-500 font-semibold",children:"Not Verified"}))]})]})]})}),e.jsx(a.CardFooter,{className:"-mt-8",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[(o==null?void 0:o.create)&&e.jsxs(a.Button,{disabled:(s==null?void 0:s.is_field_verified)&&((S=(k=r==null?void 0:r.user)==null?void 0:k.roleWithId[0])==null?void 0:S.role_id)==7,onClick:()=>L(s),size:"sm",variant:"text",className:"flex items-center gap-2 bg-gray-200 text-blue-500 capitalize",children:["Verification",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})})]}),(o==null?void 0:o.update)&&e.jsxs(a.Button,{onClick:()=>n("/amc-app/property/naksha-verification/".concat(s==null?void 0:s.id)),size:"sm",variant:"text",className:"flex items-center gap-2 bg-gray-200 text-red-500 capitalize",children:["Sanction Plan",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})})]}),e.jsxs(a.Button,{onClick:()=>n("/amc-app/property/saf-property-details/".concat(s==null?void 0:s.id)),size:"sm",variant:"text",className:"flex items-center gap-2 bg-gray-200 text-blue-gray-600 capitalize",children:["Saf Details",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})})]}),e.jsxs(a.Button,{onClick:()=>n("/amc-app/property/level-comment/".concat(s==null?void 0:s.id)),size:"sm",variant:"text",className:"flex items-center gap-2 bg-gray-200 text-red-600 capitalize",children:["Level Comment",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})})]})]})})]},l)}):e.jsx("div",{className:"flex justify-center items-center py-52",children:e.jsx("h1",{children:"No Record Found"})}),e.jsx("div",{className:"border-b-2 border-gray-300 w-full py-1"}),e.jsx(H,{active:r==null?void 0:r.searchVerification,noOfPage:(b=i==null?void 0:i.data)==null?void 0:b.last_page,setActive:r==null?void 0:r.setSearchVerification})]})]})})}export{ds as default};
