import{r as u,i as y,q as C,e as F,f as H,$ as t,j as T,l as V,a as _}from"./index-ad2de6bb.js";function z(){const[w,i]=u.useState(!1),d=y(),{api_getFreeMenuList:B}=_(),{setmenuList:P}=u.useContext(C);u.useEffect(()=>{let l=window.localStorage.getItem("token");if(i(!0),l==null){d("/");return}U()},[]);const U=()=>{let l={moduleId:14};console.log("api header to login..."),F.post(B,l,H()).then(function(a){var c,m,g,f,e,o,L,r,h,x,D,I,N,b,S,j,A,E,M,k,q,v;console.log("fetched menu list.....",a),a.data.status==!0?(t("menuList",(m=(c=a==null?void 0:a.data)==null?void 0:c.data)==null?void 0:m.permission),t("userName",(e=(f=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:f.userDetails)==null?void 0:e.userName),t("roles",(r=(L=(o=a==null?void 0:a.data)==null?void 0:o.data)==null?void 0:L.userDetails)==null?void 0:r.roles),t("userUlbName",(D=(x=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:x.userDetails)==null?void 0:D.ulb),t("userMobile",(b=(N=(I=a==null?void 0:a.data)==null?void 0:I.data)==null?void 0:N.userDetails)==null?void 0:b.mobileNo),t("userEmail",(A=(j=(S=a==null?void 0:a.data)==null?void 0:S.data)==null?void 0:j.userDetails)==null?void 0:A.email),t("userImage",(k=(M=(E=a==null?void 0:a.data)==null?void 0:E.data)==null?void 0:M.userDetails)==null?void 0:k.imageUrl),P((v=(q=a==null?void 0:a.data)==null?void 0:q.data)==null?void 0:v.permission),d("/home")):console.log("false..."),i(!0)}).catch(function(a){console.log("--2--login error...",a),i(!0)})};if(w)return T(V,{})}export{z as default};
