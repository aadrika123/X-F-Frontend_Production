import{r as p,Y as me,g as ue,h as he,c as ge,a as u,b as xe,f as o,j as t,B as Ne,F as be,M as fe,d as S,e as g,ak as H,A as ye}from"./index-d822e393.js";const ve={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"",border:"none"}},Se=()=>t("div",{children:"Loading..."}),Fe=()=>{const[z,F]=p.useState(!1),[R,h]=p.useState(!1),[I,V]=p.useState(),[T,P]=p.useState(),[Ie,k]=p.useState(),[A,B]=p.useState(),[m,M]=p.useState([]),{notify:y}=p.useContext(me),[Te,v]=p.useState(""),G=new Date().toISOString().split("T")[0],[Q,E]=p.useState(!0);ue("Apply Hoarding ");const U={userId:"",agencyId:"",id:"",hoardingName:"",allotmentDate:"",from:"",to:"",squarefeet:"",Noofhoardings:"",advertiser:"",purpose:"",location:"",hoardingNo:"",rate:"",hoardingType:"",propertyType:"",temporaryHoardingType:"",documentQuotation:"",documentAgreement:"",documentInvoice:""};console.log("dataaa--",A==null?void 0:A.rate);const[W,j]=p.useState(""),[Y,q]=p.useState(null),[C,J]=p.useState(!1);he();let i="form-label inline-block mb-1 text-gray-600 text-md font-semibold capitalize",c=" block w-full bg-white text-gray-700 border border-gray-200 rounded py-1.5 px-4 mb-2 leading-tight focus:outline-none focus:border-gray-500 focus:bg-white ring-0 shadow-md shadow-gray-100";const{api_applyhoarding:K,api_calculatehoardingrate:X,get_collectorList:Ae,api_masteraddress:Z,api_hoardingsize:$,api_temporaryhoarding:ee,api_temphoardingsize:Ee}=ye(),ae=ge().shape({hoardingType:u().required("Hoarding Type is required"),from:u().required("From is required"),to:u().required("To is required"),purpose:u().required("purpose is required"),location:u().required("location is required"),id:u().required("Allotted Hoarding Address is required"),documentInvoice:u().required("Design required")}),te=a=>{J(a.target.checked)},oe=a=>{h(!0),ne(a),console.log(a)};function ne(a){var r;console.log(a);let n=new FormData;n.append("userId",a==null?void 0:a.userId),n.append("hoardingId",a==null?void 0:a.id),n.append("agencyId",((r=m==null?void 0:m[0])==null?void 0:r.agencyId)||(a==null?void 0:a.agencyId)),n.append("ulbId","2"),n.append("hoardingName",a.hoardingName),n.append("from",a.from),n.append("to",a.to),n.append("advertiser",a.advertiser),n.append("squarefeet",a.squarefeet),n.append("Noofhoardings",a.Noofhoardings),n.append("purpose",a.purpose),n.append("location",a.location),n.append("hoardingNo",a.hoardingNo),n.append("rate",a.rate),n.append("hoardingType",a.hoardingType),n.append("applicationType","PERMANANT"),n.append("propertyId",a.propertyType),n.append("squareFeetId",a.hoardingSize||""),e.values.documentQuotation&&(n.append("documents[0][image]",e.values.documentQuotation),n.append("documents[0][docCode]","QUATATAION"),n.append("documents[0][ownerDtlId]","")),e.values.documentAgreement&&(n.append("documents[1][image]",a.documentAgreement),n.append("documents[1][docCode]","AGGREMENT"),n.append("documents[1][ownerDtlId]","")),n.append("documents[2][image]",a.documentInvoice),n.append("documents[2][docCode]","HOARDINGDESIGN"),n.append("documents[2][ownerDtlId]",""),S.post(K,n,g()).then(d=>{var s,l;d.data.status===!0?(V(d==null?void 0:d.data),console.log("chandandata",d==null?void 0:d.data),h(!1),console.log("Data Really Saved",d),F(!0)):(h(!1),console.log("False While hoarding Apply",d),v(" "+((s=d==null?void 0:d.data)==null?void 0:s.message)),y((l=d==null?void 0:d.data)==null?void 0:l.message,"error"))}).catch(d=>{h(!1),v("Exception While Apply"),y("Something Went Wrong","error"),console.log("Exception while Submitting the form",d)})}const w=()=>{S.post($,{},g()).then(a=>{var n,r;((n=a==null?void 0:a.data)==null?void 0:n.status)==!0&&P((r=a==null?void 0:a.data)==null?void 0:r.data)})},le=()=>{H.post(ee,{},g()).then(a=>{var n,r;((n=a==null?void 0:a.data)==null?void 0:n.status)==!0&&k((r=a==null?void 0:a.data)==null?void 0:r.data)})},de=()=>{E(!0),S.post(Z,{},g()).then(a=>{var n,r,d;((n=a==null?void 0:a.data)==null?void 0:n.status)===!0&&M((d=(r=a==null?void 0:a.data)==null?void 0:r.data)==null?void 0:d.data)}).catch(a=>{}).finally(()=>{E(!1)})};p.useEffect(()=>{w(),de(),le()},[]);const re=a=>{let n=a.target.name,r=a.target.value;n==="userId"&&(e.setFieldValue("userId",r),w()),n==="id"&&(e.setFieldValue("id",r),w())},e=xe({initialValues:U,validationSchema:ae,onSubmit:oe}),se=()=>{},ie=()=>{F(!1)},ce=a=>{const n=a.target.value,r=m==null?void 0:m.find(s=>(s==null?void 0:s.id)==n);console.log(r),e.setFieldValue("id",r==null?void 0:r.id),e==null||e.setFieldValue("agencyId",r==null?void 0:r.agencyId);const d=event.target.value;j(d),S.post($,{id:d},g()).then(s=>{var l,x,N,b,f;((l=s==null?void 0:s.data)==null?void 0:l.status)===!0&&(q((N=(x=s==null?void 0:s.data)==null?void 0:x.data)==null?void 0:N.aresSqft),console.log("chandankumar",(f=(b=s==null?void 0:s.data)==null?void 0:b.data)==null?void 0:f.aresSqft))}).catch(s=>{}).finally(()=>{E(!1)})},pe=a=>{var s;const{name:n,value:r}=a.target;e.setFieldValue(n,r);const d={propertyId:e.values.propertyType,advertisementType:e.values.hoardingType,applicationType:"PERMANANT",agencyId:((s=m==null?void 0:m[0])==null?void 0:s.agencyId)||(values==null?void 0:values.agencyId),squareFeetId:e.values.hoardingSize,from:e.values.from,squarefeet:e.values.squarefeet,Noofhoardings:e.values.Noofhoardings,to:r};H.post(X,d,g()).then(l=>{var x,N,b,f,_,L,O,D;((x=l==null?void 0:l.data)==null?void 0:x.status)===!0?(B((N=l==null?void 0:l.data)==null?void 0:N.data),e.setFieldValue("rate",(f=(b=l==null?void 0:l.data)==null?void 0:b.data)==null?void 0:f.rate),console.log("chandankumar",(L=(_=l==null?void 0:l.data)==null?void 0:_.data)==null?void 0:L.rate)):(h(!1),console.log("False While hoarding Apply",l),v(" "+((O=l==null?void 0:l.data)==null?void 0:O.message)),y((D=l==null?void 0:l.data)==null?void 0:D.message,"error"))}).catch(l=>{h(!1),v("Exception While Apply"),y("Something Went Wrong","error"),console.log("Exception while Submitting the form",l)}),console.log("Calling API with payload:",d)};return o("div",{children:[R&&t(Ne,{}),o("div",{className:"container mt-10",children:[o("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 pb-4",children:[o("div",{className:"col-span-6",children:[t("h1",{className:"text-3xl text-[#454646] opacity-90 font-bold ",children:"Request Permission"}),t("h1",{className:"text-md text-[#454646] opacity-80 capitalize",children:"Submit Request Application Here..."})]}),t("div",{className:"col-span-6 ",children:t("div",{className:"flex justify-end space-x-4",children:t("div",{className:"",children:t("img",{src:"https://i.ibb.co/JyBv2gt/hoarding-ads-featured-removebg-preview.png",className:"h-16 opacity-80"})})})})]}),o("form",{onSubmit:e.handleSubmit,onChange:re,children:[o("div",{className:"grid grid-cols-12 w-full bg-white rounded leading-5 p-8 shadow-lg border border-dashed border-violet-700",children:[o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["Types of Advertisement ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),o("select",{...e.getFieldProps("hoardingType"),className:`${c}`,children:[t("option",{value:"",children:"Select Hoarding Type"}),t("option",{value:"ABOVE_GROUND",children:"Above Ground"}),t("option",{value:"ON_THE_BUILDING",children:"On the building"}),t("option",{value:"LED_SCREEN",children:"Led Screen"}),t("option",{value:"LED_SCREEN_ON_MOVING_VEHICLE",children:"Led Screen on moving vechile"})]}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.hoardingType&&e.errors.hoardingType?e.errors.hoardingType:null})]}),e.values.hoardingType&&["LED_SCREEN","LED_SCREEN_ON_MOVING_VEHICLE"].includes(e.values.hoardingType)&&o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["Enter Area of Square feet ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("squarefeet"),type:"text",className:`${c}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.squarefeet&&e.errors.squarefeet?e.errors.squarefeet:null})]}),e.values.hoardingType&&["ABOVE_GROUND","ON_THE_BUILDING"].includes(e.values.hoardingType)&&o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["Measurement",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),o("select",{...e.getFieldProps("hoardingSize"),className:`${c}`,children:[t("option",{value:"",children:"Select"}),T==null?void 0:T.map(a=>t("option",{value:a==null?void 0:a.id,children:t("span",{className:"capitalize",children:a==null?void 0:a.measurement})},a==null?void 0:a.id))]}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.hoardingSize&&e.errors.hoardingSize?e.errors.hoardingSize:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["Enter No of Hoardings ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("Noofhoardings"),type:"number",className:`${c}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.Noofhoardings&&e.errors.Noofhoardings?e.errors.Noofhoardings:null})]}),e.values.hoardingType&&!["LED_SCREEN","LED_SCREEN_ON_MOVING_VEHICLE"].includes(e.values.hoardingType)&&o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["Property Type ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),o("select",{...e.getFieldProps("propertyType"),className:`${c}`,children:[t("option",{value:"",children:"Select Property Type"}),t("option",{value:"1",children:"Residential "}),t("option",{value:"2",children:"Commercial"})]}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.propertyType&&e.errors.propertyType?e.errors.propertyType:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["Allotted Hoarding Address",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),Q?t(Se,{}):o(be,{children:[o("select",{onChange:ce,name:"id",className:`${c}`,children:[t("option",{value:"",children:"Select"}),m.map(a=>t("option",{value:a==null?void 0:a.id,children:t("span",{className:"capitalize",children:a==null?void 0:a.address})},a==null?void 0:a.id))]}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.id&&e.errors.id?e.errors.id:null})]})]}),W&&e.values.hoardingType=="8"&&o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("div",{children:[o("label",{className:`${i}`,children:["Hoarding Size in (sqft)",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{type:"text",name:"hoardingSize",value:Y,onChange:a=>q(a.target.value),className:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-500 rounded py-1.5 px-4 mb-2 leading-tight focus:outline-none focus:border-gray-500 focus:bg-white ring-0 shadow-md shadow-gray-100 cursor-not-allowed",readOnly:!0})]}),t("span",{className:"text-red-600 absolute text-xs ",children:e.touched.hoardingSize&&e.errors.hoardingSize?e.errors.hoardingSize:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["From",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("from"),type:"date",className:`${c}`,min:G}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.from&&e.errors.from?e.errors.from:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["To",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("to"),type:"date",className:`${c}`,onChange:pe}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.to&&e.errors.to?e.errors.to:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["Rate",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("rate"),type:"text",disabled:!0,className:`${c}`,onInput:a=>{a.target.value=Math.max(0,a.target.value).toString().slice(0,10)}}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.rate&&e.errors.rate?e.errors.rate:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["Advertiser ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("advertiser"),type:"text",className:`${c}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.advertiser&&e.errors.advertiser?e.errors.advertiser:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["Purpose of Hoarding  ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("purpose"),type:"text",className:`${c}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.purpose&&e.errors.purpose?e.errors.purpose:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["Location ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("location"),type:"text",className:`${c}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.location&&e.errors.location?e.errors.location:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["Upload Quotation Document ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline "})]}),t("input",{type:"file",onChange:a=>e.setFieldValue("documentQuotation",a.currentTarget.files[0]),onBlur:e.handleBlur,className:`${c}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.documentQuotation&&e.errors.documentQuotation?e.errors.documentQuotation:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["Upload Agreement Document",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline "})]}),t("input",{type:"file",onChange:a=>e.setFieldValue("documentAgreement",a.currentTarget.files[0]),onBlur:e.handleBlur,className:`${c}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.documentAgreement&&e.errors.documentAgreement?e.errors.documentAgreement:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${i}`,children:["Upload Hoarding Design",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{type:"file",onChange:a=>e.setFieldValue("documentInvoice",a.currentTarget.files[0]),onBlur:e.handleBlur,className:`${c}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.documentInvoice&&e.errors.documentInvoice?e.errors.documentInvoice:null})]})]}),o("div",{className:"w-full m-2",children:[o("label",{htmlFor:"declaration",className:"inline-flex items-center mb-2",children:[t("input",{type:"checkbox",id:"declaration",className:"form-checkbox h-5 w-5 text-blue-600",checked:C,onChange:te}),t("span",{className:"ml-2 text-sm text-gray-700",children:"I hereby confirm my agreement to comply with all rules and regulations regarding the hoarding request permission."})]}),t("div",{className:"text-right",children:t("button",{type:"submit",className:"capitalize hover:shadow-md text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2 mr-2 mb-2 focus:outline-none max-w-[144px] whitespace-pre-wrap",disabled:!C,children:"Submit"})})]})]})]}),t(fe,{isOpen:z,onAfterOpen:se,onRequestClose:ie,style:ve,contentLabel:"Example Modal",children:t("div",{className:"bg-white shadow-2xl border border-blue-200 rounded-md ",children:t("div",{className:"block p-4 md:py-6 shadow-lg bg-indigo-100 border border-indigo-300 rounded  mx-auto ",children:o("div",{className:"text-center space-y-4",children:[t("p",{className:"font-semibold",children:"Your Application Has been Submitted Successfully."}),o("p",{children:[t("span",{className:"text-sm",children:" Application No: "}),t("span",{className:"text-indigo-600 font-semibold",children:(I==null?void 0:I.data)||"N/A"})]}),t("button",{onClick:()=>{window.location.reload()},className:"bg-white hover:bg-indigo-600 hover:text-white text-indigo-700  border border-indigo-600 mx-2 rounded-sm text-sm px-4 py-2 shadow-xl",children:"Okay"})]})})})})]})};export{Fe as default};
