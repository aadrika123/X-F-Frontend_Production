import{r as p,Y as he,g as ge,h as Ne,c as O,a as h,aw as xe,b as be,f as o,j as t,B as fe,ax as ye,ay as ve,F as D,az as Se,R as Ie,aA as P,aB as Ae,M as Fe,d as S,e as N,ak as k,A as Te}from"./index-df188ed3.js";import{a as Ee}from"./index.esm-85c60bc5.js";const we={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"",border:"none"}},$e=()=>t("div",{children:"Loading..."}),De=()=>{const[z,E]=p.useState(!1),[H,g]=p.useState(!1),[I,V]=p.useState(),[A,M]=p.useState(),[qe,B]=p.useState(),[F,G]=p.useState(),[u,Q]=p.useState([]),{notify:y}=p.useContext(he),[Ce,v]=p.useState(""),U=new Date().toISOString().split("T")[0],[W,T]=p.useState(!0);ge("Apply Hoarding ");const Y={userId:"",agencyId:"",id:"",hoardingName:"",allotmentDate:"",from:"",to:"",squarefeet:"",Noofhoardings:"",advertiser:"",purpose:"",location:"",hoardingNo:"",rate:"",hoardingType:"",propertyType:"",temporaryHoardingType:"",documentQuotation:"",documentAgreement:"",documentInvoice:"",mobileNo:"",addressField:[{address:""}]};console.log("dataaa--",F==null?void 0:F.rate);const[J,j]=p.useState(""),[K,w]=p.useState(null),[$,X]=p.useState(!1);Ne();let r="form-label inline-block mb-1 text-gray-600 text-md font-semibold capitalize",i=" block w-full bg-white text-gray-700 border border-gray-200 rounded py-1.5 px-4 mb-2 leading-tight focus:outline-none focus:border-gray-500 focus:bg-white ring-0 shadow-md shadow-gray-100";const{api_applyhoarding:Z,api_calculatehoardingrate:ee,get_collectorList:_e,api_masteraddress:ae,api_hoardingsize:q,api_temporaryhoarding:te,api_temphoardingsize:Le}=Te(),oe=O().shape({hoardingType:h().required("Hoarding Type is required"),from:h().required("From is required"),to:h().required("To is required"),purpose:h().required("purpose is required"),location:h().required("location is required"),id:h().required("Allotted Hoarding Address is required"),documentInvoice:h().required("Design required"),mobileNo:h().required("Mobile no is required"),addressField:xe().of(O().shape({address:h().required("Address is required")}))}),ne=a=>{X(a.target.checked)},le=a=>{console.log(a),g(!0),de(a)};function de(a){var s,c;console.log(a);let n=new FormData;n.append("userId",a==null?void 0:a.userId),n.append("hoardingId",a==null?void 0:a.id),n.append("agencyId",((s=u==null?void 0:u[0])==null?void 0:s.agencyId)||(a==null?void 0:a.agencyId)),n.append("ulbId","2"),n.append("hoardingName",a.hoardingName),n.append("from",a.from),n.append("to",a.to),n.append("advertiser",a.advertiser),n.append("squarefeet",a.squarefeet),n.append("Noofhoardings",a.Noofhoardings),n.append("purpose",a.purpose),n.append("location",a.location),n.append("hoardingNo",a.hoardingNo),n.append("rate",a.rate),n.append("hoardingType",a.hoardingType),n.append("applicationType","PERMANANT"),n.append("propertyId",a.propertyType),n.append("mobileNo",a.mobileNo),n.append("squareFeetId",a.hoardingSize||""),(c=a==null?void 0:a.addressField)==null||c.forEach((l,d)=>{n.append(`addressField[${d}][address]`,l==null?void 0:l.address)}),e.values.documentQuotation&&(n.append("documents[0][image]",e.values.documentQuotation),n.append("documents[0][docCode]","QUATATAION"),n.append("documents[0][ownerDtlId]","")),e.values.documentAgreement&&(n.append("documents[1][image]",a.documentAgreement),n.append("documents[1][docCode]","AGGREMENT"),n.append("documents[1][ownerDtlId]","")),n.append("documents[2][image]",a.documentInvoice),n.append("documents[2][docCode]","HOARDINGDESIGN"),n.append("documents[2][ownerDtlId]",""),S.post(Z,n,N()).then(l=>{var d,m;l.data.status===!0?(V(l==null?void 0:l.data),console.log("chandandata",l==null?void 0:l.data),g(!1),console.log("Data Really Saved",l),E(!0)):(g(!1),console.log("False While hoarding Apply",l),v(" "+((d=l==null?void 0:l.data)==null?void 0:d.message)),y((m=l==null?void 0:l.data)==null?void 0:m.message,"error"))}).catch(l=>{g(!1),v("Exception While Apply"),y("Something Went Wrong","error"),console.log("Exception while Submitting the form",l)})}const se=()=>{S.post(q,{},N()).then(a=>{var n,s;((n=a==null?void 0:a.data)==null?void 0:n.status)==!0&&M((s=a==null?void 0:a.data)==null?void 0:s.data)})},re=()=>{k.post(te,{},N()).then(a=>{var n,s;((n=a==null?void 0:a.data)==null?void 0:n.status)==!0&&B((s=a==null?void 0:a.data)==null?void 0:s.data)})},ie=()=>{T(!0),S.post(ae,{},N()).then(a=>{var n,s,c;((n=a==null?void 0:a.data)==null?void 0:n.status)===!0&&Q((c=(s=a==null?void 0:a.data)==null?void 0:s.data)==null?void 0:c.data)}).catch(a=>{}).finally(()=>{T(!1)})};p.useEffect(()=>{se(),ie(),re()},[]);const e=be({initialValues:Y,validationSchema:oe,onSubmit:le}),ce=()=>{},me=()=>{E(!1)},pe=a=>{const n=a.target.value,s=u==null?void 0:u.find(l=>(l==null?void 0:l.id)==n);console.log(s),e.setFieldValue("id",s==null?void 0:s.id),e==null||e.setFieldValue("agencyId",s==null?void 0:s.agencyId);const c=event.target.value;j(c),S.post(q,{id:c},N()).then(l=>{var d,m,x,b,f;((d=l==null?void 0:l.data)==null?void 0:d.status)===!0&&(w((x=(m=l==null?void 0:l.data)==null?void 0:m.data)==null?void 0:x.aresSqft),console.log("chandankumar",(f=(b=l==null?void 0:l.data)==null?void 0:b.data)==null?void 0:f.aresSqft))}).catch(l=>{}).finally(()=>{T(!1)})},ue=a=>{var l;const{name:n,value:s}=a.target;e.setFieldValue(n,s);const c={propertyId:e.values.propertyType,advertisementType:e.values.hoardingType,applicationType:"PERMANANT",agencyId:((l=u==null?void 0:u[0])==null?void 0:l.agencyId)||(values==null?void 0:values.agencyId),squareFeetId:e.values.hoardingSize,from:e.values.from,squarefeet:e.values.squarefeet,Noofhoardings:e.values.Noofhoardings,to:s};k.post(ee,c,N()).then(d=>{var m,x,b,f,C,_,L,R;((m=d==null?void 0:d.data)==null?void 0:m.status)===!0?(G((x=d==null?void 0:d.data)==null?void 0:x.data),e.setFieldValue("rate",(f=(b=d==null?void 0:d.data)==null?void 0:b.data)==null?void 0:f.rate),console.log("chandankumar",(_=(C=d==null?void 0:d.data)==null?void 0:C.data)==null?void 0:_.rate)):(g(!1),console.log("False While hoarding Apply",d),v(" "+((L=d==null?void 0:d.data)==null?void 0:L.message)),y((R=d==null?void 0:d.data)==null?void 0:R.message,"error"))}).catch(d=>{g(!1),v("Exception While Apply"),y("Something Went Wrong","error"),console.log("Exception while Submitting the form",d)}),console.log("Calling API with payload:",c)};return o("div",{children:[H&&t(fe,{}),o("div",{className:"container mt-10",children:[o("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 pb-4",children:[o("div",{className:"col-span-6",children:[t("h1",{className:"text-3xl text-[#454646] opacity-90 font-bold ",children:"Request Permission"}),t("h1",{className:"text-md text-[#454646] opacity-80 capitalize",children:"Submit Request Application Here..."})]}),t("div",{className:"col-span-6 ",children:t("div",{className:"flex justify-end space-x-4",children:t("div",{className:"",children:t("img",{src:"https://i.ibb.co/JyBv2gt/hoarding-ads-featured-removebg-preview.png",className:"h-16 opacity-80"})})})})]}),t(ye,{value:e,children:o(ve,{onSubmit:e.handleSubmit,children:[o("div",{className:"grid grid-cols-12 w-full bg-white rounded leading-5 p-8 shadow-lg border border-dashed border-violet-700",children:[o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Types of Advertisement ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),o("select",{...e.getFieldProps("hoardingType"),className:`${i}`,children:[t("option",{value:"",children:"Select Hoarding Type"}),t("option",{value:"ABOVE_GROUND",children:"Above Ground"}),t("option",{value:"ON_THE_BUILDING",children:"On the building"}),t("option",{value:"LED_SCREEN",children:"Led Screen"}),t("option",{value:"LED_SCREEN_ON_MOVING_VEHICLE",children:"Led Screen on moving vechile"})]}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.hoardingType&&e.errors.hoardingType?e.errors.hoardingType:null})]}),e.values.hoardingType&&["LED_SCREEN","LED_SCREEN_ON_MOVING_VEHICLE"].includes(e.values.hoardingType)&&o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Enter Area of Square feet ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("squarefeet"),type:"text",className:`${i}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.squarefeet&&e.errors.squarefeet?e.errors.squarefeet:null})]}),e.values.hoardingType&&["ABOVE_GROUND","ON_THE_BUILDING"].includes(e.values.hoardingType)&&o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Measurement",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),o("select",{...e.getFieldProps("hoardingSize"),className:`${i}`,children:[t("option",{value:"",children:"Select"}),A==null?void 0:A.map(a=>t("option",{value:a==null?void 0:a.id,children:t("span",{className:"capitalize",children:a==null?void 0:a.measurement})},a==null?void 0:a.id))]}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.hoardingSize&&e.errors.hoardingSize?e.errors.hoardingSize:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Enter No of Hoardings ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("Noofhoardings"),type:"number",className:`${i}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.Noofhoardings&&e.errors.Noofhoardings?e.errors.Noofhoardings:null})]}),e.values.hoardingType&&!["LED_SCREEN","LED_SCREEN_ON_MOVING_VEHICLE"].includes(e.values.hoardingType)&&o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Property Type ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),o("select",{...e.getFieldProps("propertyType"),className:`${i}`,children:[t("option",{value:"",children:"Select Property Type"}),t("option",{value:"1",children:"Residential "}),t("option",{value:"2",children:"Commercial"})]}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.propertyType&&e.errors.propertyType?e.errors.propertyType:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Allotted Hoarding Address",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),W?t($e,{}):o(D,{children:[o("select",{onChange:pe,name:"id",className:`${i}`,children:[t("option",{value:"",children:"Select"}),u.map(a=>t("option",{value:a==null?void 0:a.id,children:t("span",{className:"capitalize",children:a==null?void 0:a.address})},a==null?void 0:a.id))]}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.id&&e.errors.id?e.errors.id:null})]})]}),J&&e.values.hoardingType=="8"&&o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("div",{children:[o("label",{className:`${r}`,children:["Hoarding Size in (sqft)",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{type:"text",name:"hoardingSize",value:K,onChange:a=>w(a.target.value),className:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-500 rounded py-1.5 px-4 mb-2 leading-tight focus:outline-none focus:border-gray-500 focus:bg-white ring-0 shadow-md shadow-gray-100 cursor-not-allowed",readOnly:!0})]}),t("span",{className:"text-red-600 absolute text-xs ",children:e.touched.hoardingSize&&e.errors.hoardingSize?e.errors.hoardingSize:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["From",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("from"),type:"date",className:`${i}`,min:U}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.from&&e.errors.from?e.errors.from:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["To",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("to"),type:"date",className:`${i}`,onChange:ue}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.to&&e.errors.to?e.errors.to:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Rate",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("rate"),type:"text",disabled:!0,className:`${i}`,onInput:a=>{a.target.value=Math.max(0,a.target.value).toString().slice(0,10)}}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.rate&&e.errors.rate?e.errors.rate:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Advertiser Name ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("advertiser"),type:"text",className:`${i}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.advertiser&&e.errors.advertiser?e.errors.advertiser:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Purpose of Hoarding  ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("purpose"),type:"text",className:`${i}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.purpose&&e.errors.purpose?e.errors.purpose:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Location ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{...e.getFieldProps("location"),type:"text",className:`${i}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.location&&e.errors.location?e.errors.location:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Mobile No ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline",children:"*"})]}),t("input",{...e.getFieldProps("mobileNo"),type:"text",className:`${i}`,pattern:"[0-9]{10}",title:"Mobile number should be exactly 10 digits",maxLength:"10",required:!0}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.mobileNo&&e.errors.mobileNo?e.errors.mobileNo:null})]}),t(Se,{name:"addressField",children:a=>{var n,s,c,l;return t(D,{children:((s=(n=e.values)==null?void 0:n.addressField)==null?void 0:s.length)>0&&((l=(c=e==null?void 0:e.values)==null?void 0:c.addressField)==null?void 0:l.map((d,m)=>o(Ie.Fragment,{children:[o("div",{className:"form-group col-span-11 md:col-span-11 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:[" Full Site Address ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("textarea",{...e.getFieldProps(`addressField.${m}.address`),type:"text",className:`${i}`}),t("span",{className:"text-red-600 absolute text-xs",children:P(e.touched,`addressField.${m}.address`)&&P(e.errors,`addressField.${m}.address`)})]}),o("div",{className:"form-group col-span-1 md:col-span- mb-6 md:px-4",children:[t("h1",{className:"block text-xs font-medium text-gray-700",children:"Add & Remove"}),m>0&&t("button",{className:"mt-1",type:"button",onClick:()=>a.remove(m),children:t(Ee,{className:"inline-block w-6 h-6 text-red-600"})}),"|"," ",t("button",{type:"button",className:"mt-1",onClick:()=>a.push({address:""}),children:t(Ae,{className:"inline-block w-5 h-5 text-green-600"})})]})]})))})}}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Upload Quotation Document ",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline "})]}),t("input",{type:"file",onChange:a=>e.setFieldValue("documentQuotation",a.currentTarget.files[0]),onBlur:e.handleBlur,className:`${i}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.documentQuotation&&e.errors.documentQuotation?e.errors.documentQuotation:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Upload Agreement Document",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline "})]}),t("input",{type:"file",onChange:a=>e.setFieldValue("documentAgreement",a.currentTarget.files[0]),onBlur:e.handleBlur,className:`${i}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.documentAgreement&&e.errors.documentAgreement?e.errors.documentAgreement:null})]}),o("div",{className:"form-group col-span-12 md:col-span-4 mb-6 md:px-4",children:[o("label",{className:`${r}`,children:["Upload Hoarding Design",t("small",{className:"mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),t("input",{type:"file",onChange:a=>e.setFieldValue("documentInvoice",a.currentTarget.files[0]),onBlur:e.handleBlur,className:`${i}`}),t("span",{className:"text-red-600 absolute text-xs",children:e.touched.documentInvoice&&e.errors.documentInvoice?e.errors.documentInvoice:null})]})]}),o("div",{className:"w-full m-2",children:[o("label",{htmlFor:"declaration",className:"inline-flex items-center mb-2",children:[t("input",{type:"checkbox",id:"declaration",className:"form-checkbox h-5 w-5 text-blue-600",checked:$,onChange:ne}),t("span",{className:"ml-2 text-sm text-gray-700",children:"I hereby confirm my agreement to comply with all rules and regulations regarding the hoarding request permission."})]}),t("div",{className:"text-right",children:t("button",{type:"submit",className:"capitalize hover:shadow-md text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2 mr-2 mb-2 focus:outline-none max-w-[144px] whitespace-pre-wrap",disabled:!$,children:"Submit"})})]})]})})]}),t(Fe,{isOpen:z,onAfterOpen:ce,onRequestClose:me,style:we,contentLabel:"Example Modal",children:t("div",{className:"bg-white shadow-2xl border border-blue-200 rounded-md ",children:t("div",{className:"block p-4 md:py-6 shadow-lg bg-indigo-100 border border-indigo-300 rounded  mx-auto ",children:o("div",{className:"text-center space-y-4",children:[t("p",{className:"font-semibold",children:"Your Application Has been Submitted Successfully."}),o("p",{children:[t("span",{className:"text-sm",children:" Application No: "}),t("span",{className:"text-indigo-600 font-semibold",children:(I==null?void 0:I.data)||"N/A"})]}),t("button",{onClick:()=>{window.location.reload()},className:"bg-white hover:bg-indigo-600 hover:text-white text-indigo-700  border border-indigo-600 mx-2 rounded-sm text-sm px-4 py-2 shadow-xl",children:"Okay"})]})})})})]})};export{De as default};
