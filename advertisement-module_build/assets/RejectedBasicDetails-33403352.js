import{r as u,k as V,g as r,F as B,j as o,l as q,ap as y,aq as D,ar as J,t as K,N as H,f as $,Q as h,A as W}from"./index-4d407fc7.js";const Z=()=>{var v,G,w,E,x,O,Q,R,U,_,T,S,M,P,j;const[e,C]=u.useState({}),{id:b}=V(),{api_getdocId:F,api_uploadrejecteddoc:L}=W(),[k,m]=u.useState(!1),[i,I]=u.useState({documentQuotation:null,documentAgreement:null,documentInvoice:null}),[c,p]=u.useState({documentQuotation:!1,documentAgreement:!1,documentInvoice:!1});let g="appearance-none block w-full bg-white text-gray-700 border border-gray-200 rounded py-1.5 px-4 mb-2 leading-tight focus:outline-none focus:border-gray-500 focus:bg-white ring-0 shadow-md shadow-gray-100";const f=d=>Object.keys(e).reduce((l,n)=>(n===d&&(l=e[n].docId),l),{}),N=async(d,t)=>{const l=d.currentTarget.files[0];let n;t==="documentQuotation"?n=f("QUATATAION"):t==="documentAgreement"?n=f("AGGREMENT"):t==="documentInvoice"&&(n=f("HOARDINGDESIGN"));try{if(l){p(A=>({...A,[t]:!0}));const s=URL.createObjectURL(l);I(A=>({...A,[t]:s}));const a=new FormData;a.append("applicationId",b),a.append("image",l),a.append("documents[][docCode]",t),a.append("documents[][ownerDtlId]",""),a.append("docId",n),(await H.post(L,a,$())).data.status?h.success("Document uploaded successfully"):h.error("Failed to upload document")}else I(s=>({...s,[t]:null}))}catch(s){console.error("Error handling file change:",s),h.error("Failed to upload document. Please try again.")}finally{p(s=>({...s,[t]:!1}))}},z=()=>{m(!0);let d=new FormData;d.append("id",b),H.post(F,d,$()).then(t=>{t.data.status?(m(!1),console.log("Consumer Payment Data for receipt",t.data.data),C(t.data.data)):(console.log("Error while getting consumer data for receipt"),m(!1))}).catch(t=>{console.log("Exception while getting consumer receipt",t),m(!1)})};return u.useEffect(()=>{z()},[]),r(B,{children:[k&&o(q,{}),o("div",{className:"col-span-12 rounded-lg p-4"}),r("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 container mx-auto mt-8",children:[((v=e==null?void 0:e.QUATATAION)==null?void 0:v.doc_code)==="QUATATAION"&&r("div",{className:`p-4 bg-white rounded-lg shadow-md ml-5 ${((G=e==null?void 0:e.QUATATAION)==null?void 0:G.verify_status)==1?"opacity-50  pointer-events-none border-green-500 border-2":"border-gray-800 border-2"}`,children:[r("div",{className:"flex items-center mb-4",children:[o(y,{size:24}),o("h1",{className:`ml-2 text-lg font-semibold ${((w=e==null?void 0:e.QUATATAION)==null?void 0:w.verify_status)==1?"text-green-500":""}`,children:"Upload Quotation Document"})]}),((E=e==null?void 0:e.QUATATAION)==null?void 0:E.verify_status)===1?o("p",{className:"font-bold text-green-500",children:"Verified"}):o("p",{className:"font-bold text-red-500"}),o("input",{type:"file",onChange:d=>N(d,"documentQuotation"),className:`${g} mb-2`,disabled:((x=e==null?void 0:e.QUATATAION)==null?void 0:x.verify_status)==1}),c.documentQuotation&&o("p",{children:"Uploading..."}),i.documentQuotation&&!c.documentQuotation&&o("img",{src:i.documentQuotation,alt:"documentQuotation Preview",className:"w-[70%] h-auto rounded-md"})]},1),((O=e==null?void 0:e.AGGREMENT)==null?void 0:O.doc_code)==="AGGREMENT"&&r("div",{className:`p-4 bg-white rounded-lg shadow-md ml-5 ${((Q=e==null?void 0:e.AGGREMENT)==null?void 0:Q.verify_status)==1?"opacity-50  pointer-events-none border-green-500 border-2":"border-gray-800 border-2"}`,children:[r("div",{className:"flex items-center mb-4",children:[o(D,{size:24}),o("h1",{className:`ml-2 text-lg font-semibold ${((R=e==null?void 0:e.AGGREMENT)==null?void 0:R.verify_status)==1?"text-green-500":""}`,children:"Upload Agreement Document"})]}),((U=e==null?void 0:e.AGGREMENT)==null?void 0:U.verify_status)===1?o("p",{className:"font-bold text-green-500",children:"Verified"}):o("p",{className:"font-bold text-red-500"}),o("input",{type:"file",onChange:d=>N(d,"documentAgreement"),className:`${g} mb-2`,disabled:((_=e==null?void 0:e.AGGREMENT)==null?void 0:_.verify_status)==1}),c.documentAgreement&&o("p",{children:"Uploading..."}),i.documentAgreement&&!c.documentAgreement&&o("img",{src:i.documentAgreement,alt:"documentAgreement Preview",className:"w-[70%] h-auto rounded-md"})]},2),((T=e==null?void 0:e.HOARDINGDESIGN)==null?void 0:T.doc_code)==="HOARDINGDESIGN"&&r("div",{className:`p-4 bg-white rounded-lg shadow-md ml-5 ${((S=e==null?void 0:e.HOARDINGDESIGN)==null?void 0:S.verify_status)==1?"opacity-50  pointer-events-none border-green-500 border-2":"border-gray-800 border-2"}`,children:[r("div",{className:"flex items-center mb-4",children:[o(J,{size:24}),o("h1",{className:`ml-2 text-lg font-semibold ${((M=e==null?void 0:e.HOARDINGDESIGN)==null?void 0:M.verify_status)==1?"text-green-500":""}`,children:"Upload Hoarding Design"})]}),((P=e==null?void 0:e.HOARDINGDESIGN)==null?void 0:P.verify_status)===1?o("p",{className:"font-bold text-green-500",children:"Verified"}):o("p",{className:"font-bold text-red-500"}),o("input",{type:"file",onChange:d=>N(d,"documentInvoice"),className:`${g} mb-2`,disabled:((j=e==null?void 0:e.HOARDINGDESIGN)==null?void 0:j.verify_status)==1}),c.documentInvoice&&o("p",{children:"Uploading..."}),i.documentInvoice&&!c.documentInvoice&&o("img",{src:i.documentInvoice,alt:"documentInvoice Preview",className:"w-[70%] h-auto rounded-md"})]},3)]}),o(K,{})]})};export{Z as default};
