import{r as l,c as Ae,b as _e,d as ke,e as z,f as A,a0 as H,g as s,F as m,j as r,l as Ce,a1 as J,a2 as K,O as Se,n as u,a3 as Q,S as Fe,a4 as ze,A as Ee}from"./index-4d407fc7.js";import{L as W,R as $e}from"./ListTable-b9dad1f1.js";const Ve=()=>{const{api_addloaction:X,api_updatelocation:Z,api_deletelocation:ee,api_listloaction:L,api_addadvertiser:te,api_updateadvertiser:re,api_deleteadvertiser:oe,api_getadvertiser:ie,api_assignRole:ae}=Ee(),b=l.useRef(),[x,_]=l.useState(!1),[se,M]=l.useState(!1),[Ie,ne]=l.useState(""),[He,de]=l.useState(!1),[c,le]=l.useState(""),[E,P]=l.useState(null),[y,k]=l.useState([]),[p,ce]=l.useState([]),[f,$]=l.useState(null),[pe,R]=l.useState(!1),[o,V]=l.useState("user"),[Le,q]=l.useState(null),[v,C]=l.useState(null),j="border border-sky-800 text-sky-800 mx-1 px-3 py-1 rounded-sm shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white",B="border border-red-400 text-red-400 mx-1 px-3 py-1 rounded-sm shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white",T="float-right bg-[#1A4D8C] px-3 py-1 rounded-sm shadow-lg hover:shadow-xl hover:bg-[#113766] hover:text-white text-white flex items-center",he="text-gray-800 text-sm",O="border focus:outline-none drop-shadow-sm focus:drop-shadow-md px-4 py-1 text-gray-700 shadow-black placeholder:text-sm",fe="block w-full border focus:outline-none drop-shadow-sm focus:drop-shadow-md p-1 text-sm text-slate-500 file:mr-4 file:py-1 file:px-4 file:rounded-sm file:border file:text-xs file:font-semibold file:bg-zinc-100 hover:file:bg-zinc-200",me=e=>`px-4 py-1 text-sm bg-${e}-500 hover:bg-${e}-600 select-none rounded-sm hover:drop-shadow-md text-white`,D=e=>`border border-slate-700 ${e?"bg-slate-700 text-white":"text-slate-700 shadow-2xl shadow-slate-700"} mx-1 px-3 py-1 rounded-sm hover:bg-slate-700 hover:text-white text-sm`,w=(e,t)=>{de(e),ne(t)},N=(e,t=null)=>{switch(le(e),console.log(e,":::::::::",o,t),e){case"add":break;case"edit":$(t),o=="role"&&n.setFieldValue("location",t==null?void 0:t.location),o=="user"&&(n.setFieldValue("advertiserName",(t==null?void 0:t.advertiser_name)||""),n.setFieldValue("address",(t==null?void 0:t.address)||""),n.setFieldValue("company",(t==null?void 0:t.company)||""),n.setFieldValue("officeAddress",(t==null?void 0:t.office_address)||""),n.setFieldValue("contactPerson",t==null?void 0:t.contact_person),n.setFieldValue("mobileNo",t==null?void 0:t.mobile_no),n.setFieldValue("email",t==null?void 0:t.email));break;case"delete":P(t);break;case"assign":$(t),P(t==null?void 0:t.id),C((t==null?void 0:t.wf_role_id)||"");break}b.current.showModal()},ue=[{Header:"#",Cell:({row:e})=>r("div",{className:"pr-2",children:(e==null?void 0:e.index)+1})},{Header:"Location",accessor:"location",Cell:({cell:e})=>{var t;return u((t=e.row.original)==null?void 0:t.location)}},{Header:"Created At",accessor:"created_at",Cell:({cell:e})=>{var t;return Q((t=e.row.original)==null?void 0:t.created_at)}},{Header:"Action",accessor:"id",Cell:({cell:e})=>s("div",{className:"flex flex-row flex-wrap gap-2",children:[r("button",{onClick:()=>{var t;return N("edit",(t=e==null?void 0:e.row)==null?void 0:t.original)},className:j,children:"Edit"}),r("button",{onClick:()=>{var t,i;return N("delete",(i=(t=e==null?void 0:e.row)==null?void 0:t.original)==null?void 0:i.id)},className:B,children:"Delete"})]})}],be=[{Header:"#",Cell:({row:e})=>r("div",{className:"pr-2",children:(e==null?void 0:e.index)+1})},{Header:"Advertiser Name",accessor:"advertiser_name",Cell:({cell:e})=>{var t;return u((t=e.row.original)==null?void 0:t.advertiser_name)}},{Header:"Address",accessor:"address",Cell:({cell:e})=>{var t;return u((t=e.row.original)==null?void 0:t.address)}},{Header:"Company",accessor:"company",Cell:({cell:e})=>{var t;return u((t=e.row.original)==null?void 0:t.company)}},{Header:"Office Address",accessor:"office_address",Cell:({cell:e})=>{var t;return u((t=e.row.original)==null?void 0:t.office_address)}},{Header:"Contact Person",accessor:"contact_person",Cell:({cell:e})=>{var t;return u((t=e.row.original)==null?void 0:t.contact_person)}},{Header:"Mobile No",accessor:"mobile_no",Cell:({cell:e})=>{var t;return u((t=e.row.original)==null?void 0:t.mobile_no)}},{Header:"Email",accessor:"email",Cell:({cell:e})=>{var t;return u((t=e.row.original)==null?void 0:t.email)}},{Header:"Created At",accessor:"created_at",Cell:({cell:e})=>{var t;return Q((t=e.row.original)==null?void 0:t.created_at)}},{Header:"Action",accessor:"id",Cell:({cell:e})=>s("div",{className:"flex items-center flex-wrap flex-row gap-1",children:[r("button",{onClick:()=>{var t;return N("edit",(t=e==null?void 0:e.row)==null?void 0:t.original)},className:j,children:"Edit"}),r("button",{onClick:()=>{var t,i;return N("delete",(i=(t=e==null?void 0:e.row)==null?void 0:t.original)==null?void 0:i.id)},className:B,children:"Delete"})]})}],S=[{title:"Location",key:"location",width:` w-full ${o=="role"?"block ":"hidden "}`,type:o=="role"?"text":"select",hint:"location",required:!0,okey:"id",ovalue:"role_name",required:o=="role"&&!0},{title:"Advertiser Name",key:"advertiserName",width:`md:w-[31%] w-full ${o=="user"?"block ":"hidden "}`,type:"text",hint:"Enter Advertiser Name",required:o=="user"&&!0},{title:"Address",key:"address",width:`md:w-[31%] w-full ${o=="user"?"block ":"hidden "}`,type:"text",hint:"Enter address",required:!1},{title:"Company",key:"company",width:`md:w-[31%] w-full ${o=="user"?"block ":"hidden "}`,type:"text",hint:"Enter Address",required:o=="user"&&!0},{title:"Office Address",key:"officeAddress",width:`md:w-[48%] w-full ${o=="user"?"block ":"hidden "}`,type:"text",hint:"longitude",required:o=="user"&&!0},{title:"Contact Person",key:"contactPerson",width:`md:w-[48%] w-full ${o=="user"?"block ":"hidden "}`,type:"text",hint:"Enter Length",required:o=="user"&&!0},{title:"Mobile No",key:"mobileNo",width:`md:w-[48%] w-full ${o=="user"?"block ":"hidden "}`,type:"number",hint:"Enter width ",required:o=="user"&&!0},{title:"email",key:"email",width:`md:w-[48%] w-full ${o=="user"?"block ":"hidden "}`,type:"email",hint:"Enter Agency Id",required:o=="user"&&!0}],ge=Ae().shape([...S].reduce((e,t)=>(t!=null&&t.required&&(e[t.key]=_e().required(t==null?void 0:t.hint)),e),{})),n=ke({initialValues:{role:"",hoardingNo:"",hoardingType:"",latitude:"",longitude:"",length:"",width:"",agencyId:"",loactionId:"",remarks:""},enableReinitialize:!0,validationSchema:ge,onSubmit:e=>{U(e)}}),I=()=>{k([]),_(!0);let e;o=="role"&&(e=L),o=="user"&&(e=ie),z.post(e,{},A()).then(t=>{var i,a,d,g,h,F;(i=t==null?void 0:t.data)!=null&&i.status?(k((d=(a=t==null?void 0:t.data)==null?void 0:a.data)==null?void 0:d.data),console.log("chandan",(h=(g=t==null?void 0:t.data)==null?void 0:g.data)==null?void 0:h.data)):(w(!0,H((F=t==null?void 0:t.data)==null?void 0:F.message)),k([])),console.log("user role list response => ",t)}).catch(t=>{w(!0,"Server Error! Please try again later."),k([]),console.log("error user role list => ",t)}).finally(()=>{_(!1),$(null),q(null),C(null),b.current.close()})},xe=(e,t="",i,a="",d="",g=!1,h=[],F="",ye="")=>s("div",{className:`flex flex-col ${a} `,children:[t!=""&&s("label",{htmlFor:e,className:he,children:[t," ",g&&r("span",{className:"text-red-500 text-xs font-bold",children:"*"})," : "]}),i!="select"&&i!="file"&&r("input",{...n.getFieldProps(e),type:i,className:O+` ${n.touched[e]&&n.errors[e]?" border-red-200 placeholder:text-red-400 ":" focus:border-zinc-300 border-zinc-200"}`,name:e,id:"",placeholder:d}),i=="file"&&r("input",{type:"file",className:fe+`${n.touched[e]&&n.errors[e]?" border-red-200 placeholder:text-red-400 text-red-400 file:border-red-200 file:text-red-400":" focus:border-zinc-300 border-zinc-200 file:border-zinc-300 file:text-gray-600"}`,name:e,id:"",placeholder:d,accept:".jpg, .jpeg, .png"}),i=="select"&&r("select",{...n.getFieldProps(e),className:O+` ${n.touched[e]&&n.errors[e]?" border-red-200 placeholder:text-red-400 text-red-400":" focus:border-zinc-300 border-zinc-200 "}`,children:pe?r("option",{children:"Loading..."}):s(m,{children:[r("option",{value:null,children:"Select"}),typeof h=="object"&&(h==null?void 0:h.map(G=>r("option",{className:"",value:G[F],children:G[ye]})))]})})]}),U=e=>{M(!0),b.current.close();let t,i,a=new FormData;switch(c){case"add":o=="role"&&(t={location:e==null?void 0:e.location},i=X),o=="user"&&(a.append("advertiserName",e==null?void 0:e.advertiserName),a.append("address",e==null?void 0:e.address),a.append("company",e==null?void 0:e.company),a.append("officeAddress",e==null?void 0:e.officeAddress),a.append("contactPerson",e==null?void 0:e.contactPerson),a.append("mobileNo",e==null?void 0:e.mobileNo),a.append("email",e==null?void 0:e.email),i=te);break;case"edit":o=="role"&&(t={userId:f==null?void 0:f.id,location:e==null?void 0:e.location},i=Z),o=="user"&&(a.append("userId",f==null?void 0:f.id),a.append("advertiserName",e==null?void 0:e.advertiserName),a.append("address",e==null?void 0:e.address),a.append("company",e==null?void 0:e.company),a.append("officeAddress",e==null?void 0:e.officeAddress),a.append("contactPerson",e==null?void 0:e.contactPerson),a.append("mobileNo",e==null?void 0:e.mobileNo),a.append("email",e==null?void 0:e.email),i=re);break;case"delete":o=="role"&&(i=ee,t={id:E}),o=="user"&&(i=oe,a.append("id",E));break}z.post(i,o=="user"?a:t,o=="user"?A():A()).then(d=>{var g,h;(g=d==null?void 0:d.data)!=null&&g.status?I():w(!0,H((h=d==null?void 0:d.data)==null?void 0:h.message)),console.log("fp violation response => ",d)}).catch(d=>{w(!0,"Server Error! Please try again later."),console.log("error violation list => ",d)}).finally(()=>{M(!1),n.resetForm()})},we=()=>{R(!0),z.post(L,{},A()).then(e=>{var t,i;(t=e==null?void 0:e.data)!=null&&t.status&&ce((i=e==null?void 0:e.data)==null?void 0:i.data),console.log("fp department list response => ",e)}).catch(e=>{console.log("error fp department list => ",e)}).finally(()=>{R(!1)})},Y=e=>{var a;const t=e.target.name,i=e.target.value;if(t=="mobileNo"&&n.setFieldValue("mobileNo",Fe(i,n.values.mobileNo,10)),t=="profile"){let d=(a=e==null?void 0:e.target)==null?void 0:a.files[0];if(!ze(d)){n.setFieldValue("profile","");return}q(d)}t=="roleAssign"&&C(i)},Ne=()=>{_(!0);let e={userId:E,roleId:v};z.post(ae,e,A()).then(t=>{var i,a;(i=t==null?void 0:t.data)!=null&&i.status?I():w(!0,H((a=t==null?void 0:t.data)==null?void 0:a.message)),console.log("fp role assign response => ",t)}).catch(t=>{w(!0,"Server Error! Please try again later."),console.log("error fp role assign => ",t)}).finally(()=>{_(!1),b.current.close()})};return l.useEffect(()=>{o!="department"&&we(),I()},[o]),s(m,{children:[se&&r(Ce,{}),s("div",{className:"poppins p-4 px-6",children:[r("div",{className:"uppercase font-semibold text-gray-700 text-2xl py-2 text-center tracking-[0.5rem]",children:"Advertiser & Location Master"}),r("div",{className:"w-full h-[0.15rem] bg-gray-400 mb-6"}),s("div",{className:"flex gap-1 w-full flex-wrap my-6",children:[r("button",{onClick:()=>V("user"),className:D(o=="user"),children:"Advertiser Master"}),r("button",{onClick:()=>V("role"),className:D(o=="role"),children:"Location Master"})]}),x&&r(J,{}),!x&&r(m,{children:(y==null?void 0:y.length)>0?s(m,{children:[s("button",{onClick:()=>N("add"),className:T+"capitalize flex gap-1 items-center",children:[r(K,{})," Add ",r("span",{className:"capitalize",children:o})]}),o=="role"&&r(W,{columns:ue,dataList:y}),o=="user"&&r(W,{columns:be,dataList:y})]}):s(m,{children:[r("div",{className:"flex justify-end mb-2",children:s("button",{onClick:()=>N("add"),className:T+"capitalize flex gap-1 items-center",children:[r(K,{})," Add ",r("span",{className:"capitalize",children:o})]})}),r("div",{className:"bg-red-100 text-red-500 py-2 text-lg font-semibold text-center border border-red-500 drop-shadow-sm",children:"Oops! No Data Found."})]})})]}),s("dialog",{ref:b,className:`relative overflow-clip animate__animated animate__zoomIn animate__faster w-full ${o=="role"&&"md:w-[21rem]"} ${o=="user"&&c!="delete"&&"md:w-[50rem]"} ${c=="delete"&&"md:w-[21rem]"} ${c=="assign"&&"md:w-[40rem]"}`,children:[c!="delete"&&r("span",{onClick:()=>(b.current.close(),n.resetForm(),C(null)),className:"block p-1 bg-red-100 hover:bg-red-500 rounded-full hover:text-white cursor-pointer transition-all duration-200 absolute top-2 right-2",children:r($e,{})}),c!="delete"&&c!="assign"&&s("form",{onChange:e=>(n.handleChange(e),Y(e)),onSubmit:n.handleSubmit,className:"p-4 px-8 py-6 shadow-lg",children:[s("section",{className:"flex flex-row justify-between gap-4 flex-wrap",children:[s("header",{className:"w-full font-semibold text-xl capitalize text-sky-700 border-b pb-1 text-center",children:[c," ",o]}),c=="edit"&&o=="user"&&r(m,{}),S==null?void 0:S.map(e=>xe(e==null?void 0:e.key,e==null?void 0:e.title,e==null?void 0:e.type,e==null?void 0:e.width,e==null?void 0:e.hint,e==null?void 0:e.required,e==null?void 0:e.options,e==null?void 0:e.okey,e==null?void 0:e.ovalue))]}),r("footer",{className:"mt-4 flex justify-center",children:s("button",{type:"submit",className:me("green"),children:[c=="add"&&"Add",c=="edit"&&"Update"]})})]}),c=="delete"&&r(m,{children:s("div",{className:" z-50 px-6 py-4 flex flex-col gap-4 ",children:[s("div",{className:"flex items-center gap-6",children:[r("span",{className:"text-red-500 bg-red-100 p-2 block rounded-full drop-shadow-md shadow-red-300",children:r(Se,{size:25})}),s("div",{className:"flex flex-col gap-2",children:[r("span",{className:"text-xl font-semibold border-b pb-1",children:"Confirmation"}),r("span",{className:"text-base",children:"Are you sure want to delete ?"})]})]}),s("div",{className:"flex justify-end gap-2",children:[r("button",{className:"text-white bg-slate-400 hover:bg-slate-500 px-4 py-1 text-sm ",onClick:()=>b.current.close(),children:"No"}),r("button",{className:"text-white bg-red-500 hover:bg-red-600 px-4 py-1 text-sm ",onClick:()=>U(),children:"Yes"})]})]})}),c=="assign"&&r(m,{children:s("div",{className:"p-4 px-8 py-6 shadow-lg",children:[s("header",{className:"w-full font-semibold text-xl capitalize text-sky-700 border-b pb-1 mt-4 text-center",children:["Assign Role to ",r("span",{className:"text-amber-600",children:f==null?void 0:f.user_name})]}),!x&&Array.isArray(p)&&(p==null?void 0:p.length)>0&&r("div",{className:" mt-4 animate__animated animate__fadeIn animate__faster",children:r("button",{onClick:()=>Ne(),className:"float-right bg-green-500 px-3 py-1 rounded-sm shadow-lg hover:shadow-xl hover:bg-green-600 hover:text-white text-white flex items-center mb-1",children:"Assign"})}),s("div",{className:"flex flex-col h-[40vh] w-full overflow-y-auto md:overflow-x-hidden mt-6",children:[s("div",{className:"w-full grid grid-cols-12 items-center gap-2 bg-slate-500 text-white font-semibold border border-slate-200 px-4 py-2",children:[r("div",{className:"col-span-3",children:"Sl. No."}),r("div",{className:"col-span-6",children:"Role Name"}),r("div",{className:"col-span-3 text-end",children:r("span",{children:"Action"})})]}),x&&r(J,{}),!x&&Array.isArray(p)&&(p==null?void 0:p.map((e,t)=>r(m,{children:s("div",{className:"w-full grid grid-cols-12 items-center gap-2 bg-slate-100 border-b hover:bg-white pb-1 p-4 animate__animated animate__fadeIn animate__faster",children:[r("div",{className:"col-span-1",children:t+1}),r("div",{className:"col-span-10",children:e==null?void 0:e.role_name}),r("div",{className:"col-span-1",children:r("label",{class:"inline-flex items-center px-4",children:r("input",{type:"radio",name:"roleAssign",checked:v==(e==null?void 0:e.id)||"",value:e==null?void 0:e.id,onChange:Y,class:"cursor-pointer form-radio h-5 w-5 text-slate-800"})})})]},t)}))),!x&&Array.isArray(p)&&(p==null?void 0:p.length)==0&&r("div",{className:"w-full text-center text-red-400 font-semibold pb-1 p-4",children:"No Roles Available"})]})]})})]})]})};export{Ve as default};
