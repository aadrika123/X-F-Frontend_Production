import{u as P,a as W,w as I,p as F,j as s}from"./index-iuZ-7lxl.js";import{u as A,e as t}from"./react-rKuUt_as.js";import{F as _}from"./FormProvider-EwYetELv.js";import{T as z}from"./TextField-FhwntCNA.js";import{L as Z}from"./LoaderButton-cz3xuKqT.js";import{S as c}from"./SelectField-vVIxf5gL.js";import{u as $}from"./formik.esm-GYaH6P80.js";import"./index-7JGA4NxA.js";import{c as k,a as B}from"./index.esm-ZNAGMSQQ.js";import{P as q}from"./index-T4RTB032.js";import{S as D}from"./index-z2wFBOn3.js";import"./ArrowRightIcon-iY9J1xZe.js";const E=[{id:1,label:"Consumer No",value:"consumerNo"},{id:2,label:"Property No",value:"propertyNo"},{id:3,label:"Applicant Name",value:"applicantName"},{id:4,label:"Mobile",value:"mobileNo"}],O=[{id:1,label:"Zone A-East",value:"1"},{id:2,label:"Zone B-West",value:"2"},{id:3,label:"Zone C-North",value:"3"},{id:4,label:"Zone D-South",value:"4"}];function V(){var i,x,h,m,p,j,b,f,N,y,S,g,u,C,v,w;const l=A(),a=P(),r=W({api:I.searchWaterConsumer,config:a==null?void 0:a.searchWaterConsumerState,value:[(i=a==null?void 0:a.searchWaterConsumerState)==null?void 0:i.filterBy,(x=a==null?void 0:a.searchWaterConsumerState)==null?void 0:x.parameter,(h=a==null?void 0:a.searchWaterConsumerState)==null?void 0:h.wardId,(m=a==null?void 0:a.searchWaterConsumerState)==null?void 0:m.zoneId,(p=a==null?void 0:a.searchWaterConsumerState)==null?void 0:p.page,(j=a==null?void 0:a.searchWaterConsumerState)==null?void 0:j.perPage],options:{enabled:!!((b=a==null?void 0:a.searchWaterConsumerState)!=null&&b.filterBy)}}),d=$({initialValues:a==null?void 0:a.searchWaterConsumerState,validationSchema:k({filterBy:B().required("Search String is required"),parameter:B().required("Search String is required")}),onSubmit:async e=>{a==null||a.setSearchWaterConsumerState({...a==null?void 0:a.searchWaterConsumerState,filterBy:e==null?void 0:e.filterBy,parameter:e==null?void 0:e.parameter,wardId:e==null?void 0:e.wardId,zoneId:e==null?void 0:e.zoneId})}}),{values:n}=d,o=W({api:F.getWardByZone,config:{zoneId:n==null?void 0:n.zoneId},value:[n==null?void 0:n.zoneId],options:{enabled:!!(n!=null&&n.zoneId)}});return s.jsx(q,{title:"Search Water Consumer",children:s.jsx("div",{className:"px-4 py-4 flex-1",children:s.jsxs(_,{formik:d,children:[s.jsx(t.Card,{className:"w-full",children:s.jsxs(t.CardBody,{children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-sm font-semibold",children:"Search Consumer"})}),s.jsx("div",{className:"my-4 border-b-2"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(c,{label:"Filter By",name:"filterBy",formik:d,children:[s.jsx("option",{value:"",children:"select"}),E.map(e=>s.jsx("option",{value:e==null?void 0:e.value,children:e==null?void 0:e.label},e==null?void 0:e.id))]}),s.jsxs(c,{label:"Zone",name:"zoneId",formik:d,children:[s.jsx("option",{value:"",children:"select"}),O.map(e=>s.jsx("option",{value:e==null?void 0:e.value,children:e==null?void 0:e.label},e==null?void 0:e.id))]}),s.jsxs(c,{label:"select",formik:d,name:"wardId",children:[s.jsx("option",{value:"",children:"select"}),(N=(f=o==null?void 0:o.data)==null?void 0:f.data)==null?void 0:N.map(e=>s.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.ward_name},e==null?void 0:e.id))]}),s.jsx(z,{label:"Parameter",name:"parameter",type:"text",formik:d})]}),s.jsx("div",{className:"flex justify-center mt-2",children:s.jsx(Z,{type:"submit",disabled:r==null?void 0:r.isFetching,children:"Search"})})]})}),r!=null&&r.isLoading?s.jsx("div",{className:"text-center py-52",children:"Loading..."}):s.jsx(s.Fragment,{children:((S=(y=r==null?void 0:r.data)==null?void 0:y.data.data)==null?void 0:S.length)>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"my-4 border-b-2"}),(C=(u=(g=r==null?void 0:r.data)==null?void 0:g.data)==null?void 0:u.data)==null?void 0:C.map(e=>s.jsx(t.Card,{className:"w-full mb-5",children:s.jsxs(t.CardBody,{children:[s.jsx("div",{className:"flex items-center justify-between -mt-1",children:s.jsx("div",{className:"flex items-center",children:s.jsx("h1",{className:"font-bold text-sm",children:"Details"})})}),s.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-sm font-semibold",children:"Owner's Name:"}),s.jsx("p",{className:"text-sm text-end",children:e==null?void 0:e.owner_name})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-sm font-semibold",children:"Consumer No:"}),s.jsx("p",{className:"text-sm text-end",children:e==null?void 0:e.consumer_no})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-sm font-semibold",children:"Property No:"}),s.jsx("p",{className:"text-sm text-end",children:(e==null?void 0:e.folio_no)||"--"})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-sm font-semibold",children:"Mobile:"}),s.jsx("p",{className:"text-sm text-end truncate w-60",children:e==null?void 0:e.mobile_no})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-sm font-semibold",children:"Address:"}),s.jsx("div",{className:"w-44",children:s.jsx("p",{className:"text-sm text-end truncate",children:e==null?void 0:e.address})})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-sm font-semibold",children:"Bill Amount:"}),s.jsx("p",{className:"text-sm text-end truncate w-60",children:(e==null?void 0:e.balance_amount)||0})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-sm font-semibold",children:"Payment Status:"}),s.jsx("p",{className:"text-sm font-semibold ".concat(e.paid_status?"text-green-500":"text-red-500"),children:e!=null&&e.paid_status?"Paid":"Pending"})]}),s.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),s.jsxs("div",{className:"flex items-center justify-around mt-4 -mb-1 gap-6",children:[s.jsx("div",{onClick:()=>l("/amc-app/water/consumer-details/".concat(e==null?void 0:e.id)),className:"text-xs font-bold text-blue-600",children:"Basic Details"}),s.jsx("div",{onClick:()=>l("/amc-app/water/demand-details/".concat(e==null?void 0:e.id)),className:"text-xs font-bold text-blue-600",children:"Demand Details"}),s.jsx("div",{onClick:()=>l("/amc-app/water/water-payment-history/".concat(e==null?void 0:e.id)),className:"text-xs font-bold text-blue-600",children:"Payment History"})]})]})},e==null?void 0:e.id)),s.jsx("div",{className:"my-4 border-b-2"}),s.jsx(D,{active:a==null?void 0:a.searchWaterConsumerState,noOfPage:(w=(v=r==null?void 0:r.data)==null?void 0:v.data)==null?void 0:w.total,setActive:a==null?void 0:a.setSearchWaterConsumerState})]}):s.jsx("div",{className:"text-center py-52",children:"No Record Found!"})}),s.jsx("div",{className:"my-4 border-b-2"})]})})})}export{V as default};
