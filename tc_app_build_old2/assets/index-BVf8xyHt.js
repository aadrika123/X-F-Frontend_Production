import{R as m,l as g,w as B,p as C,j as e,r as i,L as x}from"./index-bSlv997h.js";import{F as P}from"./FormProvider-W-su6Rxw.js";import{u as F,T as A}from"./TextField-bQfjChae.js";import{L as _}from"./LoaderButton-l681QTfL.js";import{S as d}from"./SelectField-HMQMrmsq.js";import{I as z,a as E}from"./index.esm-cdkX8yJU.js";import{c as R,a as w}from"./index.esm-2LITW0iD.js";import{P as k}from"./index-G8wik8XN.js";import"./tiny-warning.esm-rFRgECTd.js";const Z=[{id:1,label:"Consumer No",value:"consumerNo"},{id:2,label:"Property No",value:"propertyNo"},{id:3,label:"Applicant Name",value:"applicantName"},{id:4,label:"Mobile",value:"mobileNo"}],$=[{id:1,label:"Zone A-East",value:"1"},{id:2,label:"Zone B-West",value:"2"},{id:3,label:"Zone C-North",value:"3"},{id:4,label:"Zone D-South",value:"4"}];function Y(){var p,j,b,u,f,N,y,v;const[r,h]=m.useState(1),[n,I]=m.useState(10),[t,S]=m.useState({filterBy:"",parameter:"",wardId:"",zoneId:""}),a=g({api:B.searchWaterConsumer,config:{...t,page:r,perPage:n},value:[t.filterBy,t.parameter,t.wardId,t.zoneId,r,n],options:{enabled:!!t.filterBy}}),l=F({initialValues:t,validationSchema:R({filterBy:w().required("Search String is required"),parameter:w().required("Search String is required")}),onSubmit:async s=>{S({...t,filterBy:s.filterBy,parameter:s.parameter,wardId:s.wardId,zoneId:s.zoneId})}}),{values:c}=l,o=g({api:C.getWardByZone,config:{zoneId:c.zoneId},value:[c.zoneId],options:{enabled:!!c.zoneId}});return e.jsx(k,{title:"Search Water Consumer",children:e.jsx("div",{className:"px-4 py-4 flex-1",children:e.jsxs(P,{formik:l,children:[e.jsx(i.Card,{className:"w-full",children:e.jsxs(i.CardBody,{children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Search Consumer"})}),e.jsx("div",{className:"my-4 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(d,{label:"Filter By",name:"filterBy",formik:l,children:[e.jsx("option",{value:"",children:"select"}),Z.map(s=>e.jsx("option",{value:s.value,children:s.label},s.id))]}),e.jsxs(d,{label:"Zone",name:"zoneId",formik:l,children:[e.jsx("option",{value:"",children:"select"}),$.map(s=>e.jsx("option",{value:s.value,children:s.label},s.id))]}),e.jsxs(d,{label:"select",formik:l,name:"wardId",children:[e.jsx("option",{value:"1",children:"select"}),(j=(p=o==null?void 0:o.data)==null?void 0:p.data)==null?void 0:j.map(s=>e.jsx("option",{value:s.id,children:s.ward_name},s.id))]}),e.jsx(A,{label:"Parameter",name:"parameter",type:"text",formik:l})]}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(_,{type:"submit",disabled:a==null?void 0:a.isFetching,children:"Search"})})]})}),a!=null&&a.isLoading?e.jsx("div",{className:"text-center py-52",children:"Loading..."}):e.jsx(e.Fragment,{children:((u=(b=a==null?void 0:a.data)==null?void 0:b.data.data)==null?void 0:u.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 border-b-2"}),e.jsxs("div",{className:"flex justify-between items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex justify-start items-center gap-2",children:[e.jsx(z,{className:"text-2xl",onClick:()=>{h(r-1)}}),e.jsxs(i.Typography,{color:"gray",children:[r," of ",(f=a==null?void 0:a.data)==null?void 0:f.last_page]}),e.jsx(E,{className:"text-2xl",onClick:()=>{h(r+1)}})]}),e.jsx("h1",{className:"text-sm font-semibold",children:"Consumer List"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(d,{name:"perPage",value:n,onChange:s=>I(s.target.value),children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"30",children:"50"}),e.jsx("option",{value:"40",children:"100"})]})})]}),e.jsx("div",{className:"my-4 border-b-2"}),(v=(y=(N=a==null?void 0:a.data)==null?void 0:N.data)==null?void 0:y.data)==null?void 0:v.map(s=>e.jsx(i.Card,{className:"w-full mb-5",children:e.jsxs(i.CardBody,{children:[e.jsx("div",{className:"flex items-center justify-between -mt-1",children:e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"font-bold text-sm",children:"Details"})})}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"OWNER'S NAME:"}),e.jsx("p",{className:"text-sm text-end",children:s.owner_name})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"CONSUMER NO:"}),e.jsx("p",{className:"text-sm text-end",children:s.consumer_no})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Property No:"}),e.jsx("p",{className:"text-sm text-end",children:(s==null?void 0:s.folio_no)||"--"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Mobile:"}),e.jsx("p",{className:"text-sm text-end truncate w-60",children:s.mobile_no})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Address:"}),e.jsx("div",{className:"w-44",children:e.jsx("p",{className:"text-sm text-end truncate",children:s.address})})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Bill Amount:"}),e.jsx("p",{className:"text-sm text-end truncate w-60",children:(s==null?void 0:s.balance_amount)||0})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Payment Status:"}),e.jsx("p",{className:"text-sm font-semibold ".concat(s.paid_status?"text-green-500":"text-red-500"),children:s.paid_status?"Paid":"Pending"})]}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsxs("div",{className:"flex items-center justify-around mt-4 -mb-1 gap-6",children:[e.jsx(x,{to:"/amc-app/property/pro-basic-details/".concat(s.id),className:"text-xs font-bold text-blue-600",children:"Basic Details"}),e.jsx(x,{to:"/amc-app/property/demand-details/".concat(s.id),className:"text-xs font-bold text-blue-600",children:"Demand Details"}),e.jsx(x,{to:"/amc-app/property/payment-history/".concat(s.id),className:"text-xs font-bold text-blue-600",children:"Payment History"})]})]})},s.id))]}):e.jsx("div",{className:"text-center py-52",children:"No Record Found!"})}),e.jsx("div",{className:"my-4 border-b-2"})]})})})}export{Y as default};
