import{u as K,r as o,A as u,a as y,j as l,Q as p}from"./index-yZk1nTm3.js";import{u as Q}from"./formik.esm-jPgX_pJX.js";import{T as G}from"./ThemeStyle-mSkMd4lv.js";import{c as J,b as c}from"./object-myLraoT8.js";import{R as W}from"./RentalApiList-f8a2cC67.js";import{L as X}from"./Loader-wpfI2tye.js";import{b as Z,a as S}from"./PowerupFunctions-bw3UMuA_.js";function F(){let f=window.localStorage.getItem("token");return{headers:{Authorization:"Bearer ".concat(f),Accept:"application/json","Content-Type":"multipart/form-data","API-KEY":"eff41ef6-d430-4887-aa55-9fcf46c72c99"}}}function xe(){const{saveButtonColor:f,inputStyle:i,labelStyle:n,headingStyle:D,titleStyle:ee,addButtonColor:le,formStyle:se,titleColor:re}=G(),{api_UlbCircleList:T,api_locationByCircleList:$,api_addToll:C,api_getTollRateList:P}=W(),q=K();o.useState();const[b,d]=o.useState(!1);o.useState(),o.useState(""),o.useState(!1),o.useState("");const[te,L]=o.useState(""),[R,A]=o.useState(""),[oe,E]=o.useState(""),[h,B]=o.useState();o.useState();const[m,I]=o.useState(),[x,V]=o.useState(),_=J({circle:c().required("This field is required"),market:c().required("This field is required"),vendorName:c().required("This field is required"),mobile:c().required("Enter mobile no.").min(10,"Enter 10 digit number").max(10,"Enter 10 digit number"),address:c().required("This field is required"),rate:c().required("This field is required"),photo1Path:c().required("This field is required")}),v=(e,r)=>{p.dismiss(),r=="success"&&p.success(e),r=="error"&&p.error(e)},s=Q({initialValues:{circle:"",market:"",vendorName:"",vendorType:"",mobile:"",address:"",rate:"",photo1Path:""},enableReinitialize:!0,onSubmit:e=>{console.log("shop data",e),O(e)},validationSchema:_}),z=e=>{console.log("target type",e.target.type),console.log("check box name",e.target.name);let r=e.target.name,t=e.target.value;r=="photo1Path"&&U(r,e.target.files[0]),r=="circle"&&Y(t),r=="vendorName"&&s.setFieldValue("vendorName",Z(t,s.values.vendorName,50)),r=="mobile"&&s.setFieldValue("mobile",S(t,s.values.mobile,10)),r=="rate"&&s.setFieldValue("rate",S(t,s.values.rate,10))},U=(e,r)=>{console.log("name ,fileData ",e,r),L(r),e=="photo1Path"?s.setFieldValue("photo1Path",r):s.setFieldValue("photo2Path",r);const t=new FileReader;t.onloadend=()=>{e=="photo1Path"?A(t.result):E(t.result)},t.readAsDataURL(r)};console.log("form values",s.values);const O=e=>{console.log("data in form",e);let r,t;r=C,t={circleId:e==null?void 0:e.circle,marketId:e==null?void 0:e.market,vendorName:e==null?void 0:e.vendorName,vendorType:e==null?void 0:e.vendorType,address:e==null?void 0:e.address,rate:e==null?void 0:e.rate,mobile:e==null?void 0:e.mobile,photograph1:e==null?void 0:e.photo1Path},console.log("request body",t),u.post("".concat(r),t,F()).then(function(a){var g,j,w,N,k;console.log("response after data submitted",(j=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:j.toll_no),((w=a==null?void 0:a.data)==null?void 0:w.status)===!0?(v("submitted successfully","success"),q("/submitScreen/toll/".concat((k=(N=a==null?void 0:a.data)==null?void 0:N.data)==null?void 0:k.toll_no))):v("Failed to submit","error")}).catch(function(a){console.log("errorrr.... ",a)})};o.useEffect(()=>{H(),M()},[]);const H=()=>{u.post(T,{},F()).then(e=>{console.log("circle list 1",e.data),B(e.data.data),d(!1)}).catch(e=>{console.log(e),d(!1)})},M=()=>{u.post(P,{},y()).then(e=>{console.log("circle list 1",e.data),V(e.data.data),d(!1)}).catch(e=>{console.log(e),d(!1)})},Y=e=>{const r={circleId:e};u.post($,r,y()).then(t=>{console.log("location list",t.data),t.data.status&&I(t.data.data)}).catch(t=>{console.log(t)})};return b?l.jsx(l.Fragment,{children:l.jsx("div",{className:"min-h-screen"})}):l.jsxs(l.Fragment,{children:[b&&l.jsx(X,{}),l.jsx("div",{className:"h-screen bg-[#FDFCFE] flex flex-row flex-wrap justify-center items-center p-3",children:l.jsxs("div",{className:"bg-white shadow-xl rounded-tl-[44px]  h-full sm:w-1/2 lg:w-1/3 w-full rounded-xl",children:[l.jsx("div",{className:"bg-[#5846BE] h-32 w-full mx-auto rounded-br-[68px] rounded-tl-[44px] opacity-90",children:l.jsxs("div",{className:"p-4 pt-12",children:[l.jsx("h1",{className:"text-gray-50 font-bold capitalize text-2xl",children:"Add Toll"}),l.jsx("h1",{className:"text-gray-50 capitalize text-[12px]",children:"Rent a Toll Booth and Secure Your Spot on the Road"})]})}),l.jsx("form",{onSubmit:s.handleSubmit,onChange:z,encType:"multipart/form-data",children:l.jsxs("div",{className:"bg-[#FFFFFF]  rounded-2xl shadow-md p-4 text-xs",children:[l.jsxs("div",{className:"p-2",children:[l.jsxs("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[l.jsxs("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[l.jsx("label",{className:"".concat(n," inline-block mb-2 "),children:"Circle"}),l.jsxs("select",{...s.getFieldProps("circle"),className:"".concat(i," inline-block w-full relative"),children:[l.jsx("option",{selected:!0,children:"select"}),h==null?void 0:h.map(e=>l.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.circle_name}))]}),l.jsx("p",{className:"text-red-500 text-xs absolute",children:s.touched.circle&&s.errors.circle?s.errors.circle:null})]}),l.jsxs("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[l.jsx("label",{className:"".concat(n," inline-block mb-2 "),children:"Market"}),l.jsxs("select",{...s.getFieldProps("market"),className:"".concat(i," inline-block w-full relative"),children:[l.jsx("option",{selected:!0,children:"select"}),m==null?void 0:m.map(e=>l.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.market_name}))]}),l.jsx("p",{className:"text-red-500 text-xs absolute",children:s.touched.market&&s.errors.market?s.errors.market:null})]}),l.jsxs("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[l.jsx("label",{className:"".concat(n," inline-block mb-2 "),children:"Vendor Type"}),l.jsxs("select",{...s.getFieldProps("vendorType"),className:"".concat(i," inline-block w-full relative"),children:[l.jsx("option",{selected:!0,children:"select"}),l.jsx("option",{value:"schedule",children:"Schedule"}),l.jsx("option",{value:"unschedule",children:"Unscheduled"})]}),l.jsx("p",{className:"text-red-500 text-xs absolute",children:s.touched.vendorType&&s.errors.vendorType?s.errors.vendorType:null})]}),l.jsxs("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[l.jsx("h1",{className:"".concat(n," inline-block mb-2"),children:"Vendor name"}),l.jsx("input",{type:"text",name:"vendorName",className:"".concat(i," inline-block w-full relative"),onChange:s.handleChange,value:s.values.vendorName}),l.jsx("p",{className:"text-red-500 text-xs absolute",children:s.touched.vendorName&&s.errors.vendorName?s.errors.vendorName:null})]})]}),l.jsxs("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:[l.jsxs("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[l.jsx("h1",{className:"".concat(n," inline-block mb-2"),children:"Mobile no."}),l.jsx("input",{type:"text",name:"mobile",className:"".concat(i," inline-block w-full relative"),onChange:s.handleChange,value:s.values.mobile}),l.jsx("p",{className:"text-red-500 text-xs absolute",children:s.touched.mobile&&s.errors.mobile?s.errors.mobile:null})]}),l.jsxs("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[l.jsx("label",{className:"".concat(n," inline-block mb-2 "),children:"Landmark"}),l.jsx("input",{type:"text",name:"address",className:"".concat(i," inline-block w-full relative"),onChange:s.handleChange,value:s.values.address}),l.jsx("p",{className:"text-red-500 text-xs absolute",children:s.touched.address&&s.errors.address?s.errors.address:null})]}),l.jsxs("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[l.jsx("label",{className:"".concat(n," inline-block mb-2 "),children:"Rate"}),l.jsxs("select",{...s.getFieldProps("rate"),className:"".concat(i," inline-block w-full relative"),children:[l.jsx("option",{selected:!0,children:"select"}),x==null?void 0:x.map(e=>l.jsxs("option",{value:e==null?void 0:e.id,children:[e==null?void 0:e.toll_type," (Rs.",e==null?void 0:e.rate,")"]}))]}),l.jsx("p",{className:"text-red-500 text-xs absolute",children:s.touched.rate&&s.errors.rate?s.errors.rate:null})]})]}),l.jsx("div",{class:"valid-form flex flex-wrap flex-row -mx-4",children:l.jsxs("div",{class:"form-group flex-shrink max-w-full px-4 w-full md:w-1/3 mb-4",children:[l.jsx("label",{className:"".concat(n," inline-block mb-2 "),children:"Image"}),l.jsx("input",{accept:"image/*",type:"file",name:"photo1Path",className:"".concat(i," inline-block w-full relative"),onChange:s.handleChange}),l.jsx("img",{src:"".concat(R),alt:"Upload img",className:"h-20"}),l.jsx("p",{className:"text-red-500 text-xs absolute",children:s.touched.photo1Path&&s.errors.photo1Path?s.errors.photo1Path:null})]})})]}),l.jsx("div",{className:"pb-8",children:l.jsx("button",{type:"submit",className:"bg-[#5846BE] px-7 py-2 text-white font-semibold rounded leading-5 shadow-lg w-full",children:"Save"})})]})})]})})]})}export{xe as default};
