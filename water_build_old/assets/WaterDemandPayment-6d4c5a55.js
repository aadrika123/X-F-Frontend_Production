import{r as d,l as C,x as O,u as $,a1 as H,W as G,f as p,o as J,q as g,s as K,z as i,a,F as f,j as e,B as Q,a2 as P}from"./index-111426c8.js";const Z=()=>{var k,M,A;const[o,Y]=d.useState(),[S,m]=d.useState(!1),[c,D]=d.useState(),[w,F]=d.useState(),{notify:y}=d.useContext(C),[l,N]=d.useState(),[b,U]=d.useState(),[u,E]=d.useState(),{id:h}=O();$(),H("Water Demand Payment");const{api_waterApprovedApplicationDetails:R,api_waterListDemand:L,api_waterDemandCalculation:T,api_waterDemandPayment:W,header:x}=G();d.useEffect(()=>{V(),_()},[h]),d.useEffect(()=>{B()},[u,b]);const B=()=>{if(u==""||b=="")return N();m(!0);const t={consumerId:h,demandFrom:b,demandUpto:u};p.post(T,t,x).then(function(n){console.log("water demand calculation Details",n.data.data),N(n.data.data),m(!1)}).catch(function(n){console.log("Error : water calculating demand",n),m(!1)})},V=()=>{m(!0),p.post(R,{id:h},x).then(function(t){console.log("water Approved Application Details",t.data.data),Y(t.data.data),m(!1)}).catch(function(t){console.log("Error : water Approved Application Details",t),m(!1)})},_=()=>{p.post(L,{ConsumerId:h},x).then(t=>{console.log("Fetched Water Demand List",t.data.data),D(t.data.data)}).catch(t=>{console.log("Exception while fetching Water Demand",t)})},I=t=>{const n={consumerId:h,demandFrom:b,demandUpto:u,amount:l==null?void 0:l.totalPayAmount,paymentMode:t.paymentMode,remarks:t.remarks,chequeDate:t.cheque_dd_date,bankName:t.bankName,branchName:t.branchName,chequeNo:t.cheque_dd_no};console.log("final submit",n),p.post(W,n,x).then(s=>{var q;s.data.status?(_(),console.log("Demand Paid Successfully",s),y("Demand Paid Successfully","success")):(console.log("Failed to paid Demand.",s),y((q=s==null?void 0:s.data)==null?void 0:q.message,"error"))}).catch(s=>{console.log("Exception while Demand payment",s),y("Error while Demand payment","error")})},j=J({monthFrom:g().required("Require Field"),monthUpto:g().required("Require Field"),remarks:g().required("Require Field"),paymentMode:g().required("Require Field")}),r=K({enableReinitialize:!0,initialValues:{monthFrom:"",monthUpto:"",penalty:"",rebate:"",advanced:"",paymentMode:"",remarks:"",bankName:"",branchName:"",cheque_dd_no:"",cheque_dd_date:""},onSubmit:(t,n)=>{I(t)},validationSchema:j}),z=t=>{let n=t.target.name,s=t.target.value;n=="paymentMode"&&F(s),n=="monthFrom"&&U(s),n=="monthUpto"&&E(s),n=="paymentMode"&&(r.setFieldValue("bankName",""),r.setFieldValue("branchName",""),r.setFieldValue("cheque_dd_no",""),r.setFieldValue("cheque_dd_date",""))},v=(k=c==null?void 0:c.consumerDemands)==null?void 0:k.filter(t=>i(t.demand_upto,"YYYY-MM-DD").format("yy-MM").toString()>=i(b,"YYYY-MM-DD").format("yy-MM"));return a(f,{children:[S&&e(Q,{}),e("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 gap-2 container mx-auto w-full",children:a("div",{className:"col-span-12 rounded-lg p-4",children:[e("div",{className:"p-4",children:a("div",{className:"",children:[a("h1",{className:"px-1 font-semibold font-serif  text-gray-500",children:[e(P,{className:"inline"})," Basic Details"]}),e("div",{className:"py-6 mt-2 bg-white rounded-lg shadow-xl p-4",children:a("div",{className:"flex space-x-5 pl-4 ",children:[a("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-sm",children:o!=null&&o.ulb_name?o==null?void 0:o.ulb_name:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"ULB Name"})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:o!=null&&o.ward_name?o==null?void 0:o.ward_name:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Ward No."})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:o!=null&&o.consumer_no?o==null?void 0:o.consumer_no:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Consumer No"})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-bold text-sm",children:o!=null&&o.connection_through?o==null?void 0:o.connection_through:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Connection Through"})]}),(o==null?void 0:o.connection_through)=="SAF"?a("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:o!=null&&o.saf_no?o==null?void 0:o.saf_no:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"SAF No"})]}):a("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:o!=null&&o.holding_no?o==null?void 0:o.holding_no:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Holding No"})]}),a("div",{className:"flex-1",children:[e("div",{className:"font-semibold text-md",children:o!=null&&o.owner_char_type?o==null?void 0:o.owner_char_type:"N/A"}),e("div",{className:"text-gray-500 text-xs",children:"Ownership Type"})]})]})})]})}),e(f,{children:a("div",{className:"mt-5 p-4",children:[a("h1",{className:"px-1 font-semibold font-serif text-gray-500",children:[e(P,{className:"inline"}),"Due Demand Details"]}),a("table",{className:"min-w-full leading-normal mt-2 bg-white rounded-lg shadow-xl p-4",children:[e("thead",{className:"font-bold text-left text-sm border text-gray-800 bg-white",children:a("tr",{children:[e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"#"}),e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Demand From"}),e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Demand Upto"}),e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Demand Amount"}),e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Penalty"}),e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Connection Type"}),e("th",{className:"px-2 py-3 border-b border-gray-200  text-xs uppercase text-left",children:"Payable Amount "})]})}),e("tbody",{className:"text-sm",children:e(f,{children:(M=c==null?void 0:c.consumerDemands)==null?void 0:M.map((t,n)=>a("tr",{className:"bg-white shadow-xl border-b border-gray-200",children:[e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:n+1}),e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:t!=null&&t.demand_from?i(t==null?void 0:t.demand_from,"YYYY-MM-DD").format("DD-MMM-yy"):"N/A"}),e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:t!=null&&t.demand_upto?i(t==null?void 0:t.demand_upto,"YYYY-MM-DD").format("DD-MMM-yy"):"N/A"}),e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:t!=null&&t.balance_amount?t==null?void 0:t.balance_amount:"N/A"}),e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:t!=null&&t.penalty?t==null?void 0:t.penalty:"N/A"}),e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:t!=null&&t.connection_type?t==null?void 0:t.connection_type:"N/A"}),e("td",{className:"px-2 py-2 text-left text-gray-500 text-xs",children:t!=null&&t.amount?"â‚¹ "+(t==null?void 0:t.amount):"N/A"})]}))})})]})]})}),e("div",{className:"col-span-12 rounded-lg p-4",children:e("div",{className:"py-6 mt-2 bg-white rounded-lg shadow-xl border border-y-gray-200 p-4",children:e("form",{onSubmit:r.handleSubmit,onChange:z,className:"p-4 relative",children:a("div",{className:"grid grid-cols-12",children:[a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Select Month From"]}),a("select",{...r.getFieldProps("monthFrom"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),(A=c==null?void 0:c.consumerDemands)==null?void 0:A.map((t,n)=>e("option",{value:t.demand_from,children:i(t.demand_from,"YYYY-MM-DD").format("MMM-yy")},n))]}),e("span",{className:"text-red-600 absolute text-xs",children:r.touched.monthFrom&&r.errors.monthFrom?r.errors.monthFrom:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Select Month Upto"]}),a("select",{...r.getFieldProps("monthUpto"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),v==null?void 0:v.map((t,n)=>e("option",{value:t.demand_upto,children:i(t.demand_upto,"YYYY-MM-DD").format("MMM-yy")},n))]}),e("span",{className:"text-red-600 absolute text-xs",children:r.touched.monthUpto&&r.errors.monthUpto?r.errors.monthUpto:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Total Demand"}),e("input",{...r.getFieldProps("amount"),value:(l==null?void 0:l.totalDemand)||0,disabled:!0,type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md bg-slate-200"}),e("span",{className:"text-red-600 absolute text-xs",children:r.touched.amount&&r.errors.amount?r.errors.amount:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Penalty"}),e("input",{...r.getFieldProps("penalty"),value:(l==null?void 0:l.totalPenalty)||0,disabled:!0,type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md bg-slate-200"}),e("span",{className:"text-red-600 absolute text-xs",children:r.touched.penalty&&r.errors.penalty?r.errors.penalty:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Rebate"}),e("input",{...r.getFieldProps("rebate"),value:(l==null?void 0:l.totalRebate)||0,disabled:!0,type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md bg-slate-200"}),e("span",{className:"text-red-600 absolute text-xs",children:r.touched.rebate&&r.errors.rebate?r.errors.rebate:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Advanced"}),e("input",{...r.getFieldProps("advanced"),value:(l==null?void 0:l.totalAdvance)||0,disabled:!0,type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md bg-slate-200"}),e("span",{className:"text-red-600 absolute text-xs",children:r.touched.advanced&&r.errors.advanced?r.errors.advanced:null})]}),e("div",{className:"form-group mb-4 col-span-12 md:col-span-6 md:px-4",children:a("p",{children:["Remain Advance : ",e("span",{className:"text-orange-700 font-semibold",children:(l==null?void 0:l.remaningAdvanceAmount)||0})]})}),e("div",{className:"form-group mb-4 col-span-12 md:col-span-6 md:px-4",children:a("p",{children:[" Payable Amount : ",e("span",{className:"text-green-700 font-semibold",children:l!=null&&l.totalPayAmount?"â‚¹"+(l==null?void 0:l.totalPayAmount):0})]})}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Payment Mode"]}),a("select",{...r.getFieldProps("paymentMode"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[e("option",{value:"",children:"Select"}),e("option",{value:"Cash",children:"Cash"}),e("option",{value:"Cheque",children:"Cheque"}),e("option",{value:"DD",children:"DD"}),e("option",{value:"online",children:"Online"})]}),e("span",{className:"text-red-600 absolute text-xs",children:r.touched.paymentMode&&r.errors.paymentMode?r.errors.paymentMode:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Remarks"]}),e("input",{...r.getFieldProps("remarks"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Enter new ward no."}),e("span",{className:"text-red-600 absolute text-xs",children:r.touched.remarks&&r.errors.remarks?r.errors.remarks:null})]}),(w=="Cheque"||w=="DD")&&a(f,{children:[a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Bank Name"]}),e("input",{...r.getFieldProps("bankName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e("span",{className:"text-red-600 absolute text-xs",children:r.touched.bankName&&r.errors.bankName?r.errors.bankName:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Branch Name"]}),e("input",{...r.getFieldProps("branchName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e("span",{className:"text-red-600 absolute text-xs",children:r.touched.branchName&&r.errors.branchName?r.errors.branchName:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD No"]}),e("input",{...r.getFieldProps("cheque_dd_no"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e("span",{className:"text-red-600 absolute text-xs",children:r.touched.cheque_dd_no&&r.errors.cheque_dd_no?r.errors.cheque_dd_no:null})]}),a("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[a("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),"Cheque/DD Date"]}),e("input",{...r.getFieldProps("cheque_dd_date"),type:"date",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Enter new ward no."}),e("span",{className:"text-red-600 absolute text-xs",children:r.touched.cheque_dd_date&&r.errors.cheque_dd_date?r.errors.cheque_dd_date:null})]})]}),e("div",{className:"col-span-12"}),a("div",{className:"col-span-12 grid grid-cols-2 mt-10",children:[e("div",{className:""}),e("div",{className:"md:pl-10 text-right",children:e("button",{type:"submit",className:" px-6 py-2.5 bg-green-600 text-white font-medium text-xs leading-tight  rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"Pay Tax"})})]})]})})})})]})})]})};export{Z as default};
