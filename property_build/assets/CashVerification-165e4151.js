import{k as ye,a as ie,R as je,r as d,A as M,L as U,j as e,T as xe,Q as Ne,g as fe,cR as ve,n as x,f as y,b3 as we,F as pe,bH as he,Z as ce,l as Ce,m as ke,o as Te,aN as Ae,p as Se,U as _e}from"./index-763265b4.js";const Ee={overlay:{background:"rgba(0, 0, 0, 0.5)",overflowY:"scroll"}};function Pe(s){var ee,ae,se,te,le,re,ne,de,oe;ye("Cash Verification");const I=ie(),{api_verifiedTcCollection:O,api_notVerifiedTcCollection:V,api_verifyTcCollection:$,api_chequeDdUpdate:p}=he(),[W,z]=je.useState(!1),[t,Z]=d.useState(),[H,f]=d.useState(!1);d.useState(!1),d.useState(null);const[R,Q]=d.useState(!1),[j,C]=d.useState([]),[F,Y]=d.useState(!1),[N,k]=d.useState([]),[P,G]=d.useState(!1),[T,A]=d.useState([]),[n,S]=d.useState(null),[c,l]=d.useState(["cash","cheque","dd"]),[o,m]=d.useState([]),[v,w]=d.useState(""),[X,_]=d.useState(!1),ue=d.useRef(),me=d.useRef();console.log(s==null?void 0:s.reportType),d.useEffect(()=>{!s||!s.data||(C([]),k([]),A([]),_(!1),D())},[s==null?void 0:s.data]),console.log(s==null?void 0:s.data);const D=()=>{var i,b,q;f(!0);let a;(s==null?void 0:s.reportType)=="1"?a={date:(i=s==null?void 0:s.data)==null?void 0:i.date,userId:(b=s==null?void 0:s.data)==null?void 0:b.id}:a={tranNo:(q=s==null?void 0:s.data)==null?void 0:q.tranNo};let r;(s==null?void 0:s.reportType)=="1"&&(r=V),(s==null?void 0:s.reportType)=="2"&&(r=O),M.post(r,a,U()).then(g=>{var B,h,u;console.log("response of te data in modal",g),(B=g==null?void 0:g.data)!=null&&B.status?Z((h=g==null?void 0:g.data)==null?void 0:h.data):(s==null||s.activateBottomErrorCard(!0,(u=g==null?void 0:g.data)==null?void 0:u.message),E())}).catch(g=>{console.log("Error while tc list data in modal",g),s==null||s.activateBottomErrorCard(!0,"Some error occured. Please try again later."),E()}).finally(()=>f(!1))};console.log("getting data in cash verification modal => ",s==null?void 0:s.data),d.useEffect(()=>{s.openAddPopUP>0&&z(!0)},[s==null?void 0:s.openAddPopUP]);function E(){z(!1),m([])}const be=()=>{if((j==null?void 0:j.length)==0&&(N==null?void 0:N.length)==0&&(T==null?void 0:T.length)==0){s==null||s.activateBottomErrorCard(!0,"Select atleast one transaction to verify !!!");return}f(!0);const a={property:j,water:N,trade:T};M.post($,a,U()).then(r=>{var i,b;(i=r==null?void 0:r.data)!=null&&i.status?(console.log("Data After Verification",r),ce.success("Verified Successfully !!!"),s==null||s.refresh()):s==null||s.activateBottomErrorCard(!0,(b=r==null?void 0:r.data)==null?void 0:b.message)}).catch(r=>{console.log("Exception While Verifying Data",r),s==null||s.activateBottomErrorCard(!0,"Some error occured. Please try again later.")}).finally(()=>{f(!1),E()}),console.log("Verify Data",a)},ge=()=>{f(!0);const a={chequeNo:n==null?void 0:n.cheque_dd_no,bankName:n==null?void 0:n.bank_name,id:n==null?void 0:n.id,moduleId:n==null?void 0:n.module_id};M.post(p,a,U()).then(r=>{var i,b;(i=r==null?void 0:r.data)!=null&&i.status?(console.log("Data After updation",r),ce.success("Updated Successfully !!!"),D()):s==null||s.activateBottomErrorCard(!0,(b=r==null?void 0:r.data)==null?void 0:b.message)}).catch(r=>{console.log("Exception While Verifying Data",r),s==null||s.activateBottomErrorCard(!0,"Some error occured. Please try again later.")}).finally(()=>{f(!1),_(!1)}),console.log("Verify Data",a)},L=a=>{var q,g,B;const r=a.target.name,i=a.target.checked,b=a.target.value;if(r=="propertyAll")if(Q(i),i){const h=(q=t==null?void 0:t.property)==null?void 0:q.map(u=>u==null?void 0:u.id);C(h)}else C([]);if(r=="property"){if(i)C(h=>[...h,b]);else if(!i&&R!=!0){let h=j==null?void 0:j.filter(u=>u!=b);C(h)}}if(r=="waterAll")if(Y(i),i){const h=(g=t==null?void 0:t.water)==null?void 0:g.map(u=>u==null?void 0:u.id);k(h)}else k([]);if(r=="water"){if(i)k(h=>[...h,b]);else if(!i&&F!=!0){let h=N==null?void 0:N.filter(u=>u!=b);k(h)}}if(r=="tradeAll")if(G(i),i){const h=(B=t==null?void 0:t.trade)==null?void 0:B.map(u=>u==null?void 0:u.id);A(h)}else A([]);if(r=="trade"){if(i)A(h=>[...h,b]);else if(!i&&T!=!0){let h=P==null?void 0:P.filter(u=>u!=b);A(h)}}},J=a=>a==null?void 0:a.map(i=>i==null?void 0:i.payment_mode),K=a=>{w("edit"),S(a),_(!0)};return d.useEffect(()=>{(c==null?void 0:c.length)==0&&l(["cash","cheque","dd"])},[c]),H?e.jsx(xe,{}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{autoClose:2e3}),e.jsx(fe,{isOpen:W,onRequestClose:E,style:Ee,className:"absolute left-1/4 h-screen w-2/3 flex justify-center items-center",children:e.jsxs("div",{className:"w-[90vw] md:w-[80vw]",children:[!X&&e.jsxs("div",{className:"max-h-[90vh] overflow-y-auto bg-white rounded-lg shadow-xl border-2 p-2",children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:"float-right",children:e.jsxs("div",{onClick:E,className:"hover:bg-gray-100 rounded-full w-5 cursor-pointer mr-3",children:["  ",e.jsx(ve,{size:20})]})}),e.jsx("div",{className:"float-left",children:e.jsx("h1",{className:"mb-3 text-2xl ml-5 font-semibold",children:"Collection Details"})})]}),e.jsx("p",{className:"border-b mt-10 mb-6 mx-5 border-gray-100"}),e.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[e.jsx("div",{className:"col-span-4 ",children:e.jsx("div",{className:" bg-gray-50 shadow-md rounded  p-4",children:e.jsx("table",{className:"w-full",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Collector Name :"}),e.jsxs("td",{className:"font-semibold",children:[x(t==null?void 0:t.collectorName)," "]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Transaction Date :"}),e.jsxs("td",{className:"font-semibold",children:[x(t==null?void 0:t.date)," "]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Total Amount :"}),e.jsxs("td",{className:"font-semibold",children:[y(t==null?void 0:t.totalAmount)," "]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Number of Transaction :"}),e.jsxs("td",{className:"font-semibold",children:[we(t==null?void 0:t.numberOfTransaction)," "]})]})]})})})}),e.jsx("div",{className:"col-span-8",children:e.jsxs("div",{className:"flex flex-wrap-reverse m-0 gap-2",children:[e.jsxs("div",{className:"bg-gray-50 shadow-md  p-6 m-2 rounded",children:[e.jsx("p",{className:"font-semibold text-3xl",children:y(t==null?void 0:t.Cash)}),e.jsx("p",{className:"text-lg font-semibold",children:"Cash"})]}),e.jsxs("div",{className:"bg-gray-50 shadow-md  p-6 m-2 rounded",children:[e.jsx("p",{className:"font-semibold text-3xl",children:y(t==null?void 0:t.Cheque)}),e.jsx("p",{className:"text-lg font-semibold",children:"Cheque"})]}),e.jsxs("div",{className:"bg-gray-50 shadow-md  p-6 m-2 rounded",children:[e.jsx("p",{className:"font-semibold text-3xl",children:y(t==null?void 0:t.DD)}),e.jsx("p",{className:"text-lg font-semibold",children:"DD"})]})]})})]}),e.jsx("p",{className:"border-b mt-5 mb-4 mx-5 border-gray-100"}),e.jsxs("div",{className:"flex gap-2 mb-2 ",children:[e.jsx("button",{className:`${(c==null?void 0:c.length)==1&&c.some(a=>a=="cash")?"shadow-lg bg-indigo-500 text-white":"shadow-none"} px-4 py-1 text-sm border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white`,onClick:()=>l(["cash"]),children:"Cash"}),e.jsx("button",{className:`${(c==null?void 0:c.length)==1&&c.some(a=>a=="cheque")?"shadow-lg bg-indigo-500 text-white ":"shadow-none"} px-4 py-1 text-sm border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white`,onClick:()=>l(["cheque"]),children:"Cheque"}),e.jsx("button",{className:`${(c==null?void 0:c.length)==1&&c.some(a=>a=="dd")?"shadow-lg bg-indigo-500 text-white ":"shadow-none"} px-4 py-1 text-sm border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white`,onClick:()=>l(["dd"]),children:"DD"}),e.jsx("button",{className:`${c.length==3?"shadow-lg bg-indigo-500 text-white":"shadow-none"} px-4 py-1 text-sm border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white`,onClick:()=>l(["cash","cheque","dd"]),children:"All"})]}),((ee=t==null?void 0:t.property)==null?void 0:ee.length)>0&&e.jsxs("div",{className:" overflow-auto",children:[e.jsxs("p",{className:"uppercase font-bold",children:[" ",(s==null?void 0:s.reportType)=="1"&&e.jsx("input",{type:"checkbox",name:"propertyAll",id:"",onChange:L})," Property Payment"]}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-t border-l border-r text-left",children:e.jsxs("tr",{children:[(s==null?void 0:s.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"#"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Transaction No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Application No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Check/DD No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Bank Name"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Paid Amount"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Date"}),(s==null?void 0:s.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r",children:"Action"})]})}),e.jsx("tbody",{children:(se=(ae=t==null?void 0:t.property)==null?void 0:ae.filter(a=>J(t==null?void 0:t.property).some(r=>c.includes(r.toLowerCase()))))==null?void 0:se.map((a,r)=>e.jsxs("tr",{children:[(s==null?void 0:s.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:e.jsx("input",{type:"checkbox",name:"property",id:"",checked:R?!0:null,value:a==null?void 0:a.id,onChange:L})}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:r+1}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.tran_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.payment_mode)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.application_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.cheque_dd_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.bank_name)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:y(a==null?void 0:a.amount)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.tran_date)}),(s==null?void 0:s.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:(a==null?void 0:a.payment_mode)!="CASH"?e.jsx("button",{className:"px-4 py-1 border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white",onClick:()=>K(a),children:"Edit"}):"No Action"})]},r))})]})]}),e.jsx("p",{className:"py-2"}),((te=t==null?void 0:t.water)==null?void 0:te.length)>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"uppercase font-bold",children:[(s==null?void 0:s.reportType)=="1"&&e.jsx("input",{type:"checkbox",name:"waterAll",id:"",onChange:L})," Water Payment"]}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-t border-l border-r text-left",children:e.jsxs("tr",{children:[(s==null?void 0:s.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"#"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Transaction No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Application No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Check/DD No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Bank Name"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Paid Amount"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Date"}),(s==null?void 0:s.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r",children:"Action"})]})}),e.jsx("tbody",{children:(re=(le=t==null?void 0:t.water)==null?void 0:le.filter(()=>J(t==null?void 0:t.water).some(a=>c.includes(a.toLowerCase()))))==null?void 0:re.map((a,r)=>e.jsxs("tr",{children:[(s==null?void 0:s.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:e.jsx("input",{type:"checkbox",name:"water",id:"",checked:F?!0:null,value:a==null?void 0:a.id,onChange:L})}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:r+1}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.tran_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.payment_mode)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.application_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.cheque_dd_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.bank_name)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:y(a==null?void 0:a.amount)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.tran_date)}),(s==null?void 0:s.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:(a==null?void 0:a.payment_mode)!="CASH"?e.jsx("button",{className:"px-4 py-1 border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white",onClick:()=>K(a),children:"Edit"}):"No Action"})]},r))})]})]}),e.jsx("p",{className:"py-2"}),((ne=t==null?void 0:t.trade)==null?void 0:ne.length)>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"uppercase font-bold",children:[(s==null?void 0:s.reportType)=="1"&&e.jsx("input",{type:"checkbox",name:"tradeAll",id:"",onChange:L})," Trade Payment"]}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-t border-l border-r text-left",children:e.jsxs("tr",{children:[(s==null?void 0:s.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"#"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Transaction No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Application No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Check/DD No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Bank Name"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Paid Amount"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Date"}),(s==null?void 0:s.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r",children:"Action"})]})}),e.jsx("tbody",{children:(oe=(de=t==null?void 0:t.trade)==null?void 0:de.filter(a=>J(t==null?void 0:t.trade).some(r=>c.includes(r.toLowerCase()))))==null?void 0:oe.map((a,r)=>e.jsxs("tr",{children:[(s==null?void 0:s.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:e.jsx("input",{type:"checkbox",name:"trade",id:"",checked:P?!0:null,value:a==null?void 0:a.id,onChange:L})}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:r+1}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.tran_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.payment_mode)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.application_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.cheque_dd_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.bank_name)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:y(a==null?void 0:a.amount)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:x(a==null?void 0:a.tran_date)}),(s==null?void 0:s.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:(a==null?void 0:a.payment_mode)!="CASH"?e.jsx("button",{className:"px-4 py-1 border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white",onClick:()=>K(a),children:"Edit"}):"No Action"})]},r))})]})]}),e.jsxs("div",{className:"w-full flex justify-center gap-4 mt-2",children:[(s==null?void 0:s.reportType)=="1"?e.jsx("button",{className:" text-sm px-4 rounded bg-green-500 hover:bg-green-600 py-1 text-white sm:w-auto",onClick:()=>(w("verify"),_(!0)),children:" Verify "}):e.jsx("button",{className:" text-sm px-4 rounded bg-indigo-500 hover:bg-indigo-600 py-1 text-white sm:w-auto",onClick:()=>I(`/cashVerificationReceipt/${encodeURIComponent(t==null?void 0:t.tranNo)}`),children:" Print "}),e.jsx("button",{onClick:E,className:"w-full text-sm px-4 rounded bg-red-500 hover:bg-red-600 py-1 text-white sm:w-auto",children:" Close "})]})]}),X&&e.jsx("div",{className:"my-5",children:e.jsx("div",{className:"flex justify-center pt-3 space-x-3",children:(s==null?void 0:s.reportType)=="1"&&e.jsxs("div",{style:{zIndex:999},class:"h-screen w-screen flex justify-center items-center backdrop-blur-sm",children:[v=="verify"&&e.jsxs("div",{className:"bg-white w-max h-max rounded-md shadow-lg relative",children:[e.jsx("button",{type:"button",onClick:()=>_(!1),class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-800 darks:hover:text-white",children:e.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),e.jsxs("div",{class:"p-6 text-center",children:[e.jsxs("div",{className:"w-full flex h-10",children:[" ",e.jsx("span",{className:"mx-auto",children:e.jsx(pe,{size:30})})]}),e.jsx("h3",{class:"mb-5 text-lg font-normal text-gray-500 darks:text-gray-400",children:"Are you sure you ?"}),e.jsx("button",{type:"button",className:"cypress_button_logout text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 darks:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",onClick:()=>(be(),E()),children:"Yes, I'm sure"})]})]}),v=="edit"&&e.jsxs("div",{className:"bg-white w-max h-max rounded-md shadow-lg relative",children:[e.jsx("button",{type:"button",onClick:()=>_(!1),class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-800 darks:hover:text-white",children:e.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),e.jsxs("div",{class:"p-6 text-center flex flex-col gap-y-2 flex-wrap",children:[e.jsx("h1",{className:"w-full text-lg text-indigo-400 font-semibold border-b pb-1 mb-2",children:"Update Data"}),e.jsxs("div",{className:"grid grid-cols-12 items-center",children:[e.jsx("label",{className:"col-span-6 text-start",htmlFor:"checkNo",children:"Cheque/DD No.: "}),e.jsx("input",{ref:ue,className:"col-span-6 border focus:outline-none focus:shadow-lg shadow-md px-2 py-1",value:n==null?void 0:n.cheque_dd_no,onChange:a=>S({...n,cheque_dd_no:a.target.value}),type:"text",name:"chequeNo",id:""})]}),e.jsxs("div",{className:"grid grid-cols-12 items-center",children:[e.jsx("label",{className:"col-span-6 text-start",htmlFor:"checkNo",children:"Bank Name: "}),e.jsx("input",{ref:me,className:"col-span-6 border focus:outline-none focus:shadow-lg shadow-md px-2 py-1",value:n==null?void 0:n.bank_name,onChange:a=>S({...n,bank_name:a.target.value}),type:"text",name:"bankName",id:""})]}),e.jsxs("div",{className:"w-full flex justify-center gap-2 mt-2",children:[e.jsx("button",{className:" px-4 text-sm rounded bg-green-500 hover:bg-green-600 py-1 text-white ",onClick:()=>ge(),children:" Update "}),e.jsx("button",{onClick:()=>_(!1),className:" px-4 text-sm rounded bg-indigo-400 hover:bg-indigo-500 py-1 text-white ",children:" Close "})]})]})]})]})})})]})})]})}const Ve=s=>{const[I,O]=d.useState(0),[V,$]=d.useState(),[p,W]=d.useState(),[z,t]=d.useState();d.useState("");const[Z,H]=d.useState(!1),[f,R]=d.useState(!1),[Q,j]=d.useState(null),[C,F]=d.useState(""),Y=ie(),{api_listofEmployees:N,api_listUnverifiedCashVerification:k,api_listVerifiedCashVerification:P}=he();d.useEffect(()=>{S()},[]);const G=l=>{t(l),O(o=>o+1)};d.useEffect(()=>{M.post(N,{},U()).then(l=>{$(l.data.data)}).catch(l=>{console.log("Error while getting employee list",l)})},[]);const T=[{Header:"Sl.",Cell:({row:l})=>e.jsxs("div",{className:"px-2 font-semibold",children:[l.index+1,"."]})},{Header:"EmployeeName",Cell:({cell:l})=>{var o;return e.jsxs("span",{children:["  ",x((o=l.row.original)==null?void 0:o.user_name)]})}},{Header:"Property",Cell:({cell:l})=>{var o;return e.jsxs("span",{children:[" ",y((o=l.row.original)==null?void 0:o.property)]})}},{Header:"Water",Cell:({cell:l})=>{var o;return e.jsxs("span",{children:[" ",y((o=l.row.original)==null?void 0:o.water)]})}},{Header:"Trade",Cell:({cell:l})=>{var o;return e.jsxs("span",{children:[" ",y((o=l.row.original)==null?void 0:o.trade)]})}},{Header:"Total Amount",Cell:({cell:l})=>{var o;return e.jsxs("span",{children:[" ",y((o=l.row.original)==null?void 0:o.total)]})}},{Header:"Paid Date",Cell:({cell:l})=>{var o;return e.jsxs("span",{children:["  ",x((o=l.row.original)==null?void 0:o.date)]})}},{Header:"Action",Cell:({cell:l})=>{var o,m;return e.jsxs("div",{className:"flex gap-2 w-full flex-wrap",children:[e.jsx("button",{onClick:()=>G(l.row.original),className:"bg-blue-600 hover:bg-blue-400 py-1 px-3 text-white rounded-sm",children:"View"}),((m=(o=l==null?void 0:l.row)==null?void 0:o.original)==null?void 0:m.verifyStatus)==!0&&e.jsx("button",{onClick:()=>{var v,w;return Y(`/cashVerificationReceipt/${encodeURIComponent((w=(v=l==null?void 0:l.row)==null?void 0:v.original)==null?void 0:w.tranNo)}`)},className:"bg-sky-600 hover:bg-sky-400 py-1 px-3 text-white rounded-sm",children:"Print"})]})}}],A=Ce({collectionDate:ke().required("Select Date")}),n=Te({initialValues:{empName:"",collectionDate:Ae(),reportType:"1",zone:""},enableReinitialize:!0,onSubmit:l=>{console.log("report type ",l.reportType),S()},validationSchema:A}),S=()=>{let l;n.values.reportType=="1"&&(l=k),n.values.reportType=="2"&&(l=P),F(n.values.reportType),H(!0);const o={date:n.values.collectionDate,id:n.values.empName,zone:n.values.zone};M.post(l,o,U()).then(m=>{var v,w;console.log("response list cash",m),(v=m==null?void 0:m.data)!=null&&v.status?W(m.data.data):c(!0,(w=m==null?void 0:m.data)==null?void 0:w.message)}).catch(m=>{c(!0,"Error occured while fetching cash verification list. Please try again later."),console.log("Error while list cash verification",m)}).finally(()=>{H(!1)})},c=(l,o)=>{j(o),R(l)};return e.jsxs(e.Fragment,{children:[Z&&e.jsx(xe,{}),f&&e.jsx(Se,{activateBottomErrorCard:c,errorTitle:Q}),e.jsx(Pe,{openAddPopUP:I,data:z,refresh:()=>S(),activateBottomErrorCard:c,reportType:C}),e.jsxs("div",{className:"m-2",children:[e.jsx("div",{className:"shadow-md  rounded bg-indigo-100 px-4",children:e.jsx("form",{onSubmit:n.handleSubmit,onChange:n.handleChange,children:e.jsxs("div",{className:"px-3 py-3",children:[e.jsx("div",{className:"text-left",children:e.jsx("h1",{className:"mb-3 text-2xl font-semibold",children:"Cash Verification"})}),e.jsxs("div",{className:"grid grid-cols-12 gap-4 items-end",children:[e.jsxs("div",{className:"col-span-10 md:col-span-2",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Select Zone ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{onChange:n.handleChange,className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",placeholder:"Enter New Taluka",type:"text",name:"zone",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"A-East Zone"}),e.jsx("option",{value:"2",children:"B-West Zone"}),e.jsx("option",{value:"3",children:"C-North Zone"}),e.jsx("option",{value:"4",children:"D-South Zone"})]}),e.jsxs("p",{className:"text-red-500 text-xs font-semibold absolute",children:[" ",n.touched.zone&&n.errors.zone?n.errors.zone:null]})]}),e.jsxs("div",{className:"col-span-10 md:col-span-2",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Select Date ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{onChange:n.handleChange,name:"collectionDate",className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",type:"date",value:n.values.collectionDate}),e.jsxs("p",{className:"text-red-500 text-xs font-semibold absolute",children:[" ",n.touched.collectionDate&&n.errors.collectionDate?n.errors.collectionDate:null]})]}),e.jsxs("div",{className:"col-span-10 md:col-span-2",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Select Employee ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{onChange:n.handleChange,className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",placeholder:"Enter New Taluka",type:"text",name:"empName",children:[e.jsx("option",{value:"",children:"All"}),V==null?void 0:V.map((l,o)=>e.jsx("option",{value:l.id,children:l.user_name}))]}),e.jsxs("p",{className:"text-red-500 text-xs font-semibold absolute",children:[" ",n.touched.empName&&n.errors.empName?n.errors.empName:null]})]}),e.jsxs("div",{className:"col-span-10 md:col-span-2",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Report Type ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:n.values.reportType,className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",placeholder:"Enter New Taluka",type:"text",name:"reportType",children:[e.jsx("option",{value:"1",children:"Not Verified"}),e.jsx("option",{value:"2",children:"Verified"})]})]}),e.jsx("div",{className:"col-span-10 md:col-span-2 flex items-end justify-end md:mt-0 mt-6",children:e.jsx("button",{type:"submit",class:"w-full py-2 px-4 inline-block text-center rounded leading-5 text-gray-100 bg-indigo-500 border border-indigo-500 hover:text-white hover:bg-indigo-600 hover:ring-0 hover:border-indigo-600 focus:bg-indigo-600 focus:border-indigo-600 focus:outline-none focus:ring-0",children:"Search"})})]})]})})}),e.jsx("p",{className:" mx-10 py-5"}),e.jsx("div",{className:"my-4",children:(p==null?void 0:p.length)==0?e.jsx("p",{className:"text-center font-semibold text-xl -mt-8 text-red-500",children:"No Data Found !"}):e.jsxs(e.Fragment,{children:[p&&e.jsx("div",{className:"bg-white p-4",children:e.jsx(_e,{columns:T,dataList:p})})," "]})})]})]})};export{Ve as default};
