import{Y as C,r as o,u as _,a as D,j as s,n as t,b as T,q as A,s as u,w as H,e as L,S as $,L as F,e8 as R,U as k,aj as q,g as E}from"./index-7c70abf1.js";function G(){const{t:i}=C();o.useState(),o.useState(!1);const[g,p]=o.useState();o.useState();const[x,l]=o.useState(),[O,c]=o.useState(!1);o.useState();const[b,V]=o.useState(!1),[y,M]=o.useState(!1),[d,f]=o.useState(null),[j,S]=o.useState(0);_(),D("Survey Report");const m=[{Header:"S.No.",Cell:({row:e})=>s.jsx("div",{children:(e==null?void 0:e.index)+1}),className:"w-[5%]"},{Header:`${i("mainSearchapplicationPage.wardNo.label")}`,accessor:"old_ward_no",Cell:({cell:e})=>{var a,r;return s.jsx("span",{children:t((r=(a=e==null?void 0:e.row)==null?void 0:a.original)==null?void 0:r.old_ward_no)})}},{Header:`${i("mainSearchapplicationPage.holdingNo.label")}`,accessor:"holding_no",Cell:({cell:e})=>{var a,r;return s.jsx("span",{children:t((r=(a=e==null?void 0:e.row)==null?void 0:a.original)==null?void 0:r.holding_no)})}},{Header:`${i("mainSearchapplicationPage.applicationNo.label")}`,accessor:"saf_no",Cell:({cell:e})=>{var a,r;return s.jsx("span",{children:t((r=(a=e==null?void 0:e.row)==null?void 0:a.original)==null?void 0:r.saf_no)})}},{Header:`${i("mainSearchapplicationPage.assessmentType.label")}`,accessor:"applied_by",Cell:({cell:e})=>{var a,r;return s.jsx("span",{children:t((r=(a=e==null?void 0:e.row)==null?void 0:a.original)==null?void 0:r.applied_by)})}},{Header:`${i("mainSearchapplicationPage.firstOwner.label")}`,accessor:"ownername",Cell:({cell:e})=>{var a,r;return s.jsx("span",{children:t((r=(a=e==null?void 0:e.row)==null?void 0:a.original)==null?void 0:r.ownername)})}},{Header:`${i("mainHoldingPage.holdingAddress.label")}`,accessor:"prop_address",Cell:({cell:e})=>{var a,r;return s.jsx("span",{children:t((r=(a=e==null?void 0:e.row)==null?void 0:a.original)==null?void 0:r.prop_address)})}},{Header:`${i("mainSearchapplicationPage.mobileNo.label")}`,accessor:"mobileno",Cell:({cell:e})=>{var a,r;return s.jsx("span",{children:t((r=(a=e==null?void 0:e.row)==null?void 0:a.original)==null?void 0:r.mobileno)})}},{Header:`${i("mainSearchapplicationPage.applydate.label")}`,accessor:"application_date",Cell:({cell:e})=>{var a,r;return s.jsx("span",{children:t((r=(a=e==null?void 0:e.row)==null?void 0:a.original)==null?void 0:r.application_date)})}},{Header:`${i("mainSearchapplicationPage.action.label")}`,accessor:"id",Cell:({cell:e})=>s.jsx(s.Fragment,{children:s.jsx("button",{onClick:()=>w(`/propApplicationDetails/${e.row.values.id}`),className:"mr-4 text-white bg-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm hover:bg-indigo-600 hover:text-white",children:i("mainSearchapplicationPage.view.label")})})}],{api_getWardListByLogin:U,api_filterPropertyDetails:W,api_filterPropertyAppliedApplications:I,api_tranferFeePaymentPendingList:Y,api_getSurveyReportData:N}=E();T();const v=A({searchBy:u().required("Select search by !"),entry:u().required("select value !")}),n=H({initialValues:{filterBy:"",assessmentType:"",searchBy:"",entry:""},onSubmit:e=>{h(e)},validationSchema:v}),w=L(),h=e=>{(e==null?void 0:e.filterBy)=="saf",p(m),f({applicationType:e==null?void 0:e.assessmentType,...(e==null?void 0:e.searchBy)==="applicationNo"?{applicationNo:e==null?void 0:e.entry}:"",...(e==null?void 0:e.searchBy)==="name"?{name:e==null?void 0:e.entry}:"",...(e==null?void 0:e.searchBy)==="mobileNo"?{mobileNo:e==null?void 0:e.entry}:"",...(e==null?void 0:e.searchBy)==="holding"?{holdingNo:e==null?void 0:e.entry}:""}),S(a=>a+1)},P=e=>{n.values.filterBy=e.target.value,e.target.value=="holdingNo"&&(l("15 Digit Holding No"),c(!0)),e.target.value=="ownerDetails"&&(l("Owner Details"),c(!1)),e.target.value=="address"&&(l("Address"),c(!1))};o.useEffect(()=>{},[]),o.useEffect(()=>{(async()=>{await h({filterBy:"saf",assessmentType:"",searchBy:"name",entry:""})})()},[]);const B=e=>{let a=e.target.name;e.target.value,a=="filterBy"&&P(e)};return y?s.jsx($,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"}):s.jsxs(s.Fragment,{children:[b&&s.jsx(F,{}),s.jsxs("div",{className:"border shadow-xl bg-white mt-6",children:[s.jsxs("div",{className:"hidden sm:flex ml-5 mt-2 ",children:[s.jsx("img",{src:R,alt:"",className:"w-10 h-10"}),s.jsx("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search Survey Applications"})]}),s.jsx("form",{onSubmit:n.handleSubmit,onChange:B,children:s.jsxs("div",{className:"flex-col sm:flex-row flex justify-center sm:space-x-8 my-5 m-10",children:[s.jsxs("div",{children:[s.jsx("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:"Assessment Type"}),s.jsxs("select",{...n.getFieldProps("assessmentType"),className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[s.jsx("option",{value:"",children:"All"}),s.jsx("option",{value:"TC",children:"Survey New "}),s.jsx("option",{value:"TC Reassesment",children:"Survey Re"})]}),s.jsx("p",{className:"text-red-500 text-xs",children:n.touched.filterBy&&n.errors.filterBy?n.errors.filterBy:null})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[i("mainSearchapplicationPage.searchby.label"),s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{...n.getFieldProps("searchBy"),className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",children:[s.jsx("option",{value:"",children:i("mainSearchapplicationPage.select.label")}),s.jsx("option",{value:"applicationNo",children:i("mainSearchapplicationPage.applicationNo.label")}),s.jsx("option",{value:"name",children:i("mainSearchapplicationPage.name.label")}),s.jsx("option",{value:"mobileNo",children:i("mainSearchapplicationPage.mobileNo.label")}),s.jsx("option",{value:"holding",children:i("mainSearchapplicationPage.holdingNo.label")})]}),s.jsx("p",{className:"text-red-500 text-xs",children:n.touched.searchBy&&n.errors.searchBy?n.errors.searchBy:null})]}),s.jsxs("div",{className:"mt-5 sm:mt-0",children:[s.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[" ",i("mainSearchapplicationPage.value.label")," ",x," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",...n.getFieldProps("entry"),className:" w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),s.jsx("p",{className:"text-red-500 text-xs",children:n.touched.entry&&n.errors.entry?n.errors.entry:null})]}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{type:"submit",className:"w-full border rounded-md border-indigo-500 bg-indigo-500 hover:bg-indigo-700 text-white  shadow-lg  text-base font-semibold px-5 sm:m-3 py-1",children:s.jsxs("p",{className:"flex",children:[s.jsxs("span",{className:"mt-1 mr-2",children:[s.jsx(k,{})," "]})," ",i("mainSearchapplicationPage.searchRecord.label")]})})})]})}),s.jsx("div",{className:"sm:m-10",children:d!=null&&s.jsx(q,{api:N,columns:g,requestBody:d,changeData:j})})]})]})}export{G as default};
