import{r as c,X as T,q as F,s as d,t as H,bs as L,w as A,bt as I,A as j,b as p,bu as U,j as a,B as Q,y as _,P as M}from"./index-97506722.js";function B(t){var x,h,b,f,g,y,N;c.useState(1);const[w,u]=c.useState(!1),[r,m]=c.useState("CASH"),[D,o]=c.useState(!1),{t:n}=T(),{api_transferFee:E}=M(),P=F({paymentMode:d().required("Please select the Payment mode "),bankName:d().when("paymentMode",{is:e=>e=="CHEQUE"||e=="NEFT"||e=="DD",then:e=>e.required("This field is required")}),chequeNo:d().when("paymentMode",{is:e=>e=="CHEQUE"||e=="NEFT"||e=="DD",then:e=>e.required("This field is required")}),chequeDate:H().when("paymentMode",{is:e=>e=="CHEQUE"||e=="NEFT"||e=="DD",then:e=>e.required("This field is required")}).max(L(),"Please select valid date"),branchName:d().when("paymentMode",{is:e=>e=="CHEQUE"||e=="NEFT"||e=="DD",then:e=>e.required("This field  is required")}),remarks:d().when("paymentMode",{is:e=>e=="CHEQUE"||e=="NEFT"||e=="DD",then:e=>e.required("This field is required")}),neftImage:d().when("paymentMode",{is:e=>e=="CHEQUE"||e=="NEFT"||e=="DD",then:e=>e.required("This field is required")}),paidAmount:d().when("paymentType",{is:e=>e=="isPartPayment",then:e=>e.required("This field is required")})}),l=A({initialValues:{chequeDate:"",bankName:"",branchName:"",chequeNo:"",paymentMode:"",paymentType:"",remarks:"",neftImage:"",paidAmount:(x=t==null?void 0:t.applicationDetails)==null?void 0:x.proccess_fee},enableReinitialize:!0,onSubmit:e=>{console.log("values at submit payment",e),q(e)},validationSchema:P}),q=e=>{I("You are proceeding for payment...").then(i=>{i!=null&&i.isConfirmed&&((e==null?void 0:e.paymentMode)!="ONLINE"?k(t==null?void 0:t.id,e):v(t==null?void 0:t.id))})},k=(e,i)=>{o(!0),j.post(`${E}`,{id:e,...i},p()).then(function(s){console.log("offline payment...",s==null?void 0:s.data),s.data.status?(toast.success("Payment done Successfully"),setpaymentStatus(!0),U("Payment Success")):(toast.warn("Payment Failed"),o(!1)),o(!1)}).catch(function(s){console.log("at error part.",s),o(!1)})},v=()=>{o(!0),j.post(`${BackendUrl}/api/payment/v1/get-referal-url`,{propId:id},p()).then(function(e){console.log("response.",e.data),e.data.status&&window.open(e.data.data),o(!1)}).catch(function(e){console.log("at error part.",e),seterroState(!0),o(!1)})},S=e=>{let i=e.target.name,s=e.target.value;i=="paymentMode"&&(s=="CASH"||s=="ONLINE"?u(!1):u(!0)),i=="paymentMode"&&(s=="CHEQUE"&&m("CHEQUE"),s=="NEFT"&&m("NEFT"),s=="DD"&&m("DD"),s=="CASH"&&m("DD")),i=="neftImage"&&C(e.target.files[0]),i=="chequeNo"&&l.setFieldValue("chequeNo",allowNumberInput(s,l.values.chequeNo,15))},C=e=>{console.log("files",e),l.setFieldValue("neftImage",e)};return c.useEffect(()=>{console.log("payment",t==null?void 0:t.applicationDetails)},[t==null?void 0:t.id]),a.jsxs("div",{className:" border border-green-500",style:{width:"60vw",height:"60vh"},children:[D&&a.jsx(Q,{}),a.jsxs("div",{className:"h-full p-4  mx-auto bg-gray-100 ",children:[a.jsxs("div",{className:"py-2 shadow-lg my-2 bg-white",children:[a.jsxs("div",{className:"w-full bg-white h-auto flex flex-wrap rounded p-2 gap-4",children:[a.jsxs("div",{className:"w-full md:w-1/4",children:[a.jsx("p",{className:"font-semibold text-md text-gray-600",children:(h=t==null?void 0:t.applicationDetails)==null?void 0:h.saf_no}),a.jsx("p",{className:"text-xs text-gray-400",children:"Application No."})]}),a.jsxs("div",{className:"w-full md:w-1/4",children:[a.jsx("p",{className:"font-semibold text-md text-gray-600",children:(b=t==null?void 0:t.applicationDetails)==null?void 0:b.prop_address}),a.jsx("p",{className:"text-xs text-gray-400",children:"Address."})]}),a.jsxs("div",{className:"w-full md:w-1/4",children:[a.jsxs("p",{className:"font-semibold text-md text-gray-600",children:["â‚¹ ",(f=t==null?void 0:t.applicationDetails)==null?void 0:f.sale_value]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Sale Value."})]}),a.jsxs("div",{className:"w-full md:w-1/4",children:[a.jsxs("p",{className:"font-semibold text-md text-gray-600 whitespace-nowrap",children:[" ",(g=t==null?void 0:t.applicationDetails)==null?void 0:g.property_type]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Property Type."})]})]}),a.jsxs("h1",{className:"font-normal text-2xl font-poppins text-left p-1 ",children:["Transfer fee : ",a.jsx("span",{className:"font-semibold text-2xl font-poppins text-left",children:(y=t==null?void 0:t.applicationDetails)==null?void 0:y.proccess_fee})," "]})]}),a.jsx("div",{className:"shadow-lg p-2 bg-white",children:a.jsxs("form",{onSubmit:l.handleSubmit,onChange:S,children:[a.jsxs("select",{name:"paymentMode",onChange:l.handleChange,value:l.values.paymentMode,id:"paymentMode",className:"px-4 py-1.5 rounded border w-2/3",children:[a.jsx("option",{value:"",children:" Select payment mode"}),a.jsxs("option",{value:"CASH",children:[" ",n("mainSafPaymentDetailPage.cashLabel.label")]}),a.jsxs("option",{value:"CHEQUE",children:[" ",n("mainSafPaymentDetailPage.chequeLabel.label")]}),a.jsxs("option",{value:"DD",children:[" ",n("mainSafPaymentDetailPage.ddLabel.label")]}),a.jsx("option",{value:"NEFT",children:n("mainSafPaymentDetailPage.neftLabel.label")})]})," ",a.jsx("br",{}),a.jsx("span",{className:"text-red-600 absolute text-xs",children:l.touched.paymentMode&&l.errors.paymentMode?l.errors.paymentMode:null}),a.jsxs("div",{className:`${w?"block":"hidden"} w-full grid grid-cols-1 md:grid-cols-4 mt-5`,children:[a.jsxs("div",{className:"form-group md:px-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[r=="CHEQUE"&&"Cheque",r=="NEFT"&&"NEFT",r=="DD"&&"DD"," ",n("mainSafPaymentDetailPage.dateLabel.label"),a.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:" * "})]}),a.jsx("input",{name:"chequeDate",value:"chequeDate",...l.getFieldProps("chequeDate"),type:"date",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),a.jsx("span",{className:"text-red-600 absolute text-xs",children:l.touched.chequeDate&&l.errors.chequeDate?l.errors.chequeDate:null})]}),a.jsxs("div",{className:"form-group mb-6  md:px-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[n("mainSafPaymentDetailPage.bankNameLabel.label"),a.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsx("input",{...l.getFieldProps("bankName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Bank Name."}),a.jsxs("span",{className:"text-red-600 absolute text-xs",children:[" ",l.touched.bankName&&l.errors.bankName?l.errors.bankName:null]})]}),a.jsxs("div",{className:"form-group mb-6  md:px-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[n("mainSafPaymentDetailPage.branchNameLabel.label"),a.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsx("input",{...l.getFieldProps("branchName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Branch Name."}),a.jsx("span",{className:"text-red-600 absolute text-xs",children:l.touched.branchName&&l.errors.branchName?l.errors.branchName:null})]}),a.jsxs("div",{className:"form-group mb-6  md:px-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[r=="CHEQUE"&&"Cheque",r=="NEFT"&&"NEFT",r=="DD"&&"DD"," No.",a.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"  * "})]}),a.jsx("input",{...l.getFieldProps("chequeNo"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Cheque No."}),a.jsx("span",{className:"text-red-600 absolute text-xs",children:l.touched.chequeNo&&l.errors.chequeNo?l.errors.chequeNo:null})]}),a.jsxs("div",{className:"form-group mb-6  md:px-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[n("mainSafPaymentDetailPage.paymentRemarkLabel.label"),a.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsx("input",{...l.getFieldProps("remarks"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Remarks.."}),a.jsx("span",{className:"text-red-600 absolute text-xs",children:l.touched.remarks&&l.errors.remarks?l.errors.remarks:null})]}),a.jsxs("div",{className:"form-group mb-6  md:px-4",children:[a.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[r=="CHEQUE"&&"Cheque",r=="NEFT"&&"NEFT",r=="DD"&&"DD",n("mainSafPaymentDetailPage.imageLabel.label"),a.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"})]}),a.jsx("input",{name:"neftImage",onChange:l.handleChange,type:"file",className:"form-control block w-full px-3 py-1 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter Remarks.."}),a.jsx("span",{className:"text-red-600 absolute text-xs",children:l.touched.neftImage&&l.errors.neftImage?l.errors.neftImage:null})]})]}),a.jsx("div",{className:"w-full flex  mt-5 mx-3 capitalize",children:a.jsxs("button",{type:"submit",className:`${_}  max-h-10 uppercase mx-2`,children:[n("mainSafPaymentDetailPage.payLabel.label")," â‚¹ ",(N=t==null?void 0:t.applicationDetails)==null?void 0:N.proccess_fee]})})]})})]})]})}export{B as P};
