import{r as s,_ as J,u as P,X as K,e as ee,ak as v,q as ae,s as M,a as le,w as te,A as g,b as p,Q as _,j as a,V as r,o as se,O as ne,P as oe}from"./index-a4ad5da6.js";import"./index-c5309e18.js";const re=s.lazy(()=>J(()=>import("./index-a4ad5da6.js").then(m=>m.cU),["assets/index-a4ad5da6.js","assets/index-80e83f1b.css"])),ve=()=>{const m=s.useRef(),[ce,h]=s.useState(null),[de,L]=s.useState(""),[ie,R]=s.useState("");s.useState(null),s.useState(null),s.useState("");const[z,d]=s.useState(!1),[ue,b]=s.useState(!1),[xe,F]=s.useState(!1),[me,O]=s.useState(""),[w,D]=s.useState(null),{type:he,filterParam:y,searchValueParam:f}=P();s.useState(""),s.useState(null),s.useRef(),P();const{t:n}=K();ee(),s.useState("null");const[N,E]=s.useState([]);let q=new Date().toLocaleDateString("in-IN"),I=v(q).format("DD-MM-YYYY");const[j,H]=s.useState([]);s.useState(!0),s.useState();const[k,S]=s.useState(0),c="form-control block w-full px-2 py-1 font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none shadow-md",{collectionReportDaily:fe,searchTransaction:V,get_collectorList:W,api_newWardByZoneId:U,api_filterPropertyDetails:Z}=oe(),T=(e,t)=>{console.log(e,t),F(e),O(t)},Y=ae({fromDate:M().required("Field Required"),uptoDate:M().required("Field Required")});le("Deactivated Transaction");const l=te({initialValues:{fromDate:v(new Date).format("yy-MM-DD"),uptoDate:v(new Date).format("yy-MM-DD"),paymentMode:"",zoneId:"",wardId:"",userId:"",transactionNo:"",tranType:""},onSubmit:e=>{C(),S(t=>t+1)},validationSchema:Y}),C=()=>{d(!0);let e={fromDate:l.values.fromDate,uptoDate:l.values.uptoDate,paymentMode:l.values.paymentMode,zoneId:l.values.zoneId,wardId:l.values.wardId,userId:l.values.userId,transactionNo:l.values.tranNo,tranType:l.values.selectedModuleOption};g.post(V,e,p()).then(t=>{var o,i,u,x,A;(o=t==null?void 0:t.data)!=null&&o.status?(h((i=t==null?void 0:t.data)==null?void 0:i.data),console.log("::::::Response Search::::::",h)):(T(!0,(u=t==null?void 0:t.data)==null?void 0:u.message),_.error((x=t==null?void 0:t.data)==null?void 0:x.message)),d(!1),console.log("::::::Response Search::::::",(A=t==null?void 0:t.data)==null?void 0:A.data[0].payment_mode)}).catch(t=>{m.current.close(),T(!0,"Oops! Something went wrong."),_.error("Oops! Something went wrong."),console.log("::::::Error Search::::::",t),d(!1)})};s.useEffect(()=>{C()},[]);const $=e=>{d(!0),l.setFieldValue("wardId","");let t={zoneId:e};console.log("before fetch wardby old ward...",t),g.post(U,t,p()).then(function(o){console.log("wardlist by zone id list ....",o.data.data),E(o.data.data),d(!1)}).catch(function(o){console.log("errorrr.... ",o),d(!1)})},Q=e=>{d(!0),l.setFieldValue("wardId","");let t={userId:l.values.userId};g.post(W,t,p()).then(o=>{var i,u,x;((i=o==null?void 0:o.data)==null?void 0:i.status)==!0&&(H((u=o==null?void 0:o.data)==null?void 0:u.data),console.log("this is collector data",(x=o==null?void 0:o.data)==null?void 0:x.data)),b(!1)}).catch(o=>b(!1))};s.useEffect(()=>{Q()},[]);const X=e=>{(e==null?void 0:e.filterBy)=="tranNo"?D({filteredBy:e==null?void 0:e.filterBy,zoneId:e==null?void 0:e.zoneId,wardId:e==null?void 0:e.wardId,maujaName:e==null?void 0:e.maujaName,isLegacy:!1}):D({filteredBy:e==null?void 0:e.filterBy,zoneId:e==null?void 0:e.zoneId,wardId:e==null?void 0:e.wardId,parameter:e==null?void 0:e.parameter,wardId:e==null?void 0:e.wardId}),S(t=>t+1)},G=[{Header:`${n("mainCollectionReportPage.sNo.label")}`,Cell:({row:e})=>a.jsx("div",{children:(e==null?void 0:e.index)+1}),className:"w-[5%]"},{Header:"Type",accessor:"holding_no",Cell:e=>r(e==null?void 0:e.value)},{Header:"Ward No.",accessor:"'ward_No.'",Cell:e=>r(e==null?void 0:e.value)},{Header:"Application No.",accessor:"application_no",Cell:e=>r(e==null?void 0:e.value)},{Header:"Tran. No.",accessor:"tran_no",Cell:e=>r(e==null?void 0:e.value)},{Header:"Tran. Date",accessor:"tran_date",Cell:e=>r(e==null?void 0:e.value)},{Header:"Tran. Mode",accessor:"tran_mode",Cell:e=>r(e==null?void 0:e.value)},{Header:"Cheque/DD No.",accessor:"ChequeDD_No",Cell:e=>r(e==null?void 0:e.value)},{Header:"Bank Name",accessor:"Bank_Name",Cell:e=>r(e==null?void 0:e.value)},{Header:"Amount",accessor:"Amount",Cell:e=>r(e==null?void 0:e.value)}];s.useEffect(()=>{f!="direct"&&(l.setFieldValue("filterBy",decodeURIComponent(y)),l.setFieldValue("parameter",decodeURIComponent(f)),X({filterBy:decodeURIComponent(y),parameter:decodeURIComponent(f)}))},[]);const B=e=>{let t=e.target.name,o=e.target.value;t=="zoneId"&&$(o)};return a.jsxs(a.Fragment,{children:[a.jsxs("form",{onChange:l.handleChange,onSubmit:l.handleSubmit,className:"mb-4 bg-white shadow-lg rounded-md ",children:[a.jsx("h1",{className:"text-xl w-full font-bold px-8 pt-4 text-gray-700",children:"Search Deactivated Transaction"}),a.jsxs("div",{className:"flex flex-wrap flex-row justify-start w-full gap-x-6 gap-y-2 text-sm 3xl:text-base p-4 px-8",children:[a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsxs("div",{className:"col-span-6 font-semibold",children:[n("tranActualTaxBillPage.fromDate.label")," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"col-span-6",children:a.jsx("input",{type:"date",name:"fromDate",value:l.values.fromDate,id:"fromDate",className:c,defaultValue:I})}),a.jsx("div",{className:"col-span-12 text-end",children:l.touched.fromDate&&l.errors.fromDate&&a.jsx(a.Fragment,{children:a.jsx("span",{className:"text-red-600 text-xs",children:l.errors.fromDate})})})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsxs("div",{className:"col-span-6 font-semibold",children:[n("tranActualTaxBillPage.uptoDate.label")," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"col-span-6",children:a.jsx("input",{type:"date",name:"uptoDate",value:l.values.uptoDate,id:"uptoDate",className:c,defaultValue:I})}),a.jsx("div",{className:"col-span-12 text-end",children:l.touched.uptoDate&&l.errors.uptoDate&&a.jsx(a.Fragment,{children:a.jsx("span",{className:"text-red-600 text-xs",children:l.errors.uptoDate})})})]}),a.jsxs("div",{className:'className="flex flex-col w-full md:w-[20%]',children:[a.jsxs("div",{className:"col-span-6 font-semibold",children:[n("tranActualTaxBillPage.zoneLabel.label"),a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"zoneId",onChange:B,className:c,children:[a.jsx("option",{value:"",children:n("tranActualTaxBillPage.AllZones.label")}),a.jsx("option",{value:"1",children:n("tranActualTaxBillPage.ZoneAEast.label")}),a.jsx("option",{value:"2",children:n("tranActualTaxBillPage.ZoneBWest.label")}),a.jsx("option",{value:"3",children:n("tranActualTaxBillPage.ZoneCNorth.label")}),a.jsx("option",{value:"4",children:n("tranActualTaxBillPage.ZoneDSouth.label")})]}),a.jsx("p",{className:"text-red-500 text-xs",children:l.touched.zoneId&&l.errors.zoneId?l.errors.zoneId:null})]}),a.jsxs("div",{className:'className="flex flex-col w-full md:w-[20%]',children:[a.jsxs("div",{className:"col-span-6 font-semibold",children:[n("tranActualTaxBillPage.wardNoLabel.label"),a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"wardId",onChange:B,className:c,children:[a.jsx("option",{value:"",children:n("tranActualTaxBillPage.AllWard.label")}),N==null?void 0:N.map((e,t)=>a.jsx("option",{value:e.id,children:e.ward_name},t))]}),a.jsx("p",{className:"text-red-500 text-xs",children:l.touched.wardNo&&l.errors.wardNo?l.errors.wardNo:null})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:n("tranActualTaxBillPage.paymentMode.label")}),a.jsx("div",{className:"col-span-6",children:a.jsxs("select",{name:"paymentMode",id:"",onChange:l.handleChange,className:c,children:[a.jsx("option",{value:"ALL",children:n("tranActualTaxBillPage.All.label")}),a.jsx("option",{value:"CASH",children:n("tranActualTaxBillPage.Cash.label")}),a.jsx("option",{value:"CHEQUE",children:n("tranActualTaxBillPage.Cheque.label")}),a.jsx("option",{value:"DD",children:n("tranActualTaxBillPage.DD.label")}),a.jsx("option",{value:"ONLINE",children:n("tranActualTaxBillPage.Online.label")})]})})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsx("div",{className:"col-span-6 font-semibold",children:n("tranActualTaxBillPage.collectorName.label")}),a.jsx("div",{className:"col-span-6",children:a.jsxs("select",{name:"userId",id:"",className:c,onChange:l.handleChange,children:[a.jsx("option",{value:"",children:n("tranActualTaxBillPage.All.label")}),j==null?void 0:j.map(e=>a.jsx(a.Fragment,{children:a.jsx("option",{value:e==null?void 0:e.id,children:a.jsx("span",{className:"capitalize",children:e==null?void 0:e.user_name})})}))]})})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsxs("div",{className:"col-span-12 md:col-span-6 font-semibold",children:["Module Name",a.jsx("span",{className:"text-red-500 text-xs",children:"*"})]}),a.jsxs("select",{value:l.values.selectedModuleOption,name:"selectedModuleOption",onChange:e=>R(e.target.value),className:c,children:[a.jsx("option",{value:"",children:"Select"}),a.jsx("option",{value:"Property",children:"Property"}),a.jsx("option",{value:"Water",children:"Water"}),a.jsx("option",{value:"Trade",children:"Trade"})]}),a.jsx("div",{className:"col-span-12 text-end",children:l.touched.selectedModuleOption&&l.errors.selectedModuleOption&&a.jsx(a.Fragment,{children:a.jsx("span",{className:"text-red-600 text-xs",children:l.errors.selectedModuleOption})})})]}),a.jsxs("div",{className:"flex flex-col w-full md:w-[20%]",children:[a.jsxs("div",{className:"col-span-12 md:col-span-6 font-semibold",children:["Transaction No.",a.jsx("span",{className:"text-red-500 text-xs",children:"*"})]}),a.jsx("div",{className:"col-span-12 md:col-span-6",children:a.jsx("input",{type:"text",value:l.values.tranNo,name:"tranNo",tranNo:e=>L(e.target.value),id:"",className:c})}),a.jsx("div",{className:"col-span-12 text-end",children:l.touched.tranNo&&l.errors.tranNo&&a.jsx(a.Fragment,{children:a.jsx("span",{className:"text-red-600 text-xs",children:l.errors.tranNo})})})]}),a.jsx("div",{className:"w-full md:w-[20%] flex justify-start items-end",children:z?a.jsx(a.Fragment,{children:a.jsx("div",{className:"flex justify-start items-end",children:a.jsx(se,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"25",visible:!0})})}):a.jsxs("button",{type:"submit",className:"flex flex-row items-center border border-green-600 bg-green-600 hover:bg-green-500 text-white hover:text-black shadow-lg rounded-sm text-sm font-semibold px-5 py-1 w-max",children:[" ",a.jsx("span",{className:"mr-2",children:a.jsx(ne,{})})," ",n("tranActualTaxBillPage.searchLabel.label")]})})]})]}),a.jsx("div",{className:"mt-10",children:w!==null?a.jsx(re,{getData:!0,allData:e=>h(e),type:"old",api:Z,columns:G,requestBody:w,changeData:k}):a.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 text-center rounded relative mt-2",children:a.jsx("span",{className:"block sm:inline",children:"No any transaction found."})})})]})};export{ve as default};
