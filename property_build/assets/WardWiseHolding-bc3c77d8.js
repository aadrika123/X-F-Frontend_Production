import{X as I,r as i,u as S,a as z,e as A,J as Z,q as $,w as B,j as e,n as t,B as W,O as D,ab as L,g as k,A as F,b as R}from"./index-1ad70cc9.js";import{s as q}from"./search-6298cbb5.js";function O(){const{t:n}=I();i.useState("");const{type:r,filterParam:h,searchValueParam:g}=S(),[m,x]=i.useState(null),[u,p]=i.useState(0),[d,b]=i.useState([]),[j,c]=i.useState(!1);z("Ward wise holding"),console.log("search params...",r," ",h," ",g);const{api_newWardByZoneId:f,api_filterPropertyDetails:w}=k(),N=A();Z(),console.log("last url.......");const y=a=>{x({zoneId:a==null?void 0:a.zoneId,wardId:a==null?void 0:a.wardId,isLegacy:!1}),p(s=>s+1)},v=a=>{c(!0),l.setFieldValue("wardId","");let s={zoneId:a};console.log("before fetch wardby old ward...",s),F.post(f,s,R()).then(function(o){console.log("wardlist by zone id list ....",o.data.data),b(o.data.data),c(!1)}).catch(function(o){console.log("errorrr.... ",o),c(!1)})},H=$({}),l=B({initialValues:{wardId:"",zoneId:""},enableReinitialize:!0,onSubmit:a=>{y(a)},validationSchema:H}),_=(a,s)=>{N(`/holdingPropertyDetails/${s}`)},C=[{Header:"Sl No.",Cell:({row:a})=>e.jsx("div",{className:"pr-2",children:(a==null?void 0:a.index)+1})},{Header:`${n("mainHoldingPage.propertyZone.label")}`,accessor:"zone_name",Cell:({cell:a})=>e.jsxs("div",{children:[e.jsx("span",{children:a.row.original.zone_name=="A"&&"A-East Zone"}),e.jsx("span",{children:a.row.original.zone_name=="B"&&"B-West Zone"}),e.jsx("span",{children:a.row.original.zone_name=="C"&&"C-North Zone"}),e.jsx("span",{children:a.row.original.zone_name=="D"&&"D-South Zone"})]})},{Header:`${n("mainHoldingPage.holdingWardNumber.label")}`,accessor:"ward_name"},{Header:`${n("mainHoldingPage.filterByOwnerName.label")}`,accessor:"owner_name"},{Header:`${n("mainHoldingPage.propertyNo.label")}`,accessor:"pt_no",Cell:({cell:a})=>e.jsx("span",{children:t(a.row.original.property_no)})},{Header:`${n("mainHoldingPage.holdingNumber.label")}`,accessor:"holding_no",Cell:({cell:a})=>e.jsx("span",{children:t(a.row.original.holding_no)})},{Header:`${n("mainHoldingPage.holdingMobileNumber.label")}`,accessor:"mobile_no",Cell:({cell:a})=>e.jsx("span",{children:t(a.row.original.mobile_no)})},{Header:`${n("mainHoldingPage.holdingAddress.label")}`,accessor:"prop_address",Cell:({cell:a})=>e.jsx("span",{children:t(a.row.original.prop_address)})},{Header:`${n("mainHoldingPage.holdingStatus.label")}`,Cell:({cell:a})=>e.jsx("div",{children:a.row.original.paid_status===2&&e.jsx("span",{className:"text-red-600 font-semibold",children:"Payment Pending"})})},{Header:`${n("mainHoldingPage.holdingAction.label")}`,accessor:"id",Cell:({cell:a})=>e.jsx("div",{children:e.jsx("button",{onClick:s=>_(s,a.row.values.id),className:"bg-indigo-500 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-indigo-700 text-white",children:n("mainHoldingPage.holdingView.label")})})}],P=a=>{let s=a.target.name,o=a.target.value;s=="zoneId"&&v(o)};return e.jsxs(e.Fragment,{children:[j&&e.jsx(W,{}),(r=="re"||r=="mu")&&e.jsxs("div",{className:"bg-amber-50 px-4 py-4 mb-4 text-lg rounded-lg shadow-lg text-amber-600 inline-block",children:[e.jsx(AiFillInfoCircle,{className:"inline mr-2 text-3xl"}),"For ",e.jsx("span",{className:"font-semibold",children:r=="re"?"Re-Assessment":"Mutation"})," of property search the property and then apply for ",r=="re"?"Re-Assessment":"Mutation"]}),e.jsxs("div",{className:"border shadow-xl bg-white mt-6",children:[e.jsxs("div",{className:"hidden sm:flex  ml-5 mt-2 ",children:[e.jsx("img",{src:q,alt:"",className:"w-10 h-10"}),e.jsx("p",{className:"font-bold text-3xl ml-4 mt-1 text-gray-600",children:"Search ward wise demand"})]}),e.jsx("form",{onSubmit:l.handleSubmit,onChange:P,children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center sm:space-x-8 my-5 m-10",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Zone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"zoneId",onChange:l.handleChange,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",disabled:!1,children:[e.jsx("option",{value:"",children:"All Zones"}),e.jsx("option",{value:"1",children:"Zone A-East"}),e.jsx("option",{value:"2",children:"Zone B-West"}),e.jsx("option",{value:"3",children:"Zone C-North"}),e.jsx("option",{value:"4",children:"Zone D-South"})]}),e.jsx("p",{className:"text-red-500 text-xs",children:l.touched.zoneId&&l.errors.zoneId?l.errors.zoneId:null})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:["Ward No",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"wardId",onChange:l.handleChange,className:"cursor-pointer w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",disabled:!1,children:[e.jsx("option",{value:"",children:"All Ward"}),d==null?void 0:d.map((a,s)=>e.jsx("option",{value:a.id,children:a.ward_name},s))]}),e.jsx("p",{className:"text-red-500 text-xs",children:l.touched.wardNo&&l.errors.wardNo?l.errors.wardNo:null})]}),"   ",e.jsx("div",{className:"mt-6",children:e.jsxs("button",{type:"submit",className:"cypress_submit_holding_search w-full border rounded-md border-indigo-700 bg-indigo-600 hover:bg-indigo-700 text-white  shadow-lg text-base font-semibold px-5 sm:m-3 py-1",children:[" ",e.jsxs("p",{className:"flex",children:[" ",e.jsxs("span",{className:"mt-1 mr-2",children:[" ",e.jsx(D,{})," "]})," ",n("mainHoldingPage.searchHoldingRecord.label")]})]})})]})})]}),e.jsxs("div",{className:"mt-10",children:[m!=null&&e.jsx(L,{api:w,columns:C,requestBody:m,changeData:u}),e.jsx("div",{className:"w-full h-40"})]})]})}export{O as default};
