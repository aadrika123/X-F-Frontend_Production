import{Y as de,r,e as oe,u as me,a as ye,j as e,L as he,W as i,A as J,b as K,an as fe}from"./index-5d82dc0d.js";import{P as ge}from"./PaymentCard-01c255ee.js";import"./RazorpayPaymentScreen-f730dbf5.js";function we(pe){var P,b,u,N,v,j,w,_,S,A,T,I,B,C,H,L,z,$,R;const{t}=de(),[V,o]=r.useState(!1);r.useState();const[s,X]=r.useState(),[Pe,Z]=r.useState();r.useState(!1),r.useState(null);const[be,D]=r.useState(null),[ee,ue]=r.useState(null),[h,se]=r.useState(null),[ae,te]=r.useState(null),[f,le]=r.useState(0),m=oe(),{id:n,moduleType:a}=me(),{zeroDemandPayment:ie,api_getHoldingDemandById:re,api_getsafDemandById:g,api_getClusterSafDemandById:ce,api_getClusterHoldingDemandById:ne}=fe();ye(`${t("mainPropertyPaymentPage.paymentScreen.label")}`);const p=(y=null,c=null)=>{o(!0);let x,d;a=="holding"&&(x=re,d={propId:n,fYear:y,qtr:c}),a=="saf"&&(x=g,d={id:n}),a=="gbsaf"&&(x=g,d={id:n,fYear:y,qtr:c}),a=="cluster-saf"&&(x=ce,d={clusterId:n}),a=="cluster-holding"&&(x=ne,d={clusterId:n}),J.post(x,d,K()).then(function(l){var U,q,E,F,M,W,Y,k,G,O,Q;X((U=l==null?void 0:l.data)==null?void 0:U.data),Z(l==null?void 0:l.data),o(!1),((E=(q=l==null?void 0:l.data)==null?void 0:q.data)==null?void 0:E.paymentStatus)===1&&a=="saf"&&m(`/viewDemand/${n}`),te((W=(M=(F=l==null?void 0:l.data)==null?void 0:F.data)==null?void 0:M.amounts)==null?void 0:W.isPayable),((G=(k=(Y=l==null?void 0:l.data)==null?void 0:Y.data)==null?void 0:k.amounts)==null?void 0:G.isPayable)==!1&&xe(),((Q=(O=l==null?void 0:l.data)==null?void 0:O.data)==null?void 0:Q.paymentStatus)===1&&a=="holding"&&m(`/viewDemandHoldingProperty/${n}`),le(f+1)}).catch(function(l){o(!1)})},xe=()=>{o(!0),seterroState(!1);let y={id:n,paymentMode:"Online"};J.post(ie,y,K()).then(c=>{var x,d,l;(x=c==null?void 0:c.data)!=null&&x.status?se((l=(d=c==null?void 0:c.data)==null?void 0:d.data)==null?void 0:l.TransactionNo):seterroState(!0)}).catch(c=>{seterroState(!0)}).finally(()=>o(!1))};return r.useEffect(()=>{p()},[]),e.jsxs(e.Fragment,{children:[V&&e.jsx(he,{}),e.jsxs("div",{className:"sm:p-10 p-2",children:[e.jsxs("div",{className:"w-full bg-white shadow-xl mb-6",children:[a!="cluster-saf"&&a!="cluster-holding"&&e.jsxs("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[a!="saf"&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((P=s==null?void 0:s.basicDetails)==null?void 0:P.holding_no)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[t("mainPropertyPaymentPage.holdingNo.label"),"."]})]}),(a=="saf"||a=="gbsaf")&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((b=s==null?void 0:s.basicDetails)==null?void 0:b.saf_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.applicationNo.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((u=s==null?void 0:s.basicDetails)==null?void 0:u.old_ward_no)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:["Ward No.",t("mainPropertyPaymentPage.wardNo.label")]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:i((N=s==null?void 0:s.basicDetails)==null?void 0:N.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.newWardNo.label")})]}),a!="gbsaf"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:i((v=s==null?void 0:s.basicDetails)==null?void 0:v.ownership_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.ownershipType.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((j=s==null?void 0:s.basicDetails)==null?void 0:j.property_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.propertyType.label")})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:i((w=s==null?void 0:s.basicDetails)==null?void 0:w.ownership_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.govtBuildingUsageType.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((_=s==null?void 0:s.basicDetails)==null?void 0:_.property_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.propertyUsageType.label")})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-10  pl-4 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((S=s==null?void 0:s.basicDetails)==null?void 0:S.zone_mstr_id)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.zone.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((A=s==null?void 0:s.basicDetails)==null?void 0:A.is_mobile_tower)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[t("mainPropertyPaymentPage.propertyHasMobileTower.label")," ?"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:i((T=s==null?void 0:s.basicDetails)==null?void 0:T.is_hoarding_board)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[t("mainPropertyPaymentPage.propertyHasHoardingBoard.label")," ?"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:i((I=s==null?void 0:s.basicDetails)==null?void 0:I.is_petrol_pump)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[t("mainPropertyPaymentPage.isPropertyPetrolPump.label")," ?"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((B=s==null?void 0:s.basicDetails)==null?void 0:B.is_water_harvesting)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[t("mainPropertyPaymentPage.rainwaterHarvestingProvision.label")," ?"]})]})]})]}),(a=="cluster-saf"||a=="cluster-holding")&&e.jsx("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((C=s==null?void 0:s.basicDetails)==null?void 0:C.cluster_name)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.clusterName.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i((H=s==null?void 0:s.basicDetails)==null?void 0:H.cluster_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.clusterType.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm",children:i((L=s==null?void 0:s.basicDetails)==null?void 0:L.authorized_person_name)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.authorizedPersonName.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-sm",children:i((z=s==null?void 0:s.basicDetails)==null?void 0:z.mobile_no)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[t("mainPropertyPaymentPage.mobileNo.label"),"."]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i(($=s==null?void 0:s.basicDetails)==null?void 0:$.address)}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.address.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:i(new Date((R=s==null?void 0:s.basicDetails)==null?void 0:R.created_at).toLocaleDateString("en-GB"))}),e.jsx("div",{className:"text-gray-500 text-xs",children:t("mainPropertyPaymentPage.createdAt.label")})]})]})})]}),e.jsx("div",{children:ae==!1?e.jsx("div",{className:"w-full h-full bg-white p-20",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-center font-semibold text-3xl",children:[t("mainPropertyPaymentPage.applicationSubmittedMessage.label")," !"]}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("button",{className:"mr-4 bg-indigo-500  text-white px-6 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>m(`/paymentReceipt/${a=="cluster-saf"||a=="cluster-holding",encodeURIComponent(h)}/${a=="cluster-saf"||a=="cluster-holding"?a=="cluster-saf"?"cluster-saf":"cluster-holding":a=="saf"||a=="gbsaf"?"saf":"holding"}`),children:t("mainPropertyPaymentPage.viewReceipt.label")}),a!="direct"&&e.jsx("button",{className:"mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>m(`/propApplicationDetails/${n}`),children:t("mainPropertyPaymentPage.viewApplication.label")})]})]})}):e.jsx(ge,{reset:f,selectedPaymentQtr:ee,selectedPaymentYear:D,fetchDemandDetail:p,basicDetails:s==null?void 0:s.basicDetails,safPaymentDetailsData:s==null?void 0:s.amounts,paymentDetails:a=="cluster-saf"?s==null?void 0:s.demand:s==null?void 0:s.duesList})})]}),e.jsx("div",{className:"w-full h-40 md:none"})]})}export{we as default};
