import{a as Ce,e as ye,R as ke,r as o,A as H,b as U,j as e,K as ge,ac as Te,af as Ae,dE as Se,n as i,i as y,as as _e,aW as Pe,P as je,Q as me,p as Ee,q as Me,v as Ve,t as qe,a7 as Le,U as Be}from"./index-161aea56.js";const He={overlay:{background:"rgba(0, 0, 0, 0.5)",overflowY:"scroll"}};function Ue(r){var se,te,ne,le,de,oe,ce,ie,xe,he,ue,be;Ce("Cash Verification");const W=ye(),{api_verifiedTcCollection:Z,api_notVerifiedTcCollection:M,api_verifyTcCollection:Y,api_chequeDdUpdate:C}=je(),[K,z]=ke.useState(!1),[s,Q]=o.useState(),[F,p]=o.useState(!1);o.useState(!1),o.useState(null);const[R,G]=o.useState(!1),[f,k]=o.useState([]),[I,J]=o.useState(!1),[v,T]=o.useState([]),[E,X]=o.useState(!1),[A,S]=o.useState([]),[x,V]=o.useState(!1),[N,d]=o.useState([]),[t,u]=o.useState(null),[l,j]=o.useState(["cash","cheque","dd"]),[ze,Ne]=o.useState([]),[D,ee]=o.useState(""),[ae,_]=o.useState(!1),fe=o.useRef(),ve=o.useRef();o.useEffect(()=>{!r||!r.data||(k([]),T([]),S([]),_(!1),re())},[r==null?void 0:r.data]);const re=()=>{var c,m,q;p(!0);let a;(r==null?void 0:r.reportType)=="1"?a={date:(c=r==null?void 0:r.data)==null?void 0:c.date,userId:(m=r==null?void 0:r.data)==null?void 0:m.id}:a={tranNo:(q=r==null?void 0:r.data)==null?void 0:q.tranNo};let n;(r==null?void 0:r.reportType)=="1"&&(n=M),(r==null?void 0:r.reportType)=="2"&&(n=Z),H.post(n,a,U()).then(g=>{var L,B,h;(L=g==null?void 0:g.data)!=null&&L.status?Q((B=g==null?void 0:g.data)==null?void 0:B.data):(r==null||r.activateBottomErrorCard(!0,(h=g==null?void 0:g.data)==null?void 0:h.message),P())}).catch(g=>{r==null||r.activateBottomErrorCard(!0,"Some error occured. Please try again later."),P()}).finally(()=>p(!1))};o.useEffect(()=>{r.openAddPopUP>0&&z(!0)},[r==null?void 0:r.openAddPopUP]);function P(){z(!1),Ne([])}const pe=()=>{if((f==null?void 0:f.length)==0&&(v==null?void 0:v.length)==0&&(A==null?void 0:A.length)==0&&(N==null?void 0:N.length)==0){r==null||r.activateBottomErrorCard(!0,"Select atleast one transaction to verify !!!");return}p(!0);const a={property:f,water:v,trade:A,advertisement:N};H.post(Y,a,U()).then(n=>{var c,m;(c=n==null?void 0:n.data)!=null&&c.status?(me.success("Verified Successfully !!!"),r==null||r.refresh()):r==null||r.activateBottomErrorCard(!0,(m=n==null?void 0:n.data)==null?void 0:m.message)}).catch(n=>{r==null||r.activateBottomErrorCard(!0,"Some error occured. Please try again later.")}).finally(()=>{p(!1),P()})},we=()=>{p(!0);const a={chequeNo:t==null?void 0:t.cheque_dd_no,bankName:t==null?void 0:t.bank_name,id:t==null?void 0:t.id,moduleId:t==null?void 0:t.module_id};H.post(C,a,U()).then(n=>{var c,m;(c=n==null?void 0:n.data)!=null&&c.status?(me.success("Updated Successfully !!!"),re()):r==null||r.activateBottomErrorCard(!0,(m=n==null?void 0:n.data)==null?void 0:m.message)}).catch(n=>{r==null||r.activateBottomErrorCard(!0,"Some error occured. Please try again later.")}).finally(()=>{p(!1),_(!1)})},w=a=>{var q,g,L,B;const n=a.target.name,c=a.target.checked,m=a.target.value;if(n=="propertyAll")if(G(c),c){const h=(q=s==null?void 0:s.property)==null?void 0:q.map(b=>b==null?void 0:b.id);k(h)}else k([]);if(n=="property"){if(c)k(h=>[...h,m]);else if(!c&&R!=!0){let h=f==null?void 0:f.filter(b=>b!=m);k(h)}}if(n=="waterAll")if(J(c),c){const h=(g=s==null?void 0:s.water)==null?void 0:g.map(b=>b==null?void 0:b.id);T(h)}else T([]);if(n=="water"){if(c)T(h=>[...h,m]);else if(!c&&I!=!0){let h=v==null?void 0:v.filter(b=>b!=m);T(h)}}if(n=="tradeAll")if(X(c),c){const h=(L=s==null?void 0:s.trade)==null?void 0:L.map(b=>b==null?void 0:b.id);S(h)}else S([]);if(n=="trade"){if(c)S(h=>[...h,m]);else if(!c&&A!=!0){let h=E==null?void 0:E.filter(b=>b!=m);S(h)}}if(n=="advertisementAll")if(V(c),c){const h=(B=s==null?void 0:s.advertisement)==null?void 0:B.map(b=>b==null?void 0:b.id);d(h)}else d([]);if(n=="advertisement"){if(c)d(h=>[...h,m]);else if(!c&&N!=!0){let h=x==null?void 0:x.filter(b=>b!=m);d(h)}}},$=a=>a==null?void 0:a.map(c=>c==null?void 0:c.payment_mode),O=a=>{ee("edit"),u(a),_(!0)};return o.useEffect(()=>{(l==null?void 0:l.length)==0&&j(["cash","cheque","dd","neft"])},[l]),F?e.jsx(ge,{}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{autoClose:2e3}),e.jsx(Ae,{isOpen:K,onRequestClose:P,style:He,className:"absolute left-1/4 h-screen w-2/3 flex justify-center items-center",children:e.jsxs("div",{className:"w-[90vw] md:w-[80vw]",children:[!ae&&e.jsxs("div",{className:"max-h-[90vh] overflow-y-auto bg-white rounded-lg shadow-xl border-2 p-2",children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:"float-right",children:e.jsxs("div",{onClick:P,className:"hover:bg-gray-100 rounded-full w-5 cursor-pointer mr-3",children:[" ",e.jsx(Se,{size:20})]})}),e.jsx("div",{className:"float-left",children:e.jsx("h1",{className:"mb-3 text-2xl ml-5 font-semibold",children:"Collection Details"})})]}),e.jsx("p",{className:"border-b mt-10 mb-6 mx-5 border-gray-100"}),e.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[e.jsx("div",{className:"col-span-4 ",children:e.jsx("div",{className:" bg-gray-50 shadow-md rounded  p-4",children:e.jsx("table",{className:"w-full",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Collector Name :"}),e.jsxs("td",{className:"font-semibold",children:[i(s==null?void 0:s.collectorName)," "]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Transaction Date :"}),e.jsxs("td",{className:"font-semibold",children:[i(s==null?void 0:s.date)," "]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Total Amount :"}),e.jsx("td",{className:"font-semibold",children:y(Math.round(s==null?void 0:s.totalAmount))})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Number of Transaction :"}),e.jsxs("td",{className:"font-semibold",children:[_e(s==null?void 0:s.numberOfTransaction)," "]})]})]})})})}),e.jsx("div",{className:"col-span-8",children:e.jsxs("div",{className:"flex flex-wrap-reverse m-0 gap-2",children:[e.jsxs("div",{className:"bg-gray-50 shadow-md  p-6 m-2 rounded",children:[e.jsx("p",{className:"font-semibold text-3xl",children:y(Math.round(s==null?void 0:s.Cash))}),e.jsx("p",{className:"text-lg font-semibold",children:"Cash"})]}),e.jsxs("div",{className:"bg-gray-50 shadow-md  p-6 m-2 rounded",children:[e.jsx("p",{className:"font-semibold text-3xl",children:y(Math.round(s==null?void 0:s.Cheque))}),e.jsx("p",{className:"text-lg font-semibold",children:"Cheque"})]}),e.jsxs("div",{className:"bg-gray-50 shadow-md  p-6 m-2 rounded",children:[e.jsx("p",{className:"font-semibold text-3xl",children:y(Math.round(s==null?void 0:s.DD))}),e.jsx("p",{className:"text-lg font-semibold",children:"DD"})]}),e.jsxs("div",{className:"bg-gray-50 shadow-md  p-6 m-2 rounded",children:[e.jsx("p",{className:"font-semibold text-3xl",children:y(Math.round(s==null?void 0:s.Neft))}),e.jsx("p",{className:"text-lg font-semibold",children:"NEFT"})]})]})})]}),e.jsx("p",{className:"border-b mt-5 mb-4 mx-5 border-gray-100"}),e.jsxs("div",{className:"flex gap-2 mb-2 ",children:[e.jsx("button",{className:`${(l==null?void 0:l.length)==1&&l.some(a=>a=="cash")?"shadow-lg bg-indigo-500 text-white":"shadow-none"} px-4 py-1 text-sm border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white`,onClick:()=>j(["cash"]),children:"Cash"}),e.jsx("button",{className:`${(l==null?void 0:l.length)==1&&l.some(a=>a=="cheque")?"shadow-lg bg-indigo-500 text-white ":"shadow-none"} px-4 py-1 text-sm border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white`,onClick:()=>j(["cheque"]),children:"Cheque"}),e.jsx("button",{className:`${(l==null?void 0:l.length)==1&&l.some(a=>a=="dd")?"shadow-lg bg-indigo-500 text-white ":"shadow-none"} px-4 py-1 text-sm border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white`,onClick:()=>j(["dd"]),children:"DD"}),e.jsx("button",{className:`${(l==null?void 0:l.length)==1&&l.some(a=>a=="neft")?"shadow-lg bg-indigo-500 text-white ":"shadow-none"} px-4 py-1 text-sm border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white`,onClick:()=>j(["neft"]),children:"NEFT"}),e.jsx("button",{className:`${l.length==4?"shadow-lg bg-indigo-500 text-white":"shadow-none"} px-4 py-1 text-sm border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white`,onClick:()=>j(["cash","cheque","dd","neft"]),children:"All"})]}),((se=s==null?void 0:s.property)==null?void 0:se.length)>0&&e.jsxs("div",{className:" overflow-auto",children:[e.jsxs("p",{className:"uppercase font-bold",children:[" ",(r==null?void 0:r.reportType)=="1"&&e.jsx("input",{type:"checkbox",name:"propertyAll",id:"",onChange:w})," ","Property Payment"]}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-t border-l border-r text-left",children:e.jsxs("tr",{children:[(r==null?void 0:r.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"#"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Transaction No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Application No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Check/DD No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Bank Name"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Paid Amount"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Date"}),(r==null?void 0:r.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r",children:"Action"})]})}),e.jsx("tbody",{children:(ne=(te=s==null?void 0:s.property)==null?void 0:te.filter(a=>$(s==null?void 0:s.property).some(n=>l.includes(n.toLowerCase()))))==null?void 0:ne.map((a,n)=>e.jsxs("tr",{children:[(r==null?void 0:r.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:e.jsx("input",{type:"checkbox",name:"property",id:"",checked:R?!0:null,value:a==null?void 0:a.id,onChange:w})}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n+1}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.tran_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.payment_mode)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.application_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.cheque_dd_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.bank_name)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:y(Math.round(a==null?void 0:a.amount))}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.tran_date)}),(r==null?void 0:r.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:(a==null?void 0:a.payment_mode)!="CASH"?e.jsx("button",{className:"px-4 py-1 border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white",onClick:()=>O(a),children:"Edit"}):"No Action"})]},n))})]})]}),e.jsx("p",{className:"py-2"}),((le=s==null?void 0:s.water)==null?void 0:le.length)>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"uppercase font-bold",children:[(r==null?void 0:r.reportType)=="1"&&e.jsx("input",{type:"checkbox",name:"waterAll",id:"",onChange:w})," ","Water Payment"]}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-t border-l border-r text-left",children:e.jsxs("tr",{children:[(r==null?void 0:r.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"#"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Transaction No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Application No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Check/DD No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Bank Name"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Paid Amount"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Date"}),(r==null?void 0:r.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r",children:"Action"})]})}),e.jsx("tbody",{children:(oe=(de=s==null?void 0:s.water)==null?void 0:de.filter(()=>$(s==null?void 0:s.water).some(a=>l.includes(a.toLowerCase()))))==null?void 0:oe.map((a,n)=>e.jsxs("tr",{children:[(r==null?void 0:r.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:e.jsx("input",{type:"checkbox",name:"water",id:"",checked:I?!0:null,value:a==null?void 0:a.id,onChange:w})}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n+1}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.tran_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.payment_mode)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.application_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.cheque_dd_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.bank_name)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:y(a==null?void 0:a.amount)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.tran_date)}),(r==null?void 0:r.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:(a==null?void 0:a.payment_mode)!="CASH"?e.jsx("button",{className:"px-4 py-1 border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white",onClick:()=>O(a),children:"Edit"}):"No Action"})]},n))})]})]}),e.jsx("p",{className:"py-2"}),((ce=s==null?void 0:s.trade)==null?void 0:ce.length)>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"uppercase font-bold",children:[(r==null?void 0:r.reportType)=="1"&&e.jsx("input",{type:"checkbox",name:"tradeAll",id:"",onChange:w})," ","Trade Payment"]}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-t border-l border-r text-left",children:e.jsxs("tr",{children:[(r==null?void 0:r.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"#"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Transaction No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Application No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Check/DD No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Bank Name"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Paid Amount"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Date"}),(r==null?void 0:r.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r",children:"Action"})]})}),e.jsx("tbody",{children:(xe=(ie=s==null?void 0:s.trade)==null?void 0:ie.filter(a=>$(s==null?void 0:s.trade).some(n=>l.includes(n.toLowerCase()))))==null?void 0:xe.map((a,n)=>e.jsxs("tr",{children:[(r==null?void 0:r.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:e.jsx("input",{type:"checkbox",name:"trade",id:"",checked:E?!0:null,value:a==null?void 0:a.id,onChange:w})}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n+1}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.tran_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.payment_mode)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.application_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.cheque_dd_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.bank_name)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:y(a==null?void 0:a.amount)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.tran_date)}),(r==null?void 0:r.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:(a==null?void 0:a.payment_mode)!="CASH"?e.jsx("button",{className:"px-4 py-1 border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white",onClick:()=>O(a),children:"Edit"}):"No Action"})]},n))})]})]}),e.jsx("p",{className:"py-2"}),((he=s==null?void 0:s.advertisement)==null?void 0:he.length)>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"uppercase font-bold",children:[(r==null?void 0:r.reportType)=="1"&&e.jsx("input",{type:"checkbox",name:"advertisementAll",id:"",onChange:w})," ","Advertisement Payment"]}),e.jsxs("table",{className:"table-auto w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-t border-l border-r text-left",children:e.jsxs("tr",{children:[(r==null?void 0:r.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"#"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Transaction No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Mode"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Application No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Check/DD No"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Bank Name"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Paid Amount"}),e.jsx("th",{className:"px-2 py-2 border-r",children:"Payment Date"}),(r==null?void 0:r.reportType)=="1"&&e.jsx("th",{className:"px-2 py-2 border-r",children:"Action"})]})}),e.jsx("tbody",{children:(be=(ue=s==null?void 0:s.advertisement)==null?void 0:ue.filter(a=>$(s==null?void 0:s.advertisement).some(n=>l.includes(n.toLowerCase()))))==null?void 0:be.map((a,n)=>e.jsxs("tr",{children:[(r==null?void 0:r.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:e.jsx("input",{type:"checkbox",name:"advertisement",id:"",checked:x?!0:null,value:a==null?void 0:a.id,onChange:w})}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:n+1}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.tran_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.payment_mode)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.application_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.cheque_dd_no)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.bank_name)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:y(a==null?void 0:a.amount)}),e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:i(a==null?void 0:a.tran_date)}),(r==null?void 0:r.reportType)=="1"&&e.jsx("td",{className:"border border-gray-200 px-2 py-2 font-medium",children:(a==null?void 0:a.payment_mode)!="CASH"?e.jsx("button",{className:"px-4 py-1 border-indigo-500 text-indigo-500 border hover:bg-indigo-500 hover:text-white",onClick:()=>O(a),children:"Edit"}):"No Action"})]},n))})]})]}),e.jsxs("div",{className:"w-full flex justify-center gap-4 mt-2",children:[(r==null?void 0:r.reportType)=="1"?e.jsxs("button",{className:" text-sm px-4 rounded bg-green-500 hover:bg-green-600 py-1 text-white sm:w-auto",onClick:()=>(ee("verify"),_(!0)),children:[" ","Verify"," "]}):e.jsxs("button",{className:" text-sm px-4 rounded bg-indigo-500 hover:bg-indigo-600 py-1 text-white sm:w-auto",onClick:()=>W(`/cashVerificationReceipt/${encodeURIComponent(s==null?void 0:s.tranNo)}`),children:[" ","Print"," "]}),e.jsxs("button",{onClick:P,className:"w-full text-sm px-4 rounded bg-red-500 hover:bg-red-600 py-1 text-white sm:w-auto",children:[" ","Close"," "]})]})]}),ae&&e.jsx("div",{className:"my-5",children:e.jsx("div",{className:"flex justify-center pt-3 space-x-3",children:(r==null?void 0:r.reportType)=="1"&&e.jsxs("div",{style:{zIndex:999},class:"h-screen w-screen flex justify-center items-center backdrop-blur-sm",children:[D=="verify"&&e.jsxs("div",{className:"bg-white w-max h-max rounded-md shadow-lg relative",children:[e.jsx("button",{type:"button",onClick:()=>_(!1),class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-800 darks:hover:text-white",children:e.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),e.jsxs("div",{class:"p-6 text-center",children:[e.jsxs("div",{className:"w-full flex h-10",children:[" ",e.jsx("span",{className:"mx-auto",children:e.jsx(Pe,{size:30})})]}),e.jsx("h3",{class:"mb-5 text-lg font-normal text-gray-500 darks:text-gray-400",children:"Are you sure you ?"}),e.jsx("button",{type:"button",className:"cypress_button_logout text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 darks:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",onClick:()=>(pe(),P()),children:"Yes, I'm sure"})]})]}),D=="edit"&&e.jsxs("div",{className:"bg-white w-max h-max rounded-md shadow-lg relative",children:[e.jsx("button",{type:"button",onClick:()=>_(!1),class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center darks:hover:bg-gray-800 darks:hover:text-white",children:e.jsx("svg",{class:"w-5 h-5",fill:"currentColor",children:e.jsx("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})})}),e.jsxs("div",{class:"p-6 text-center flex flex-col gap-y-2 flex-wrap",children:[e.jsx("h1",{className:"w-full text-lg text-indigo-400 font-semibold border-b pb-1 mb-2",children:"Update Data"}),e.jsxs("div",{className:"grid grid-cols-12 items-center",children:[e.jsxs("label",{className:"col-span-6 text-start",htmlFor:"checkNo",children:["Cheque/DD No.:"," "]}),e.jsx("input",{ref:fe,className:"col-span-6 border focus:outline-none focus:shadow-lg shadow-md px-2 py-1",value:t==null?void 0:t.cheque_dd_no,onChange:a=>u({...t,cheque_dd_no:a.target.value}),type:"text",name:"chequeNo",id:""})]}),e.jsxs("div",{className:"grid grid-cols-12 items-center",children:[e.jsxs("label",{className:"col-span-6 text-start",htmlFor:"checkNo",children:["Bank Name:"," "]}),e.jsx("input",{ref:ve,className:"col-span-6 border focus:outline-none focus:shadow-lg shadow-md px-2 py-1",value:t==null?void 0:t.bank_name,onChange:a=>u({...t,bank_name:a.target.value}),type:"text",name:"bankName",id:""})]}),e.jsxs("div",{className:"w-full flex justify-center gap-2 mt-2",children:[e.jsxs("button",{className:" px-4 text-sm rounded bg-green-500 hover:bg-green-600 py-1 text-white ",onClick:()=>we(),children:[" ","Update"," "]}),e.jsxs("button",{onClick:()=>_(!1),className:" px-4 text-sm rounded bg-indigo-400 hover:bg-indigo-500 py-1 text-white ",children:[" ","Close"," "]})]})]})]})]})})})]})})]})}const Re=r=>{const[W,Z]=o.useState(0),[M,Y]=o.useState(),[C,K]=o.useState(),[z,s]=o.useState();o.useState("");const[Q,F]=o.useState(!1),[p,R]=o.useState(!1),[G,f]=o.useState(null),[k,I]=o.useState(""),J=ye(),{api_listofEmployees:v,api_listUnverifiedCashVerification:T,api_listVerifiedCashVerification:E}=je();o.useEffect(()=>{V()},[]);const X=d=>{s(d),Z(t=>t+1)};o.useEffect(()=>{H.post(v,{},U()).then(d=>{Y(d.data.data)}).catch(d=>{})},[]);const A=[{Header:"Sl.",Cell:({row:d})=>e.jsxs("div",{className:"px-2 font-semibold",children:[d.index+1,"."]})},{Header:"EmployeeName",accessor:"user_name",Cell:({cell:d})=>{var t;return e.jsxs("span",{children:["  ",i((t=d.row.original)==null?void 0:t.user_name)]})}},{Header:"Property",accessor:"property",Cell:({cell:d})=>{var l;const t=(l=d.row.original)==null?void 0:l.property,u=t?Math.round(t):0;return e.jsx("span",{children:y(u)})}},{Header:"Water",accessor:"water",Cell:({cell:d})=>{var l;const t=(l=d.row.original)==null?void 0:l.water,u=t?Math.round(t):0;return e.jsx("span",{children:y(u)})}},{Header:"Trade",accessor:"trade",Cell:({cell:d})=>{var l;const t=(l=d.row.original)==null?void 0:l.trade,u=t?Math.round(t):0;return e.jsx("span",{children:y(u)})}},{Header:"Advertisement",accessor:"advertisement",Cell:({cell:d})=>{var l;const t=(l=d.row.original)==null?void 0:l.advertisement,u=t?Math.round(t):0;return e.jsx("span",{children:y(u)})}},{Header:"Total Amount",accessor:"total",Cell:({cell:d})=>{var l;const t=(l=d.row.original)==null?void 0:l.total,u=t?Math.round(t):0;return e.jsx("span",{children:y(u)})}},{Header:"Paid Date",accessor:"date",Cell:({cell:d})=>{var t;return e.jsxs("span",{children:["  ",i((t=d.row.original)==null?void 0:t.date)]})}},{Header:"Action",Cell:({cell:d})=>{var t,u;return e.jsxs("div",{className:"flex gap-2 w-full flex-wrap",children:[e.jsx("button",{onClick:()=>X(d.row.original),className:"bg-blue-600 hover:bg-blue-400 py-1 px-3 text-white rounded-sm",children:"View"}),((u=(t=d==null?void 0:d.row)==null?void 0:t.original)==null?void 0:u.verifyStatus)==!0&&e.jsx("button",{onClick:()=>{var l,j;return J(`/cashVerificationReceipt/${encodeURIComponent((j=(l=d==null?void 0:d.row)==null?void 0:l.original)==null?void 0:j.tranNo)}`)},className:"bg-sky-600 hover:bg-sky-400 py-1 px-3 text-white rounded-sm",children:"Print"})]})}}],S=Ee({collectionDate:Me().required("Select Date")}),x=Ve({initialValues:{empName:"",collectionDate:qe(),reportType:"1",zone:""},enableReinitialize:!0,onSubmit:d=>{V()},validationSchema:S}),V=()=>{let d;x.values.reportType=="1"&&(d=T),x.values.reportType=="2"&&(d=E),I(x.values.reportType),F(!0);const t={date:x.values.collectionDate,id:x.values.empName,zone:x.values.zone};H.post(d,t,U()).then(u=>{var l,j;(l=u==null?void 0:u.data)!=null&&l.status?K(u.data.data):N(!0,(j=u==null?void 0:u.data)==null?void 0:j.message)}).catch(u=>{N(!0,"Error occured while fetching cash verification list. Please try again later.")}).finally(()=>{F(!1)})},N=(d,t)=>{f(t),R(d)};return e.jsxs(e.Fragment,{children:[Q&&e.jsx(ge,{}),p&&e.jsx(Le,{activateBottomErrorCard:N,errorTitle:G}),e.jsx(Ue,{openAddPopUP:W,data:z,refresh:()=>V(),activateBottomErrorCard:N,reportType:k}),e.jsxs("div",{className:"m-2",children:[e.jsx("div",{className:"shadow-md  rounded bg-indigo-100 px-4",children:e.jsx("form",{onSubmit:x.handleSubmit,onChange:x.handleChange,children:e.jsxs("div",{className:"px-3 py-3",children:[e.jsx("div",{className:"text-left",children:e.jsx("h1",{className:"mb-3 text-2xl font-semibold",children:"Cash Verification"})}),e.jsxs("div",{className:"grid grid-cols-12 gap-4 items-end",children:[e.jsxs("div",{className:"col-span-10 md:col-span-2",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Select Zone ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{onChange:x.handleChange,className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",placeholder:"Enter New Taluka",type:"text",name:"zone",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"A-East Zone"}),e.jsx("option",{value:"2",children:"B-West Zone"}),e.jsx("option",{value:"3",children:"C-North Zone"}),e.jsx("option",{value:"4",children:"D-South Zone"})]}),e.jsxs("p",{className:"text-red-500 text-xs font-semibold absolute",children:[" ",x.touched.zone&&x.errors.zone?x.errors.zone:null]})]}),e.jsxs("div",{className:"col-span-10 md:col-span-2",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Select Date ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{onChange:x.handleChange,name:"collectionDate",className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",type:"date",value:x.values.collectionDate}),e.jsxs("p",{className:"text-red-500 text-xs font-semibold absolute",children:[" ",x.touched.collectionDate&&x.errors.collectionDate?x.errors.collectionDate:null]})]}),e.jsxs("div",{className:"col-span-10 md:col-span-2",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Select Employee ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{onChange:x.handleChange,className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",placeholder:"Enter New Taluka",type:"text",name:"empName",children:[e.jsx("option",{value:"",children:"All"}),M==null?void 0:M.map((d,t)=>e.jsx("option",{value:d.id,children:d.user_name}))]}),e.jsxs("p",{className:"text-red-500 text-xs font-semibold absolute",children:[" ",x.touched.empName&&x.errors.empName?x.errors.empName:null]})]}),e.jsxs("div",{className:"col-span-10 md:col-span-2",children:[e.jsxs("p",{className:"py-1 text-base font-semibold",children:["Report Type ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:x.values.reportType,className:"w-full rounded border-gray-500 p-1.5 text-base border shadow-sm outline-blue-300 outline-1",placeholder:"Enter New Taluka",type:"text",name:"reportType",children:[e.jsx("option",{value:"1",children:"Not Verified"}),e.jsx("option",{value:"2",children:"Verified"})]})]}),e.jsx("div",{className:"col-span-10 md:col-span-2 flex items-end justify-end md:mt-0 mt-6",children:e.jsx("button",{type:"submit",class:"w-full py-2 px-4 inline-block text-center rounded leading-5 text-gray-100 bg-indigo-500 border border-indigo-500 hover:text-white hover:bg-indigo-600 hover:ring-0 hover:border-indigo-600 focus:bg-indigo-600 focus:border-indigo-600 focus:outline-none focus:ring-0",children:"Search"})})]})]})})}),e.jsx("p",{className:" mx-10 py-5"}),e.jsx("div",{className:"my-4",children:(C==null?void 0:C.length)==0?e.jsx("p",{className:"text-center font-semibold text-xl -mt-8 text-red-500",children:"No Data Found !"}):e.jsxs(e.Fragment,{children:[C&&e.jsx("div",{className:"bg-white p-4",children:e.jsx(Be,{columns:A,dataList:C})})," "]})})]})]})};export{Re as default};
