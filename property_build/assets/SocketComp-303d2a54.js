import{E as _,r as I,F as be,G as he,A as Oe,b as ye,j as N,g as Te}from"./index-0795527d.js";var P={},D={},C={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isEventSourceSupported=e.isReactNative=e.ReadyState=e.DEFAULT_HEARTBEAT=e.UNPARSABLE_JSON_OBJECT=e.DEFAULT_RECONNECT_INTERVAL_MS=e.DEFAULT_RECONNECT_LIMIT=e.SOCKET_IO_PING_CODE=e.SOCKET_IO_PATH=e.SOCKET_IO_PING_INTERVAL=e.DEFAULT_EVENT_SOURCE_OPTIONS=e.EMPTY_EVENT_HANDLERS=e.DEFAULT_OPTIONS=void 0;var t=1,r=1e3*t;e.DEFAULT_OPTIONS={},e.EMPTY_EVENT_HANDLERS={},e.DEFAULT_EVENT_SOURCE_OPTIONS={withCredentials:!1,events:e.EMPTY_EVENT_HANDLERS},e.SOCKET_IO_PING_INTERVAL=25*r,e.SOCKET_IO_PATH="/socket.io/?EIO=3&transport=websocket",e.SOCKET_IO_PING_CODE="2",e.DEFAULT_RECONNECT_LIMIT=20,e.DEFAULT_RECONNECT_INTERVAL_MS=5e3,e.UNPARSABLE_JSON_OBJECT={},e.DEFAULT_HEARTBEAT={message:"ping",timeout:6e4,interval:25e3},function(a){a[a.UNINSTANTIATED=-1]="UNINSTANTIATED",a[a.CONNECTING=0]="CONNECTING",a[a.OPEN=1]="OPEN",a[a.CLOSING=2]="CLOSING",a[a.CLOSED=3]="CLOSED"}(e.ReadyState||(e.ReadyState={}));var n=function(){try{return"EventSource"in globalThis}catch{return!1}};e.isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative",e.isEventSourceSupported=!e.isReactNative&&n()})(C);var Y={},q={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetWebSockets=e.sharedWebSockets=void 0,e.sharedWebSockets={};var t=function(r){if(r&&e.sharedWebSockets.hasOwnProperty(r))delete e.sharedWebSockets[r];else for(var n in e.sharedWebSockets)e.sharedWebSockets.hasOwnProperty(n)&&delete e.sharedWebSockets[n]};e.resetWebSockets=t})(q);var z={},L={};Object.defineProperty(L,"__esModule",{value:!0});L.setUpSocketIOPing=L.appendQueryParams=L.parseSocketIOUrl=void 0;var J=C,Ne=function(e){if(e){var t=/^https|wss/.test(e),r=e.replace(/^(https?|wss?)(:\/\/)?/,""),n=r.replace(/\/$/,""),a=t?"wss":"ws";return"".concat(a,"://").concat(n).concat(J.SOCKET_IO_PATH)}else if(e===""){var t=/^https/.test(window.location.protocol),a=t?"wss":"ws",o=window.location.port?":".concat(window.location.port):"";return"".concat(a,"://").concat(window.location.hostname).concat(o).concat(J.SOCKET_IO_PATH)}return e};L.parseSocketIOUrl=Ne;var Ce=function(e,t){t===void 0&&(t={});var r=/\?([\w]+=[\w]+)/,n=r.test(e),a="".concat(Object.entries(t).reduce(function(o,i){var l=i[0],u=i[1];return o+"".concat(l,"=").concat(u,"&")},"").slice(0,-1));return"".concat(e).concat(n?"&":"?").concat(a)};L.appendQueryParams=Ce;var me=function(e,t){t===void 0&&(t=J.SOCKET_IO_PING_INTERVAL);var r=function(){return e(J.SOCKET_IO_PING_CODE)};return window.setInterval(r,t)};L.setUpSocketIOPing=me;var F={};Object.defineProperty(F,"__esModule",{value:!0});F.heartbeat=void 0;var re=C;function ke(e,t){var r=t||{},n=r.interval,a=n===void 0?re.DEFAULT_HEARTBEAT.interval:n,o=r.timeout,i=o===void 0?re.DEFAULT_HEARTBEAT.timeout:o,l=r.message,u=l===void 0?re.DEFAULT_HEARTBEAT.message:l,c=!1,f=setInterval(function(){try{typeof u=="function"?e.send(u()):e.send(u)}catch{}},a),v=setInterval(function(){c?c=!1:e.close()},i);return e.addEventListener("close",function(){clearInterval(f),clearInterval(v)}),function(){c=!0}}F.heartbeat=ke;var p={},X={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetSubscribers=e.removeSubscriber=e.addSubscriber=e.hasSubscribers=e.getSubscribers=void 0;var t={},r=[],n=function(u){return(0,e.hasSubscribers)(u)?Array.from(t[u]):r};e.getSubscribers=n;var a=function(u){var c;return((c=t[u])===null||c===void 0?void 0:c.size)>0};e.hasSubscribers=a;var o=function(u,c){t[u]=t[u]||new Set,t[u].add(c)};e.addSubscriber=o;var i=function(u,c){t[u].delete(c)};e.removeSubscriber=i;var l=function(u){if(u&&t.hasOwnProperty(u))delete t[u];else for(var c in t)t.hasOwnProperty(c)&&delete t[c]};e.resetSubscribers=l})(X);Object.defineProperty(p,"__esModule",{value:!0});p.resetGlobalState=p.assertIsWebSocket=void 0;var Ie=q,we=X;function Le(e,t){if(!t&&!(e instanceof WebSocket))throw new Error("")}p.assertIsWebSocket=Le;function Pe(e){(0,we.resetSubscribers)(e),(0,Ie.resetWebSockets)(e)}p.resetGlobalState=Pe;var V=_&&_.__assign||function(){return V=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},V.apply(this,arguments)};Object.defineProperty(z,"__esModule",{value:!0});z.attachListeners=void 0;var Me=L,Ae=F,w=C,pe=p,Ue=function(e,t,r){var n;if(t.current.heartbeat&&e instanceof WebSocket){var a=typeof t.current.heartbeat=="boolean"?void 0:t.current.heartbeat;n=(0,Ae.heartbeat)(e,a)}e.onmessage=function(o){var i;n==null||n(),t.current.onMessage&&t.current.onMessage(o),!(typeof t.current.filter=="function"&&t.current.filter(o)!==!0)&&(t.current.heartbeat&&typeof t.current.heartbeat!="boolean"&&((i=t.current.heartbeat)===null||i===void 0?void 0:i.returnMessage)===o.data||r(o))}},We=function(e,t,r,n){e.onopen=function(a){t.current.onOpen&&t.current.onOpen(a),n.current=0,r(w.ReadyState.OPEN)}},je=function(e,t,r,n,a){if(w.isEventSourceSupported&&e instanceof EventSource)return function(){};(0,pe.assertIsWebSocket)(e,t.current.skipAssert);var o;return e.onclose=function(i){var l;if(t.current.onClose&&t.current.onClose(i),r(w.ReadyState.CLOSED),t.current.shouldReconnect&&t.current.shouldReconnect(i)){var u=(l=t.current.reconnectAttempts)!==null&&l!==void 0?l:w.DEFAULT_RECONNECT_LIMIT;if(a.current<u){var c=typeof t.current.reconnectInterval=="function"?t.current.reconnectInterval(a.current):t.current.reconnectInterval;o=window.setTimeout(function(){a.current++,n()},c??w.DEFAULT_RECONNECT_INTERVAL_MS)}else t.current.onReconnectStop&&t.current.onReconnectStop(u),console.warn("Max reconnect attempts of ".concat(u," exceeded"))}},function(){return o&&window.clearTimeout(o)}},De=function(e,t,r,n,a){var o;return e.onerror=function(i){var l;if(t.current.onError&&t.current.onError(i),w.isEventSourceSupported&&e instanceof EventSource&&(t.current.onClose&&t.current.onClose(V(V({},i),{code:1006,reason:"An error occurred with the EventSource: ".concat(i),wasClean:!1})),r(w.ReadyState.CLOSED),e.close()),t.current.retryOnError)if(a.current<((l=t.current.reconnectAttempts)!==null&&l!==void 0?l:w.DEFAULT_RECONNECT_LIMIT)){var u=typeof t.current.reconnectInterval=="function"?t.current.reconnectInterval(a.current):t.current.reconnectInterval;o=window.setTimeout(function(){a.current++,n()},u??w.DEFAULT_RECONNECT_INTERVAL_MS)}else t.current.onReconnectStop&&t.current.onReconnectStop(t.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(t.current.reconnectAttempts," exceeded"))},function(){return o&&window.clearTimeout(o)}},Re=function(e,t,r,n,a,o){var i=t.setLastMessage,l=t.setReadyState,u,c,f;return r.current.fromSocketIO&&(u=(0,Me.setUpSocketIOPing)(o)),Ue(e,r,i),We(e,r,l,a),c=je(e,r,l,n,a),f=De(e,r,l,n,a),function(){l(w.ReadyState.CLOSING),c(),f(),e.close(),u&&clearInterval(u)}};z.attachListeners=Re;var Z={},B=_&&_.__assign||function(){return B=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},B.apply(this,arguments)};Object.defineProperty(Z,"__esModule",{value:!0});Z.attachSharedListeners=void 0;var $e=q,U=C,G=X,Ge=L,Fe=F,He=function(e,t,r){var n;r&&e instanceof WebSocket&&(n=(0,Fe.heartbeat)(e,typeof r=="boolean"?void 0:r)),e.onmessage=function(a){n==null||n(),(0,G.getSubscribers)(t).forEach(function(o){o.optionsRef.current.onMessage&&o.optionsRef.current.onMessage(a),!(typeof o.optionsRef.current.filter=="function"&&o.optionsRef.current.filter(a)!==!0)&&(r&&typeof r!="boolean"&&(r==null?void 0:r.returnMessage)===a.data||o.setLastMessage(a))})}},Je=function(e,t){e.onopen=function(r){(0,G.getSubscribers)(t).forEach(function(n){n.reconnectCount.current=0,n.optionsRef.current.onOpen&&n.optionsRef.current.onOpen(r),n.setReadyState(U.ReadyState.OPEN)})}},Ve=function(e,t){e instanceof WebSocket&&(e.onclose=function(r){(0,G.getSubscribers)(t).forEach(function(n){n.optionsRef.current.onClose&&n.optionsRef.current.onClose(r),n.setReadyState(U.ReadyState.CLOSED)}),delete $e.sharedWebSockets[t],(0,G.getSubscribers)(t).forEach(function(n){var a;if(n.optionsRef.current.shouldReconnect&&n.optionsRef.current.shouldReconnect(r)){var o=(a=n.optionsRef.current.reconnectAttempts)!==null&&a!==void 0?a:U.DEFAULT_RECONNECT_LIMIT;if(n.reconnectCount.current<o){var i=typeof n.optionsRef.current.reconnectInterval=="function"?n.optionsRef.current.reconnectInterval(n.reconnectCount.current):n.optionsRef.current.reconnectInterval;setTimeout(function(){n.reconnectCount.current++,n.reconnect.current()},i??U.DEFAULT_RECONNECT_INTERVAL_MS)}else n.optionsRef.current.onReconnectStop&&n.optionsRef.current.onReconnectStop(n.optionsRef.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(o," exceeded"))}})})},Be=function(e,t){e.onerror=function(r){(0,G.getSubscribers)(t).forEach(function(n){n.optionsRef.current.onError&&n.optionsRef.current.onError(r),U.isEventSourceSupported&&e instanceof EventSource&&(n.optionsRef.current.onClose&&n.optionsRef.current.onClose(B(B({},r),{code:1006,reason:"An error occurred with the EventSource: ".concat(r),wasClean:!1})),n.setReadyState(U.ReadyState.CLOSED))}),U.isEventSourceSupported&&e instanceof EventSource&&e.close()}},Ke=function(e,t,r,n){var a;return r.current.fromSocketIO&&(a=(0,Ge.setUpSocketIOPing)(n)),He(e,t,r.current.heartbeat),Ve(e,t),Je(e,t),Be(e,t),function(){a&&clearInterval(a)}};Z.attachSharedListeners=Ke;Object.defineProperty(Y,"__esModule",{value:!0});Y.createOrJoinSocket=void 0;var M=q,$=C,Qe=z,Ye=Z,ce=X,qe=function(e,t,r,n,a){return function(){if((0,ce.removeSubscriber)(e,t),!(0,ce.hasSubscribers)(e)){try{var o=M.sharedWebSockets[e];o instanceof WebSocket&&(o.onclose=function(i){r.current.onClose&&r.current.onClose(i),n($.ReadyState.CLOSED)}),o.close()}catch{}a&&a(),delete M.sharedWebSockets[e]}}},ze=function(e,t,r,n,a,o,i,l){if(!$.isEventSourceSupported&&n.current.eventSourceOptions)throw $.isReactNative?new Error("EventSource is not supported in ReactNative"):new Error("EventSource is not supported");if(n.current.share){var u=null;M.sharedWebSockets[t]===void 0?(M.sharedWebSockets[t]=n.current.eventSourceOptions?new EventSource(t,n.current.eventSourceOptions):new WebSocket(t,n.current.protocols),e.current=M.sharedWebSockets[t],r($.ReadyState.CONNECTING),u=(0,Ye.attachSharedListeners)(M.sharedWebSockets[t],t,n,l)):(e.current=M.sharedWebSockets[t],r(M.sharedWebSockets[t].readyState));var c={setLastMessage:a,setReadyState:r,optionsRef:n,reconnectCount:i,reconnect:o};return(0,ce.addSubscriber)(t,c),qe(t,c,n,r,u)}else{if(e.current=n.current.eventSourceOptions?new EventSource(t,n.current.eventSourceOptions):new WebSocket(t,n.current.protocols),r($.ReadyState.CONNECTING),!e.current)throw new Error("WebSocket failed to be created");return(0,Qe.attachListeners)(e.current,{setLastMessage:a,setReadyState:r},n,o.current,i,l)}};Y.createOrJoinSocket=ze;var ve={};(function(e){var t=_&&_.__awaiter||function(l,u,c,f){function v(d){return d instanceof c?d:new c(function(g){g(d)})}return new(c||(c=Promise))(function(d,g){function h(S){try{s(f.next(S))}catch(E){g(E)}}function b(S){try{s(f.throw(S))}catch(E){g(E)}}function s(S){S.done?d(S.value):v(S.value).then(h,b)}s((f=f.apply(l,u||[])).next())})},r=_&&_.__generator||function(l,u){var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},f,v,d,g;return g={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function h(s){return function(S){return b([s,S])}}function b(s){if(f)throw new TypeError("Generator is already executing.");for(;c;)try{if(f=1,v&&(d=s[0]&2?v.return:s[0]?v.throw||((d=v.return)&&d.call(v),0):v.next)&&!(d=d.call(v,s[1])).done)return d;switch(v=0,d&&(s=[s[0]&2,d.value]),s[0]){case 0:case 1:d=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,v=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(d=c.trys,!(d=d.length>0&&d[d.length-1])&&(s[0]===6||s[0]===2)){c=0;continue}if(s[0]===3&&(!d||s[1]>d[0]&&s[1]<d[3])){c.label=s[1];break}if(s[0]===6&&c.label<d[1]){c.label=d[1],d=s;break}if(d&&c.label<d[2]){c.label=d[2],c.ops.push(s);break}d[2]&&c.ops.pop(),c.trys.pop();continue}s=u.call(l,c)}catch(S){s=[6,S],v=0}finally{f=d=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getUrl=void 0;var n=L,a=C,o=function(l){return new Promise(function(u){return window.setTimeout(u,l)})},i=function(l,u,c){return c===void 0&&(c=0),t(void 0,void 0,void 0,function(){var f,v,d,g,h,b,s,S;return r(this,function(E){switch(E.label){case 0:if(typeof l!="function")return[3,10];E.label=1;case 1:return E.trys.push([1,3,,9]),[4,l()];case 2:return f=E.sent(),[3,9];case 3:return E.sent(),u.current.retryOnError?(v=(b=u.current.reconnectAttempts)!==null&&b!==void 0?b:a.DEFAULT_RECONNECT_LIMIT,c<v?(d=typeof u.current.reconnectInterval=="function"?u.current.reconnectInterval(c):u.current.reconnectInterval,[4,o(d??a.DEFAULT_RECONNECT_INTERVAL_MS)]):[3,5]):[3,7];case 4:return E.sent(),[2,(0,e.getUrl)(l,u,c+1)];case 5:return(S=(s=u.current).onReconnectStop)===null||S===void 0||S.call(s,c),[2,null];case 6:return[3,8];case 7:return[2,null];case 8:return[3,9];case 9:return[3,11];case 10:f=l,E.label=11;case 11:return g=u.current.fromSocketIO?(0,n.parseSocketIOUrl)(f):f,h=u.current.queryParams?(0,n.appendQueryParams)(g,u.current.queryParams):g,[2,h]}})})};e.getUrl=i})(ve);var Se={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.websocketWrapper=void 0;var t=function(r,n){return new Proxy(r,{get:function(a,o){var i=a[o];return o==="reconnect"?n:typeof i=="function"?(console.error("Calling methods directly on the websocket is not supported at this moment. You must use the methods returned by useWebSocket."),function(){}):i},set:function(a,o,i){return/^on/.test(o)?(console.warn("The websocket's event handlers should be defined through the options object passed into useWebSocket."),!1):(a[o]=i,!0)}})};e.websocketWrapper=t,e.default=e.websocketWrapper})(Se);var A=_&&_.__assign||function(){return A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},A.apply(this,arguments)},Xe=_&&_.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(f){try{c(n.next(f))}catch(v){i(v)}}function u(f){try{c(n.throw(f))}catch(v){i(v)}}function c(f){f.done?o(f.value):a(f.value).then(l,u)}c((n=n.apply(e,t||[])).next())})},Ze=_&&_.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,a,o,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(f){return u([c,f])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=c[0]&2?a.return:c[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,c[1])).done)return o;switch(a=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(f){c=[6,f],a=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},xe=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D,"__esModule",{value:!0});D.useWebSocket=void 0;var y=I,ne=be,k=C,et=Y,tt=ve,rt=xe(Se),ie=p,nt=function(e,t,r){t===void 0&&(t=k.DEFAULT_OPTIONS),r===void 0&&(r=!0);var n=(0,y.useState)(null),a=n[0],o=n[1],i=(0,y.useState)({}),l=i[0],u=i[1],c=(0,y.useMemo)(function(){if(a)try{return JSON.parse(a.data)}catch{return k.UNPARSABLE_JSON_OBJECT}return null},[a]),f=(0,y.useRef)(null),v=(0,y.useRef)(null),d=(0,y.useRef)(function(){}),g=(0,y.useRef)(0),h=(0,y.useRef)([]),b=(0,y.useRef)(null),s=(0,y.useRef)(t);s.current=t;var S=f.current&&l[f.current]!==void 0?l[f.current]:e!==null&&r===!0?k.ReadyState.CONNECTING:k.ReadyState.UNINSTANTIATED,E=t.queryParams?JSON.stringify(t.queryParams):null,m=(0,y.useCallback)(function(O,T){var W;if(T===void 0&&(T=!0),k.isEventSourceSupported&&v.current instanceof EventSource){console.warn("Unable to send a message from an eventSource");return}((W=v.current)===null||W===void 0?void 0:W.readyState)===k.ReadyState.OPEN?((0,ie.assertIsWebSocket)(v.current,s.current.skipAssert),v.current.send(O)):T&&h.current.push(O)},[]),_e=(0,y.useCallback)(function(O,T){T===void 0&&(T=!0),m(JSON.stringify(O),T)},[m]),Ee=(0,y.useCallback)(function(){return s.current.share!==!0||k.isEventSourceSupported&&v.current instanceof EventSource?v.current:(b.current===null&&v.current&&((0,ie.assertIsWebSocket)(v.current,s.current.skipAssert),b.current=(0,rt.default)(v.current,d)),b.current)},[]);return(0,y.useEffect)(function(){if(e!==null&&r===!0){var O,T=!1,W=!0,oe=function(){return Xe(void 0,void 0,void 0,function(){var H,j,ue;return Ze(this,function(se){switch(se.label){case 0:return H=f,[4,(0,tt.getUrl)(e,s)];case 1:return H.current=se.sent(),f.current===null?(console.error("Failed to get a valid URL. WebSocket connection aborted."),f.current="ABORTED",(0,ne.flushSync)(function(){return u(function(R){return A(A({},R),{ABORTED:k.ReadyState.CLOSED})})}),[2]):(j=function(R){T||(0,ne.flushSync)(function(){return o(R)})},ue=function(R){T||(0,ne.flushSync)(function(){return u(function(ge){var te;return A(A({},ge),f.current&&(te={},te[f.current]=R,te))})})},W&&(O=(0,et.createOrJoinSocket)(v,f.current,ue,s,j,d,g,m)),[2])}})})};return d.current=function(){T||(b.current&&(b.current=null),O==null||O(),oe())},oe(),function(){T=!0,W=!1,b.current&&(b.current=null),O==null||O(),o(null)}}else(e===null||r===!1)&&(g.current=0,u(function(H){var j;return A(A({},H),f.current&&(j={},j[f.current]=k.ReadyState.CLOSED,j))}))},[e,r,E,m]),(0,y.useEffect)(function(){S===k.ReadyState.OPEN&&h.current.splice(0).forEach(function(O){m(O)})},[S]),{sendMessage:m,sendJsonMessage:_e,lastMessage:a,lastJsonMessage:c,readyState:S,getWebSocket:Ee}};D.useWebSocket=nt;var x={},K=_&&_.__assign||function(){return K=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},K.apply(this,arguments)};Object.defineProperty(x,"__esModule",{value:!0});x.useSocketIO=void 0;var le=I,at=D,ct=C,ae={type:"empty",payload:null},ot=function(e){if(!e||!e.data)return ae;var t=e.data.match(/\[.*]/);if(!t)return ae;var r=JSON.parse(t);return!Array.isArray(r)||!r[1]?ae:{type:r[0],payload:r[1]}},ut=function(e,t,r){t===void 0&&(t=ct.DEFAULT_OPTIONS),r===void 0&&(r=!0);var n=(0,le.useMemo)(function(){return K(K({},t),{fromSocketIO:!0})},[]),a=(0,at.useWebSocket)(e,n,r),o=a.sendMessage,i=a.sendJsonMessage,l=a.lastMessage,u=a.readyState,c=a.getWebSocket,f=(0,le.useMemo)(function(){return ot(l)},[l]);return{sendMessage:o,sendJsonMessage:i,lastMessage:f,lastJsonMessage:f,readyState:u,getWebSocket:c}};x.useSocketIO=ut;var ee={},Q=_&&_.__assign||function(){return Q=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Q.apply(this,arguments)},st=_&&_.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};Object.defineProperty(ee,"__esModule",{value:!0});ee.useEventSource=void 0;var fe=I,it=D,de=C,lt=function(e,t,r){t===void 0&&(t=de.DEFAULT_EVENT_SOURCE_OPTIONS);var n=t.withCredentials,a=t.events,o=st(t,["withCredentials","events"]);r===void 0&&(r=!0);var i=Q(Q({},o),{eventSourceOptions:{withCredentials:n}}),l=(0,fe.useRef)(de.EMPTY_EVENT_HANDLERS);a&&(l.current=a);var u=(0,it.useWebSocket)(e,i,r),c=u.lastMessage,f=u.readyState,v=u.getWebSocket;return(0,fe.useEffect)(function(){c!=null&&c.type&&Object.entries(l.current).forEach(function(d){var g=d[0],h=d[1];g===c.type&&h(c)})},[c]),{lastEvent:c,readyState:f,getEventSource:v}};ee.useEventSource=lt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetGlobalState=e.useEventSource=e.ReadyState=e.useSocketIO=e.default=void 0;var t=D;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.useWebSocket}});var r=x;Object.defineProperty(e,"useSocketIO",{enumerable:!0,get:function(){return r.useSocketIO}});var n=C;Object.defineProperty(e,"ReadyState",{enumerable:!0,get:function(){return n.ReadyState}});var a=ee;Object.defineProperty(e,"useEventSource",{enumerable:!0,get:function(){return a.useEventSource}});var o=p;Object.defineProperty(e,"resetGlobalState",{enumerable:!0,get:function(){return o.resetGlobalState}})})(P);const ft=he(P),vt=()=>{const[e,t]=I.useState("https://acaa-203-129-217-58.ngrok-free.app"),[r,n]=I.useState([]),[a,o]=I.useState(""),{api_checkHeartBeat:i}=Te(),{sendMessage:l,lastMessage:u,readyState:c}=ft(e);I.useEffect(()=>{u!==null&&(n(s=>s.concat(u)),g(u.data))},[u,n]);const f=I.useCallback(()=>t("wss://demos.kaazing.com/echo"),[]),v=I.useCallback(()=>l("Hello"),[]),d={[P.ReadyState.CONNECTING]:"Connecting",[P.ReadyState.OPEN]:"Open",[P.ReadyState.CLOSING]:"Closing",[P.ReadyState.CLOSED]:"Closed",[P.ReadyState.UNINSTANTIATED]:"Uninstantiated"}[c],g=s=>{console.log("Received message:",s),h()},h=()=>{Oe.post(i,{},ye()).then(function(s){var S;console.log("success in sending geolocation ...",s),(S=s==null?void 0:s.data)!=null&&S.status}).catch(function(s){console.log("==error in sending geolocation...",s)})},b=()=>{setInterval(()=>{v()},2e3)};return I.useEffect(()=>{b()},[]),navigator.geolocation?navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(s=>{s.state==="granted"?navigator.geolocation.getCurrentPosition(S=>{const E=S.coords.latitude,m=S.coords.longitude;o(`location: ${E}`),console.log("Latitude:",E),console.log("Longitude:",m)},S=>{console.error("Error getting geolocation:",S.message)}):s.state==="prompt"?navigator.geolocation.getCurrentPosition(S=>{const E=S.coords.latitude,m=S.coords.longitude;o(`location: ${E}`),console.log("Latitude:",E),console.log("Longitude:",m)},S=>{console.error("Error getting geolocation:",S.message)}):console.error("Geolocation permission denied.")}):navigator.geolocation.getCurrentPosition(s=>{const S=s.coords.latitude,E=s.coords.longitude;o(`location: ${S}`),console.log("Latitude:",S),console.log("Longitude:",E)},s=>{console.error("Error getting geolocation:",s.message)}):console.error("Geolocation is not supported by this browser."),N.jsxs("div",{children:[N.jsxs("div",{children:["latitude : ",a]}),N.jsx("button",{onClick:f,children:"Click Me to change Socket Url"}),N.jsx("br",{}),N.jsx("br",{}),N.jsx("button",{onClick:v,disabled:c!==P.ReadyState.OPEN,children:"Click Me to send 'Hello'"}),N.jsx("br",{}),N.jsx("br",{}),N.jsxs("span",{children:["The WebSocket is currently ",d]}),u?N.jsxs("span",{children:["Last message: ",u.data]}):null,N.jsx("ul",{children:r.map((s,S)=>N.jsx("span",{children:s?s.data:null},S))})]})};export{vt as default};
