import{r as i,u as H,a as A,A as a,j as s,ai as k,S as R,a4 as t,cf as h,cg as v,f as $,bG as E}from"./index-1c257416.js";import{T as q}from"./TopTabs-5d0b611f.js";function V(){var f,y,N;const[x,_]=i.useState(),[u,c]=i.useState(!1),[l,d]=i.useState(),[w,p]=i.useState(!1),{api_getSpecificHoldingTranscationHistory:B,unauth_getSpecificHoldingTranscationHistory:z}=$(),{api_getPropHoldingDetailsById:S}=E(),{id:o}=H(),m=A();i.useEffect(()=>{console.log("fethcing in useEffect"),T()},[]);const T=()=>{c(!0);let e={propId:o};console.log("before fetch factory data"),a.post(z,e).then(function(r){var n;console.log("all transcation list at holding specific----- ",r==null?void 0:r.data),_((n=r==null?void 0:r.data)==null?void 0:n.data),c(!1)}).catch(function(r){console.log("error at transactions fetch ",r),c(!1)})},P=()=>{p(!1),c(!0),a.post(`${S}`,{propertyId:o}).then(function(e){var r,n,j,b,g;console.log("view prop prop full details...",(r=e==null?void 0:e.data)==null?void 0:r.data),(j=(n=e==null?void 0:e.data)==null?void 0:n.data)!=null&&j.status?d((b=e==null?void 0:e.data)==null?void 0:b.data):d((g=e==null?void 0:e.data)==null?void 0:g.data),c(!1)}).catch(function(e){console.log("==2 details by id error...",e),p(!0),c(!1)})};return i.useEffect(()=>{P()},[]),u?s.jsxs(s.Fragment,{children:[s.jsx(k,{}),s.jsx("div",{className:"min-h-screen"})]}):w?s.jsx(R,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"w-full  mx-auto px-44 mt-8",children:[s.jsx("div",{className:"",children:s.jsx(q,{title:"Payment History",type:"holding",id:o,safNo:"",active:"payment"})}),s.jsx("div",{className:"",children:s.jsxs("div",{className:"py-6 mt-2 bg-white rounded-lg shadow-lg p-4",children:[s.jsxs("div",{className:"flex space-x-5 pl-4 ",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:t(l==null?void 0:l.zone_name)}),s.jsx("div",{className:"text-gray-500 text-xs capitalize",children:"Zone"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-lg",children:t(l==null?void 0:l.ward_no)}),s.jsx("div",{className:"text-gray-500 text-xs capitalize",children:"Ward No"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-md",children:t(l==null?void 0:l.ownership_type)}),s.jsx("div",{className:"text-gray-500 text-xs capitalize",children:"Ownership Type"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:t(l==null?void 0:l.property_type)}),s.jsx("div",{className:"text-gray-500 text-xs capitalize",children:"Property Type"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:t(l==null?void 0:l.holding_type)}),s.jsx("div",{className:"text-gray-500 text-xs capitalize",children:"Holding Type"})]})]}),s.jsxs("div",{className:"flex space-x-10  pl-4 mt-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:t(l==null?void 0:l.is_mobile_tower)}),s.jsx("div",{className:"text-gray-500 text-xs capitalize",children:"Property has Mobile Tower(s) ?"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-semibold text-md",children:[t(l==null?void 0:l.is_hoarding_board)," "]}),s.jsx("div",{className:"text-gray-500 text-xs capitalize",children:"Property has Hoarding Board(s) ?"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-md",children:t(l==null?void 0:l.is_petrol_pump)}),s.jsx("div",{className:"text-gray-500 text-xs capitalize",children:"Is property a Petrol Pump ?"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:t(l==null?void 0:l.is_water_harvesting)}),s.jsx("div",{className:"text-gray-500 text-xs capitalize",children:"Rainwater harvesting provision ?"})]}),s.jsx("div",{className:"flex-1"})]})]})}),(x==null?void 0:x.length)==0&&s.jsx("div",{className:"text-2xl font-bold text-red-500 mt-20 text-center",children:s.jsx("span",{className:"border border-red-500 px-4 py-2 shadow-xl",children:"No payments found yet."})}),(x==null?void 0:x.length)!=0&&s.jsx("div",{className:"mt-10 bg-white shadow-xl  rounded-lg",children:s.jsxs("table",{className:"min-w-full leading-normal mt-2",children:[s.jsx("thead",{className:"font-bold text-left text-sm bg-white text-gray-900",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs capitalize text-left",children:"#"}),s.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs capitalize text-left",children:"Tansaction No"}),s.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs capitalize text-left",children:"Payment Mode"}),s.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs capitalize text-left",children:"Date"}),s.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs capitalize text-left",children:"From final/Year"}),s.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs capitalize text-left",children:"Upto final/Year"}),s.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs capitalize text-left",children:"Amount"}),s.jsx("th",{className:"px-2 py-3 border-b border-gray-200 text-xs capitalize text-left",children:"Action"})]})}),s.jsxs("tbody",{className:"text-sm",children:[(f=x==null?void 0:x.Holding)==null?void 0:f.map((e,r)=>s.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r+1}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:t(e==null?void 0:e.tran_no)}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:t(e==null?void 0:e.payment_mode)}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:t(e==null?void 0:e.tran_date)}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:t(e==null?void 0:e.from_fyear)}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:t(e==null?void 0:e.to_fyear)}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:t(e==null?void 0:e.amount)}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:s.jsx("button",{onClick:()=>m(`/property/paymentReceipt/${e==null?void 0:e.id}/holding`,{state:{property_id:l==null?void 0:l.id,transactionData:e}}),type:"button",className:`cypress_owner_add_update ${h}`,children:"View Receipt"})})]})),(y=x==null?void 0:x.Saf)==null?void 0:y.map((e,r)=>s.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r+1}),s.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[t(e==null?void 0:e.tran_no),s.jsx("span",{className:v,children:"SAF"})]}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:t(e==null?void 0:e.payment_mode)}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:t(e==null?void 0:e.tran_date)}),s.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[t(e==null?void 0:e.from_qtr),"/",t(e==null?void 0:e.from_fyear)]}),s.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[t(e==null?void 0:e.to_qtr),"/",t(e==null?void 0:e.to_fyear)]}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:t(e==null?void 0:e.amount)}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:s.jsx("button",{onClick:()=>m(`/paymentReceipt/${e==null?void 0:e.tran_no}/saf`),type:"button",className:`cypress_owner_add_update ${h}`,children:"View Receipt"})})]})),(N=x==null?void 0:x.NakalFee)==null?void 0:N.map((e,r)=>s.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r+1}),s.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[t(e==null?void 0:e.tran_no),s.jsx("span",{className:v,children:"Nakkal"})]}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:t(e==null?void 0:e.payment_mode)}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:t(e==null?void 0:e.tran_date)}),s.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[t(e==null?void 0:e.from_qtr),"/",t(e==null?void 0:e.from_fyear)]}),s.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[t(e==null?void 0:e.to_qtr),"/",t(e==null?void 0:e.to_fyear)]}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:t(e==null?void 0:e.amount)}),s.jsx("td",{className:"px-2 py-2 text-sm text-left",children:s.jsx("button",{onClick:()=>m(`/holdinNakkal-receipt/${e==null?void 0:e.id}`),type:"button",className:`cypress_owner_add_update ${h}`,children:"View Receipt"})})]}))]})]})}),s.jsx("div",{className:"w-full h-40"})]})})}export{V as default};
