import{r as o,m as w,w as C,j as t,S as N,ai as p,c9 as v,ca as A,ah as L,a as R,cb as F,a4 as l,aM as P,f as M}from"./index-1c257416.js";function E(r){var m;const[i,c]=o.useState(),[e,a]=o.useState(!1),[n,d]=o.useState(!1),[H,u]=o.useState(!1);let S=[...(m=r==null?void 0:r.transactionRules)==null?void 0:m.tableColumns];o.useEffect(()=>{_()},[]);const _=()=>{var y,g,x,f,h,j;u(!0),d(!1),a(!1),w[(x=(g=(y=r==null?void 0:r.transactionRules)==null?void 0:y.api)==null?void 0:g.api_getTranscationHistory)==null?void 0:x.method]((j=(h=(f=r==null?void 0:r.transactionRules)==null?void 0:f.api)==null?void 0:h.api_getTranscationHistory)==null?void 0:j.url,C()).then(function(s){var T,b;(T=s==null?void 0:s.data)!=null&&T.status?(c((b=s==null?void 0:s.data)==null?void 0:b.data),a(!0)):d(!0),u(!1)}).catch(function(s){console.log("Server is too busy to respond, Please try again later",s),d(!0),a(!1),u(!1)})};if(n)return t.jsx(N,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"});if(!n)return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"w-ful md:px-10 md:pt-5 mx-auto",children:[H&&t.jsx(p,{}),e&&t.jsx(v,{errorMsg:"Some bug found",children:t.jsx(A,{assessmentType:!1,columns:S,dataList:i,export:!1})}),Array.isArray(i)&&(i==null?void 0:i.length)===0&&t.jsx("div",{className:"text-center mt-5 rounded py-2 font-semibold text-red-600",children:"No Transaction Found"})]})})}function z(){L("Property Payment History");const r=R(),{api_getTranscationHistory:i}=M(),c={api:{api_getTranscationHistory:{method:"get",url:i}},transactionInfo:{title:"Citizen Payment History"},tableColumns:[{Header:"#",Cell:({row:e})=>t.jsx("div",{className:"pr-2",children:e.index+1})},{Header:"SAF No./Holding No.",accessor:"saf_no",Cell:({cell:e})=>{var a;return t.jsx("div",{className:"pr-2",children:l((a=e.row.original)==null?void 0:a.saf_no)})}},{Header:"Transaction No.",accessor:"tran_no",Cell:({cell:e})=>{var a;return t.jsx("div",{className:"pr-2",children:l((a=e.row.original)==null?void 0:a.tran_no)})}},{Header:"Payment Mode",accessor:"payment_mode",Cell:({cell:e})=>{var a;return t.jsx("div",{className:"pr-2",children:l((a=e.row.original)==null?void 0:a.payment_mode)})}},{Header:"Transaction Date",accessor:"tran_date",Cell:({cell:e})=>{var a;return t.jsx("div",{className:"pr-2",children:l((a=e.row.original)==null?void 0:a.tran_date)})}},{Header:"Amount",accessor:"amount",Cell:({cell:e})=>{var a;return t.jsx("div",{className:"pr-2",children:P((a=e.row.original)==null?void 0:a.amount)})}},{Header:"Receipt",Cell:({cell:e})=>t.jsx("button",{onClick:()=>{var a,n;e.row.original.application_type=="SAF"?r(`/paymentReceipt/${(a=e.row.original)==null?void 0:a.tran_no}/saf`):r(`/paymentReceipt/${(n=e.row.original)==null?void 0:n.tran_no}/holding`)},type:"button",className:"cypress_owner_add_update px-2 py-2.5 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight uppercase rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View Receipt"})}]};return t.jsxs(t.Fragment,{children:[t.jsx(F,{titleText:"Property Transaction History"}),t.jsx(v,{errorMsg:"Bug in TransactionHistoryFactory",children:t.jsx(E,{transactionRules:c})})]})}export{z as default};
