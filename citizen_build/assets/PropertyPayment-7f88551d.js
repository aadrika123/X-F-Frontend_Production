import{u as Ne,r as m,t as ve,a as we,c as fe,d as h,b as _e,l as pe,v as ee,bQ as Se,j as e,o as ke,p as De,X as Ie,aH as b,q as me,as as Ue,bR as qe,$ as Pe,f as Ae,ae as Fe,S as Te,a1 as p,A as je}from"./index-23f57860.js";const K=localStorage.getItem("citizenName"),Z=localStorage.getItem("citizenMobile");function Ee(a){var U,q,F,T,E,j,c,g,f,o,N,R,M,C,z,Y,L,O,Q,be;const{propertyGenerateOrderId:ae,propertyGenerateHoldingOrderId:v,propertyGenerateOrderIdDirect:te,api_getTransactionNoForReceipt:D,api_postPropertyPayment:s,api_postSafPayment:xe}=Ae(),{id:I,moduleType:d,userType:se}=Ne(),[w,H]=m.useState(""),[le,k]=m.useState(!1),{t:n}=ve(),x=we();m.useState(!1);const[P,u]=m.useState(),[A,ne]=m.useState(!1),[oe,re]=m.useState(null),[ie,V]=m.useState(!1),[de,ce]=m.useState(null);let _;(d=="holding"||d=="direct")&&(_=fe({paymentUptoYear:h().required("Select Payment upto year"),paymentUptoQuarter:h().required("Select payment upt quarter"),paymentMode:h(),remarks:h().required("Enter remarks"),payAdvance:h(),advanceAmount:h().when("payAdvance",{is:!0,then:h().required("Enter advance amount")})})),d=="saf"&&(_=fe({paymentUptoYear:h(),paymentUptoQuarter:h(),paymentMode:h(),remarks:h(),payAdvance:h(),advanceAmount:h()}));const t=_e({initialValues:{paymentUptoYear:"",paymentUptoQuarter:"",paymentMode:"ONLINE",remarks:"",payAdvance:"",advanceAmount:""},onSubmit:(l,r)=>{console.log("values at submit payment",l),J(l)},validationSchema:_}),G=l=>{let r=l.target.name,i=l.target.value;r=="paymentMode"&&u(i),r=="payAdvance"&&ne(l.target.checked),r=="paymentUptoQuarter"&&(a==null||a.fetchDemandDetail(i,t.values.paymentUptoYear)),r=="remarks"&&t.setFieldValue("remarks",me(i,t.values.remarks,100)),r=="bankName"&&t.setFieldValue("bankName",me(i,t.values.bankName,100)),r=="branchName"&&t.setFieldValue("branchName",me(i,t.values.branchName,100)),r=="cheque_dd_no"&&t.setFieldValue("cheque_dd_no",Ue(i,t.values.cheque_dd_no,20)),r=="advanceAmount"&&t.setFieldValue("advanceAmount",qe(i,t.values.advanceAmount,10))},W=l=>{console.log("all transaciton response.... =>",l),H(l.status),l!=null&&l.status?(X(l==null?void 0:l.data),Pe.success("Payment Success....")):Pe.error("Payment failed....")},X=l=>{let r={orderId:l==null?void 0:l.razorpay_order_id,paymentId:l==null?void 0:l.razorpay_payment_id};pe.post(D,r,ee()).then(function(i){var $,B;re((B=($=i==null?void 0:i.data)==null?void 0:$.data)==null?void 0:B.transaction_no),console.log("transaction no get response...",i==null?void 0:i.data),k(!1)}).catch(function(i){console.log("transaction no get error...",i),k(!1)})};console.log("demand details => ",(U=a==null?void 0:a.safPaymentDetailsData)==null?void 0:U.isPayable);const J=async l=>{var $,B,ue;k(!0);let r,i;d=="holding"&&(r=v,i={propId:I,amount:($=a==null?void 0:a.paymentDetails)==null?void 0:$.payableAmount,name:K,contact:Z,qtr:l==null?void 0:l.paymentUptoQuarter,fYear:l==null?void 0:l.paymentUptoYear}),d=="saf"&&(r=ae,i={id:I,amount:(B=a==null?void 0:a.safPaymentDetailsData)==null?void 0:B.payableAmount,name:K,contact:Z}),d=="direct"&&(r=te,i={propId:I,amount:(ue=a==null?void 0:a.paymentDetails)==null?void 0:ue.payableAmount,name:K,contact:Z,qtr:l==null?void 0:l.paymentUptoQuarter,fYear:l==null?void 0:l.paymentUptoYear}),console.log("name....",K,"....mobile..",Z),console.log("orderidpayload at payment before...",i,"moduleId..",d),pe.post(r,i,ee()).then(y=>{var ye,he,ge;console.log("Order Id Response ",y==null?void 0:y.data),((ye=y==null?void 0:y.data)==null?void 0:ye.status)===!0?(console.log("OrderId Generated True",(he=y==null?void 0:y.data)==null?void 0:he.data),Se((ge=y==null?void 0:y.data)==null?void 0:ge.data,W)):S(!0,"Error occured. Please try again later."),k(!1)}).catch(y=>{S(!0,"Error occured. Please try again later."),console.log("ERROR :-  Unable to Generate Order Id ",y),k(!1)})},S=(l,r)=>{ce(r),V(l)};return w==!0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-full bg-white p-20",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-center font-semibold text-3xl",children:[n("mainPropertyPaymentPage.paymentSuccessMessage.label")," "]}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("button",{className:"mr-4 bg-indigo-500  text-white px-6 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>x(`/paymentReceipt/${oe}/${d=="saf"?"saf":"holding"}`),children:n("mainPropertyPaymentPage.viewReceipt.label")}),d!="direct"&&e.jsx("button",{className:"mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>x(`/propApplicationDetails/${I}`),children:n("mainPropertyPaymentPage.viewApplication.label")})]})]})})}):e.jsxs(e.Fragment,{children:[le&&e.jsx(ke,{}),ie&&e.jsx(De,{activateBottomErrorCard:S,errorTitle:de}),e.jsx(Ie,{position:"top-right",autoClose:2e3}),e.jsx("div",{className:" block p-4 mt-4 w-full md:py-4 md:px-40 md:pb-0 md:pt-0 rounded-lg shadow-lg bg-white md:w-full mx-auto  overflow-x-auto mb-20 ",children:e.jsx("div",{className:" block p-4 w-full md:py-6 rounded-lg bg-white mx-auto ",children:e.jsx("form",{onSubmit:t.handleSubmit,onChange:G,className:"p-4 relative",children:e.jsxs("div",{className:"grid grid-cols-12",children:[d!="saf"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),n("mainPropertyPaymentPage.paymentUptoYear.label")]}),e.jsxs("select",{...t.getFieldProps("paymentUptoYear"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:n("mainPropertyPaymentPage.select.label")}),(F=(q=a==null?void 0:a.paymentDetails)==null?void 0:q.paymentUptoYrs)==null?void 0:F.map((l,r)=>e.jsx("option",{selected:r==0,value:l,children:l}))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.paymentUptoYear&&t.errors.paymentUptoYear?t.errors.paymentUptoYear:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),n("mainPropertyPaymentPage.paymentUptoQuarter.label")]}),e.jsxs("select",{...t.getFieldProps("paymentUptoQuarter"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:[e.jsx("option",{value:"",children:n("mainPropertyPaymentPage.select.label")}),(E=(T=a==null?void 0:a.paymentDetails)==null?void 0:T.paymentUptoQtrs)==null?void 0:E.map((l,r)=>e.jsx("option",{selected:r==0,value:l,children:l}))]}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.paymentUptoQuarter&&t.errors.paymentUptoQuarter?t.errors.paymentUptoQuarter:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),n("mainPropertyPaymentPage.paymentMode.label")]}),e.jsx("select",{...t.getFieldProps("paymentMode"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",children:e.jsxs("option",{value:"ONLINE",children:[" ",n("mainPropertyPaymentPage.online.label")]})}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.paymentMode&&t.errors.paymentMode?t.errors.paymentMode:null})]}),se!="direct"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),n("mainPropertyPaymentPage.remarks.label")]}),e.jsx("input",{...t.getFieldProps("remarks"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.remarks&&t.errors.remarks?t.errors.remarks:null})]}),(P=="CHEQUE"||P=="DD")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),n("mainPropertyPaymentPage.bankName.label")]}),e.jsx("input",{...t.getFieldProps("bankName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.bankName&&t.errors.bankName?t.errors.bankName:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),n("mainPropertyPaymentPage.branchName.label")]}),e.jsx("input",{...t.getFieldProps("branchName"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.branchName&&t.errors.branchName?t.errors.branchName:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),n("mainPropertyPaymentPage.chequeDdNo.label")]}),e.jsx("input",{...t.getFieldProps("cheque_dd_no"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.cheque_dd_no&&t.errors.cheque_dd_no?t.errors.cheque_dd_no:null})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:" mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),n("mainPropertyPaymentPage.chequeDdDate.label")]}),e.jsx("input",{...t.getFieldProps("cheque_dd_date"),type:"date",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md cursor-pointer",placeholder:"Enter new ward no."}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.cheque_dd_date&&t.errors.cheque_dd_date?t.errors.cheque_dd_date:null})]})]}),d!="saf"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsx("input",{...t.getFieldProps("payAdvance"),id:"checked-checkbox",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 cursor-pointer"}),e.jsx("label",{for:"checked-checkbox",class:"ml-2 text-sm font-medium text-gray-900 darks:text-gray-300",children:n("mainPropertyPaymentPage.payAdvance.label")}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.payAdvance&&t.errors.payAdvance?t.errors.payAdvance:null})]}),A&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("label",{className:"form-label inline-block mb-1 text-gray-600 text-sm font-semibold",children:[e.jsx("small",{className:"block mt-1 text-sm font-semibold text-red-600 inline ",children:"*"}),n("mainPropertyPaymentPage.advanceAmount.label")]}),e.jsx("input",{...t.getFieldProps("advanceAmount"),type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none placeholder-gray-300 shadow-md",placeholder:"Enter advance amount in ₹"}),e.jsx("span",{className:"text-red-600 absolute text-xs",children:t.touched.advanceAmount&&t.errors.advanceAmount?t.errors.advanceAmount:null})]})]}),e.jsx("div",{className:"col-span-12"}),d!="saf"&&e.jsxs("div",{className:"bg-white col-span-12 grid grid-cols-12 pt-6 mb-4 border border-gray-200",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("span",{children:["Total Tax",n("mainPropertyPaymentPage.totalTax.label")," :"]})," ",e.jsx("span",{className:"font-mono font-semibold",children:b((j=a==null?void 0:a.paymentDetails)==null?void 0:j.totalDues)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("span",{children:[" ",n("mainPropertyPaymentPage.advanceAmountPaid.label")," :"]})," ",e.jsx("span",{className:"font-mono font-semibold",children:b((c=a==null?void 0:a.paymentDetails)==null?void 0:c.advanceAmt)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("span",{children:[" ",n("mainPropertyPaymentPage.rebate.label")," :"]})," ",e.jsx("span",{className:"font-mono font-semibold",children:b((g=a==null?void 0:a.paymentDetails)==null?void 0:g.rebateAmt)})]}),d=="saf"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("span",{children:[" ",n("mainPropertyPaymentPage.lateAssessmentPenalty.label")," :"]})," ",e.jsx("span",{className:"font-mono font-semibold",children:b((f=a==null?void 0:a.paymentDetails)==null?void 0:f.lateAssPenalty)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("span",{children:[" ",n("mainPropertyPaymentPage.specialRebate.label")," :"]})," ",e.jsx("span",{className:"font-mono font-semibold",children:b((o=a==null?void 0:a.paymentDetails)==null?void 0:o.specialRebateAmt)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("span",{children:[" ",n("mainPropertyPaymentPage.onePercentPenalty.label")," :"]})," ",e.jsx("span",{className:"font-mono font-semibold",children:b((N=a==null?void 0:a.paymentDetails)==null?void 0:N.onePercPenalty)})]}),e.jsx("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:e.jsxs("div",{className:"w-2/3",children:[e.jsxs("span",{children:[" ",n("mainPropertyPaymentPage.totalPayableAmount.label")," :"]})," ",e.jsx("span",{className:"font-mono font-semibold text-xl",children:b((R=a==null?void 0:a.paymentDetails)==null?void 0:R.payableAmount)})]})})]}),d=="saf"&&e.jsxs("div",{className:"bg-white col-span-12 grid grid-cols-12 pt-6 mb-4 border border-gray-200",children:[e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("span",{children:[" ",n("mainPropertyPaymentPage.totalTax.label")," :"]})," ",e.jsx("span",{className:"font-mono font-semibold",children:b((M=a==null?void 0:a.safPaymentDetailsData)==null?void 0:M.totalTax)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("span",{children:[" ",n("mainPropertyPaymentPage.rebate.label")," :"]})," ",e.jsx("span",{className:"font-mono font-semibold",children:b((C=a==null?void 0:a.safPaymentDetailsData)==null?void 0:C.rebateAmt)})]}),d=="saf"&&e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("span",{children:[n("mainPropertyPaymentPage.lateAssessmentPenalty.label")," :"]})," ",e.jsx("span",{className:"font-mono font-semibold",children:b((z=a==null?void 0:a.safPaymentDetailsData)==null?void 0:z.lateAssessmentPenalty)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("span",{children:[n("mainPropertyPaymentPage.specialRebate.label")," :"]})," ",e.jsx("span",{className:"font-mono font-semibold",children:b((Y=a==null?void 0:a.safPaymentDetailsData)==null?void 0:Y.specialRebateAmt)})]}),e.jsxs("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:[e.jsxs("span",{children:[n("mainPropertyPaymentPage.onePercentPenalty.label")," :"]})," ",e.jsx("span",{className:"font-mono font-semibold",children:b((L=a==null?void 0:a.safPaymentDetailsData)==null?void 0:L.totalOnePercPenalty)})]}),e.jsx("div",{className:"form-group mb-6 col-span-12 md:col-span-6 md:px-4",children:e.jsxs("div",{className:"w-2/3",children:[e.jsxs("span",{children:[n("mainPropertyPaymentPage.totalPayableAmount.label")," :"]})," ",e.jsx("span",{className:"font-mono font-semibold text-xl",children:b((O=a==null?void 0:a.safPaymentDetailsData)==null?void 0:O.payableAmount)})]})})]}),e.jsxs("div",{className:"col-span-12 grid grid-cols-2 mt-10",children:[e.jsx("div",{className:""}),e.jsx("div",{className:"md:pl-10 text-right",children:e.jsxs("button",{type:"submit",className:"ml-4 font-bold px-6 py-2 bg-indigo-500 text-white  text-sm leading-tight uppercase rounded  hover:bg-indigo-700 hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:bg-indigo-800 active:shadow-lg transition duration-150 ease-in-out shadow-xl border border-white",children:[e.jsx("span",{className:"mr-2",children:n("mainPropertyPaymentPage.pay.label")}),d=="saf"&&b((Q=a==null?void 0:a.safPaymentDetailsData)==null?void 0:Q.payableAmount),d!="saf"&&b((be=a==null?void 0:a.paymentDetails)==null?void 0:be.payableAmount)]})})]})]})})})})]})}function Me(a){var _,t,G,W,X,J,S,U,q,F,T,E;const[ae,v]=m.useState(!1),[te,D]=m.useState(!1);m.useState();const[s,xe]=m.useState(),[I,d]=m.useState();m.useState(!1);const[se,w]=m.useState(!1),[H,le]=m.useState(null),[k,n]=m.useState(null),{t:x}=ve(),{id:P,moduleType:u}=Ne(),A=we(),{zeroDemandPayment:ne,api_getDirectHoldingDemandById:oe,api_getHoldingDemandById:re,api_getsafDemandById:ie}=Ae(),V=(j=null,c=null)=>{w(!1);let g,f;u=="holding"&&(g=re,f={propId:P,fYear:c,qtr:j}),u=="saf"&&(g=ie,f={id:P}),u=="direct"&&(g=oe,f={propId:P,fYear:c,qtr:j}),j!==null?D(!0):v(!0),console.log("before hit => ",f,g),je.post(g,f,ee()).then(function(o){var N,R,M,C,z,Y,L,O,Q;console.log("payment details data...",o==null?void 0:o.data),xe((N=o==null?void 0:o.data)==null?void 0:N.data),d(o==null?void 0:o.data),((M=(R=o==null?void 0:o.data)==null?void 0:R.data)==null?void 0:M.paymentStatus)==1&&A(`/viewDemand/${P}`),j!==null?D(!1):v(!1),n((Y=(z=(C=o==null?void 0:o.data)==null?void 0:C.data)==null?void 0:z.amounts)==null?void 0:Y.isPayable),((Q=(O=(L=o==null?void 0:o.data)==null?void 0:L.data)==null?void 0:O.amounts)==null?void 0:Q.isPayable)==!1&&de()}).catch(function(o){console.log("payment details error...",o),w(!0),j!==null?D(!1):v(!1)})},de=()=>{v(!0),w(!1);let j={id:P,paymentMode:"Online"};je.post(ne,j,ee()).then(c=>{var g,f,o,N;console.log("response zero payment => ",c),(g=c==null?void 0:c.data)!=null&&g.status?(console.log("response zero payment => ",(f=c==null?void 0:c.data)==null?void 0:f.data),le((N=(o=c==null?void 0:c.data)==null?void 0:o.data)==null?void 0:N.TransactionNo)):(console.log("false status response zero payment => ",c),w(!0))}).catch(c=>{console.log("error zero payment => ",c),w(!0)}).finally(()=>v(!1))};if(m.useEffect(()=>{V()},[P,u]),ae)return e.jsxs(e.Fragment,{children:[e.jsx(Fe,{}),e.jsx("div",{className:"min-h-screen"})]});if(se)return e.jsx(Te,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"});const ce=()=>{u!="direct"&&A(`/paymentReceipt/${H}/${u=="saf"?"saf":"holding"}`),u=="direct"&&A(`/paymentReceipt/direct/${H}/${u=="saf"?"saf":"holding"}`)};return e.jsxs(e.Fragment,{children:[te&&e.jsx(ke,{}),e.jsxs("div",{className:u=="direct"&&" p-4 mt-10",children:[e.jsx("div",{className:"w-full bg-white shadow-xl mb-6",children:e.jsxs("div",{className:"py-6 mt-2 rounded-lg shadow-lg p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-5 pl-4 ",children:[u!="saf"&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((_=s==null?void 0:s.basicDetails)==null?void 0:_.holding_no)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[x("mainPropertyPaymentPage.holdingNo.label")," "]})]}),u=="saf"&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((t=s==null?void 0:s.basicDetails)==null?void 0:t.saf_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:x("mainPropertyPaymentPage.applicationNo.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((G=s==null?void 0:s.basicDetails)==null?void 0:G.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:x("mainPropertyPaymentPage.wardNo.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:p((W=s==null?void 0:s.basicDetails)==null?void 0:W.old_ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:x("mainPropertyPaymentPage.newWardNo.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:p((X=s==null?void 0:s.basicDetails)==null?void 0:X.ownership_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:x("mainPropertyPaymentPage.ownershipType.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((J=s==null?void 0:s.basicDetails)==null?void 0:J.property_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:x("mainPropertyPaymentPage.propertyType.label")})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-x-10  pl-4 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((S=s==null?void 0:s.basicDetails)==null?void 0:S.zone_mstr_id)}),e.jsx("div",{className:"text-gray-500 text-xs",children:x("mainPropertyPaymentPage.zone.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((U=s==null?void 0:s.basicDetails)==null?void 0:U.is_mobile_tower)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[x("mainPropertyPaymentPage.propertyHasMobileTower.label")," ?"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-md",children:[p((q=s==null?void 0:s.basicDetails)==null?void 0:q.is_hoarding_board)," "]}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[x("mainPropertyPaymentPage.propertyHasHoardingBoard.label")," ?"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:p((F=s==null?void 0:s.basicDetails)==null?void 0:F.is_petrol_pump)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[x("mainPropertyPaymentPage.isPropertyPetrolPump.label")," ?"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:p((T=s==null?void 0:s.basicDetails)==null?void 0:T.is_water_harvesting)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[x("mainPropertyPaymentPage.rainwaterHarvestingProvision.label")," ?"]})]})]})]})}),e.jsx("div",{children:k==!1?e.jsx("div",{className:"w-full h-full bg-white p-20",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-center font-semibold text-3xl",children:[x("mainPropertyPaymentPage.applicationSubmittedMessage.label"),"!"]}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsxs("button",{className:"mr-4 bg-indigo-500  text-white px-6 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>ce(),children:[x("mainPropertyPaymentPage.viewReceipt.label")," "]}),u!="direct"&&e.jsxs("button",{className:"mr-4 bg-white border border-indigo-500 text-indigo-500 px-4 py-1 shadow-lg hover:scale-105 rounded-sm",onClick:()=>A(`/propApplicationDetails/${P}`),children:[x("mainPropertyPaymentPage.viewApplication.label")," "]})]})]})}):e.jsx(Ee,{fetchDemandDetail:V,safPaymentDetailsData:s==null?void 0:s.amounts,paymentDetails:s==null?void 0:s.duesList,ulbId:(E=s==null?void 0:s.basicDetails)==null?void 0:E.ulb_id})})]}),e.jsx("div",{className:"w-full h-40 md:none"})]})}export{Me as default};
