import{aN as de,r as t,a as ce,j as e,M as G,A as L,c4 as z,bN as re,c9 as Q,$ as j,v as me,ae as xe,h as he,S as ge}from"./index-a511550f.js";import{H as ue}from"./HoardingApplicationFullDetail-cf268530.js";import{A as pe}from"./AdvtListTablePagination-d12139ed.js";const ve={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"",border:"none"}};function fe(a){var u,c,p,S,v,r;const[y,x]=de.useState(!1),{api_getHoardingOrderIdForPayment:N}=Q(),[C,b]=t.useState(),d=ce();t.useEffect(()=>{a.openPaymentModal>0&&x(!0)},[a.openPaymentModal]),console.log("payment card details",a==null?void 0:a.applicationDetails);function H(){}function h(){x(!1)}const g=(n,o)=>{j.dismiss(),o=="success"&&j.success(n),o=="error"&&j.error(n)},_=n=>{var o;console.log("Payment Status =>",n),(n==null?void 0:n.status)==!0?(d(`/paymentScreen/${n.data.razorpay_payment_id}/${(o=a==null?void 0:a.applicationDetails)==null?void 0:o.workflow_id}`),g("Payment Successfull","success")):(j.error("Payment failed...."),g("Payment Failed","error"),d("/advertDashboard"))},w=n=>{console.log("payment id on click pay",n.target.id);const A={id:n.target.id};L.post(`${N}`,A,z()).then(function(s){console.log("generate order id",s.data),s.data.status==!0&&(console.log("OrderId Generated True",s.data),re(s.data.data,_)),b(s)}).catch(function(s){alert("Backend Server error. Unable to Generate Order Id")})};return e.jsx("div",{className:"",children:e.jsx(G,{isOpen:y,onAfterOpen:H,onRequestClose:h,style:ve,contentLabel:"Example Modal",children:e.jsx("div",{className:"bg-violet-200 text-slate-50 drop-shadow-2xl border border-violet-500 p-5 m-5 rounded-md",children:e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"shadow-md shadow-violet-300 py-1 pl-3 bg-white border-gray-400 text-gray-600 flex",children:["Make Payment For",e.jsxs("span",{className:"font-bold text-md ml-4 uppercase ",children:[(u=a==null?void 0:a.applicationDetails)==null?void 0:u.type," "]})]}),e.jsxs("div",{className:"md:flex block w-full h-56",children:[e.jsxs("div",{className:"grid grid-cols-12 px-8 pt-3 leading-8 ",children:[e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-6  text-gray-600",children:[e.jsx("p",{children:"Application No. -"}),e.jsx("p",{children:"Applied date -"})]}),e.jsxs("div",{className:"col-span-6 text-gray-500 font-bold",children:[e.jsxs("p",{children:[(c=a==null?void 0:a.applicationDetails)==null?void 0:c.application_no," "]}),e.jsx("p",{children:(p=a==null?void 0:a.applicationDetails)==null?void 0:p.application_date})]})]})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("p",{children:"Approve Date -"})}),e.jsx("div",{className:"col-span-6 text-gray-500 font-bold",children:e.jsxs("p",{children:[(S=a==null?void 0:a.applicationDetails)==null?void 0:S.approve_date,"  "]})})]})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("h1",{className:"font-bold text-lg ",children:"Payable Amount"})})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("h1",{className:"font-bold text-lg bg-violet-300 px-2 ",children:(v=a==null?void 0:a.applicationDetails)==null?void 0:v.payment_amount})})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsxs("div",{className:"col-span-6  text-gray-600",children:[e.jsx("button",{onClick:h,className:"mx-2 bg-red-600 hover:bg-red-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm  rounded-sm shadow-xl",children:"Cancel"}),e.jsx("button",{onClick:w,id:(r=a==null?void 0:a.applicationDetails)==null?void 0:r.id,className:"mx-2 bg-indigo-600 hover:bg-indigo-700 transition duration-200 hover:scale-105 font-normal text-white px-6 py-1 text-sm  rounded-sm shadow-xl",children:"Pay Now"})]})})}),e.jsx("div",{className:"md:col-span-6 col-span-12",children:e.jsx("div",{className:"grid grid-cols-12",children:e.jsx("div",{className:"col-span-6  text-gray-600",children:e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/256/7057/7057515.png",className:"h-16"})})})})]}),e.jsx("div",{className:"",children:e.jsx("div",{className:""})})]})]})})})})}function be(){const[a,y]=t.useState(),[x,N]=t.useState(),{api_getHoardingUnpaidApplicationList:C,api_getHoardingApplicationDetailForPayment:b}=Q(),[d,H]=t.useState([]),[h,g]=t.useState(),[_,w]=t.useState(!1),[u,c]=t.useState(!1),[p,S]=t.useState(!1),v=()=>c(!0),r=()=>c(!1),n=()=>{},[o,A]=t.useState(0);t.useState(!1);const[s,J]=t.useState(!1),[k,F]=t.useState(!1),[K,P]=t.useState(!1),[W,X]=t.useState(0),[I,Y]=t.useState(1),[Z,E]=t.useState(0),[D,ee]=t.useState(10),[M,ae]=t.useState(""),[te,R]=t.useState(!1),se=[{Header:"#",Cell:({row:l})=>e.jsx("div",{className:"pr-2",children:l.index+1})},{Header:"Application No",accessor:"application_no"},{Header:"Apply Date",accessor:"application_date"},{Header:"Payment Amount",accessor:"payment_amount"},{Header:"Action",accessor:"id",Cell:({cell:l})=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ne(l.row.values.id,"Approve"),className:`bg-indigo-500 px-3 py-1 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700\r
                    hover:text-white text-white`,children:"View"}),e.jsx("button",{onClick:()=>le(l.row.values.id),className:`bg-indigo-500 ml-4 px-3 py-1 rounded leading-5 shadow-lg hover:shadow-xl hover:bg-indigo-700\r
                 hover:text-white text-white`,children:"Pay"})]})}],ne=(l,m)=>{console.log("..............application id..............",l),console.log("..............application type..............",m),N(l),y(m),v()},le=l=>{const O={applicationId:l};L.post(`${b}`,O,z()).then(function(i){console.log("application detail for payment 1",i),g(i.data.data),A(f=>f+1)}).catch(function(i){console.log("errorrr.... ",i)})};t.useEffect(()=>{T(I,D,M)},[I,M,D]);const T=(l,m,O="")=>{R(!0),P(!0),L.post(C,{page:l,perPage:m,key:O},me()).then(i=>{var f,U,V,$,q,B;J((U=(f=i.data)==null?void 0:f.data)==null?void 0:U.data),F(!0),P(!1),X(($=(V=i.data)==null?void 0:V.data)==null?void 0:$.total),E((B=(q=i.data)==null?void 0:q.data)==null?void 0:B.last_page)}).catch(i=>{console.log("Error while fetching Filter Data",i),F(!1),P(!1)}),setTimeout(()=>{R(!1)},[500])},ie={totalDataCount:W,currentPageIndex:I,setcurrentPageIndex:Y,pageLength:D,setpageLength:ee,lastPageIndex:Z,setlastPageIndex:E,fetchInboxList:T,searchValue:M,setsearchValue:ae,refreshStatus:te},oe=l=>{w(l)};return K?e.jsx(e.Fragment,{children:e.jsx(xe,{})}):p?e.jsx(he,{children:e.jsx(ge,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"})}):(console.log("unpaid application full list",d==null?void 0:d.data),e.jsx(e.Fragment,{children:e.jsx("div",{className:"container bg-white text-gray-600 h-screen mx-auto mt-16",children:e.jsxs("div",{children:[e.jsx(fe,{openPaymentModal:o,applicationDetails:h}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-12 gap-4 container mx-auto pt-4 ",children:e.jsx("div",{className:"col-span-12 p-2",children:e.jsxs("div",{className:"flex flex-row bg-white mb-4 rounded leading-5 shadow-md shadow-violet-100 ",children:[e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/3288/3288006.png",className:"h-10 ml-3 mt-2"}),e.jsx("h1",{className:"text-xl text-gray-700 font-semibold p-4",children:"HOARDING UNPAID APPLICATIONS"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 p-2",children:[k&&(s==null?void 0:s.length)!=0&&e.jsx(pe,{columns:se,dataList:s,values:ie}),k&&(s==null?void 0:s.length)==0&&e.jsx("div",{className:"text-xl font-semibold text-red-400 text-center",children:"Data Not Found"})]}),e.jsx("div",{className:"grid grid-cols-1",children:e.jsx(G,{isOpen:u,onAfterOpen:n,onRequestClose:r,contentLabel:"Example Modal",children:e.jsx("div",{class:" rounded-lg shadow-xl border-2 border-gray-50 mx-auto px-0 ",style:{width:"80vw",height:"100%"},children:e.jsx("div",{className:"h-[44rem] bg-white overflow-y-auto",children:e.jsx(ue,{data:x,applicationType:a,showLoader:oe,closeModal:r})})})})})]})})}))}export{be as default};
