import{u as w,a as B,p as F,Q as C,j as s}from"./index-96TN4Nrp.js";import{u as k,d as P}from"./router-Gz5zDwiC.js";import{r as n}from"./tailwind-I_6OOYa1.js";import{u as _}from"./formik.esm--kcEIyis.js";import{c as R,a as c}from"./index.esm-R3GYZtbq.js";import{I as q}from"./index.esm-CHsjkC1e.js";import{F as L}from"./FormProvider-drLJnCtF.js";import{T as M}from"./TextField-QWh9rUR8.js";import{S as y}from"./SelectField-S7dCjE4p.js";import"./index-iyheVW_q.js";import{P as z}from"./index-ODr-zU0J.js";import{S as W}from"./index-886_TdV7.js";import"./reactQuery-jbZnqRwH.js";import"./reactQueryDevtools-6dm9iask.js";import"./axios-lPgvryBG.js";import"./reactIcons-3AhG4mX-.js";import"./headlessui-KvrvKpJj.js";import"./customInputValidation-8tSUGdUh.js";import"./ArrowRightIcon-NJjRHE-T.js";function ls(){var o,i,t,h,p,x,j,f,m,v,b,u,N,g;const S=k(),a=w(),{data:r,isLoading:A,refetch:$}=B({api:(o=F)==null?void 0:o.searchApplication,config:a==null?void 0:a.searchSafApp,value:[(i=a==null?void 0:a.searchSafApp)==null?void 0:i.filteredBy,(t=a==null?void 0:a.searchSafApp)==null?void 0:t.searchBy,(h=a==null?void 0:a.searchSafApp)==null?void 0:h.value,a==null?void 0:a.searchSafApp.page,a==null?void 0:a.searchSafApp.perPage],options:{enabled:!!((p=a==null?void 0:a.searchSafApp)!=null&&p.filteredBy)&&!!((x=a==null?void 0:a.searchSafApp)!=null&&x.searchBy)&&!!((j=a==null?void 0:a.searchSafApp)!=null&&j.value)}}),l=_({enableReinitialize:!0,initialValues:a==null?void 0:a.searchSafApp,validationSchema:R().shape({filteredBy:c().required("Filtered By is required"),searchBy:c().required("Search By is required"),value:c().required("Value is required")}),onSubmit:async e=>{try{a==null||a.setSearchSafApp(e)}catch(d){C.error(d==null?void 0:d.message)}}});return s.jsx(z,{title:"Search Applications",children:s.jsxs("div",{className:"p-4",children:[s.jsx(n.Card,{className:"mb-4",children:s.jsxs(n.CardBody,{children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Search Applications"}),s.jsxs("div",{className:"items-center flex justify-start px-2 py-1 border rounded-lg gap-1 cursor-pointer",onClick:()=>{a==null||a.setSearchSafApp({filteredBy:"",searchBy:"",value:"",page:1,perPage:10}),l==null||l.resetForm()},children:[s.jsx(q,{className:"cursor-pointer text-blue-600",size:"1.2rem"}),s.jsx("small",{className:" text-blue-600 ",children:"Reset"})]})]}),s.jsx("div",{className:"border-t border-gray-200 my-2"}),s.jsxs(L,{formik:l,children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-2",children:[s.jsxs(y,{label:"Filtered By",name:"filteredBy",formik:l,children:[s.jsx("option",{value:"",children:"Select"}),[{label:"SAF",value:"saf"}].map(e=>s.jsx("option",{value:e==null?void 0:e.value,children:e==null?void 0:e.label},e==null?void 0:e.value))]}),s.jsxs(y,{label:"Search By",name:"searchBy",formik:l,children:[s.jsx("option",{value:"",children:"Select"}),[{label:"Application",value:"applicationNo"},{label:"Mobile",value:"mobileNo"},{label:"Name",value:"name"},{label:"Holding",value:"holding"}].map(e=>s.jsx("option",{value:e==null?void 0:e.value,children:e==null?void 0:e.label},e==null?void 0:e.value))]}),s.jsx("div",{className:"col-span-2",children:s.jsx(M,{label:"Value",name:"value",formik:l})})]}),s.jsx("div",{className:"flex justify-center mt-1",children:s.jsx(n.Button,{fullWidth:!0,type:"submit",color:"blue",children:"Search"})})]})]})}),s.jsx("div",{className:"border-t border-gray-200 my-2"}),A?s.jsx("div",{className:"flex justify-center my-16 items-center",children:s.jsx("h1",{className:"font-semibold",children:"Loading..."})}):((m=(f=r==null?void 0:r.data)==null?void 0:f.data)==null?void 0:m.length)>0?s.jsxs(s.Fragment,{children:[((b=(v=r==null?void 0:r.data)==null?void 0:v.data)==null?void 0:b.length)>0?(N=(u=r==null?void 0:r.data)==null?void 0:u.data)==null?void 0:N.map(e=>s.jsxs(P.Fragment,{children:[s.jsxs(n.Card,{className:"w-full",children:[s.jsxs(n.CardBody,{children:[s.jsxs("div",{className:"flex justify-between gap-2 mb-4",children:[s.jsxs("div",{className:"relative grid items-center px-2 py-1 font-sans text-xs font-bold text-red-900 uppercase rounded-md select-none whitespace-nowrap bg-red-500/20",children:[s.jsx("div",{className:"absolute w-4 h-4 top-2/4 left-1 -translate-y-2/4",children:s.jsx("span",{className:"mx-auto mt-1 block h-2 w-2 rounded-full bg-red-900 content-['']"})}),s.jsx("span",{className:"ml-4",children:e==null?void 0:e.current_role})]}),s.jsxs("div",{className:"relative grid items-center px-2 py-1 font-sans text-xs font-bold text-green-900 uppercase rounded-md select-none whitespace-nowrap bg-green-500/20",children:[s.jsx("div",{className:"absolute w-4 h-4 top-2/4 left-1 -translate-y-2/4",children:s.jsx("span",{className:"mx-auto mt-1 block h-2 w-2 rounded-full bg-green-900 content-['']"})}),s.jsx("span",{className:"ml-4",children:e==null?void 0:e.status})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("div",{children:s.jsx("h1",{className:"text-sm font-semibold",children:"Application No"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-sm ",children:e==null?void 0:e.saf_no})}),s.jsx("div",{children:s.jsx("h1",{className:"text-sm font-semibold",children:"Name"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-sm ",children:e==null?void 0:e.owner_name})}),s.jsx("div",{children:s.jsx("h1",{className:"text-sm font-semibold",children:"Mobile No"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-sm ",children:e==null?void 0:e.mobile_no})}),s.jsx("div",{children:s.jsx("h1",{className:"text-sm font-semibold",children:"Assessment"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-sm ",children:e==null?void 0:e.assessment_type})}),s.jsx("div",{children:s.jsx("h1",{className:"text-sm font-semibold",children:"Ward"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-sm ",children:e==null?void 0:e.new_ward_no})}),s.jsx("div",{children:s.jsx("h1",{className:"text-sm font-semibold",children:"Address"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-sm truncate w-40",children:e==null?void 0:e.prop_address})}),s.jsx("div",{children:s.jsx("h1",{className:"text-sm font-semibold",children:"Label"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-sm truncate lowercase",children:e==null?void 0:e.currentRole})})]})]}),s.jsx(n.CardFooter,{className:"-mt-8",children:s.jsxs(n.Button,{onClick:()=>S("/amc-app/property/saf-property-details/".concat(e==null?void 0:e.id)),size:"sm",variant:"text",className:"flex items-center gap-2 bg-gray-200 text-blue-500",children:["View Details",s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"h-4 w-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})})]})})]}),s.jsx("div",{className:"border-t border-gray-200 my-2"})]},e==null?void 0:e.id)):null,s.jsx(W,{active:a==null?void 0:a.searchSafApp,noOfPage:(g=r==null?void 0:r.data)==null?void 0:g.total,setActive:a==null?void 0:a.setSearchSafApp})]}):s.jsx("div",{className:"flex justify-center my-16 items-center",children:s.jsx("h1",{className:"font-semibold",children:"No Record Found"})})]})})}export{ls as default};
