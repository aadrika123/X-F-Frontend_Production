import{u as hs,a as ms,w as js,j as s}from"./index-kgqcLUgD.js";import{d as is}from"./router-g9NwwHut.js";import{u as bs}from"./formik.esm-MEJnthxH.js";import{h as n}from"./moment-X--WQ6sg.js";import"./index.esm-lGQm42K_.js";import{r as l}from"./tailwind-xMhOhnt0.js";import{F as fs}from"./FormProvider-3lUJpTxm.js";import"./index-KJUlVKah.js";import{P as Ns}from"./index-o0AMy7sT.js";import"./module-JpL022rF.js";import"./reactQuery-Q7rJjNxq.js";import"./reactQueryDevtools-6dm9iask.js";import"./axios-hq-Xw8mW.js";import"./reactIcons-TqjzQo_g.js";import"./headlessui-QgKi6LbN.js";function Os(){var c,x,o,h,m,j,i,b,f,N,u,p,y,D,v,g,M,F,_,Y,P,T,A,I,S,k,O,W,q,z,B,L,E,U,X,J,K,G,H,Q,Z,$,R,V,C,w,ss,as,es,rs,ds,ts,ns;const t=hs(),[d,us]=is.useState({fromDate:"",uptoDate:"",wardId:"",userId:(c=t==null?void 0:t.user)==null?void 0:c.id,zoneId:"",paymentMode:"",page:1,perPage:1e3}),e=ms({api:js.waterTcCollection,config:d,value:[d==null?void 0:d.fromDate,d==null?void 0:d.uptoDate,d==null?void 0:d.wardId,d==null?void 0:d.userId,d==null?void 0:d.zoneId,d==null?void 0:d.paymentMode,d==null?void 0:d.page,d==null?void 0:d.perPage],options:{enabled:!0}}),cs=bs({enableReinitialize:!0,initialValues:t==null?void 0:t.collectionReportProperty,onSubmit:a=>{t==null||t.setCollectionReportProperty(a)}}),xs="[C]Akola Municipal Corporation\n[C]Collection Summary\n[C]Water\n \n<b>Name: <b> "+((x=t==null?void 0:t.user)==null?void 0:x.name)+"\n<b>Mobile: </b><b>"+((o=t==null?void 0:t.user)==null?void 0:o.mobile)+"</b>\nForm: "+n().format("YYYY-MM-DD")+"\nUp to: "+n().format("YYYY-MM-DD")+"\n********************************\n[L]Tran No[C]  Date[C]  Mode[R]Amount\n"+((j=(m=(h=e==null?void 0:e.data)==null?void 0:h.data)==null?void 0:m.data)==null?void 0:j.map(a=>{var r;return"XX"+((r=a==null?void 0:a.tran_no)==null?void 0:r.slice(-4))+"[C]"+n(a==null?void 0:a.tran_date).format("DD-MM-yy")+"[C]"+(a==null?void 0:a.transaction_mode)+"[R]"+Math.round(a==null?void 0:a.amount)+"\n"}))+"\n********************************\nCash: "+((N=(f=(b=(i=e==null?void 0:e.data)==null?void 0:i.data)==null?void 0:b.data)==null?void 0:f.filter(a=>(a==null?void 0:a.transaction_mode)==="Cash"))==null?void 0:N.reduce((a,r)=>a+parseFloat(r==null?void 0:r.amount),0))+"\nCheque: "+((D=(y=(p=(u=e==null?void 0:e.data)==null?void 0:u.data)==null?void 0:p.data)==null?void 0:y.filter(a=>(a==null?void 0:a.transaction_mode)==="Cheque"))==null?void 0:D.reduce((a,r)=>a+parseFloat(r==null?void 0:r.amount),0))+"\nDD: "+((F=(M=(g=(v=e==null?void 0:e.data)==null?void 0:v.data)==null?void 0:g.data)==null?void 0:M.filter(a=>(a==null?void 0:a.transaction_mode)==="DD"))==null?void 0:F.reduce((a,r)=>a+parseFloat(r==null?void 0:r.amount),0))+"\nOnline: "+((T=(P=(Y=(_=e==null?void 0:e.data)==null?void 0:_.data)==null?void 0:Y.data)==null?void 0:P.filter(a=>(a==null?void 0:a.transaction_mode)==="Online"))==null?void 0:T.reduce((a,r)=>a+parseFloat(r==null?void 0:r.amount),0))+"\nTotal: "+Math.round((I=(A=e==null?void 0:e.data)==null?void 0:A.data)==null?void 0:I.totalAmount).toFixed(2)+"\n********************************\n\n",os=()=>{window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({Key:"PRINT_FOR_BT_PRINTER",keyData:{charPerLine:32,printTxt:xs}}))};return s.jsx(Ns,{title:"Collection Summary",children:s.jsxs("div",{className:"p-4 ",children:[s.jsx(fs,{formik:cs,children:s.jsx(l.Card,{className:"w-full",children:s.jsxs(l.CardBody,{children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("h1",{className:"font-semibold text-sm",children:["Collection Summary ",s.jsx("small",{children:"(Water)"})]})}),s.jsx("div",{className:"border-b-2 border-gray-300 w-full py-1"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[s.jsx("div",{className:"text-left",children:s.jsx("h1",{className:"text-sm font-semibold",children:"Name:"})}),s.jsx("div",{className:"text-left",children:s.jsx("h1",{className:"text-sm",children:(S=t==null?void 0:t.user)==null?void 0:S.name})}),s.jsx("div",{className:"text-left",children:s.jsx("h1",{className:"text-sm font-semibold",children:"Mobile:"})}),s.jsx("div",{className:"text-left",children:s.jsx("h1",{className:"text-sm",children:(k=t==null?void 0:t.user)==null?void 0:k.mobile})}),s.jsx("div",{className:"text-left",children:s.jsx("h1",{className:"text-sm font-semibold",children:"From Date:"})}),s.jsx("div",{className:"text-left",children:s.jsx("h1",{className:"text-sm",children:n().format("YYYY-MM-DD")})}),s.jsx("div",{className:"text-left",children:s.jsx("h1",{className:"text-sm font-semibold",children:"Upto Date:"})}),s.jsx("div",{className:"text-left",children:s.jsx("h1",{className:"text-sm",children:n().format("YYYY-MM-DD")})})]})]})})}),s.jsx("div",{className:"border-b-2 border-gray-300 w-full py-2"}),e!=null&&e.isLoading?s.jsx("h1",{className:"mt-24 font-semibold text-sm text-center",children:"Loading..."}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"py-2 ",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("h1",{className:"font-semibold text-sm",children:["No of collection-:"," ",((q=(W=(O=e==null?void 0:e.data)==null?void 0:O.data)==null?void 0:W.data)==null?void 0:q.length)||0]})}),s.jsx("div",{className:"py-2",children:((L=(B=(z=e==null?void 0:e.data)==null?void 0:z.data)==null?void 0:B.data)==null?void 0:L.length)>0?s.jsxs(s.Fragment,{children:[s.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",border:1,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("td",{className:"text-left text-sm p-2 border border-slate-300",children:s.jsx("small",{children:s.jsx("b",{children:"S.No"})})}),s.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:s.jsx("small",{children:s.jsx("b",{children:"Trans No"})})}),s.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:s.jsx("small",{children:s.jsx("b",{children:"Date"})})}),s.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:s.jsx("small",{children:s.jsx("b",{children:"Mode"})})}),s.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:s.jsx("small",{children:s.jsx("b",{children:"Amount"})})})]})}),s.jsx("tbody",{children:(X=(U=(E=e==null?void 0:e.data)==null?void 0:E.data)==null?void 0:U.data)==null?void 0:X.map((a,r)=>{var ls;return s.jsxs("tr",{children:[s.jsx("td",{className:"text-left text-sm p-2 border border-slate-300",children:r+1}),s.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:s.jsx("h1",{className:"text-sm",children:"xxx"+((ls=a==null?void 0:a.tran_no)==null?void 0:ls.slice(-5))})}),s.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:s.jsx("h1",{className:"text-sm",children:a==null?void 0:a.tran_date})}),s.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:s.jsx("h1",{className:"text-sm lowercase",children:a==null?void 0:a.transaction_mode})}),s.jsx("td",{className:"text-center text-sm p-2 border border-slate-300",children:s.jsx("h1",{className:"text-sm",children:a==null?void 0:a.amount})})]},r)})})]}),s.jsx("div",{className:"border-b-2 border-gray-300 w-full py-1"}),s.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm p-2 border border-slate-300",children:[s.jsx("small",{className:"font-bold",children:"Cash"}),s.jsxs("h1",{className:"text-sm text-green-700 mr-2",children:["₹",((H=(G=(K=(J=e==null?void 0:e.data)==null?void 0:J.data)==null?void 0:K.data)==null?void 0:G.filter(a=>(a==null?void 0:a.transaction_mode)==="Cash"))==null?void 0:H.reduce((a,r)=>a+parseFloat(r==null?void 0:r.amount),0))||0]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm p-2 border border-slate-300",children:[s.jsx("small",{className:"font-bold",children:"Cheque"}),s.jsxs("h1",{className:"text-sm text-green-700 mr-2",children:["₹",((R=($=(Z=(Q=e==null?void 0:e.data)==null?void 0:Q.data)==null?void 0:Z.data)==null?void 0:$.filter(a=>(a==null?void 0:a.transaction_mode)==="Cheque"))==null?void 0:R.reduce((a,r)=>a+parseFloat(r==null?void 0:r.amount),0))||0]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm p-2 border border-slate-300",children:[s.jsx("small",{className:"font-bold",children:"DD"}),s.jsxs("h1",{className:"text-sm text-green-700 mr-2",children:["₹",((ss=(w=(C=(V=e==null?void 0:e.data)==null?void 0:V.data)==null?void 0:C.data)==null?void 0:w.filter(a=>(a==null?void 0:a.transaction_mode)==="DD"))==null?void 0:ss.reduce((a,r)=>a+parseFloat(r==null?void 0:r.amount),0))||0]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm p-2 border border-slate-300",children:[s.jsx("small",{className:"font-bold",children:"Online"}),s.jsxs("h1",{className:"text-sm text-green-700 mr-2",children:["₹",((ds=(rs=(es=(as=e==null?void 0:e.data)==null?void 0:as.data)==null?void 0:es.data)==null?void 0:rs.filter(a=>(a==null?void 0:a.transaction_mode)==="Online"))==null?void 0:ds.reduce((a,r)=>a+parseFloat(r==null?void 0:r.amount),0))||0]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm p-2 border border-slate-300",children:[s.jsx("small",{className:"font-bold",children:"Total"}),s.jsxs("h1",{className:"text-sm text-green-700 mr-2",children:["₹",Math.round((ns=(ts=e==null?void 0:e.data)==null?void 0:ts.data)==null?void 0:ns.totalAmount).toFixed(2)||0]})]}),s.jsx("div",{className:"flex justify-center mt-4",children:s.jsx(l.Button,{color:"blue",size:"sm",onClick:os,children:"Print"})})]}):s.jsx("h1",{className:"mt-24 font-semibold text-sm text-center",children:"No Data Found"})})]})})]})})}export{Os as default};
