import{a as w,u as B,b as F,p as k,Q as C,j as e,r as l,R as _}from"./index-26-p7w-4.js";import{u as P}from"./formik.esm-gFKTrVOh.js";import{c as q,a as d}from"./index.esm-n36fjmXy.js";import{F as L}from"./FormProvider-GwJgoio4.js";import{T as R}from"./TextField-zZnWSXtK.js";import{S as g}from"./SelectField-wGEaMXgP.js";import"./index-Z8Y5rR5v.js";import{P as M}from"./index-rgo8Sp6i.js";import{S as W}from"./index-Xrkb3AVU.js";import"./ArrowRightIcon-I1KpqDhn.js";function K(){var i,c,o,t,h,p,x,m,j,f,v,b,N,u;const y=w(),a=B(),{data:r,isLoading:S,refetch:$}=F({api:(i=k)==null?void 0:i.searchApplication,config:a==null?void 0:a.searchSafApp,value:[(c=a==null?void 0:a.searchSafApp)==null?void 0:c.filteredBy,(o=a==null?void 0:a.searchSafApp)==null?void 0:o.searchBy,(t=a==null?void 0:a.searchSafApp)==null?void 0:t.value,a==null?void 0:a.searchSafApp.page,a==null?void 0:a.searchSafApp.perPage],options:{enabled:!!((h=a==null?void 0:a.searchSafApp)!=null&&h.filteredBy)&&!!((p=a==null?void 0:a.searchSafApp)!=null&&p.searchBy)&&!!((x=a==null?void 0:a.searchSafApp)!=null&&x.value)}}),n=P({enableReinitialize:!0,initialValues:a==null?void 0:a.searchSafApp,validationSchema:q().shape({filteredBy:d().required("Filtered By is required"),searchBy:d().required("Search By is required"),value:d().required("Value is required")}),onSubmit:async s=>{try{a==null||a.setSearchSafApp(s)}catch(A){C.error(A.message)}}});return e.jsx(M,{title:"Search Applications",children:e.jsxs("div",{className:"p-4",children:[e.jsx(l.Card,{className:"mb-4",children:e.jsxs(l.CardBody,{children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-lg font-semibold",children:"Search Applications"})}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs(L,{formik:n,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-2",children:[e.jsxs(g,{label:"Filtered By",name:"filteredBy",formik:n,children:[e.jsx("option",{value:"",children:"Select"}),[{label:"SAF",value:"saf"}].map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),e.jsxs(g,{label:"Search By",name:"searchBy",formik:n,children:[e.jsx("option",{value:"",children:"Select"}),[{label:"Application",value:"applicationNo"},{label:"Mobile",value:"mobileNo"},{label:"Name",value:"name"},{label:"Holding",value:"holding"}].map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),e.jsx("div",{className:"col-span-2",children:e.jsx(R,{label:"Value",name:"value",formik:n})})]}),e.jsx("div",{className:"flex justify-center mt-1",children:e.jsx(l.Button,{fullWidth:!0,type:"submit",color:"blue",children:"Search"})})]})]})}),e.jsx("div",{className:"border-t border-gray-200 my-2"}),S?e.jsx("div",{className:"flex justify-center my-16 items-center",children:e.jsx("h1",{className:"font-semibold",children:"Loading..."})}):((j=(m=r==null?void 0:r.data)==null?void 0:m.data)==null?void 0:j.length)>0?e.jsxs(e.Fragment,{children:[((v=(f=r==null?void 0:r.data)==null?void 0:f.data)==null?void 0:v.length)>0?(N=(b=r==null?void 0:r.data)==null?void 0:b.data)==null?void 0:N.map(s=>e.jsxs(_.Fragment,{children:[e.jsxs(l.Card,{className:"w-full",children:[e.jsxs(l.CardBody,{children:[e.jsxs("div",{className:"flex justify-between gap-2 mb-4",children:[e.jsxs("div",{className:"relative grid items-center px-2 py-1 font-sans text-xs font-bold text-red-900 uppercase rounded-md select-none whitespace-nowrap bg-red-500/20",children:[e.jsx("div",{className:"absolute w-4 h-4 top-2/4 left-1 -translate-y-2/4",children:e.jsx("span",{className:"mx-auto mt-1 block h-2 w-2 rounded-full bg-red-900 content-['']"})}),e.jsx("span",{className:"ml-4",children:s==null?void 0:s.current_role})]}),e.jsxs("div",{className:"relative grid items-center px-2 py-1 font-sans text-xs font-bold text-green-900 uppercase rounded-md select-none whitespace-nowrap bg-green-500/20",children:[e.jsx("div",{className:"absolute w-4 h-4 top-2/4 left-1 -translate-y-2/4",children:e.jsx("span",{className:"mx-auto mt-1 block h-2 w-2 rounded-full bg-green-900 content-['']"})}),e.jsx("span",{className:"ml-4",children:s==null?void 0:s.status})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"Application No"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm ",children:s==null?void 0:s.saf_no})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"Name"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm ",children:s==null?void 0:s.owner_name})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"Mobile No"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm ",children:s==null?void 0:s.mobile_no})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"Assessment"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm ",children:s==null?void 0:s.assessment_type})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"Ward"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm ",children:s==null?void 0:s.new_ward_no})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"Address"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm truncate w-20",children:s==null?void 0:s.prop_address})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"Label"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm truncate w-20",children:s==null?void 0:s.currentRole})})]})]}),e.jsx(l.CardFooter,{className:"-mt-8",children:e.jsxs(l.Button,{onClick:()=>y("/amc-app/property/saf-property-details/".concat(s.id)),size:"sm",variant:"text",className:"flex items-center gap-2 bg-gray-200 text-blue-500",children:["View Details",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})})]})})]}),e.jsx("div",{className:"border-t border-gray-200 my-2"})]},s==null?void 0:s.id)):null,e.jsx(W,{active:a==null?void 0:a.searchSafApp,noOfPage:(u=r==null?void 0:r.data)==null?void 0:u.total,setActive:a==null?void 0:a.setSearchSafApp})]}):e.jsx("div",{className:"flex justify-center my-16 items-center",children:e.jsx("h1",{className:"font-semibold",children:"No Record Found"})})]})})}export{K as default};
