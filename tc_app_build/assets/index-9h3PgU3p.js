import{j as e,r as u,a as G,R as $,i as z,m as Z,l as k,S as J,Q as P,p as E,e as K,n as X,L as ee}from"./index-YlgYywsm.js";import{u as se}from"./formik.esm-Qnn0-ts9.js";import{c as re,a as c}from"./index.esm-XDsOgNdM.js";import{P as te}from"./index-gn6m7S7m.js";import{O as le}from"./OverLayLoader-Qd7MZMoV.js";import{F as ae}from"./FormProvider-JSb_h6bL.js";import{T as d}from"./TextField-eV-baW1a.js";import{S as Y}from"./SelectField-kLQx8VrD.js";import"./module-MUwzLVfA.js";function ne({data:s}){var n,o,r,b,i,N,x,p,t,l,m,h,j,f,y,g,T,v,w,D;return e.jsx(u.Card,{children:e.jsxs(u.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Basic Details"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Holding No:"}),e.jsx("h1",{className:"text-sm",children:(o=(n=s==null?void 0:s.data)==null?void 0:n.basicDetails)==null?void 0:o.holding_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Property No:"}),e.jsx("h1",{className:"text-sm",children:(b=(r=s==null?void 0:s.data)==null?void 0:r.basicDetails)==null?void 0:b.property_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Owner Name:"}),e.jsx("h1",{className:"text-sm",children:(N=(i=s==null?void 0:s.data)==null?void 0:i.basicDetails)==null?void 0:N.owner_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Owner Name (In Marathi):"}),e.jsx("h1",{className:"text-sm",children:((p=(x=s==null?void 0:s.data)==null?void 0:x.basicDetails)==null?void 0:p.owner_name_marathi)||"N/A"})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Applicant Name:"}),e.jsx("h1",{className:"text-sm",children:(l=(t=s==null?void 0:s.data)==null?void 0:t.basicDetails)==null?void 0:l.applicant_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Address:"}),e.jsx("h1",{className:"text-sm",children:(h=(m=s==null?void 0:s.data)==null?void 0:m.basicDetails)==null?void 0:h.prop_address})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Zone:"}),e.jsx("h1",{className:"text-sm",children:(f=(j=s==null?void 0:s.data)==null?void 0:j.basicDetails)==null?void 0:f.zone_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Ward No:"}),e.jsx("h1",{className:"text-sm",children:(g=(y=s==null?void 0:s.data)==null?void 0:y.basicDetails)==null?void 0:g.ward_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Ownership Type:"}),e.jsx("h1",{className:"text-sm",children:(v=(T=s==null?void 0:s.data)==null?void 0:T.basicDetails)==null?void 0:v.ownership_type})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Property Type:"}),e.jsx("h1",{className:"text-sm",children:(D=(w=s==null?void 0:s.data)==null?void 0:w.basicDetails)==null?void 0:D.property_type})]})]})]})})}function de({data:s}){var n,o;return e.jsx(u.Card,{className:"mt-4 w-full",children:e.jsxs(u.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Demand List"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Financial Year :"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"General Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Road Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Firefighting Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"V. sanitation tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sewage Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tree Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Professional Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tax 1"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"State Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Benefit"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Bill"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sp Water Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Drain Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Big Building"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Open Plot Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Tax"})]})}),e.jsx("tbody",{children:(o=(n=s==null?void 0:s.data)==null?void 0:n.demandList)==null?void 0:o.map((r,b)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.fyear}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.general_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.road_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.firefighting_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.water_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.light_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.sewarage_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.tree_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.professional_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.tax1}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.water_benefit}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.water_bill}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.sp_water_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.drain_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.major_building}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.open_ploat_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:r.total_tax})]},b))})]})})]})})}function ie({data:s}){var n,o,r,b,i,N,x,p,t,l,m,h,j,f,y,g,T,v,w,D,_,A,a,C,q,I,F,B,R,M,S,U,O,L,H,Q,W,V;return e.jsx(u.Card,{className:"mt-4 w-full",children:e.jsxs(u.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Grand Total Tax"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"General Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Road Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Firefighting Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"V. sanitation tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sewage Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tree Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Professional Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tax 1"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"State Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Benefit"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Bill"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sp Water Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Drain Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Big Building"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Open Plot Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Interest"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Tax"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(o=(n=s==null?void 0:s.data)==null?void 0:n.grandTaxes)==null?void 0:o.general_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(b=(r=s==null?void 0:s.data)==null?void 0:r.grandTaxes)==null?void 0:b.road_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(N=(i=s==null?void 0:s.data)==null?void 0:i.grandTaxes)==null?void 0:N.firefighting_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(p=(x=s==null?void 0:s.data)==null?void 0:x.grandTaxes)==null?void 0:p.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(l=(t=s==null?void 0:s.data)==null?void 0:t.grandTaxes)==null?void 0:l.water_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(h=(m=s==null?void 0:s.data)==null?void 0:m.grandTaxes)==null?void 0:h.cleanliness_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(f=(j=s==null?void 0:s.data)==null?void 0:j.grandTaxes)==null?void 0:f.sewarage_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(g=(y=s==null?void 0:s.data)==null?void 0:y.grandTaxes)==null?void 0:g.tree_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(v=(T=s==null?void 0:s.data)==null?void 0:T.grandTaxes)==null?void 0:v.professional_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(D=(w=s==null?void 0:s.data)==null?void 0:w.grandTaxes)==null?void 0:D.tax1}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(A=(_=s==null?void 0:s.data)==null?void 0:_.grandTaxes)==null?void 0:A.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(C=(a=s==null?void 0:s.data)==null?void 0:a.grandTaxes)==null?void 0:C.water_benefit}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(I=(q=s==null?void 0:s.data)==null?void 0:q.grandTaxes)==null?void 0:I.water_bill}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(B=(F=s==null?void 0:s.data)==null?void 0:F.grandTaxes)==null?void 0:B.sp_water_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(M=(R=s==null?void 0:s.data)==null?void 0:R.grandTaxes)==null?void 0:M.drain_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(U=(S=s==null?void 0:s.data)==null?void 0:S.grandTaxes)==null?void 0:U.major_building}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(L=(O=s==null?void 0:s.data)==null?void 0:O.grandTaxes)==null?void 0:L.open_ploat_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(Q=(H=s==null?void 0:s.data)==null?void 0:H.grandTaxes)==null?void 0:Q.monthlyPenalty}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(V=(W=s==null?void 0:s.data)==null?void 0:W.grandTaxes)==null?void 0:V.total_tax})]})})]})})]})})}const oe=[{id:1,label:"Cash",value:"CASH"},{id:2,label:"Cheque",value:"CHEQUE"},{id:3,label:"DD",value:"DD"},{id:4,label:"Online",value:"ONLINE"},{id:5,label:"NEFT",value:"NEFT"}],me=[{id:1,label:"Full Payment",value:"isFullPayment"},{id:2,label:"Arrear Amount",value:"isArrearPayment"},{id:3,label:"Part Payment",value:"isPartPayment"}];function ce({data:s,formik:n,calculateActualAmount:o}){var r,b,i,N,x,p,t;return e.jsx(u.Card,{className:"mt-4 w-full",children:e.jsxs(u.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Payment Action"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold ",children:"* Total Arrear Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold text-red-500",children:["₹ ",(r=s==null?void 0:s.data)==null?void 0:r.arrear]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Total Current Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold text-cyan-500",children:["₹ ",(b=s==null?void 0:s.data)==null?void 0:b.currentDemand]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Total Interest Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold ",children:[e.jsxs("span",{className:"text-red-500",children:["₹ ",(i=s==null?void 0:s.data)==null?void 0:i.totalInterestPenalty]})," ",e.jsxs("small",{children:["( Interest on Arrear ₹ ",(N=s==null?void 0:s.data)==null?void 0:N.arrearInterest," + Previous Interest ₹ ",(x=s==null?void 0:s.data)==null?void 0:x.previousInterest,")"]})]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Total Payable Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold",children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",(p=s==null?void 0:s.data)==null?void 0:p.payableAmt]})," ",e.jsx("small",{children:"(Arrear + Current + Interest)"})]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-semibold",children:"* Advance Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold",children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",(t=s==null?void 0:s.data)==null?void 0:t.remainAdvance]})," ",e.jsx("small",{className:"text-green-500",children:"(This Is An Adjustable Amount From Total Payment Value.)"})]})})]}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs(ae,{formik:n,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(Y,{label:"Payment Mode",name:"paymentMode",formik:n,children:[e.jsx("option",{value:"",children:"select"}),oe.map(l=>e.jsx("option",{value:l.value,children:l.label},l.id))]})}),e.jsx("div",{children:e.jsxs(Y,{label:"Payment Option",name:"paymentType",formik:n,type:"select",children:[e.jsx("option",{value:"",children:"select"}),me.map(l=>{var m;return((m=s==null?void 0:s.data)==null?void 0:m.arrear)>0?e.jsx("option",{value:l.value,children:l.label},l.id):l.value!="isArrearPayment"&&e.jsx("option",{value:l.value,children:l.label},l.id)})]})})]}),n.values.paymentMode==="CHEQUE"?e.jsx(xe,{formik:n}):n.values.paymentMode==="DD"?e.jsx(he,{formik:n}):n.values.paymentMode==="NEFT"?e.jsx(be,{formik:n}):null,n.values.paymentType==="isPartPayment"&&e.jsx("div",{className:"",children:e.jsx(d,{label:"Part Payment Amount",name:"paidAmount",type:"number",formik:n})}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsxs(u.Button,{type:"submit",color:"indigo",disabled:!n.isValid,children:["Submit ₹",o()||0]})})]})]})})}const xe=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(d,{label:"Cheque No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"Cheque Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"Upload Cheque Image",name:"neftImage",type:"file",onChange:n=>{s.setFieldValue("neftImage",n.target.files[0])}})})]}),he=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(d,{label:"DD No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"DD Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"Upload DD Image",name:"neftImage",type:"file",onChange:n=>{s.setFieldValue("neftImage",n.target.files[0])}})})]}),be=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(d,{label:"NEFT No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"NEFT Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(d,{label:"Upload NEFT Image",name:"neftImage",type:"file",onChange:n=>{s.setFieldValue("neftImage",n.target.files[0])}})})]}),pe=re().shape({paymentMode:c().required("Payment Mode is required"),paymentType:c().required("Payment Type is required"),paidAmount:c().when(["paymentType"],{is:s=>s=="isPartPayment",then:()=>c().required("Part Payment Amount is required")}),chequeNo:c().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>c().required("Cheque No is required")}),chequeDate:c().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>c().required("Cheque Date is required")}),neftImage:c().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>c().required("Cheque Upload is required")}),bankName:c().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>c().required("Bank Name is required")}),branchName:c().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>c().required("Branch Name is required")}),paymentRemark:c().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>c().required("Payment Remark is required")})});function De(){var p;const s=G();$.useState(0);const n=z({}),{id:o}=Z(),{data:r,isLoading:b}=k({api:E.getDemandDetails,config:{propId:o},value:o,options:{enabled:!!o}}),i=se({enableReinitialize:!0,initialValues:{paymentMode:"",paymentType:"",chequeNo:"",chequeDate:"",bankName:"",branchName:"",paymentRemark:"",neftImage:"",paidAmount:""},validationSchema:pe,onSubmit:async t=>{J.fire({title:"Are you sure?",text:"You want to proceed with payment of Rs."+x(),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Proceed!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(l=>{l.isConfirmed&&N(t)}).catch(l=>{var m,h;P.error((h=(m=l==null?void 0:l.response)==null?void 0:m.data)==null?void 0:h.message)})}}),N=async t=>{var m,h,j,f,y,g,T,v,w,D,_,A;let l={};if(t.paymentMode==="ONLINE"){l={propId:o,paymentMode:t.paymentMode,paymentType:t.paymentType,paidAmount:x(),callbackUrl:"https://modernulb.com/amc-app/property/payment-history"};const a=await n.mutateAsync({api:E.iciciPayment,data:l});(m=a==null?void 0:a.data)!=null&&m.status?(P.success((h=a==null?void 0:a.data)==null?void 0:h.message),window.location.href=(f=(j=a==null?void 0:a.data)==null?void 0:j.data)==null?void 0:f.encryptUrl,i.resetForm()):P.error((y=a==null?void 0:a.data)==null?void 0:y.message)}else{t.paymentMode==="CHEQUE"||t.paymentMode==="DD"||t.paymentMode==="NEFT"?l={id:o,paymentMode:t.paymentMode,paymentType:t.paymentType,chequeNo:t.chequeNo,chequeDate:t.chequeDate,bankName:t.bankName,branchName:t.branchName,paymentRemark:t.paymentRemark,neftImage:t.neftImage,paidAmount:x()}:l={id:o,paymentMode:t.paymentMode,paymentType:t.paymentType,paidAmount:x()};try{const a=await n.mutateAsync({api:E.holdingPayment,data:l});(g=a==null?void 0:a.data)!=null&&g.status?(P.success((T=a==null?void 0:a.data)==null?void 0:T.message),s("/amc-app/property/payment-response?response=".concat((w=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:w.transactionId),{replace:!0}),i.resetForm()):P.error((D=a==null?void 0:a.data)==null?void 0:D.message)}catch(a){P.error((A=(_=a==null?void 0:a.response)==null?void 0:_.data)==null?void 0:A.message)}}},x=()=>{var l,m,h,j;let t=0;return i.values.paymentType=="isFullPayment"&&(t=parseInt((l=r==null?void 0:r.data)==null?void 0:l.payableAmt)-parseInt((m=r==null?void 0:r.data)==null?void 0:m.remainAdvance)),i.values.paymentType=="isArrearPayment"&&(t=parseInt((h=r==null?void 0:r.data)==null?void 0:h.arrearPayableAmt)-parseInt((j=r==null?void 0:r.data)==null?void 0:j.remainAdvance)),i.values.paymentType=="isPartPayment"&&(t=parseInt(i.values.paidAmount)),t};return K.useEffect(()=>{i.values.paymentType=="paidAmount"&&x()},[i.values.paidAmount]),b?e.jsx(X,{}):e.jsxs(te,{title:"Demand Details",children:[n.isLoading&&e.jsx(le,{}),e.jsx("div",{className:"flex flex-col h-full py-3 px-4",children:e.jsxs("div",{className:"flex flex-col flex-grow",children:[e.jsx(ne,{data:r}),e.jsx(de,{data:r}),e.jsx(ie,{data:r}),((p=r==null?void 0:r.data)==null?void 0:p.payableAmt)>0?e.jsx(ce,{formik:i,data:r,calculateActualAmount:x}):e.jsx("div",{className:"flex justify-center py-6",children:e.jsx(ee,{to:"/amc-app/property/search-holding",className:"text-red-500 border border-red-500 px-4 py-2 rounded-md hover:bg-red-500 hover:text-white transition duration-300 ease-in-out",children:"Payment Already Done"})})]})})]})}export{De as default};
