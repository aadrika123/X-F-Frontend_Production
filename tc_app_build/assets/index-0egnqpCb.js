import{u as y,l as u,p as N,j as e,r as i,L as o}from"./index-1sqOiZBd.js";import{u as g}from"./formik.esm--jhqzAub.js";import{c as v,a as w}from"./index.esm-1_PXug2K.js";import{U as P,P as B}from"./index-S0tXsL_4.js";import{F as S}from"./FormProvider-hjgml8cy.js";import{T as F}from"./TextField-CJ4sJssK.js";import{L as I}from"./LoaderButton-9JngXEmJ.js";import{S as c}from"./SelectField-uDv-9tHk.js";import{S as H}from"./index-f8RTX8hG.js";const _=[{id:1,label:"Old Property No",value:"propertyNo"},{id:2,label:"Holding No",value:"holdingNo"},{id:3,label:"Mobile",value:"mobileNo"},{id:4,label:"Owner Name",value:"ownerName"}],z=[{id:1,label:"Zone A-East",value:"1"},{id:2,label:"Zone B-West",value:"2"},{id:3,label:"Zone C-North",value:"3"},{id:4,label:"Zone D-South",value:"4"}],L=v().shape({filteredBy:w().required("Filter By is required")});function K(){var x,p,h,b,j,f;const{searchProperty:a,setSearchProperty:m}=y();P("Search Holding");const{data:t,isPending:Z,isLoading:r,isError:E,refetch:A,isRefetching:C,isFetching:$}=u({api:N.getFilterPropDetails,config:a,value:[a.filteredBy,a.parameter,a.zoneId,a.wardId,a.page,a.perPage],options:{enabled:!!a.filteredBy}}),l=g({enableReinitialize:!0,initialValues:a,validationSchema:L,onSubmit:async s=>{m({...a,filteredBy:s.filteredBy,parameter:s.parameter,zoneId:s.zoneId,wardId:s.wardId})}}),{values:d}=l,{data:n,isPending:D,isError:O,error:R,isLoading:T}=u({api:N.getWardByZone,config:{zoneId:d.zoneId},value:[d.zoneId],options:{enabled:!!d.zoneId}});return e.jsx(B,{title:"Search Holding",children:e.jsx("div",{className:"px-4 py-4 flex-1",children:e.jsxs(S,{formik:l,children:[e.jsx(i.Card,{className:"w-full",children:e.jsxs(i.CardBody,{children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Search Holding"})}),e.jsx("div",{className:"my-4 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(c,{label:"Filter By",name:"filteredBy",formik:l,children:[e.jsx("option",{value:"",children:"select"}),_.map(s=>e.jsx("option",{value:s.value,children:s.label},s.id))]}),e.jsxs(c,{label:"Zone",name:"zoneId",formik:l,children:[e.jsx("option",{value:"",children:"select"}),z.map(s=>e.jsx("option",{value:s.value,children:s.label},s.id))]}),e.jsxs(c,{label:"select",formik:l,name:"wardId",children:[e.jsx("option",{value:"1",children:"select"}),(x=n==null?void 0:n.data)==null?void 0:x.map(s=>e.jsx("option",{value:s.id,children:s.ward_name},s.id))]}),e.jsx(F,{label:"Parameter",name:"parameter",type:"text",formik:l})]}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(I,{type:"submit",disabled:r,loading:r,children:"Search"})})]})}),r?e.jsx("div",{className:"text-center py-52",children:"Loading..."}):e.jsx(e.Fragment,{children:((h=(p=t==null?void 0:t.data)==null?void 0:p.data)==null?void 0:h.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 border-b-2"}),e.jsx(H,{active:a,setActive:m,noOfPage:(b=t==null?void 0:t.data)==null?void 0:b.last_page}),e.jsx("div",{className:"my-4 border-b-2"}),(f=(j=t==null?void 0:t.data)==null?void 0:j.data)==null?void 0:f.map(s=>e.jsx(i.Card,{className:"w-full mb-5",children:e.jsxs(i.CardBody,{children:[e.jsx("div",{className:"flex items-center justify-between -mt-1",children:e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"font-bold text-sm",children:"Details"})})}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Holding No:"}),e.jsx("p",{className:"text-sm text-end",children:s.holding_no})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Property No:"}),e.jsx("p",{className:"text-sm text-end",children:s.property_no})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Zone:"}),e.jsx("p",{className:"text-sm text-end",children:s.zone_name})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Address:"}),e.jsx("p",{className:"text-sm text-end truncate w-60",children:s.prop_address})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Mobile No:"}),e.jsx("p",{className:"text-sm text-end",children:s.mobile_no})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Owner Name:"}),e.jsx("p",{className:"text-sm text-end truncate w-60",children:s.owner_name})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Payment Status:"}),e.jsx("p",{className:"text-sm font-semibold ".concat(s.paid_status===1?"text-green-500":"text-red-500"),children:s.paid_status===1?"Paid":"Pending"})]}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsxs("div",{className:"flex items-center justify-around mt-4 -mb-1 gap-6",children:[e.jsx(o,{to:"/amc-app/property/pro-basic-details/".concat(s.id),className:"text-xs font-bold text-blue-600",children:"Basic Details"}),e.jsx(o,{to:"/amc-app/property/demand-details/".concat(s.id),className:"text-xs font-bold text-blue-600",children:"Demand Details"}),e.jsx(o,{to:"/amc-app/property/payment-history/".concat(s.id),className:"text-xs font-bold text-blue-600",children:"Payment History"})]})]})},s.id))]}):e.jsx("div",{className:"text-center py-52",children:"No Record Found!"})}),e.jsx("div",{className:"my-4 border-b-2"})]})})})}export{K as default};
