import{j as e,e as se,d as re,c as le,p as J,S as te,Q as V,I as ne}from"./index-JsYGHPyl.js";import{u as ae,d as oe,e as ie,f as xe,r as ce}from"./router-5yjtezO8.js";import{u as de}from"./formik.esm-BnzrXcQN.js";import{c as me,a as p}from"./index.esm-uHa2PMRf.js";import{P as he}from"./index-rQeoRPmg.js";import{O as be}from"./OverLayLoader-OyfWzsXt.js";import{r as G}from"./tailwind-6U-kYQAu.js";import{F as pe}from"./FormProvider-Y5__ZVwD.js";import{T as c}from"./TextField-iX21WImJ.js";import{S as ee}from"./SelectField-rYnh3ufy.js";import"./index-iFVn5AxS.js";import{u as je}from"./usePathWisePermission-TkGOHngT.js";import{U as Ne}from"./useSaveLocation-C3s8eTXQ.js";import{u as ye}from"./useLocationRadius-y9A0cSP2.js";import"./reactQuery-QTVGT_ni.js";import"./axios-lPgvryBG.js";import"./reactIcons-ElHvrKTF.js";import"./headlessui-iZReL1Rn.js";import"./module-CEDDgXnO.js";import"./customInputValidation-jhKsg103.js";function fe({data:s,permissionResult:a}){var j,l,u,S,R,g,T,w,h,_,U,n,L,x,W,d,A,O,P,D,F;return e.jsx(G.Card,{children:e.jsxs("div",{className:"px-4 py-6",children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Basic Details"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Holding No:"}),e.jsx("h1",{className:"text-xs",children:(l=(j=s==null?void 0:s.data)==null?void 0:j.basicDetails)==null?void 0:l.holding_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Property No:"}),e.jsx("h1",{className:"text-xs",children:(S=(u=s==null?void 0:s.data)==null?void 0:u.basicDetails)==null?void 0:S.property_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Owner Name:"}),e.jsx("h1",{className:"text-xs",children:(g=(R=s==null?void 0:s.data)==null?void 0:R.basicDetails)==null?void 0:g.owner_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Owner Name (In Marathi):"}),e.jsx("h1",{className:"text-xs",children:((w=(T=s==null?void 0:s.data)==null?void 0:T.basicDetails)==null?void 0:w.owner_name_marathi)||"N/A"})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Applicant Name:"}),e.jsx("h1",{className:"text-xs",children:(_=(h=s==null?void 0:s.data)==null?void 0:h.basicDetails)==null?void 0:_.applicant_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Address:"}),e.jsx("h1",{className:"text-xs",children:(n=(U=s==null?void 0:s.data)==null?void 0:U.basicDetails)==null?void 0:n.prop_address})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Zone:"}),e.jsx("h1",{className:"text-xs",children:(x=(L=s==null?void 0:s.data)==null?void 0:L.basicDetails)==null?void 0:x.zone_name})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Ward No:"}),e.jsx("h1",{className:"text-xs",children:(d=(W=s==null?void 0:s.data)==null?void 0:W.basicDetails)==null?void 0:d.ward_no})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Ownership Type:"}),e.jsx("h1",{className:"text-xs",children:(O=(A=s==null?void 0:s.data)==null?void 0:A.basicDetails)==null?void 0:O.ownership_type})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Property Type:"}),e.jsx("h1",{className:"text-xs",children:(D=(P=s==null?void 0:s.data)==null?void 0:P.basicDetails)==null?void 0:D.property_type})]}),e.jsxs("div",{className:"flex flex-row justify-between mb-3",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Is-Armed-Force:"}),e.jsx("h1",{className:"text-xs",children:(F=s==null?void 0:s.data)!=null&&F.isSingleManArmedForce?"Yes":"No"})]})]}),e.jsx("div",{className:"my-3 border-b-2"})]})})}function ue({data:s}){var a,j;return e.jsx(G.Card,{className:"mt-4 w-full",children:e.jsxs(G.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Demand List"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Financial Year :"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"General Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Road Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Firefighting Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"V. sanitation tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sewage Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tree Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Professional Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tax 1"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"State Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Benefit"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Bill"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sp Water Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Drain Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Big Building"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Open Plot Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Tax"})]})}),e.jsx("tbody",{children:(j=(a=s==null?void 0:s.data)==null?void 0:a.demandList)==null?void 0:j.map((l,u)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.fyear}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.general_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.road_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.firefighting_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.water_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.light_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.sewarage_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.tree_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.professional_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.tax1}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.water_benefit}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.water_bill}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.sp_water_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.drain_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.major_building}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.open_ploat_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:l==null?void 0:l.total_tax})]},u))})]})})]})})}function ge({data:s}){var a,j,l,u,S,R,g,T,w,h,_,U,n,L,x,W,d,A,O,P,D,F,r,i,m,b,f,N,y,v,E,C,I,q,M,B,Q,H;return e.jsx(G.Card,{className:"mt-4 w-full",children:e.jsxs(G.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Grand Total Tax"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"General Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Road Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Firefighting Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"V. sanitation tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sewage Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tree Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Professional Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Tax 1"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"State Education Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Benefit"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Water Bill"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Sp Water Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Drain Cess"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Big Building"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Open Plot Tax"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Interest"}),e.jsx("th",{className:"text-sm font-semibold p-4 border border-slate-300",children:"Total Tax"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(j=(a=s==null?void 0:s.data)==null?void 0:a.grandTaxes)==null?void 0:j.general_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(u=(l=s==null?void 0:s.data)==null?void 0:l.grandTaxes)==null?void 0:u.road_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(R=(S=s==null?void 0:s.data)==null?void 0:S.grandTaxes)==null?void 0:R.firefighting_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(T=(g=s==null?void 0:s.data)==null?void 0:g.grandTaxes)==null?void 0:T.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(h=(w=s==null?void 0:s.data)==null?void 0:w.grandTaxes)==null?void 0:h.water_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(U=(_=s==null?void 0:s.data)==null?void 0:_.grandTaxes)==null?void 0:U.cleanliness_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(L=(n=s==null?void 0:s.data)==null?void 0:n.grandTaxes)==null?void 0:L.sewarage_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(W=(x=s==null?void 0:s.data)==null?void 0:x.grandTaxes)==null?void 0:W.tree_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(A=(d=s==null?void 0:s.data)==null?void 0:d.grandTaxes)==null?void 0:A.professional_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(P=(O=s==null?void 0:s.data)==null?void 0:O.grandTaxes)==null?void 0:P.tax1}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(F=(D=s==null?void 0:s.data)==null?void 0:D.grandTaxes)==null?void 0:F.state_education_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(i=(r=s==null?void 0:s.data)==null?void 0:r.grandTaxes)==null?void 0:i.water_benefit}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(b=(m=s==null?void 0:s.data)==null?void 0:m.grandTaxes)==null?void 0:b.water_bill}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(N=(f=s==null?void 0:s.data)==null?void 0:f.grandTaxes)==null?void 0:N.sp_water_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(v=(y=s==null?void 0:s.data)==null?void 0:y.grandTaxes)==null?void 0:v.drain_cess}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(C=(E=s==null?void 0:s.data)==null?void 0:E.grandTaxes)==null?void 0:C.major_building}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(q=(I=s==null?void 0:s.data)==null?void 0:I.grandTaxes)==null?void 0:q.open_ploat_tax}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(B=(M=s==null?void 0:s.data)==null?void 0:M.grandTaxes)==null?void 0:B.monthlyPenalty}),e.jsx("td",{className:"text-sm p-4 border border-slate-300",children:(H=(Q=s==null?void 0:s.data)==null?void 0:Q.grandTaxes)==null?void 0:H.total_tax})]})})]})})]})})}const Z=[{id:1,label:"Cash",value:"CASH"},{id:2,label:"Cheque",value:"CHEQUE"},{id:3,label:"DD",value:"DD"},{id:4,label:"Online",value:"ONLINE"},{id:5,label:"NEFT",value:"NEFT"}],Te=[{id:1,label:"Full Payment",value:"isFullPayment"},{id:2,label:"Arrear Amount",value:"isArrearPayment"},{id:3,label:"Part Payment",value:"isPartPayment"}];function we({data:s,formik:a,calculateActualAmount:j,PayNow:l}){var u,S,R,g,T,w,h,_,U,n,L,x,W,d,A,O,P,D,F,r,i,m,b,f,N,y,v,E,C,I,q,M,B,Q,H,Y,$,z,k,t,K;return console.log((u=s==null?void 0:s.data)==null?void 0:u.remainAdvance),console.log((S=s==null?void 0:s.data)==null?void 0:S.payableAmt),e.jsx(G.Card,{className:"mt-4 w-full",children:e.jsxs(G.CardBody,{children:[e.jsx("div",{className:"flex flex-row justify-between mb-3",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Payment Action"})}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold ",children:"* Total Arrear Amount -:"})}),e.jsx("div",{children:(R=s==null?void 0:s.data)!=null&&R.isSingleManArmedForce||(g=s==null?void 0:s.data)!=null&&g.isMobileTower?e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-sm font-semibold text-red-500",children:["₹ ",(T=s==null?void 0:s.data)==null?void 0:T.arrear," - ₹",(w=s==null?void 0:s.data)==null?void 0:w.arrear_exempted_general_tax," = ₹"," ",((h=s==null?void 0:s.data)==null?void 0:h.arrear)-((_=s==null?void 0:s.data)==null?void 0:_.arrear_exempted_general_tax)," "]}),e.jsx("h1",{className:"font-semibold text-[11px] text-red-500",children:"(General Tax Exemption)"})]}):e.jsx(e.Fragment,{children:e.jsxs("h1",{className:"text-sm font-semibold text-red-500",children:["₹ ",(U=s==null?void 0:s.data)==null?void 0:U.arrear]})})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold",children:"* Total Current Amount -:"})}),e.jsx("div",{children:(n=s==null?void 0:s.data)!=null&&n.isSingleManArmedForce||(L=s==null?void 0:s.data)!=null&&L.isMobileTower?e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-sm font-semibold text-cyan-500",children:["₹ ",(x=s==null?void 0:s.data)==null?void 0:x.currentDemand," - ₹",(W=s==null?void 0:s.data)==null?void 0:W.current_exempted_general_tax," = ₹"," ",parseFloat(((d=s==null?void 0:s.data)==null?void 0:d.currentDemand)-((A=s==null?void 0:s.data)==null?void 0:A.current_exempted_general_tax)).toFixed(2)," "]}),e.jsx("h1",{className:"font-semibold text-[11px] text-cyan-500",children:"(General Tax Exemption)"})]}):e.jsx(e.Fragment,{children:e.jsxs("h1",{className:"text-sm font-semibold text-cyan-500",children:["₹ ",(O=s==null?void 0:s.data)==null?void 0:O.currentDemand]})})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold",children:"* Total Interest Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold ",children:[e.jsxs("span",{className:"text-red-500",children:["₹ ",(P=s==null?void 0:s.data)==null?void 0:P.totalInterestPenalty]})," ",e.jsxs("small",{children:["( Interest on Arrear ₹ ",(D=s==null?void 0:s.data)==null?void 0:D.arrearInterest," + Previous Interest ₹ ",(F=s==null?void 0:s.data)==null?void 0:F.previousInterest,")"]})]})}),e.jsx("div",{className:"my-3 border-b-2 col-span-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold",children:"* Total Payable Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold",children:[(r=s==null?void 0:s.data)!=null&&r.isSingleManArmedForce||(i=s==null?void 0:s.data)!=null&&i.isMobileTower?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",(m=s==null?void 0:s.data)==null?void 0:m.payableAmt," - ₹",(b=s==null?void 0:s.data)==null?void 0:b.total_exempted_general_tax," = ₹"," ",parseFloat(((f=s==null?void 0:s.data)==null?void 0:f.payableAmt)-((N=s==null?void 0:s.data)==null?void 0:N.total_exempted_general_tax)).toFixed(2)," "]})," "]}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",(y=s==null?void 0:s.data)==null?void 0:y.payableAmt]})," "]}),e.jsx("small",{children:"(Arrear + Current + Interest)"})," ",e.jsx("div",{children:e.jsxs("h1",{className:"text-[10px] text-yellow-800",children:["( If You Pay Full Amount Before"," ",(E=(v=s==null?void 0:s.data)==null?void 0:v.QuarterlyRebates[0])==null?void 0:E.upto_date,", Then"," ",(I=(C=s==null?void 0:s.data)==null?void 0:C.QuarterlyRebates[0])==null?void 0:I.rebates," % Of General Tax For Current Year Will Be Waived. )"]})}),((q=s==null?void 0:s.data)==null?void 0:q.isSingleManArmedForce)||((M=s==null?void 0:s.data)==null?void 0:M.isMobileTower)&&e.jsxs("small",{className:"text-blue-500",children:[" ","- (",(B=s==null?void 0:s.data)==null?void 0:B.total_exempted_general_tax," General Tax Exemption)"]})]})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold",children:"* Advance Amount -:"})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-sm font-semibold",children:[e.jsxs("span",{className:"text-blue-500",children:["₹ ",(Q=s==null?void 0:s.data)==null?void 0:Q.remainAdvance]})," ",e.jsx("small",{className:"text-green-500",children:"(This Is An Adjustable Amount From Total Payment Value.)"})]})})]}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs(pe,{formik:a,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(ee,{label:"Payment Mode",name:"paymentMode",formik:a,children:[e.jsx("option",{value:"",children:"select"}),parseFloat((H=s==null?void 0:s.data)==null?void 0:H.remainAdvance)>=parseFloat((Y=s==null?void 0:s.data)==null?void 0:Y.payableAmt)&&e.jsx("option",{value:"ADVANCE ADJUSTMENT",children:"Advance Adjustment"}),Z==null?void 0:Z.map(o=>e.jsx("option",{value:o==null?void 0:o.value,children:o==null?void 0:o.label},o==null?void 0:o.id))]})}),e.jsx("div",{children:e.jsxs(ee,{label:"Payment Option",name:"paymentType",formik:a,type:"select",children:[e.jsx("option",{value:"",children:"select"}),Te.map(o=>{var X;return((X=s==null?void 0:s.data)==null?void 0:X.arrear)>0?e.jsx("option",{value:o==null?void 0:o.value,children:o==null?void 0:o.label},o==null?void 0:o.id):o.value!="isArrearPayment"&&e.jsx("option",{value:o==null?void 0:o.value,children:o==null?void 0:o.label},o==null?void 0:o.id)})]})})]}),(($=a.values)==null?void 0:$.paymentMode)==="CHEQUE"?e.jsx(_e,{formik:a}):((z=a.values)==null?void 0:z.paymentMode)==="DD"?e.jsx(Ae,{formik:a}):((k=a.values)==null?void 0:k.paymentMode)==="NEFT"?e.jsx(Pe,{formik:a}):null,((t=a.values)==null?void 0:t.paymentType)==="isPartPayment"&&e.jsx("div",{className:"",children:e.jsx(c,{label:"Part Payment Amount",name:"paidAmount",type:"number",formik:a,onInput:((K=a.values)==null?void 0:K.paymentType)==="isPartPayment"?o=>{o.target.value=Math.max(0,parseInt(o.target.value)).toString().slice(0,10)}:null})}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsxs(G.Button,{type:"submit",color:"indigo",disabled:!a.isValid,children:["Submit ₹ ",l()]})})]})]})})}const _e=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(c,{label:"Cheque No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"Cheque Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"Upload Cheque Image",name:"neftImage",type:"file",onChange:a=>{s.setFieldValue("neftImage",a.target.files[0])}})})]}),Ae=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(c,{label:"DD No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"DD Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"Upload DD Image",name:"neftImage",type:"file",onChange:a=>{s.setFieldValue("neftImage",a.target.files[0])}})})]}),Pe=({formik:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(c,{label:"NEFT No",name:"chequeNo",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"NEFT Date",name:"chequeDate",type:"date",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"Bank Name",name:"bankName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"Branch Name",name:"branchName",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"Payment Remark",name:"paymentRemark",type:"text",formik:s})}),e.jsx("div",{children:e.jsx(c,{label:"Upload NEFT Image",name:"neftImage",type:"file",onChange:a=>{s.setFieldValue("neftImage",a.target.files[0])}})})]}),De=me().shape({paymentMode:p().required("Payment Mode is required"),paymentType:p().required("Payment Type is required"),paidAmount:p().when(["paymentType"],{is:s=>s=="isPartPayment",then:()=>p().required("Part Payment Amount is required")}),chequeNo:p().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>p().required("Cheque No is required")}),chequeDate:p().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>p().required("Cheque Date is required")}),neftImage:p().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>p().required("Cheque Upload is required")}),bankName:p().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>p().required("Bank Name is required")}),branchName:p().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>p().required("Branch Name is required")}),paymentRemark:p().when(["paymentMode"],{is:s=>s=="CHEQUE"||s=="DD"||s=="NEFT",then:()=>p().required("Payment Remark is required")})});function ze(){var P,D,F;const{isGeolocationEnabled:s,coords:a}=se(!1),{radiusInMeters:j,distanceToTargetEast:l,distanceToTargetNorth:u,distanceToTargetSouth:S,distanceToTargetWest:R}=ye(),g=ae(),{saveLocation:T}=Ne();oe.useState(0);const w=re({}),{id:h}=ie(),{pathname:_}=xe(),{result:U}=je((D=(P=_==null?void 0:_.split("/"))==null?void 0:P.slice(0,-1))==null?void 0:D.join("/")),{data:n,isLoading:L}=le({api:J.getDemandDetails,config:{propId:h},value:h,options:{enabled:!!h}}),x=de({enableReinitialize:!0,initialValues:{paymentMode:"",paymentType:"",chequeNo:"",chequeDate:"",bankName:"",branchName:"",paymentRemark:"",neftImage:"",paidAmount:""},validationSchema:De,onSubmit:async r=>{te.fire({title:"Are you sure?",text:"You want to proceed with payment of Rs."+A(),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Proceed!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(i=>{i.isConfirmed&&W(r)}).catch(i=>{var m,b;V.error((b=(m=i==null?void 0:i.response)==null?void 0:m.data)==null?void 0:b.message)})}}),W=async r=>{var m,b,f,N,y,v,E,C,I,q,M,B,Q,H,Y,$,z,k;let i={};if((r==null?void 0:r.paymentMode)==="ONLINE"){i={propId:h,paymentMode:r==null?void 0:r.paymentMode,paymentType:r==null?void 0:r.paymentType,paidAmount:d(),deviceType:"android",callbackUrl:"https://modernulb.com/amc-app/property/payment-history"};const t=await w.mutateAsync({api:J.iciciPayment,data:i});(m=t==null?void 0:t.data)!=null&&m.status?(T({actionType:"PropertyPaymentOnline",refId:(f=(b=t==null?void 0:t.data)==null?void 0:b.data)==null?void 0:f.requestId,moduleId:1}),V.success((N=t==null?void 0:t.data)==null?void 0:N.message),window.location.href=(v=(y=t==null?void 0:t.data)==null?void 0:y.data)==null?void 0:v.encryptUrl,x.resetForm()):V.error((E=t==null?void 0:t.data)==null?void 0:E.message)}else{(r==null?void 0:r.paymentMode)==="CHEQUE"||(r==null?void 0:r.paymentMode)==="DD"||(r==null?void 0:r.paymentMode)==="NEFT"?i={id:h,paymentMode:r==null?void 0:r.paymentMode,paymentType:r==null?void 0:r.paymentType,chequeNo:r==null?void 0:r.chequeNo,chequeDate:r==null?void 0:r.chequeDate,bankName:r==null?void 0:r.bankName,branchName:r==null?void 0:r.branchName,paymentRemark:r==null?void 0:r.paymentRemark,neftImage:r==null?void 0:r.neftImage,paidAmount:d(),deviceType:"android"}:i={id:h,paymentMode:r==null?void 0:r.paymentMode,paymentType:r==null?void 0:r.paymentType,paidAmount:d(),deviceType:"android"};try{const t=await w.mutateAsync({api:J.holdingPayment,data:i});(C=t==null?void 0:t.data)!=null&&C.status?(T({actionType:"successPropertyPayment",refId:(q=(I=t==null?void 0:t.data)==null?void 0:I.data)==null?void 0:q.transactionId,moduleId:1}),V.success((M=t==null?void 0:t.data)==null?void 0:M.message),g("/amc-app/property/payment-response?response=".concat((Q=(B=t==null?void 0:t.data)==null?void 0:B.data)==null?void 0:Q.transactionId,"&tranNo=").concat((Y=(H=t==null?void 0:t.data)==null?void 0:H.data)==null?void 0:Y.TransactionNo),{replace:!0}),x.resetForm()):(V.error(($=t==null?void 0:t.data)==null?void 0:$.message),T({actionType:"failedPropertyPayment",refId:h,moduleId:1}))}catch(t){V.error((k=(z=t==null?void 0:t.response)==null?void 0:z.data)==null?void 0:k.message)}}},d=()=>{var N,y,v,E,C,I,q,M,B;let r=0,i=parseFloat((N=n==null?void 0:n.data)==null?void 0:N.payableAmt)||0,m=parseFloat((y=n==null?void 0:n.data)==null?void 0:y.remainAdvance)||0,b=parseFloat((E=(v=n==null?void 0:n.data)==null?void 0:v.QuarterlyRebates[0])==null?void 0:E.rebates_amt)||0,f=parseFloat((C=n==null?void 0:n.data)==null?void 0:C.arrearPayableAmt)||0;return((I=x.values)==null?void 0:I.paymentType)=="isFullPayment"&&(r=i-m-b),((q=x.values)==null?void 0:q.paymentType)=="isArrearPayment"&&(r=f-m),((M=x.values)==null?void 0:M.paymentType)=="isPartPayment"&&(r=parseFloat((B=x.values)==null?void 0:B.paidAmount)||0),r},A=()=>{var r,i,m,b,f,N,y;return((r=n==null?void 0:n.data)==null?void 0:r.totalInterestPenalty)>0&&((i=x.values)==null?void 0:i.paymentType)==="isFullPayment"?Math.round(d()-((m=n==null?void 0:n.data)==null?void 0:m.total_exempted_general_tax)||0):((b=x.values)==null?void 0:b.paymentType)=="isArrearPayment"?Math.round(d()-parseFloat((f=n==null?void 0:n.data)==null?void 0:f.arrear_exempted_general_tax)||0):((N=x.values)==null?void 0:N.paymentType)=="isFullPayment"?Math.round(d()-parseFloat((y=n==null?void 0:n.data)==null?void 0:y.total_exempted_general_tax)||0):Math.round(d()||0)};ce.useEffect(()=>{var r;((r=x.values)==null?void 0:r.paymentType)=="paidAmount"&&d()},[(F=x.values)==null?void 0:F.paidAmount]);const O=()=>{var r;return!(a!=null&&a.latitude)&&!(a!=null&&a.longitude)?e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("h1",{className:"text-center text-red-600 text-xs font-bold",children:"Please Wait While We Fetch Your Location..."})}):s?l>=j&&R>=j&&S>=j&&u>=j?((r=n==null?void 0:n.data)==null?void 0:r.payableAmt)>0?e.jsx(we,{formik:x,data:n,calculateActualAmount:d,PayNow:A}):e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("div",{onClick:()=>g("/amc-app/property/search-holding"),className:"text-red-500 border border-red-500 px-4 py-2 rounded-md hover:bg-red-500 hover:text-white transition duration-300 ease-in-out",children:"Payment Already Done"})}):e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("div",{onClick:()=>window.location.reload(),className:"text-red-500 border text-sm text-center border-red-500 px-4 py-2 rounded-md hover:bg-red-500 hover:text-white transition duration-300 ease-in-out",children:"You are inside the 50 meter radius of zonal office, you can't make payment"})}):e.jsx("div",{className:"flex justify-center py-6",children:e.jsx("div",{onClick:()=>g("/amc-app/property/search-holding"),className:"text-red-500 border border-red-500 px-4 py-2 rounded-md hover:bg-red-500 hover:text-white transition duration-300 ease-in-out",children:"Please enable location to proceed with payment"})})};return L?e.jsx(ne,{}):e.jsxs(he,{title:"Demand Details",children:[w.isLoading&&e.jsx(be,{}),e.jsx("div",{className:"flex flex-col h-full py-3 px-4",children:e.jsxs("div",{className:"flex flex-col flex-grow",children:[e.jsx(fe,{data:n,permissionResult:U}),e.jsx(ue,{data:n}),e.jsx(ge,{data:n}),O()]})})]})}export{ze as default};
