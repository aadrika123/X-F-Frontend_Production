var rs=Object.defineProperty;var ss=(p,A,ht)=>A in p?rs(p,A,{enumerable:!0,configurable:!0,writable:!0,value:ht}):p[A]=ht;var Ne=(p,A,ht)=>(ss(p,typeof A!="symbol"?A+"":A,ht),ht),ii=(p,A,ht)=>{if(!A.has(p))throw TypeError("Cannot "+ht)};var S=(p,A,ht)=>(ii(p,A,"read from private field"),ht?ht.call(p):A.get(p)),gt=(p,A,ht)=>{if(A.has(p))throw TypeError("Cannot add the same private member more than once");A instanceof WeakSet?A.add(p):A.set(p,ht)},jt=(p,A,ht,E)=>(ii(p,A,"write to private field"),E?E.call(p,ht):A.set(p,ht),ht);var ri=(p,A,ht,E)=>({set _(R){jt(p,A,R,ht)},get _(){return S(p,A,E)}}),wt=(p,A,ht)=>(ii(p,A,"access private method"),ht);import{a as getAugmentedNamespace,r as reactExports}from"./router-vn-0iGwJ.js";var lib={exports:{}},core_min={};function commonjsRequire(p){throw new Error('Could not dynamically require "'+p+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(A,ht){module.exports=ht()})(globalThis,()=>(()=>{var __webpack_modules__=[,(p,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.VerbosityLevel=A.Util=A.UnknownErrorException=A.UnexpectedResponseException=A.UNSUPPORTED_FEATURES=A.TextRenderingMode=A.RenderingIntentFlag=A.PermissionFlag=A.PasswordResponses=A.PasswordException=A.PageActionEventType=A.OPS=A.MissingPDFException=A.LINE_FACTOR=A.LINE_DESCENT_FACTOR=A.InvalidPDFException=A.ImageKind=A.IDENTITY_MATRIX=A.FormatError=A.FeatureTest=A.FONT_IDENTITY_MATRIX=A.DocumentActionEventType=A.CMapCompressionType=A.BaseException=A.BASELINE_FACTOR=A.AnnotationType=A.AnnotationStateModelType=A.AnnotationReviewState=A.AnnotationReplyType=A.AnnotationMode=A.AnnotationMarkedState=A.AnnotationFlag=A.AnnotationFieldFlag=A.AnnotationEditorType=A.AnnotationEditorPrefix=A.AnnotationEditorParamsType=A.AnnotationBorderStyleType=A.AnnotationActionEventType=A.AbortException=void 0,A.assert=D,A.bytesToString=ot,A.createPromiseCapability=Zt,A.createValidAbsoluteUrl=o,A.getModificationDate=re,A.getVerbosityLevel=Y,A.info=K,A.isArrayBuffer=Nt,A.isArrayEqual=te,A.objectFromMap=I,A.objectSize=k,A.setVerbosityLevel=st,A.shadow=C,A.string32=g,A.stringToBytes=l,A.stringToPDFString=xt,A.stringToUTF8String=Tt,A.unreachable=Ct,A.utf8StringToString=Lt,A.warn=bt;const ht=[1,0,0,1,0,0];A.IDENTITY_MATRIX=ht;const E=[.001,0,0,.001,0,0];A.FONT_IDENTITY_MATRIX=E;const R=1.35;A.LINE_FACTOR=R;const e=.35;A.LINE_DESCENT_FACTOR=e;const nt=e/R;A.BASELINE_FACTOR=nt;const ft={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};A.RenderingIntentFlag=ft;const $={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};A.AnnotationMode=$;const w="pdfjs_internal_editor_";A.AnnotationEditorPrefix=w;const y={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};A.AnnotationEditorType=y;const W={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};A.AnnotationEditorParamsType=W;const P={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};A.PermissionFlag=P;const b={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};A.TextRenderingMode=b;const d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};A.ImageKind=d;const m={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};A.AnnotationType=m;const a={MARKED:"Marked",REVIEW:"Review"};A.AnnotationStateModelType=a;const u={MARKED:"Marked",UNMARKED:"Unmarked"};A.AnnotationMarkedState=u;const h={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};A.AnnotationReviewState=h;const s={GROUP:"Group",REPLY:"R"};A.AnnotationReplyType=s;const r={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};A.AnnotationFlag=r;const t={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};A.AnnotationFieldFlag=t;const i={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};A.AnnotationBorderStyleType=i;const v={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};A.AnnotationActionEventType=v;const T={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};A.DocumentActionEventType=T;const x={O:"PageOpen",C:"PageClose"};A.PageActionEventType=x;const X={ERRORS:0,WARNINGS:1,INFOS:5};A.VerbosityLevel=X;const _={NONE:0,BINARY:1};A.CMapCompressionType=_;const Z={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};A.OPS=Z;const Et={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};A.UNSUPPORTED_FEATURES=Et;const ut={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};A.PasswordResponses=ut;let mt=X.WARNINGS;function st(L){Number.isInteger(L)&&(mt=L)}function Y(){return mt}function K(L){mt>=X.INFOS&&console.log("Info: ".concat(L))}function bt(L){mt>=X.WARNINGS&&console.log("Warning: ".concat(L))}function Ct(L){throw new Error(L)}function D(L,j){L||Ct(j)}function c(L){if(!L)return!1;switch(L.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function o(L,j=null,q=null){if(!L)return null;try{if(q&&typeof L=="string"){if(q.addDefaultProtocol&&L.startsWith("www.")){const Jt=L.match(/\./g);Jt&&Jt.length>=2&&(L="http://".concat(L))}if(q.tryConvertEncoding)try{L=Tt(L)}catch(Jt){}}const Pt=j?new URL(L,j):new URL(L);if(c(Pt))return Pt}catch(Pt){}return null}function C(L,j,q,Pt=!1){return Object.defineProperty(L,j,{value:q,enumerable:!Pt,configurable:!0,writable:!1}),q}const O=function(){function j(q,Pt){this.constructor===j&&Ct("Cannot initialize BaseException."),this.message=q,this.name=Pt}return j.prototype=new Error,j.constructor=j,j}();A.BaseException=O;class N extends O{constructor(j,q){super(j,"PasswordException"),this.code=q}}A.PasswordException=N;class V extends O{constructor(j,q){super(j,"UnknownErrorException"),this.details=q}}A.UnknownErrorException=V;class G extends O{constructor(j){super(j,"InvalidPDFException")}}A.InvalidPDFException=G;class at extends O{constructor(j){super(j,"MissingPDFException")}}A.MissingPDFException=at;class vt extends O{constructor(j,q){super(j,"UnexpectedResponseException"),this.status=q}}A.UnexpectedResponseException=vt;class lt extends O{constructor(j){super(j,"FormatError")}}A.FormatError=lt;class dt extends O{constructor(j){super(j,"AbortException")}}A.AbortException=dt;function ot(L){(typeof L!="object"||L===null||L.length===void 0)&&Ct("Invalid argument for bytesToString");const j=L.length,q=8192;if(j<q)return String.fromCharCode.apply(null,L);const Pt=[];for(let Jt=0;Jt<j;Jt+=q){const he=Math.min(Jt+q,j),rt=L.subarray(Jt,he);Pt.push(String.fromCharCode.apply(null,rt))}return Pt.join("")}function l(L){typeof L!="string"&&Ct("Invalid argument for stringToBytes");const j=L.length,q=new Uint8Array(j);for(let Pt=0;Pt<j;++Pt)q[Pt]=L.charCodeAt(Pt)&255;return q}function g(L){return String.fromCharCode(L>>24&255,L>>16&255,L>>8&255,L&255)}function k(L){return Object.keys(L).length}function I(L){const j=Object.create(null);for(const[q,Pt]of L)j[q]=Pt;return j}function M(){const L=new Uint8Array(4);return L[0]=1,new Uint32Array(L.buffer,0,1)[0]===1}function J(){try{return new Function(""),!0}catch(L){return!1}}class pt{static get isLittleEndian(){return C(this,"isLittleEndian",M())}static get isEvalSupported(){return C(this,"isEvalSupported",J())}static get isOffscreenCanvasSupported(){return C(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?C(this,"platform",{isWin:!1,isMac:!1}):C(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}A.FeatureTest=pt;const St=[...Array(256).keys()].map(L=>L.toString(16).padStart(2,"0"));class Mt{static makeHexColor(j,q,Pt){return"#".concat(St[j]).concat(St[q]).concat(St[Pt])}static scaleMinMax(j,q){let Pt;j[0]?(j[0]<0&&(Pt=q[0],q[0]=q[1],q[1]=Pt),q[0]*=j[0],q[1]*=j[0],j[3]<0&&(Pt=q[2],q[2]=q[3],q[3]=Pt),q[2]*=j[3],q[3]*=j[3]):(Pt=q[0],q[0]=q[2],q[2]=Pt,Pt=q[1],q[1]=q[3],q[3]=Pt,j[1]<0&&(Pt=q[2],q[2]=q[3],q[3]=Pt),q[2]*=j[1],q[3]*=j[1],j[2]<0&&(Pt=q[0],q[0]=q[1],q[1]=Pt),q[0]*=j[2],q[1]*=j[2]),q[0]+=j[4],q[1]+=j[4],q[2]+=j[5],q[3]+=j[5]}static transform(j,q){return[j[0]*q[0]+j[2]*q[1],j[1]*q[0]+j[3]*q[1],j[0]*q[2]+j[2]*q[3],j[1]*q[2]+j[3]*q[3],j[0]*q[4]+j[2]*q[5]+j[4],j[1]*q[4]+j[3]*q[5]+j[5]]}static applyTransform(j,q){const Pt=j[0]*q[0]+j[1]*q[2]+q[4],Jt=j[0]*q[1]+j[1]*q[3]+q[5];return[Pt,Jt]}static applyInverseTransform(j,q){const Pt=q[0]*q[3]-q[1]*q[2],Jt=(j[0]*q[3]-j[1]*q[2]+q[2]*q[5]-q[4]*q[3])/Pt,he=(-j[0]*q[1]+j[1]*q[0]+q[4]*q[1]-q[5]*q[0])/Pt;return[Jt,he]}static getAxialAlignedBoundingBox(j,q){const Pt=Mt.applyTransform(j,q),Jt=Mt.applyTransform(j.slice(2,4),q),he=Mt.applyTransform([j[0],j[3]],q),rt=Mt.applyTransform([j[2],j[1]],q);return[Math.min(Pt[0],Jt[0],he[0],rt[0]),Math.min(Pt[1],Jt[1],he[1],rt[1]),Math.max(Pt[0],Jt[0],he[0],rt[0]),Math.max(Pt[1],Jt[1],he[1],rt[1])]}static inverseTransform(j){const q=j[0]*j[3]-j[1]*j[2];return[j[3]/q,-j[1]/q,-j[2]/q,j[0]/q,(j[2]*j[5]-j[4]*j[3])/q,(j[4]*j[1]-j[5]*j[0])/q]}static singularValueDecompose2dScale(j){const q=[j[0],j[2],j[1],j[3]],Pt=j[0]*q[0]+j[1]*q[2],Jt=j[0]*q[1]+j[1]*q[3],he=j[2]*q[0]+j[3]*q[2],rt=j[2]*q[1]+j[3]*q[3],kt=(Pt+rt)/2,Dt=Math.sqrt((Pt+rt)**2-4*(Pt*rt-he*Jt))/2,Bt=kt+Dt||1,le=kt-Dt||1;return[Math.sqrt(Bt),Math.sqrt(le)]}static normalizeRect(j){const q=j.slice(0);return j[0]>j[2]&&(q[0]=j[2],q[2]=j[0]),j[1]>j[3]&&(q[1]=j[3],q[3]=j[1]),q}static intersect(j,q){const Pt=Math.max(Math.min(j[0],j[2]),Math.min(q[0],q[2])),Jt=Math.min(Math.max(j[0],j[2]),Math.max(q[0],q[2]));if(Pt>Jt)return null;const he=Math.max(Math.min(j[1],j[3]),Math.min(q[1],q[3])),rt=Math.min(Math.max(j[1],j[3]),Math.max(q[1],q[3]));return he>rt?null:[Pt,he,Jt,rt]}static bezierBoundingBox(j,q,Pt,Jt,he,rt,kt,Dt){const Bt=[],le=[[],[]];let Ae,de,fe,ce,ve,We,De,Le;for(let Je=0;Je<2;++Je){if(Je===0?(de=6*j-12*Pt+6*he,Ae=-3*j+9*Pt-9*he+3*kt,fe=3*Pt-3*j):(de=6*q-12*Jt+6*rt,Ae=-3*q+9*Jt-9*rt+3*Dt,fe=3*Jt-3*q),Math.abs(Ae)<1e-12){if(Math.abs(de)<1e-12)continue;ce=-fe/de,0<ce&&ce<1&&Bt.push(ce);continue}De=de*de-4*fe*Ae,Le=Math.sqrt(De),!(De<0)&&(ve=(-de+Le)/(2*Ae),0<ve&&ve<1&&Bt.push(ve),We=(-de-Le)/(2*Ae),0<We&&We<1&&Bt.push(We))}let Ie=Bt.length,Re;const $e=Ie;for(;Ie--;)ce=Bt[Ie],Re=1-ce,le[0][Ie]=Re*Re*Re*j+3*Re*Re*ce*Pt+3*Re*ce*ce*he+ce*ce*ce*kt,le[1][Ie]=Re*Re*Re*q+3*Re*Re*ce*Jt+3*Re*ce*ce*rt+ce*ce*ce*Dt;return le[0][$e]=j,le[1][$e]=q,le[0][$e+1]=kt,le[1][$e+1]=Dt,le[0].length=le[1].length=$e+2,[Math.min(...le[0]),Math.min(...le[1]),Math.max(...le[0]),Math.max(...le[1])]}}A.Util=Mt;const ct=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function xt(L){if(L[0]>="ï"){let q;if(L[0]==="þ"&&L[1]==="ÿ"?q="utf-16be":L[0]==="ÿ"&&L[1]==="þ"?q="utf-16le":L[0]==="ï"&&L[1]==="»"&&L[2]==="¿"&&(q="utf-8"),q)try{const Pt=new TextDecoder(q,{fatal:!0}),Jt=l(L);return Pt.decode(Jt)}catch(Pt){bt('stringToPDFString: "'.concat(Pt,'".'))}}const j=[];for(let q=0,Pt=L.length;q<Pt;q++){const Jt=ct[L.charCodeAt(q)];j.push(Jt?String.fromCharCode(Jt):L.charAt(q))}return j.join("")}function Tt(L){return decodeURIComponent(escape(L))}function Lt(L){return unescape(encodeURIComponent(L))}function Nt(L){return typeof L=="object"&&L!==null&&L.byteLength!==void 0}function te(L,j){if(L.length!==j.length)return!1;for(let q=0,Pt=L.length;q<Pt;q++)if(L[q]!==j[q])return!1;return!0}function re(L=new Date){return[L.getUTCFullYear().toString(),(L.getUTCMonth()+1).toString().padStart(2,"0"),L.getUTCDate().toString().padStart(2,"0"),L.getUTCHours().toString().padStart(2,"0"),L.getUTCMinutes().toString().padStart(2,"0"),L.getUTCSeconds().toString().padStart(2,"0")].join("")}function Zt(){const L=Object.create(null);let j=!1;return Object.defineProperty(L,"settled",{get(){return j}}),L.promise=new Promise(function(q,Pt){L.resolve=function(Jt){j=!0,q(Jt)},L.reject=function(Jt){j=!0,Pt(Jt)}}),L}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var p,A,E,R,e,nt,ft,$,w,y,si,P,b,ai,m,a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:h,NodeCMapReaderFactory:s,NodeStandardFontDataFactory:r}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=h,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=s,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=r}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:h}=__w_pdfjs_require__(21);createPDFNetworkStream=s=>new h(s)}else{const{PDFNetworkStream:h}=__w_pdfjs_require__(24),{PDFFetchStream:s}=__w_pdfjs_require__(25);createPDFNetworkStream=r=>(0,_display_utils.isValidFetchUrl)(r.url)?new s(r):new h(r)}function getDocument(h){var J,pt;if(typeof h=="string"||h instanceof URL)h={url:h};else if((0,_util.isArrayBuffer)(h))h={data:h};else if(h instanceof PDFDataRangeTransport)(0,_display_utils.deprecated)("`PDFDataRangeTransport`-instance, please use a parameter object with `range`-property instead."),h={range:h};else if(typeof h!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!h.url&&!h.data&&!h.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const s=new PDFDocumentLoadingTask,r=h.url?getUrlProp(h.url):null,t=h.data?getDataProp(h.data):null,i=h.httpHeaders||null,v=h.withCredentials===!0,T=(J=h.password)!=null?J:null,x=h.range instanceof PDFDataRangeTransport?h.range:null,X=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let _=h.worker instanceof PDFWorker?h.worker:null;const Z=h.verbosity,Et=typeof h.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(h.docBaseUrl)?h.docBaseUrl:null,ut=typeof h.cMapUrl=="string"?h.cMapUrl:null,mt=h.cMapPacked!==!1,st=h.CMapReaderFactory||DefaultCMapReaderFactory,Y=typeof h.standardFontDataUrl=="string"?h.standardFontDataUrl:null,K=h.StandardFontDataFactory||DefaultStandardFontDataFactory,bt=h.stopAtErrors!==!0,Ct=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,D=h.isEvalSupported!==!1,c=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!_is_node.isNodeJS,o=typeof h.disableFontFace=="boolean"?h.disableFontFace:_is_node.isNodeJS,C=h.fontExtraProperties===!0,O=h.enableXfa===!0,N=h.ownerDocument||globalThis.document,V=h.disableRange===!0,G=h.disableStream===!0,at=h.disableAutoFetch===!0,vt=h.pdfBug===!0,lt=x?x.length:(pt=h.length)!=null?pt:NaN,dt=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!_is_node.isNodeJS&&!o,ot=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:st===_display_utils.DOMCMapReaderFactory&&K===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(ut,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Y,document.baseURI),l=null;(0,_util.setVerbosityLevel)(Z);const g=ot?null:{cMapReaderFactory:new st({baseUrl:ut,isCompressed:mt}),standardFontDataFactory:new K({baseUrl:Y})};if(!_){const St={verbosity:Z,port:_worker_options.GlobalWorkerOptions.workerPort};_=St.port?PDFWorker.fromPort(St):new PDFWorker(St),s._worker=_}const k=s.docId,I={docId:k,apiVersion:"3.4.120",data:t,password:T,disableAutoFetch:at,rangeChunkSize:X,length:lt,docBaseUrl:Et,enableXfa:O,evaluatorOptions:{maxImageSize:Ct,disableFontFace:o,ignoreErrors:bt,isEvalSupported:D,isOffscreenCanvasSupported:c,fontExtraProperties:C,useSystemFonts:dt,cMapUrl:ot?ut:null,standardFontDataUrl:ot?Y:null}},M={ignoreErrors:bt,isEvalSupported:D,disableFontFace:o,fontExtraProperties:C,enableXfa:O,ownerDocument:N,disableAutoFetch:at,pdfBug:vt,styleElement:l};return _.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const St=_fetchDocument(_,I),Mt=new Promise(function(ct){let xt;x?xt=new _transport_stream.PDFDataTransportStream({length:lt,initialData:x.initialData,progressiveDone:x.progressiveDone,contentDispositionFilename:x.contentDispositionFilename,disableRange:V,disableStream:G},x):t||(xt=createPDFNetworkStream({url:r,length:lt,httpHeaders:i,withCredentials:v,rangeChunkSize:X,disableRange:V,disableStream:G})),ct(xt)});return Promise.all([St,Mt]).then(function([ct,xt]){if(s.destroyed)throw new Error("Loading aborted");const Tt=new _message_handler.MessageHandler(k,ct,_.port),Lt=new WorkerTransport(Tt,s,xt,M,g);s._transport=Lt,Tt.send("Ready",null)})}).catch(s._capability.reject),s}async function _fetchDocument(h,s){if(h.destroyed)throw new Error("Worker was destroyed");const r=await h.messageHandler.sendWithPromise("GetDocRequest",s,s.data?[s.data.buffer]:null);if(h.destroyed)throw new Error("Worker was destroyed");return r}function getUrlProp(h){if(h instanceof URL)return h.href;try{return new URL(h,window.location).href}catch(s){if(_is_node.isNodeJS&&typeof h=="string")return h}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(h){if(_is_node.isNodeJS&&typeof Buffer<"u"&&h instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(h);if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return(0,_util.stringToBytes)(h);if(typeof h=="object"&&!isNaN(h==null?void 0:h.length)||(0,_util.isArrayBuffer)(h))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const ht=class ht{constructor(){gt(this,A,null);this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d".concat(ri(ht,p)._++),this.destroyed=!1,this.onPassword=null,this.onProgress=null}get onUnsupportedFeature(){return S(this,A)}set onUnsupportedFeature(s){(0,_display_utils.deprecated)("The PDFDocumentLoadingTask onUnsupportedFeature property will be removed in the future."),jt(this,A,s)}get promise(){return this._capability.promise}async destroy(){var s;this.destroyed=!0,await((s=this._transport)==null?void 0:s.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};p=new WeakMap,A=new WeakMap,gt(ht,p,0);let PDFDocumentLoadingTask=ht;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,r,t=!1,i=null){this.length=s,this.initialData=r,this.progressiveDone=t,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,r){for(const t of this._rangeListeners)t(s,r)}onDataProgress(s,r){this._readyCapability.promise.then(()=>{for(const t of this._progressListeners)t(s,r)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const r of this._progressiveReadListeners)r(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,r){this._pdfInfo=s,this._transport=r}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(s=!1){return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(s,r,t,i,v=!1){this._pageIndex=s,this._pageInfo=r,this._ownerDocument=i,this._transport=t,this._stats=v?new _display_utils.StatTimer:null,this._pdfBug=v,this.commonObjs=t.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:s,rotation:r=this.rotate,offsetX:t=0,offsetY:i=0,dontFlip:v=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:r,offsetX:t,offsetY:i,dontFlip:v})}getAnnotations({intent:s="display"}={}){const r=this._transport.getRenderingIntent(s);return this._transport.getAnnotations(this._pageIndex,r.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var s;return((s=this._transport._htmlForXfa)==null?void 0:s.children[this._pageIndex])||null}render({canvasContext:s,viewport:r,intent:t="display",annotationMode:i=_util.AnnotationMode.ENABLE,transform:v=null,canvasFactory:T=null,background:x=null,optionalContentConfigPromise:X=null,annotationCanvasMap:_=null,pageColors:Z=null,printAnnotationStorage:Et=null}){var D,c;(D=this._stats)==null||D.time("Overall");const ut=this._transport.getRenderingIntent(t,i,Et);this.pendingCleanup=!1,X||(X=this._transport.getOptionalContentConfig());let mt=this._intentStates.get(ut.cacheKey);mt||(mt=Object.create(null),this._intentStates.set(ut.cacheKey,mt)),mt.streamReaderCancelTimeout&&(clearTimeout(mt.streamReaderCancelTimeout),mt.streamReaderCancelTimeout=null);const st=T||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),Y=!!(ut.renderingIntent&_util.RenderingIntentFlag.PRINT);mt.displayReadyCapability||(mt.displayReadyCapability=(0,_util.createPromiseCapability)(),mt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(ut));const K=o=>{var C,O;mt.renderTasks.delete(bt),(this.cleanupAfterRender||Y)&&(this.pendingCleanup=!0),this._tryCleanup(),o?(bt.capability.reject(o),this._abortOperatorList({intentState:mt,reason:o instanceof Error?o:new Error(o)})):bt.capability.resolve(),(C=this._stats)==null||C.timeEnd("Rendering"),(O=this._stats)==null||O.timeEnd("Overall")},bt=new InternalRenderTask({callback:K,params:{canvasContext:s,viewport:r,transform:v,background:x},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:_,operatorList:mt.operatorList,pageIndex:this._pageIndex,canvasFactory:st,useRequestAnimationFrame:!Y,pdfBug:this._pdfBug,pageColors:Z});(mt.renderTasks||(mt.renderTasks=new Set)).add(bt);const Ct=bt.task;return Promise.all([mt.displayReadyCapability.promise,X]).then(([o,C])=>{var O;if(this.pendingCleanup){K();return}(O=this._stats)==null||O.time("Rendering"),bt.initializeGraphics({transparency:o,optionalContentConfig:C}),bt.operatorListChanged()}).catch(K),Ct}getOperatorList({intent:s="display",annotationMode:r=_util.AnnotationMode.ENABLE,printAnnotationStorage:t=null}={}){var X;function i(){T.operatorList.lastChunk&&(T.opListReadCapability.resolve(T.operatorList),T.renderTasks.delete(x))}const v=this._transport.getRenderingIntent(s,r,t,!0);let T=this._intentStates.get(v.cacheKey);T||(T=Object.create(null),this._intentStates.set(v.cacheKey,T));let x;return T.opListReadCapability||(x=Object.create(null),x.operatorListChanged=i,T.opListReadCapability=(0,_util.createPromiseCapability)(),(T.renderTasks||(T.renderTasks=new Set)).add(x),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(X=this._stats)==null||X.time("Page Request"),this._pumpOperatorList(v)),T.opListReadCapability.promise}streamTextContent({disableCombineTextItems:s=!1,includeMarkedContent:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:s!==!0,includeMarkedContent:r===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(s={}){if(this._transport._htmlForXfa)return this.getXfa().then(t=>_xfa_text.XfaText.textContent(t));const r=this.streamTextContent(s);return new Promise(function(t,i){function v(){T.read().then(function({value:X,done:_}){if(_){t(x);return}Object.assign(x.styles,X.styles),x.items.push(...X.items),v()},i)}const T=r.getReader(),x={items:[],styles:Object.create(null)};v()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const s=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const t of r.renderTasks)s.push(t.completed),t.cancel();return this.objs.clear(),this.pendingCleanup=!1,Promise.all(s)}cleanup(s=!1){return this.pendingCleanup=!0,this._tryCleanup(s)}_tryCleanup(s=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:r,operatorList:t}of this._intentStates.values())if(r.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),s&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(s,r){var i,v;const t=this._intentStates.get(r);t&&((i=this._stats)==null||i.timeEnd("Page Request"),(v=t.displayReadyCapability)==null||v.resolve(s))}_renderPageChunk(s,r){for(let t=0,i=s.length;t<i;t++)r.operatorList.fnArray.push(s.fnArray[t]),r.operatorList.argsArray.push(s.argsArray[t]);r.operatorList.lastChunk=s.lastChunk,r.operatorList.separateAnnots=s.separateAnnots;for(const t of r.renderTasks)t.operatorListChanged();s.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:s,cacheKey:r,annotationStorageMap:t}){const v=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:r,annotationStorage:t}).getReader(),T=this._intentStates.get(r);T.streamReader=v;const x=()=>{v.read().then(({value:X,done:_})=>{if(_){T.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(X,T),x())},X=>{if(T.streamReader=null,!this._transport.destroyed){if(T.operatorList){T.operatorList.lastChunk=!0;for(const _ of T.renderTasks)_.operatorListChanged();this._tryCleanup()}if(T.displayReadyCapability)T.displayReadyCapability.reject(X);else if(T.opListReadCapability)T.opListReadCapability.reject(X);else throw X}})};x()}_abortOperatorList({intentState:s,reason:r,force:t=!1}){if(s.streamReader){if(s.streamReaderCancelTimeout&&(clearTimeout(s.streamReaderCancelTimeout),s.streamReaderCancelTimeout=null),!t){if(s.renderTasks.size>0)return;if(r instanceof _display_utils.RenderingCancelledException){let i=RENDERING_CANCELLED_TIMEOUT;r.extraDelay>0&&r.extraDelay<1e3&&(i+=r.extraDelay),s.streamReaderCancelTimeout=setTimeout(()=>{s.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:s,reason:r,force:!0})},i);return}}if(s.streamReader.cancel(new _util.AbortException(r.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[i,v]of this._intentStates)if(v===s){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){gt(this,E,new Set);gt(this,R,Promise.resolve())}postMessage(s,r){const t={data:structuredClone(s,r)};S(this,R).then(()=>{for(const i of S(this,E))i.call(this,t)})}addEventListener(s,r){S(this,E).add(r)}removeEventListener(s,r){S(this,E).delete(r)}terminate(){S(this,E).clear()}}E=new WeakMap,R=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const h=(e=document==null?void 0:document.currentScript)==null?void 0:e.src;h&&(PDFWorkerUtil.fallbackWorkerSrc=h.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(h,s){let r;try{if(r=new URL(h),!r.origin||r.origin==="null")return!1}catch(i){return!1}const t=new URL(s,r);return r.origin===t.origin},PDFWorkerUtil.createCDNWrapper=function(h){const s='importScripts("'.concat(h,'");');return URL.createObjectURL(new Blob([s]))}}const _PDFWorker=class _PDFWorker{constructor({name:h=null,port:s=null,verbosity:r=(0,_util.getVerbosityLevel)()}={}){if(s&&S(_PDFWorker,nt).has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=h,this.destroyed=!1,this.verbosity=r,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,s){S(_PDFWorker,nt).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(h){this._port=h,this._messageHandler=new _message_handler.MessageHandler("main","worker",h),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:h}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,h)||(h=PDFWorkerUtil.createCDNWrapper(new URL(h,window.location).href));const s=new Worker(h),r=new _message_handler.MessageHandler("main","worker",s),t=()=>{s.removeEventListener("error",i),r.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=()=>{this._webWorker||t()};s.addEventListener("error",i),r.on("test",T=>{if(s.removeEventListener("error",i),this.destroyed){t();return}T?(this._messageHandler=r,this._port=s,this._webWorker=s,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),r.destroy(),s.terminate())}),r.on("ready",T=>{if(s.removeEventListener("error",i),this.destroyed){t();return}try{v()}catch(x){this._setupFakeWorker()}});const v=()=>{const T=new Uint8Array;r.send("test",T,[T.buffer])};v();return}catch(s){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(h=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new LoopbackPort;this._port=s;const r="fake".concat(PDFWorkerUtil.fakeWorkerId++),t=new _message_handler.MessageHandler(r+"_worker",r,s);h.setup(t,s);const i=new _message_handler.MessageHandler(r,r+"_worker",s);this._messageHandler=i,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})}).catch(h=>{this._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(h.message,'".')))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),S(_PDFWorker,nt).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(h){if(!(h!=null&&h.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return S(this,nt).has(h.port)?S(this,nt).get(h.port):new _PDFWorker(h)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var h;try{return((h=globalThis.pdfjsWorker)==null?void 0:h.WorkerMessageHandler)||null}catch(s){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};nt=new WeakMap,gt(_PDFWorker,nt,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(s,r,t,i,v){gt(this,y);gt(this,ft,new Map);gt(this,$,new Map);gt(this,w,new Map);this.messageHandler=s,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this._params=i,this.cMapReaderFactory=v==null?void 0:v.cMapReaderFactory,this.standardFontDataFactory=v==null?void 0:v.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=t,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(s,r=_util.AnnotationMode.ENABLE,t=null,i=!1){let v=_util.RenderingIntentFlag.DISPLAY,T=null;switch(s){case"any":v=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":v=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(s))}switch(r){case _util.AnnotationMode.DISABLE:v+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:v+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:v+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,T=(v&_util.RenderingIntentFlag.PRINT&&t instanceof _annotation_storage.PrintAnnotationStorage?t:this.annotationStorage).serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(r))}return i&&(v+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:v,cacheKey:"".concat(v,"_").concat(_annotation_storage.AnnotationStorage.getHash(T)),annotationStorageMap:T}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const t of S(this,$).values())s.push(t._destroy());S(this,$).clear(),S(this,w).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return s.push(r),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),S(this,ft).clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:r}=this;s.on("GetReader",(t,i)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=v=>{this._lastProgress={loaded:v.loaded,total:v.total}},i.onPull=()=>{this._fullReader.read().then(function({value:v,done:T}){if(T){i.close();return}(0,_util.assert)(v instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(v),1,[v])}).catch(v=>{i.error(v)})},i.onCancel=v=>{this._fullReader.cancel(v),i.ready.catch(T=>{if(!this.destroyed)throw T})}}),s.on("ReaderHeadersReady",t=>{const i=(0,_util.createPromiseCapability)(),v=this._fullReader;return v.headersReady.then(()=>{var T;(!v.isStreamingSupported||!v.isRangeSupported)&&(this._lastProgress&&((T=r.onProgress)==null||T.call(r,this._lastProgress)),v.onProgress=x=>{var X;(X=r.onProgress)==null||X.call(r,{loaded:x.loaded,total:x.total})}),i.resolve({isStreamingSupported:v.isStreamingSupported,isRangeSupported:v.isRangeSupported,contentLength:v.contentLength})},i.reject),i.promise}),s.on("GetRangeReader",(t,i)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const v=this._networkStream.getRangeReader(t.begin,t.end);if(!v){i.close();return}i.onPull=()=>{v.read().then(function({value:T,done:x}){if(x){i.close();return}(0,_util.assert)(T instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(T),1,[T])}).catch(T=>{i.error(T)})},i.onCancel=T=>{v.cancel(T),i.ready.catch(x=>{if(!this.destroyed)throw x})}}),s.on("GetDoc",({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,r._capability.resolve(new PDFDocumentProxy(t,this))}),s.on("DocException",function(t){let i;switch(t.name){case"PasswordException":i=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":i=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}r._capability.reject(i)}),s.on("PasswordRequest",t=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),r.onPassword){const i=v=>{v instanceof Error?this._passwordCapability.reject(v):this._passwordCapability.resolve({password:v})};try{r.onPassword(i,t.code)}catch(v){this._passwordCapability.reject(v)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise}),s.on("DataLoaded",t=>{var i;(i=r.onProgress)==null||i.call(r,{loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),s.on("StartRenderPage",t=>{if(this.destroyed)return;S(this,$).get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)}),s.on("commonobj",([t,i,v])=>{var T;if(!this.destroyed&&!this.commonObjs.has(t))switch(i){case"Font":const x=this._params;if("error"in v){const Z=v.error;(0,_util.warn)("Error during font loading: ".concat(Z)),this.commonObjs.resolve(t,Z);break}let X=null;x.pdfBug&&((T=globalThis.FontInspector)!=null&&T.enabled)&&(X={registerFont(Z,Et){globalThis.FontInspector.fontAdded(Z,Et)}});const _=new _font_loader.FontFaceObject(v,{isEvalSupported:x.isEvalSupported,disableFontFace:x.disableFontFace,ignoreErrors:x.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:X});this.fontLoader.bind(_).catch(Z=>s.sendWithPromise("FontFallback",{id:t})).finally(()=>{!x.fontExtraProperties&&_.data&&(_.data=null),this.commonObjs.resolve(t,_)});break;case"FontPath":case"Image":this.commonObjs.resolve(t,v);break;default:throw new Error("Got unknown common object type ".concat(i))}}),s.on("obj",([t,i,v,T])=>{var X;if(this.destroyed)return;const x=S(this,$).get(i);if(!x.objs.has(t))switch(v){case"Image":x.objs.resolve(t,T);const _=8e6;if(T){let Z;if(T.bitmap){const{width:Et,height:ut}=T;Z=Et*ut*4}else Z=((X=T.data)==null?void 0:X.length)||0;Z>_&&(x.cleanupAfterRender=!0)}break;case"Pattern":x.objs.resolve(t,T);break;default:throw new Error("Got unknown object type ".concat(v))}}),s.on("DocProgress",t=>{var i;this.destroyed||(i=r.onProgress)==null||i.call(r,{loaded:t.loaded,total:t.total})}),s.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),s.on("FetchBuiltInCMap",t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:s}){var r,t;this.destroyed||(t=(r=this.loadingTask).onUnsupportedFeature)==null||t.call(r,s)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s,r;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(r=(s=this._fullReader)==null?void 0:s.filename)!=null?r:null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=s-1,t=S(this,w).get(r);if(t)return t;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(v=>{if(this.destroyed)throw new Error("Transport destroyed");const T=new PDFPageProxy(r,v,this,this._params.ownerDocument,this._params.pdfBug);return S(this,$).set(r,T),T});return S(this,w).set(r,i),i}getPageIndex(s){return typeof s!="object"||s===null||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:r})}getFieldObjects(){return wt(this,y,si).call(this,"GetFieldObjects")}hasJSActions(){return wt(this,y,si).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return typeof s!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const s="GetMetadata",r=S(this,ft).get(s);if(r)return r;const t=this.messageHandler.sendWithPromise(s,null).then(i=>{var v,T,x,X;return{info:i[0],metadata:i[1]?new _metadata.Metadata(i[1]):null,contentDispositionFilename:(T=(v=this._fullReader)==null?void 0:v.filename)!=null?T:null,contentLength:(X=(x=this._fullReader)==null?void 0:x.contentLength)!=null?X:null}});return S(this,ft).set(s,t),t}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(s=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const r of S(this,$).values())if(!r.cleanup())throw new Error("startCleanup: Page ".concat(r.pageNumber," is currently rendering."));this.commonObjs.clear(),s||this.fontLoader.clear(),S(this,ft).clear()}}get loadingParams(){const{disableAutoFetch:s,enableXfa:r}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s,enableXfa:r})}}ft=new WeakMap,$=new WeakMap,w=new WeakMap,y=new WeakSet,si=function(s,r=null){const t=S(this,ft).get(s);if(t)return t;const i=this.messageHandler.sendWithPromise(s,r);return S(this,ft).set(s,i),i};class PDFObjects{constructor(){gt(this,b);gt(this,P,Object.create(null))}get(s,r=null){if(r){const i=wt(this,b,ai).call(this,s);return i.capability.promise.then(()=>r(i.data)),null}const t=S(this,P)[s];if(!(t!=null&&t.capability.settled))throw new Error("Requesting object that isn't resolved yet ".concat(s,"."));return t.data}has(s){const r=S(this,P)[s];return(r==null?void 0:r.capability.settled)||!1}resolve(s,r=null){const t=wt(this,b,ai).call(this,s);t.data=r,t.capability.resolve()}clear(){var s;for(const r in S(this,P)){const{data:t}=S(this,P)[r];(s=t==null?void 0:t.bitmap)==null||s.close()}jt(this,P,Object.create(null))}}P=new WeakMap,b=new WeakSet,ai=function(s){const r=S(this,P)[s];return r||(S(this,P)[s]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(s){gt(this,m,null);jt(this,m,s),this.onContinue=null}get promise(){return S(this,m).capability.promise}cancel(s=0){S(this,m).cancel(null,s)}get separateAnnots(){const{separateAnnots:s}=S(this,m).operatorList;if(!s)return!1;const{annotationCanvasMap:r}=S(this,m);return s.form||s.canvas&&(r==null?void 0:r.size)>0}}m=new WeakMap,exports.RenderTask=RenderTask;const u=class u{constructor({callback:s,params:r,objs:t,commonObjs:i,annotationCanvasMap:v,operatorList:T,pageIndex:x,canvasFactory:X,useRequestAnimationFrame:_=!1,pdfBug:Z=!1,pageColors:Et=null}){this.callback=s,this.params=r,this.objs=t,this.commonObjs=i,this.annotationCanvasMap=v,this.operatorListIdx=null,this.operatorList=T,this._pageIndex=x,this.canvasFactory=X,this._pdfBug=Z,this.pageColors=Et,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=_===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:s=!1,optionalContentConfig:r}){var x,X;if(this.cancelled)return;if(this._canvas){if(S(u,a).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");S(u,a).add(this._canvas)}this._pdfBug&&((x=globalThis.StepperManager)!=null&&x.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:t,viewport:i,transform:v,background:T}=this.params;this.gfx=new _canvas.CanvasGraphics(t,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:v,viewport:i,transparency:s,background:T}),this.operatorListIdx=0,this.graphicsReady=!0,(X=this.graphicsReadyCallback)==null||X.call(this)}cancel(s=null,r=0){var t;this.running=!1,this.cancelled=!0,(t=this.gfx)==null||t.endDrawing(),this._canvas&&S(u,a).delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas",r))}operatorListChanged(){var s;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(s=this.stepper)==null||s.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&S(u,a).delete(this._canvas),this.callback())))}};a=new WeakMap,gt(u,a,new WeakSet);let InternalRenderTask=u;const version="3.4.120";exports.version=version;const build="af6414988";exports.build=build},(p,A,ht)=>{var $,w,y,Wi,P;Object.defineProperty(A,"__esModule",{value:!0}),A.PrintAnnotationStorage=A.AnnotationStorage=void 0;var E=ht(1),R=ht(4),e=ht(8);class nt{constructor(){gt(this,y);gt(this,$,!1);gt(this,w,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(d,m){const a=S(this,w).get(d);return a===void 0?m:Object.assign(m,a)}getRawValue(d){return S(this,w).get(d)}remove(d){if(S(this,w).delete(d),S(this,w).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const m of S(this,w).values())if(m instanceof R.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(d,m){const a=S(this,w).get(d);let u=!1;if(a!==void 0)for(const[h,s]of Object.entries(m))a[h]!==s&&(u=!0,a[h]=s);else u=!0,S(this,w).set(d,m);u&&wt(this,y,Wi).call(this),m instanceof R.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(m.constructor._type)}has(d){return S(this,w).has(d)}getAll(){return S(this,w).size>0?(0,E.objectFromMap)(S(this,w)):null}setAll(d){for(const[m,a]of Object.entries(d))this.setValue(m,a)}get size(){return S(this,w).size}resetModified(){S(this,$)&&(jt(this,$,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ft(this)}get serializable(){if(S(this,w).size===0)return null;const d=new Map;for(const[m,a]of S(this,w)){const u=a instanceof R.AnnotationEditor?a.serialize():a;u&&d.set(m,u)}return d}static getHash(d){if(!d)return"";const m=new e.MurmurHash3_64;for(const[a,u]of d)m.update("".concat(a,":").concat(JSON.stringify(u)));return m.hexdigest()}}$=new WeakMap,w=new WeakMap,y=new WeakSet,Wi=function(){S(this,$)||(jt(this,$,!0),typeof this.onSetModified=="function"&&this.onSetModified())},A.AnnotationStorage=nt;class ft extends nt{constructor(m){super();gt(this,P,null);jt(this,P,structuredClone(m.serializable))}get print(){(0,E.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return S(this,P)}}P=new WeakMap,A.PrintAnnotationStorage=ft},(p,A,ht)=>{var nt,ft,$,w,y,W;Object.defineProperty(A,"__esModule",{value:!0}),A.AnnotationEditor=void 0;var E=ht(5),R=ht(1);const P=class P{constructor(d){gt(this,nt,this.focusin.bind(this));gt(this,ft,this.focusout.bind(this));gt(this,$,!1);gt(this,w,!1);gt(this,y,!1);Ne(this,"_uiManager",null);gt(this,W,P._zIndex++);this.constructor===P&&(0,R.unreachable)("Cannot initialize AnnotationEditor."),this.parent=d.parent,this.id=d.id,this.width=this.height=null,this.pageIndex=d.parent.pageIndex,this.name=d.name,this.div=null,this._uiManager=d.uiManager;const{rotation:m,rawDims:{pageWidth:a,pageHeight:u,pageX:h,pageY:s}}=this.parent.viewport;this.rotation=m,this.pageDimensions=[a,u],this.pageTranslation=[h,s];const[r,t]=this.parentDimensions;this.x=d.x/r,this.y=d.y/t,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,R.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(d){this._uiManager.addCommands(d)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=S(this,W)}setParent(d){d!==null&&(this.pageIndex=d.pageIndex,this.pageDimensions=d.pageDimensions),this.parent=d}focusin(d){S(this,$)?jt(this,$,!1):this.parent.setSelected(this)}focusout(d){var a;if(!this.isAttachedToDOM)return;const m=d.relatedTarget;m!=null&&m.closest("#".concat(this.id))||(d.preventDefault(),(a=this.parent)!=null&&a.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(d){const m=this.parent.div.getBoundingClientRect();this.startX=d.clientX-m.x,this.startY=d.clientY-m.y,d.dataTransfer.setData("text/plain",this.id),d.dataTransfer.effectAllowed="move"}setAt(d,m,a,u){const[h,s]=this.parentDimensions;[a,u]=this.screenToPageTranslation(a,u),this.x=(d+a)/h,this.y=(m+u)/s,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}translate(d,m){const[a,u]=this.parentDimensions;[d,m]=this.screenToPageTranslation(d,m),this.x+=d/a,this.y+=m/u,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}screenToPageTranslation(d,m){switch(this.parentRotation){case 90:return[m,-d];case 180:return[-d,-m];case 270:return[-m,d];default:return[d,m]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return this._uiManager.viewParameters.rotation}get parentDimensions(){const{realScale:d}=this._uiManager.viewParameters,[m,a]=this.pageDimensions;return[m*d,a*d]}setDims(d,m){const[a,u]=this.parentDimensions;this.div.style.width="".concat(100*d/a,"%"),this.div.style.height="".concat(100*m/u,"%")}fixDims(){const{style:d}=this.div,{height:m,width:a}=d,u=a.endsWith("%"),h=m.endsWith("%");if(u&&h)return;const[s,r]=this.parentDimensions;u||(d.width="".concat(100*parseFloat(a)/s,"%")),h||(d.height="".concat(100*parseFloat(m)/r,"%"))}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",S(this,nt)),this.div.addEventListener("focusout",S(this,ft));const[d,m]=this.getInitialTranslation();return this.translate(d,m),(0,E.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(d){const{isMac:m}=R.FeatureTest.platform;if(d.button!==0||d.ctrlKey&&m){d.preventDefault();return}d.ctrlKey&&!m||d.shiftKey||d.metaKey&&m?this.parent.toggleSelected(this):this.parent.setSelected(this),jt(this,$,!0)}getRect(d,m){const a=this.parentScale,[u,h]=this.pageDimensions,[s,r]=this.pageTranslation,t=d/a,i=m/a,v=this.x*u,T=this.y*h,x=this.width*u,X=this.height*h;switch(this.rotation){case 0:return[v+t+s,h-T-i-X+r,v+t+x+s,h-T-i+r];case 90:return[v+i+s,h-T+t+r,v+i+X+s,h-T+t+x+r];case 180:return[v-t-x+s,h-T+i+r,v-t+s,h-T+i+X+r];case 270:return[v-i-X+s,h-T-t-x+r,v-i+s,h-T-t+r];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(d,m){const[a,u,h,s]=d,r=h-a,t=s-u;switch(this.rotation){case 0:return[a,m-s,r,t];case 90:return[a,m-u,t,r];case 180:return[h,m-u,r,t];case 270:return[h,m-s,t,r];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){jt(this,y,!0)}disableEditMode(){jt(this,y,!1)}isInEditMode(){return S(this,y)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var d;(d=this.div)==null||d.addEventListener("focusin",S(this,nt))}serialize(){(0,R.unreachable)("An editor must be serializable")}static deserialize(d,m,a){const u=new this.prototype.constructor({parent:m,id:m.getNextId(),uiManager:a});u.rotation=d.rotation;const[h,s]=u.pageDimensions,[r,t,i,v]=u.getRectInCurrentCoords(d.rect,s);return u.x=r/h,u.y=t/s,u.width=i/h,u.height=v/s,u}remove(){this.div.removeEventListener("focusin",S(this,nt)),this.div.removeEventListener("focusout",S(this,ft)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var d;(d=this.div)==null||d.classList.add("selectedEditor")}unselect(){var d;(d=this.div)==null||d.classList.remove("selectedEditor")}updateParams(d,m){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return S(this,w)}set isEditing(d){jt(this,w,d),d?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};nt=new WeakMap,ft=new WeakMap,$=new WeakMap,w=new WeakMap,y=new WeakMap,W=new WeakMap,Ne(P,"_colorManager",new E.ColorManager),Ne(P,"_zIndex",1);let e=P;A.AnnotationEditor=e},(p,A,ht)=>{var P,b,d,m,a,u,Vi,r,t,i,v,T,x,X,_,Z,Et,ut,mt,st,Y,K,bt,Ct,D,c,o,C,O,N,V,qi,at,oi,lt,zi,ot,Gi,g,rn,I,Mn,J,Xi,St,$i,ct,li,Tt,xn,Nt,ci;Object.defineProperty(A,"__esModule",{value:!0}),A.KeyboardManager=A.CommandManager=A.ColorManager=A.AnnotationEditorUIManager=void 0,A.bindEvents=e,A.opacityToHex=nt;var E=ht(1),R=ht(6);function e(Zt,L,j){for(const q of j)L.addEventListener(q,Zt[q].bind(Zt))}function nt(Zt){return Math.round(Math.min(255,Math.max(1,255*Zt))).toString(16).padStart(2,"0")}class ft{constructor(){gt(this,P,0)}getId(){return"".concat(E.AnnotationEditorPrefix).concat(ri(this,P)._++)}}P=new WeakMap;class ${constructor(L=128){gt(this,b,[]);gt(this,d,!1);gt(this,m,void 0);gt(this,a,-1);jt(this,m,L)}add({cmd:L,undo:j,mustExec:q,type:Pt=NaN,overwriteIfSameType:Jt=!1,keepUndo:he=!1}){if(q&&L(),S(this,d))return;const rt={cmd:L,undo:j,type:Pt};if(S(this,a)===-1){S(this,b).length>0&&(S(this,b).length=0),jt(this,a,0),S(this,b).push(rt);return}if(Jt&&S(this,b)[S(this,a)].type===Pt){he&&(rt.undo=S(this,b)[S(this,a)].undo),S(this,b)[S(this,a)]=rt;return}const kt=S(this,a)+1;kt===S(this,m)?S(this,b).splice(0,1):(jt(this,a,kt),kt<S(this,b).length&&S(this,b).splice(kt)),S(this,b).push(rt)}undo(){S(this,a)!==-1&&(jt(this,d,!0),S(this,b)[S(this,a)].undo(),jt(this,d,!1),jt(this,a,S(this,a)-1))}redo(){S(this,a)<S(this,b).length-1&&(jt(this,a,S(this,a)+1),jt(this,d,!0),S(this,b)[S(this,a)].cmd(),jt(this,d,!1))}hasSomethingToUndo(){return S(this,a)!==-1}hasSomethingToRedo(){return S(this,a)<S(this,b).length-1}destroy(){jt(this,b,null)}}b=new WeakMap,d=new WeakMap,m=new WeakMap,a=new WeakMap,A.CommandManager=$;class w{constructor(L){gt(this,u);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:j}=E.FeatureTest.platform;for(const[q,Pt]of L)for(const Jt of q){const he=Jt.startsWith("mac+");j&&he?(this.callbacks.set(Jt.slice(4),Pt),this.allKeys.add(Jt.split("+").at(-1))):!j&&!he&&(this.callbacks.set(Jt,Pt),this.allKeys.add(Jt.split("+").at(-1)))}}exec(L,j){if(!this.allKeys.has(j.key))return;const q=this.callbacks.get(wt(this,u,Vi).call(this,j));q&&(q.bind(L)(),j.stopPropagation(),j.preventDefault())}}u=new WeakSet,Vi=function(L){L.altKey&&this.buffer.push("alt"),L.ctrlKey&&this.buffer.push("ctrl"),L.metaKey&&this.buffer.push("meta"),L.shiftKey&&this.buffer.push("shift"),this.buffer.push(L.key);const j=this.buffer.join("+");return this.buffer.length=0,j},A.KeyboardManager=w;const s=class s{get _colors(){const L=new Map([["CanvasText",null],["Canvas",null]]);return(0,R.getColorValues)(L),(0,E.shadow)(this,"_colors",L)}convert(L){const j=(0,R.getRGB)(L);if(!window.matchMedia("(forced-colors: active)").matches)return j;for(const[q,Pt]of this._colors)if(Pt.every((Jt,he)=>Jt===j[he]))return s._colorsMapping.get(q);return j}getHexCode(L){const j=this._colors.get(L);return j?E.Util.makeHexColor(...j):L}};Ne(s,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let y=s;A.ColorManager=y;const re=class re{constructor(L,j,q){gt(this,V);gt(this,at);gt(this,lt);gt(this,ot);gt(this,g);gt(this,I);gt(this,J);gt(this,St);gt(this,ct);gt(this,Tt);gt(this,Nt);gt(this,r,null);gt(this,t,new Map);gt(this,i,new Map);gt(this,v,null);gt(this,T,new $);gt(this,x,0);gt(this,X,null);gt(this,_,new Set);gt(this,Z,null);gt(this,Et,new ft);gt(this,ut,!1);gt(this,mt,E.AnnotationEditorType.NONE);gt(this,st,new Set);gt(this,Y,this.copy.bind(this));gt(this,K,this.cut.bind(this));gt(this,bt,this.paste.bind(this));gt(this,Ct,this.keydown.bind(this));gt(this,D,this.onEditingAction.bind(this));gt(this,c,this.onPageChanging.bind(this));gt(this,o,this.onScaleChanging.bind(this));gt(this,C,this.onRotationChanging.bind(this));gt(this,O,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});gt(this,N,null);jt(this,N,L),jt(this,Z,j),S(this,Z)._on("editingaction",S(this,D)),S(this,Z)._on("pagechanging",S(this,c)),S(this,Z)._on("scalechanging",S(this,o)),S(this,Z)._on("rotationchanging",S(this,C)),jt(this,v,q),this.viewParameters={realScale:R.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){wt(this,at,oi).call(this),S(this,Z)._off("editingaction",S(this,D)),S(this,Z)._off("pagechanging",S(this,c)),S(this,Z)._off("scalechanging",S(this,o)),S(this,Z)._off("rotationchanging",S(this,C));for(const L of S(this,i).values())L.destroy();S(this,i).clear(),S(this,t).clear(),S(this,_).clear(),jt(this,r,null),S(this,st).clear(),S(this,T).destroy()}onPageChanging({pageNumber:L}){jt(this,x,L-1)}focusMainContainer(){S(this,N).focus()}addShouldRescale(L){S(this,_).add(L)}removeShouldRescale(L){S(this,_).delete(L)}onScaleChanging({scale:L}){this.commitOrRemove(),this.viewParameters.realScale=L*R.PixelsPerInch.PDF_TO_CSS_UNITS;for(const j of S(this,_))j.onScaleChanging()}onRotationChanging({pagesRotation:L}){this.commitOrRemove(),this.viewParameters.rotation=L}addToAnnotationStorage(L){!L.isEmpty()&&S(this,v)&&!S(this,v).has(L.id)&&S(this,v).setValue(L.id,L)}copy(L){if(L.preventDefault(),S(this,r)&&S(this,r).commitOrRemove(),!this.hasSelection)return;const j=[];for(const q of S(this,st))q.isEmpty()||j.push(q.serialize());j.length!==0&&L.clipboardData.setData("application/pdfjs",JSON.stringify(j))}cut(L){this.copy(L),this.delete()}paste(L){L.preventDefault();let j=L.clipboardData.getData("application/pdfjs");if(!j)return;try{j=JSON.parse(j)}catch(Pt){(0,E.warn)('paste: "'.concat(Pt.message,'".'));return}if(!Array.isArray(j))return;this.unselectAll();const q=S(this,i).get(S(this,x));try{const Pt=[];for(const rt of j){const kt=q.deserialize(rt);if(!kt)return;Pt.push(kt)}const Jt=()=>{for(const rt of Pt)wt(this,ct,li).call(this,rt);wt(this,Nt,ci).call(this,Pt)},he=()=>{for(const rt of Pt)rt.remove()};this.addCommands({cmd:Jt,undo:he,mustExec:!0})}catch(Pt){(0,E.warn)('paste: "'.concat(Pt.message,'".'))}}keydown(L){var j;(j=this.getActive())!=null&&j.shouldGetKeyboardEvents()||re._keyboardManager.exec(this,L)}onEditingAction(L){["undo","redo","delete","selectAll"].includes(L.name)&&this[L.name]()}setEditingState(L){L?(wt(this,V,qi).call(this),wt(this,lt,zi).call(this),wt(this,g,rn).call(this,{isEditing:S(this,mt)!==E.AnnotationEditorType.NONE,isEmpty:wt(this,Tt,xn).call(this),hasSomethingToUndo:S(this,T).hasSomethingToUndo(),hasSomethingToRedo:S(this,T).hasSomethingToRedo(),hasSelectedEditor:!1})):(wt(this,at,oi).call(this),wt(this,ot,Gi).call(this),wt(this,g,rn).call(this,{isEditing:!1}))}registerEditorTypes(L){if(!S(this,X)){jt(this,X,L);for(const j of S(this,X))wt(this,I,Mn).call(this,j.defaultPropertiesToUpdate)}}getId(){return S(this,Et).getId()}get currentLayer(){return S(this,i).get(S(this,x))}get currentPageIndex(){return S(this,x)}addLayer(L){S(this,i).set(L.pageIndex,L),S(this,ut)?L.enable():L.disable()}removeLayer(L){S(this,i).delete(L.pageIndex)}updateMode(L){if(jt(this,mt,L),L===E.AnnotationEditorType.NONE)this.setEditingState(!1),wt(this,St,$i).call(this);else{this.setEditingState(!0),wt(this,J,Xi).call(this);for(const j of S(this,i).values())j.updateMode(L)}}updateToolbar(L){L!==S(this,mt)&&S(this,Z).dispatch("switchannotationeditormode",{source:this,mode:L})}updateParams(L,j){if(S(this,X)){for(const q of S(this,st))q.updateParams(L,j);for(const q of S(this,X))q.updateDefaultParams(L,j)}}getEditors(L){const j=[];for(const q of S(this,t).values())q.pageIndex===L&&j.push(q);return j}getEditor(L){return S(this,t).get(L)}addEditor(L){S(this,t).set(L.id,L)}removeEditor(L){var j;S(this,t).delete(L.id),this.unselect(L),(j=S(this,v))==null||j.remove(L.id)}setActiveEditor(L){S(this,r)!==L&&(jt(this,r,L),L&&wt(this,I,Mn).call(this,L.propertiesToUpdate))}toggleSelected(L){if(S(this,st).has(L)){S(this,st).delete(L),L.unselect(),wt(this,g,rn).call(this,{hasSelectedEditor:this.hasSelection});return}S(this,st).add(L),L.select(),wt(this,I,Mn).call(this,L.propertiesToUpdate),wt(this,g,rn).call(this,{hasSelectedEditor:!0})}setSelected(L){for(const j of S(this,st))j!==L&&j.unselect();S(this,st).clear(),S(this,st).add(L),L.select(),wt(this,I,Mn).call(this,L.propertiesToUpdate),wt(this,g,rn).call(this,{hasSelectedEditor:!0})}isSelected(L){return S(this,st).has(L)}unselect(L){L.unselect(),S(this,st).delete(L),wt(this,g,rn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return S(this,st).size!==0}undo(){S(this,T).undo(),wt(this,g,rn).call(this,{hasSomethingToUndo:S(this,T).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:wt(this,Tt,xn).call(this)})}redo(){S(this,T).redo(),wt(this,g,rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:S(this,T).hasSomethingToRedo(),isEmpty:wt(this,Tt,xn).call(this)})}addCommands(L){S(this,T).add(L),wt(this,g,rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:wt(this,Tt,xn).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const L=[...S(this,st)],j=()=>{for(const Pt of L)Pt.remove()},q=()=>{for(const Pt of L)wt(this,ct,li).call(this,Pt)};this.addCommands({cmd:j,undo:q,mustExec:!0})}commitOrRemove(){var L;(L=S(this,r))==null||L.commitOrRemove()}selectAll(){for(const L of S(this,st))L.commit();wt(this,Nt,ci).call(this,S(this,t).values())}unselectAll(){if(S(this,r)){S(this,r).commitOrRemove();return}if(S(this,st).size!==0){for(const L of S(this,st))L.unselect();S(this,st).clear(),wt(this,g,rn).call(this,{hasSelectedEditor:!1})}}isActive(L){return S(this,r)===L}getActive(){return S(this,r)}getMode(){return S(this,mt)}};r=new WeakMap,t=new WeakMap,i=new WeakMap,v=new WeakMap,T=new WeakMap,x=new WeakMap,X=new WeakMap,_=new WeakMap,Z=new WeakMap,Et=new WeakMap,ut=new WeakMap,mt=new WeakMap,st=new WeakMap,Y=new WeakMap,K=new WeakMap,bt=new WeakMap,Ct=new WeakMap,D=new WeakMap,c=new WeakMap,o=new WeakMap,C=new WeakMap,O=new WeakMap,N=new WeakMap,V=new WeakSet,qi=function(){S(this,N).addEventListener("keydown",S(this,Ct))},at=new WeakSet,oi=function(){S(this,N).removeEventListener("keydown",S(this,Ct))},lt=new WeakSet,zi=function(){document.addEventListener("copy",S(this,Y)),document.addEventListener("cut",S(this,K)),document.addEventListener("paste",S(this,bt))},ot=new WeakSet,Gi=function(){document.removeEventListener("copy",S(this,Y)),document.removeEventListener("cut",S(this,K)),document.removeEventListener("paste",S(this,bt))},g=new WeakSet,rn=function(L){Object.entries(L).some(([q,Pt])=>S(this,O)[q]!==Pt)&&S(this,Z).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(S(this,O),L)})},I=new WeakSet,Mn=function(L){S(this,Z).dispatch("annotationeditorparamschanged",{source:this,details:L})},J=new WeakSet,Xi=function(){if(!S(this,ut)){jt(this,ut,!0);for(const L of S(this,i).values())L.enable()}},St=new WeakSet,$i=function(){if(this.unselectAll(),S(this,ut)){jt(this,ut,!1);for(const L of S(this,i).values())L.disable()}},ct=new WeakSet,li=function(L){const j=S(this,i).get(L.pageIndex);j?j.addOrRebuild(L):this.addEditor(L)},Tt=new WeakSet,xn=function(){if(S(this,t).size===0)return!0;if(S(this,t).size===1)for(const L of S(this,t).values())return L.isEmpty();return!1},Nt=new WeakSet,ci=function(L){S(this,st).clear();for(const j of L)j.isEmpty()||(S(this,st).add(j),j.select());wt(this,g,rn).call(this,{hasSelectedEditor:!0})},Ne(re,"_keyboardManager",new w([[["ctrl+a","mac+meta+a"],re.prototype.selectAll],[["ctrl+z","mac+meta+z"],re.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],re.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],re.prototype.delete],[["Escape","mac+Escape"],re.prototype.unselectAll]]));let W=re;A.AnnotationEditorUIManager=W},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.StatTimer=A.RenderingCancelledException=A.PixelsPerInch=A.PageViewport=A.PDFDateString=A.DOMStandardFontDataFactory=A.DOMSVGFactory=A.DOMCanvasFactory=A.DOMCMapReaderFactory=A.AnnotationPrefix=void 0,A.deprecated=i,A.getColorValues=_,A.getCurrentTransform=Z,A.getCurrentTransformInverse=Et,A.getFilenameFromUrl=u,A.getPdfFilenameFromUrl=h,A.getRGB=X,A.getXfaPageViewport=x,A.isDataScheme=m,A.isPdfFile=a,A.isValidFetchUrl=r,A.loadScript=t,A.setLayerDimensions=ut;var E=ht(7),R=ht(1);const e="http://www.w3.org/2000/svg",nt="pdfjs_internal_id_";A.AnnotationPrefix=nt;const mt=class mt{};Ne(mt,"CSS",96),Ne(mt,"PDF",72),Ne(mt,"PDF_TO_CSS_UNITS",mt.CSS/mt.PDF);let ft=mt;A.PixelsPerInch=ft;class $ extends E.BaseCanvasFactory{constructor({ownerDocument:Y=globalThis.document}={}){super(),this._document=Y}_createCanvas(Y,K){const bt=this._document.createElement("canvas");return bt.width=Y,bt.height=K,bt}}A.DOMCanvasFactory=$;async function w(st,Y=!1){if(r(st,document.baseURI)){const K=await fetch(st);if(!K.ok)throw new Error(K.statusText);return Y?new Uint8Array(await K.arrayBuffer()):(0,R.stringToBytes)(await K.text())}return new Promise((K,bt)=>{const Ct=new XMLHttpRequest;Ct.open("GET",st,!0),Y&&(Ct.responseType="arraybuffer"),Ct.onreadystatechange=()=>{if(Ct.readyState===XMLHttpRequest.DONE){if(Ct.status===200||Ct.status===0){let D;if(Y&&Ct.response?D=new Uint8Array(Ct.response):!Y&&Ct.responseText&&(D=(0,R.stringToBytes)(Ct.responseText)),D){K(D);return}}bt(new Error(Ct.statusText))}},Ct.send(null)})}class y extends E.BaseCMapReaderFactory{_fetchData(Y,K){return w(Y,this.isCompressed).then(bt=>({cMapData:bt,compressionType:K}))}}A.DOMCMapReaderFactory=y;class W extends E.BaseStandardFontDataFactory{_fetchData(Y){return w(Y,!0)}}A.DOMStandardFontDataFactory=W;class P extends E.BaseSVGFactory{_createSVG(Y){return document.createElementNS(e,Y)}}A.DOMSVGFactory=P;class b{constructor({viewBox:Y,scale:K,rotation:bt,offsetX:Ct=0,offsetY:D=0,dontFlip:c=!1}){this.viewBox=Y,this.scale=K,this.rotation=bt,this.offsetX=Ct,this.offsetY=D;const o=(Y[2]+Y[0])/2,C=(Y[3]+Y[1])/2;let O,N,V,G;switch(bt%=360,bt<0&&(bt+=360),bt){case 180:O=-1,N=0,V=0,G=1;break;case 90:O=0,N=1,V=1,G=0;break;case 270:O=0,N=-1,V=-1,G=0;break;case 0:O=1,N=0,V=0,G=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(V=-V,G=-G);let at,vt,lt,dt;O===0?(at=Math.abs(C-Y[1])*K+Ct,vt=Math.abs(o-Y[0])*K+D,lt=(Y[3]-Y[1])*K,dt=(Y[2]-Y[0])*K):(at=Math.abs(o-Y[0])*K+Ct,vt=Math.abs(C-Y[1])*K+D,lt=(Y[2]-Y[0])*K,dt=(Y[3]-Y[1])*K),this.transform=[O*K,N*K,V*K,G*K,at-O*K*o-V*K*C,vt-N*K*o-G*K*C],this.width=lt,this.height=dt}get rawDims(){const{viewBox:Y}=this;return(0,R.shadow)(this,"rawDims",{pageWidth:Y[2]-Y[0],pageHeight:Y[3]-Y[1],pageX:Y[0],pageY:Y[1]})}clone({scale:Y=this.scale,rotation:K=this.rotation,offsetX:bt=this.offsetX,offsetY:Ct=this.offsetY,dontFlip:D=!1}={}){return new b({viewBox:this.viewBox.slice(),scale:Y,rotation:K,offsetX:bt,offsetY:Ct,dontFlip:D})}convertToViewportPoint(Y,K){return R.Util.applyTransform([Y,K],this.transform)}convertToViewportRectangle(Y){const K=R.Util.applyTransform([Y[0],Y[1]],this.transform),bt=R.Util.applyTransform([Y[2],Y[3]],this.transform);return[K[0],K[1],bt[0],bt[1]]}convertToPdfPoint(Y,K){return R.Util.applyInverseTransform([Y,K],this.transform)}}A.PageViewport=b;class d extends R.BaseException{constructor(Y,K,bt=0){super(Y,"RenderingCancelledException"),this.type=K,this.extraDelay=bt}}A.RenderingCancelledException=d;function m(st){const Y=st.length;let K=0;for(;K<Y&&st[K].trim()==="";)K++;return st.substring(K,K+5).toLowerCase()==="data:"}function a(st){return typeof st=="string"&&/\.pdf$/i.test(st)}function u(st,Y=!1){return Y||([st]=st.split(/[#?]/,1)),st.substring(st.lastIndexOf("/")+1)}function h(st,Y="document.pdf"){if(typeof st!="string")return Y;if(m(st))return(0,R.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Y;const K=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,bt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Ct=K.exec(st);let D=bt.exec(Ct[1])||bt.exec(Ct[2])||bt.exec(Ct[3]);if(D&&(D=D[0],D.includes("%")))try{D=bt.exec(decodeURIComponent(D))[0]}catch(c){}return D||Y}class s{constructor(){Ne(this,"started",Object.create(null));Ne(this,"times",[])}time(Y){Y in this.started&&(0,R.warn)("Timer is already running for ".concat(Y)),this.started[Y]=Date.now()}timeEnd(Y){Y in this.started||(0,R.warn)("Timer has not been started for ".concat(Y)),this.times.push({name:Y,start:this.started[Y],end:Date.now()}),delete this.started[Y]}toString(){const Y=[];let K=0;for(const{name:bt}of this.times)K=Math.max(bt.length,K);for(const{name:bt,start:Ct,end:D}of this.times)Y.push("".concat(bt.padEnd(K)," ").concat(D-Ct,"ms\n"));return Y.join("")}}A.StatTimer=s;function r(st,Y){try{const{protocol:K}=Y?new URL(st,Y):new URL(st);return K==="http:"||K==="https:"}catch(K){return!1}}function t(st,Y=!1){return new Promise((K,bt)=>{const Ct=document.createElement("script");Ct.src=st,Ct.onload=function(D){Y&&Ct.remove(),K(D)},Ct.onerror=function(){bt(new Error("Cannot load script at: ".concat(Ct.src)))},(document.head||document.documentElement).append(Ct)})}function i(st){console.log("Deprecated API usage: "+st)}let v;class T{static toDateObject(Y){if(!Y||typeof Y!="string")return null;v||(v=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const K=v.exec(Y);if(!K)return null;const bt=parseInt(K[1],10);let Ct=parseInt(K[2],10);Ct=Ct>=1&&Ct<=12?Ct-1:0;let D=parseInt(K[3],10);D=D>=1&&D<=31?D:1;let c=parseInt(K[4],10);c=c>=0&&c<=23?c:0;let o=parseInt(K[5],10);o=o>=0&&o<=59?o:0;let C=parseInt(K[6],10);C=C>=0&&C<=59?C:0;const O=K[7]||"Z";let N=parseInt(K[8],10);N=N>=0&&N<=23?N:0;let V=parseInt(K[9],10)||0;return V=V>=0&&V<=59?V:0,O==="-"?(c+=N,o+=V):O==="+"&&(c-=N,o-=V),new Date(Date.UTC(bt,Ct,D,c,o,C))}}A.PDFDateString=T;function x(st,{scale:Y=1,rotation:K=0}){const{width:bt,height:Ct}=st.attributes.style,D=[0,0,parseInt(bt),parseInt(Ct)];return new b({viewBox:D,scale:Y,rotation:K})}function X(st){if(st.startsWith("#")){const Y=parseInt(st.slice(1),16);return[(Y&16711680)>>16,(Y&65280)>>8,Y&255]}return st.startsWith("rgb(")?st.slice(4,-1).split(",").map(Y=>parseInt(Y)):st.startsWith("rgba(")?st.slice(5,-1).split(",").map(Y=>parseInt(Y)).slice(0,3):((0,R.warn)('Not a valid color format: "'.concat(st,'"')),[0,0,0])}function _(st){const Y=document.createElement("span");Y.style.visibility="hidden",document.body.append(Y);for(const K of st.keys()){Y.style.color=K;const bt=window.getComputedStyle(Y).color;st.set(K,X(bt))}Y.remove()}function Z(st){const{a:Y,b:K,c:bt,d:Ct,e:D,f:c}=st.getTransform();return[Y,K,bt,Ct,D,c]}function Et(st){const{a:Y,b:K,c:bt,d:Ct,e:D,f:c}=st.getTransform().invertSelf();return[Y,K,bt,Ct,D,c]}function ut(st,Y,K=!1,bt=!0){if(Y instanceof b){const{pageWidth:Ct,pageHeight:D}=Y.rawDims,{style:c}=st,o="calc(var(--scale-factor) * ".concat(Ct,"px)"),C="calc(var(--scale-factor) * ".concat(D,"px)");!K||Y.rotation%180===0?(c.width=o,c.height=C):(c.width=C,c.height=o)}bt&&st.setAttribute("data-main-rotation",Y.rotation)}},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.BaseStandardFontDataFactory=A.BaseSVGFactory=A.BaseCanvasFactory=A.BaseCMapReaderFactory=void 0;var E=ht(1);class R{constructor(){this.constructor===R&&(0,E.unreachable)("Cannot initialize BaseCanvasFactory.")}create(w,y){if(w<=0||y<=0)throw new Error("Invalid canvas size");const W=this._createCanvas(w,y);return{canvas:W,context:W.getContext("2d")}}reset(w,y,W){if(!w.canvas)throw new Error("Canvas is not specified");if(y<=0||W<=0)throw new Error("Invalid canvas size");w.canvas.width=y,w.canvas.height=W}destroy(w){if(!w.canvas)throw new Error("Canvas is not specified");w.canvas.width=0,w.canvas.height=0,w.canvas=null,w.context=null}_createCanvas(w,y){(0,E.unreachable)("Abstract method `_createCanvas` called.")}}A.BaseCanvasFactory=R;class e{constructor({baseUrl:w=null,isCompressed:y=!0}){this.constructor===e&&(0,E.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=w,this.isCompressed=y}async fetch({name:w}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!w)throw new Error("CMap name must be specified.");const y=this.baseUrl+w+(this.isCompressed?".bcmap":""),W=this.isCompressed?E.CMapCompressionType.BINARY:E.CMapCompressionType.NONE;return this._fetchData(y,W).catch(P=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(y))})}_fetchData(w,y){(0,E.unreachable)("Abstract method `_fetchData` called.")}}A.BaseCMapReaderFactory=e;class nt{constructor({baseUrl:w=null}){this.constructor===nt&&(0,E.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=w}async fetch({filename:w}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!w)throw new Error("Font filename must be specified.");const y="".concat(this.baseUrl).concat(w);return this._fetchData(y).catch(W=>{throw new Error("Unable to load font data at: ".concat(y))})}_fetchData(w){(0,E.unreachable)("Abstract method `_fetchData` called.")}}A.BaseStandardFontDataFactory=nt;class ft{constructor(){this.constructor===ft&&(0,E.unreachable)("Cannot initialize BaseSVGFactory.")}create(w,y,W=!1){if(w<=0||y<=0)throw new Error("Invalid SVG dimensions");const P=this._createSVG("svg:svg");return P.setAttribute("version","1.1"),W||(P.setAttribute("width","".concat(w,"px")),P.setAttribute("height","".concat(y,"px"))),P.setAttribute("preserveAspectRatio","none"),P.setAttribute("viewBox","0 0 ".concat(w," ").concat(y)),P}createElement(w){if(typeof w!="string")throw new Error("Invalid SVG element type");return this._createSVG(w)}_createSVG(w){(0,E.unreachable)("Abstract method `_createSVG` called.")}}A.BaseSVGFactory=ft},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.MurmurHash3_64=void 0;var E=ht(1);const R=3285377520,e=4294901760,nt=65535;class ft{constructor(w){this.h1=w?w&4294967295:R,this.h2=w?w&4294967295:R}update(w){let y,W;if(typeof w=="string"){y=new Uint8Array(w.length*2),W=0;for(let v=0,T=w.length;v<T;v++){const x=w.charCodeAt(v);x<=255?y[W++]=x:(y[W++]=x>>>8,y[W++]=x&255)}}else if((0,E.isArrayBuffer)(w))y=w.slice(),W=y.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const P=W>>2,b=W-P*4,d=new Uint32Array(y.buffer,0,P);let m=0,a=0,u=this.h1,h=this.h2;const s=3432918353,r=461845907,t=s&nt,i=r&nt;for(let v=0;v<P;v++)v&1?(m=d[v],m=m*s&e|m*t&nt,m=m<<15|m>>>17,m=m*r&e|m*i&nt,u^=m,u=u<<13|u>>>19,u=u*5+3864292196):(a=d[v],a=a*s&e|a*t&nt,a=a<<15|a>>>17,a=a*r&e|a*i&nt,h^=a,h=h<<13|h>>>19,h=h*5+3864292196);switch(m=0,b){case 3:m^=y[P*4+2]<<16;case 2:m^=y[P*4+1]<<8;case 1:m^=y[P*4],m=m*s&e|m*t&nt,m=m<<15|m>>>17,m=m*r&e|m*i&nt,P&1?u^=m:h^=m}this.h1=u,this.h2=h}hexdigest(){let w=this.h1,y=this.h2;return w^=y>>>1,w=w*3981806797&e|w*36045&nt,y=y*4283543511&e|((y<<16|w>>>16)*2950163797&e)>>>16,w^=y>>>1,w=w*444984403&e|w*60499&nt,y=y*3301882366&e|((y<<16|w>>>16)*3120437893&e)>>>16,w^=y>>>1,(w>>>0).toString(16).padStart(8,"0")+(y>>>0).toString(16).padStart(8,"0")}}A.MurmurHash3_64=ft},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.FontLoader=A.FontFaceObject=void 0;var E=ht(1),R=ht(10);class e{constructor({onUnsupportedFeature:$,ownerDocument:w=globalThis.document,styleElement:y=null}){this._onUnsupportedFeature=$,this._document=w,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace($){this.nativeFontFaces.push($),this._document.fonts.add($)}insertRule($){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const w=this.styleElement.sheet;w.insertRule($,w.cssRules.length)}clear(){for(const $ of this.nativeFontFaces)this._document.fonts.delete($);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind($){if($.attached||$.missingFile)return;if($.attached=!0,this.isFontLoadingAPISupported){const y=$.createNativeFontFace();if(y){this.addNativeFontFace(y);try{await y.loaded}catch(W){throw this._onUnsupportedFeature({featureId:E.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,E.warn)("Failed to load font '".concat(y.family,"': '").concat(W,"'.")),$.disableFontFace=!0,W}}return}const w=$.createFontFaceRule();if(w){if(this.insertRule(w),this.isSyncFontLoadingSupported)return;await new Promise(y=>{const W=this._queueLoadingCallback(y);this._prepareFontLoadEvent($,W)})}}get isFontLoadingAPISupported(){var w;const $=!!((w=this._document)!=null&&w.fonts);return(0,E.shadow)(this,"isFontLoadingAPISupported",$)}get isSyncFontLoadingSupported(){let $=!1;return(R.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&($=!0),(0,E.shadow)(this,"isSyncFontLoadingSupported",$)}_queueLoadingCallback($){function w(){for((0,E.assert)(!W.done,"completeRequest() cannot be called twice."),W.done=!0;y.length>0&&y[0].done;){const P=y.shift();setTimeout(P.callback,0)}}const{loadingRequests:y}=this,W={done:!1,complete:w,callback:$};return y.push(W),W}get _loadTestFont(){const $=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,E.shadow)(this,"_loadTestFont",$)}_prepareFontLoadEvent($,w){function y(_,Z){return _.charCodeAt(Z)<<24|_.charCodeAt(Z+1)<<16|_.charCodeAt(Z+2)<<8|_.charCodeAt(Z+3)&255}function W(_,Z,Et,ut){const mt=_.substring(0,Z),st=_.substring(Z+Et);return mt+ut+st}let P,b;const d=this._document.createElement("canvas");d.width=1,d.height=1;const m=d.getContext("2d");let a=0;function u(_,Z){if(++a>30){(0,E.warn)("Load test font never loaded."),Z();return}if(m.font="30px "+_,m.fillText(".",0,20),m.getImageData(0,0,1,1).data[3]>0){Z();return}setTimeout(u.bind(null,_,Z))}const h="lt".concat(Date.now()).concat(this.loadTestFontId++);let s=this._loadTestFont;s=W(s,976,h.length,h);const t=16,i=1482184792;let v=y(s,t);for(P=0,b=h.length-3;P<b;P+=4)v=v-i+y(h,P)|0;P<h.length&&(v=v-i+y(h+"XXX",P)|0),s=W(s,t,4,(0,E.string32)(v));const T="url(data:font/opentype;base64,".concat(btoa(s),");"),x='@font-face {font-family:"'.concat(h,'";src:').concat(T,"}");this.insertRule(x);const X=this._document.createElement("div");X.style.visibility="hidden",X.style.width=X.style.height="10px",X.style.position="absolute",X.style.top=X.style.left="0px";for(const _ of[$.loadedName,h]){const Z=this._document.createElement("span");Z.textContent="Hi",Z.style.fontFamily=_,X.append(Z)}this._document.body.append(X),u(h,()=>{X.remove(),w.complete()})}}A.FontLoader=e;class nt{constructor($,{isEvalSupported:w=!0,disableFontFace:y=!1,ignoreErrors:W=!1,onUnsupportedFeature:P,fontRegistry:b=null}){this.compiledGlyphs=Object.create(null);for(const d in $)this[d]=$[d];this.isEvalSupported=w!==!1,this.disableFontFace=y===!0,this.ignoreErrors=W===!0,this._onUnsupportedFeature=P,this.fontRegistry=b}createNativeFontFace(){var w;if(!this.data||this.disableFontFace)return null;let $;if(!this.cssFontInfo)$=new FontFace(this.loadedName,this.data,{});else{const y={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(y.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),$=new FontFace(this.cssFontInfo.fontFamily,this.data,y)}return(w=this.fontRegistry)==null||w.registerFont(this),$}createFontFaceRule(){var W;if(!this.data||this.disableFontFace)return null;const $=(0,E.bytesToString)(this.data),w="url(data:".concat(this.mimetype,";base64,").concat(btoa($),");");let y;if(!this.cssFontInfo)y='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(w,"}");else{let P="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(P+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),y='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(P,"src:").concat(w,"}")}return(W=this.fontRegistry)==null||W.registerFont(this,w),y}getPathGenerator($,w){if(this.compiledGlyphs[w]!==void 0)return this.compiledGlyphs[w];let y;try{y=$.get(this.loadedName+"_path_"+w)}catch(W){if(!this.ignoreErrors)throw W;return this._onUnsupportedFeature({featureId:E.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,E.warn)('getPathGenerator - ignoring character: "'.concat(W,'".')),this.compiledGlyphs[w]=function(P,b){}}if(this.isEvalSupported&&E.FeatureTest.isEvalSupported){const W=[];for(const P of y){const b=P.args!==void 0?P.args.join(","):"";W.push("c.",P.cmd,"(",b,");\n")}return this.compiledGlyphs[w]=new Function("c","size",W.join(""))}return this.compiledGlyphs[w]=function(W,P){for(const b of y)b.cmd==="scale"&&(b.args=[P,-P]),W[b.cmd].apply(W,b.args)}}}A.FontFaceObject=nt},(p,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.isNodeJS=void 0;const ht=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");A.isNodeJS=ht},(p,A,ht)=>{var K,ui;Object.defineProperty(A,"__esModule",{value:!0}),A.CanvasGraphics=void 0;var E=ht(1),R=ht(6),e=ht(12),nt=ht(13);const ft=16,$=100,w=4096,y=15,W=10,P=1e3,b=16;function d(D,c){if(D._removeMirroring)throw new Error("Context is already forwarding operations.");D.__originalSave=D.save,D.__originalRestore=D.restore,D.__originalRotate=D.rotate,D.__originalScale=D.scale,D.__originalTranslate=D.translate,D.__originalTransform=D.transform,D.__originalSetTransform=D.setTransform,D.__originalResetTransform=D.resetTransform,D.__originalClip=D.clip,D.__originalMoveTo=D.moveTo,D.__originalLineTo=D.lineTo,D.__originalBezierCurveTo=D.bezierCurveTo,D.__originalRect=D.rect,D.__originalClosePath=D.closePath,D.__originalBeginPath=D.beginPath,D._removeMirroring=()=>{D.save=D.__originalSave,D.restore=D.__originalRestore,D.rotate=D.__originalRotate,D.scale=D.__originalScale,D.translate=D.__originalTranslate,D.transform=D.__originalTransform,D.setTransform=D.__originalSetTransform,D.resetTransform=D.__originalResetTransform,D.clip=D.__originalClip,D.moveTo=D.__originalMoveTo,D.lineTo=D.__originalLineTo,D.bezierCurveTo=D.__originalBezierCurveTo,D.rect=D.__originalRect,D.closePath=D.__originalClosePath,D.beginPath=D.__originalBeginPath,delete D._removeMirroring},D.save=function(){c.save(),this.__originalSave()},D.restore=function(){c.restore(),this.__originalRestore()},D.translate=function(C,O){c.translate(C,O),this.__originalTranslate(C,O)},D.scale=function(C,O){c.scale(C,O),this.__originalScale(C,O)},D.transform=function(C,O,N,V,G,at){c.transform(C,O,N,V,G,at),this.__originalTransform(C,O,N,V,G,at)},D.setTransform=function(C,O,N,V,G,at){c.setTransform(C,O,N,V,G,at),this.__originalSetTransform(C,O,N,V,G,at)},D.resetTransform=function(){c.resetTransform(),this.__originalResetTransform()},D.rotate=function(C){c.rotate(C),this.__originalRotate(C)},D.clip=function(C){c.clip(C),this.__originalClip(C)},D.moveTo=function(o,C){c.moveTo(o,C),this.__originalMoveTo(o,C)},D.lineTo=function(o,C){c.lineTo(o,C),this.__originalLineTo(o,C)},D.bezierCurveTo=function(o,C,O,N,V,G){c.bezierCurveTo(o,C,O,N,V,G),this.__originalBezierCurveTo(o,C,O,N,V,G)},D.rect=function(o,C,O,N){c.rect(o,C,O,N),this.__originalRect(o,C,O,N)},D.closePath=function(){c.closePath(),this.__originalClosePath()},D.beginPath=function(){c.beginPath(),this.__originalBeginPath()}}class m{constructor(c){this.canvasFactory=c,this.cache=Object.create(null)}getCanvas(c,o,C){let O;return this.cache[c]!==void 0?(O=this.cache[c],this.canvasFactory.reset(O,o,C)):(O=this.canvasFactory.create(o,C),this.cache[c]=O),O}delete(c){delete this.cache[c]}clear(){for(const c in this.cache){const o=this.cache[c];this.canvasFactory.destroy(o),delete this.cache[c]}}}function a(D,c,o,C,O,N,V,G,at,vt){const[lt,dt,ot,l,g,k]=(0,R.getCurrentTransform)(D);if(dt===0&&ot===0){const J=V*lt+g,pt=Math.round(J),St=G*l+k,Mt=Math.round(St),ct=(V+at)*lt+g,xt=Math.abs(Math.round(ct)-pt)||1,Tt=(G+vt)*l+k,Lt=Math.abs(Math.round(Tt)-Mt)||1;return D.setTransform(Math.sign(lt),0,0,Math.sign(l),pt,Mt),D.drawImage(c,o,C,O,N,0,0,xt,Lt),D.setTransform(lt,dt,ot,l,g,k),[xt,Lt]}if(lt===0&&l===0){const J=G*ot+g,pt=Math.round(J),St=V*dt+k,Mt=Math.round(St),ct=(G+vt)*ot+g,xt=Math.abs(Math.round(ct)-pt)||1,Tt=(V+at)*dt+k,Lt=Math.abs(Math.round(Tt)-Mt)||1;return D.setTransform(0,Math.sign(dt),Math.sign(ot),0,pt,Mt),D.drawImage(c,o,C,O,N,0,0,Lt,xt),D.setTransform(lt,dt,ot,l,g,k),[Lt,xt]}D.drawImage(c,o,C,O,N,V,G,at,vt);const I=Math.hypot(lt,dt),M=Math.hypot(ot,l);return[I*at,M*vt]}function u(D){const{width:c,height:o}=D;if(c>P||o>P)return null;const C=1e3,O=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),N=c+1;let V=new Uint8Array(N*(o+1)),G,at,vt;const lt=c+7&-8;let dt=new Uint8Array(lt*o),ot=0;for(const M of D.data){let J=128;for(;J>0;)dt[ot++]=M&J?0:255,J>>=1}let l=0;for(ot=0,dt[ot]!==0&&(V[0]=1,++l),at=1;at<c;at++)dt[ot]!==dt[ot+1]&&(V[at]=dt[ot]?2:1,++l),ot++;for(dt[ot]!==0&&(V[at]=2,++l),G=1;G<o;G++){ot=G*lt,vt=G*N,dt[ot-lt]!==dt[ot]&&(V[vt]=dt[ot]?1:8,++l);let M=(dt[ot]?4:0)+(dt[ot-lt]?8:0);for(at=1;at<c;at++)M=(M>>2)+(dt[ot+1]?4:0)+(dt[ot-lt+1]?8:0),O[M]&&(V[vt+at]=O[M],++l),ot++;if(dt[ot-lt]!==dt[ot]&&(V[vt+at]=dt[ot]?2:4,++l),l>C)return null}for(ot=lt*(o-1),vt=G*N,dt[ot]!==0&&(V[vt]=8,++l),at=1;at<c;at++)dt[ot]!==dt[ot+1]&&(V[vt+at]=dt[ot]?4:8,++l),ot++;if(dt[ot]!==0&&(V[vt+at]=4,++l),l>C)return null;const g=new Int32Array([0,N,-1,0,-N,0,0,0,1]),k=new Path2D;for(G=0;l&&G<=o;G++){let M=G*N;const J=M+c;for(;M<J&&!V[M];)M++;if(M===J)continue;k.moveTo(M%N,G);const pt=M;let St=V[M];do{const Mt=g[St];do M+=Mt;while(!V[M]);const ct=V[M];ct!==5&&ct!==10?(St=ct,V[M]=0):(St=ct&51*St>>4,V[M]&=St>>2|St<<2),k.lineTo(M%N,M/N|0),V[M]||--l}while(pt!==M);--G}return dt=null,V=null,function(M){M.save(),M.scale(1/c,-1/o),M.translate(0,-o),M.fill(k),M.beginPath(),M.restore()}}class h{constructor(c,o){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=E.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=E.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=E.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,c,o])}clone(){const c=Object.create(this);return c.clipBox=this.clipBox.slice(),c}setCurrentPoint(c,o){this.x=c,this.y=o}updatePathMinMax(c,o,C){[o,C]=E.Util.applyTransform([o,C],c),this.minX=Math.min(this.minX,o),this.minY=Math.min(this.minY,C),this.maxX=Math.max(this.maxX,o),this.maxY=Math.max(this.maxY,C)}updateRectMinMax(c,o){const C=E.Util.applyTransform(o,c),O=E.Util.applyTransform(o.slice(2),c);this.minX=Math.min(this.minX,C[0],O[0]),this.minY=Math.min(this.minY,C[1],O[1]),this.maxX=Math.max(this.maxX,C[0],O[0]),this.maxY=Math.max(this.maxY,C[1],O[1])}updateScalingPathMinMax(c,o){E.Util.scaleMinMax(c,o),this.minX=Math.min(this.minX,o[0]),this.maxX=Math.max(this.maxX,o[1]),this.minY=Math.min(this.minY,o[2]),this.maxY=Math.max(this.maxY,o[3])}updateCurvePathMinMax(c,o,C,O,N,V,G,at,vt,lt){const dt=E.Util.bezierBoundingBox(o,C,O,N,V,G,at,vt);if(lt){lt[0]=Math.min(lt[0],dt[0],dt[2]),lt[1]=Math.max(lt[1],dt[0],dt[2]),lt[2]=Math.min(lt[2],dt[1],dt[3]),lt[3]=Math.max(lt[3],dt[1],dt[3]);return}this.updateRectMinMax(c,dt)}getPathBoundingBox(c=e.PathType.FILL,o=null){const C=[this.minX,this.minY,this.maxX,this.maxY];if(c===e.PathType.STROKE){o||(0,E.unreachable)("Stroke bounding box must include transform.");const O=E.Util.singularValueDecompose2dScale(o),N=O[0]*this.lineWidth/2,V=O[1]*this.lineWidth/2;C[0]-=N,C[1]-=V,C[2]+=N,C[3]+=V}return C}updateClipFromPath(){const c=E.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(c||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(c){this.clipBox=c,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(c=e.PathType.FILL,o=null){return E.Util.intersect(this.clipBox,this.getPathBoundingBox(c,o))}}function s(D,c,o=null){if(typeof ImageData<"u"&&c instanceof ImageData){D.putImageData(c,0,0);return}const C=c.height,O=c.width,N=C%b,V=(C-N)/b,G=N===0?V:V+1,at=D.createImageData(O,b);let vt=0,lt;const dt=c.data,ot=at.data;let l,g,k,I,M,J,pt,St;if(o)switch(o.length){case 1:M=o[0],J=o[0],pt=o[0],St=o[0];break;case 4:M=o[0],J=o[1],pt=o[2],St=o[3];break}if(c.kind===E.ImageKind.GRAYSCALE_1BPP){const Mt=dt.byteLength,ct=new Uint32Array(ot.buffer,0,ot.byteLength>>2),xt=ct.length,Tt=O+7>>3;let Lt=4294967295,Nt=E.FeatureTest.isLittleEndian?4278190080:255;for(St&&St[0]===255&&St[255]===0&&([Lt,Nt]=[Nt,Lt]),l=0;l<G;l++){for(k=l<V?b:N,lt=0,g=0;g<k;g++){const te=Mt-vt;let re=0;const Zt=te>Tt?O:te*8-7,L=Zt&-8;let j=0,q=0;for(;re<L;re+=8)q=dt[vt++],ct[lt++]=q&128?Lt:Nt,ct[lt++]=q&64?Lt:Nt,ct[lt++]=q&32?Lt:Nt,ct[lt++]=q&16?Lt:Nt,ct[lt++]=q&8?Lt:Nt,ct[lt++]=q&4?Lt:Nt,ct[lt++]=q&2?Lt:Nt,ct[lt++]=q&1?Lt:Nt;for(;re<Zt;re++)j===0&&(q=dt[vt++],j=128),ct[lt++]=q&j?Lt:Nt,j>>=1}for(;lt<xt;)ct[lt++]=0;D.putImageData(at,0,l*b)}}else if(c.kind===E.ImageKind.RGBA_32BPP){const Mt=!!(M||J||pt);for(g=0,I=O*b*4,l=0;l<V;l++){if(ot.set(dt.subarray(vt,vt+I)),vt+=I,Mt)for(let ct=0;ct<I;ct+=4)M&&(ot[ct+0]=M[ot[ct+0]]),J&&(ot[ct+1]=J[ot[ct+1]]),pt&&(ot[ct+2]=pt[ot[ct+2]]);D.putImageData(at,0,g),g+=b}if(l<G){if(I=O*N*4,ot.set(dt.subarray(vt,vt+I)),Mt)for(let ct=0;ct<I;ct+=4)M&&(ot[ct+0]=M[ot[ct+0]]),J&&(ot[ct+1]=J[ot[ct+1]]),pt&&(ot[ct+2]=pt[ot[ct+2]]);D.putImageData(at,0,g)}}else if(c.kind===E.ImageKind.RGB_24BPP){const Mt=!!(M||J||pt);for(k=b,I=O*k,l=0;l<G;l++){for(l>=V&&(k=N,I=O*k),lt=0,g=I;g--;)ot[lt++]=dt[vt++],ot[lt++]=dt[vt++],ot[lt++]=dt[vt++],ot[lt++]=255;if(Mt)for(let ct=0;ct<lt;ct+=4)M&&(ot[ct+0]=M[ot[ct+0]]),J&&(ot[ct+1]=J[ot[ct+1]]),pt&&(ot[ct+2]=pt[ot[ct+2]]);D.putImageData(at,0,l*b)}}else throw new Error("bad image kind: ".concat(c.kind))}function r(D,c){if(c.bitmap){D.drawImage(c.bitmap,0,0);return}const o=c.height,C=c.width,O=o%b,N=(o-O)/b,V=O===0?N:N+1,G=D.createImageData(C,b);let at=0;const vt=c.data,lt=G.data;for(let dt=0;dt<V;dt++){const ot=dt<N?b:O;({srcPos:at}=(0,nt.applyMaskImageData)({src:vt,srcPos:at,dest:lt,width:C,height:ot})),D.putImageData(G,0,dt*b)}}function t(D,c){const o=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const C of o)D[C]!==void 0&&(c[C]=D[C]);D.setLineDash!==void 0&&(c.setLineDash(D.getLineDash()),c.lineDashOffset=D.lineDashOffset)}function i(D,c){D.strokeStyle=D.fillStyle=c||"#000000",D.fillRule="nonzero",D.globalAlpha=1,D.lineWidth=1,D.lineCap="butt",D.lineJoin="miter",D.miterLimit=10,D.globalCompositeOperation="source-over",D.font="10px sans-serif",D.setLineDash!==void 0&&(D.setLineDash([]),D.lineDashOffset=0)}function v(D,c,o,C){const O=D.length;for(let N=3;N<O;N+=4){const V=D[N];if(V===0)D[N-3]=c,D[N-2]=o,D[N-1]=C;else if(V<255){const G=255-V;D[N-3]=D[N-3]*V+c*G>>8,D[N-2]=D[N-2]*V+o*G>>8,D[N-1]=D[N-1]*V+C*G>>8}}}function T(D,c,o){const C=D.length,O=1/255;for(let N=3;N<C;N+=4){const V=o?o[D[N]]:D[N];c[N]=c[N]*V*O|0}}function x(D,c,o){const C=D.length;for(let O=3;O<C;O+=4){const N=D[O-3]*77+D[O-2]*152+D[O-1]*28;c[O]=o?c[O]*o[N>>8]>>8:c[O]*N>>16}}function X(D,c,o,C,O,N,V,G,at,vt,lt){const dt=!!N,ot=dt?N[0]:0,l=dt?N[1]:0,g=dt?N[2]:0;let k;O==="Luminosity"?k=x:k=T;const M=Math.min(C,Math.ceil(1048576/o));for(let J=0;J<C;J+=M){const pt=Math.min(M,C-J),St=D.getImageData(G-vt,J+(at-lt),o,pt),Mt=c.getImageData(G,J+at,o,pt);dt&&v(St.data,ot,l,g),k(St.data,Mt.data,V),c.putImageData(Mt,G,J+at)}}function _(D,c,o,C){const O=C[0],N=C[1],V=C[2]-O,G=C[3]-N;V===0||G===0||(X(c.context,o,V,G,c.subtype,c.backdrop,c.transferMap,O,N,c.offsetX,c.offsetY),D.save(),D.globalAlpha=1,D.globalCompositeOperation="source-over",D.setTransform(1,0,0,1,0,0),D.drawImage(o.canvas,0,0),D.restore())}function Z(D,c){const o=E.Util.singularValueDecompose2dScale(D);o[0]=Math.fround(o[0]),o[1]=Math.fround(o[1]);const C=Math.fround((globalThis.devicePixelRatio||1)*R.PixelsPerInch.PDF_TO_CSS_UNITS);return c!==void 0?c:o[0]<=C||o[1]<=C}const Et=["butt","round","square"],ut=["miter","round","bevel"],mt={},st={},Ct=class Ct{constructor(c,o,C,O,{optionalContentConfig:N,markedContentStack:V=null},G,at){gt(this,K);this.ctx=c,this.current=new h(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=o,this.objs=C,this.canvasFactory=O,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=V||[],this.optionalContentConfig=N,this.cachedCanvases=new m(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=G,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(at==null?void 0:at.background)||null,this.foregroundColor=(at==null?void 0:at.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(c,o=null){return typeof c=="string"?c.startsWith("g_")?this.commonObjs.get(c):this.objs.get(c):o}beginDrawing({transform:c,viewport:o,transparency:C=!1,background:O=null}){const N=this.ctx.canvas.width,V=this.ctx.canvas.height,G=O||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const at=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const vt=this.backgroundColor=this.ctx.fillStyle;let lt=!0,dt=G;if(this.ctx.fillStyle=G,dt=this.ctx.fillStyle,lt=typeof dt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(dt),at==="#000000"&&vt==="#ffffff"||at===vt||!lt)this.foregroundColor=this.backgroundColor=null;else{const[ot,l,g]=(0,R.getRGB)(dt),k=M=>(M/=255,M<=.03928?M/12.92:((M+.055)/1.055)**2.4),I=Math.round(.2126*k(ot)+.7152*k(l)+.0722*k(g));this.selectColor=(M,J,pt)=>{const St=.2126*k(M)+.7152*k(J)+.0722*k(pt);return Math.round(St)===I?vt:at}}}if(this.ctx.fillStyle=this.backgroundColor||G,this.ctx.fillRect(0,0,N,V),this.ctx.restore(),C){const at=this.cachedCanvases.getCanvas("transparent",N,V);this.compositeCtx=this.ctx,this.transparentCanvas=at.canvas,this.ctx=at.context,this.ctx.save(),this.ctx.transform(...(0,R.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),i(this.ctx,this.foregroundColor),c&&(this.ctx.transform(...c),this.outputScaleX=c[0],this.outputScaleY=c[0]),this.ctx.transform(...o.transform),this.viewportScale=o.scale,this.baseTransform=(0,R.getCurrentTransform)(this.ctx)}executeOperatorList(c,o,C,O){const N=c.argsArray,V=c.fnArray;let G=o||0;const at=N.length;if(at===G)return G;const vt=at-G>W&&typeof C=="function",lt=vt?Date.now()+y:0;let dt=0;const ot=this.commonObjs,l=this.objs;let g;for(;;){if(O!==void 0&&G===O.nextBreakPoint)return O.breakIt(G,C),G;if(g=V[G],g!==E.OPS.dependency)this[g].apply(this,N[G]);else for(const k of N[G]){const I=k.startsWith("g_")?ot:l;if(!I.has(k))return I.get(k,C),G}if(G++,G===at)return G;if(vt&&++dt>W){if(Date.now()>lt)return C(),G;dt=0}}}endDrawing(){wt(this,K,ui).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const c of this._cachedBitmapsMap.values()){for(const o of c.values())typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement&&(o.width=o.height=0);c.clear()}this._cachedBitmapsMap.clear()}_scaleImage(c,o){const C=c.width,O=c.height;let N=Math.max(Math.hypot(o[0],o[1]),1),V=Math.max(Math.hypot(o[2],o[3]),1),G=C,at=O,vt="prescale1",lt,dt;for(;N>2&&G>1||V>2&&at>1;){let ot=G,l=at;N>2&&G>1&&(ot=Math.ceil(G/2),N/=G/ot),V>2&&at>1&&(l=Math.ceil(at/2),V/=at/l),lt=this.cachedCanvases.getCanvas(vt,ot,l),dt=lt.context,dt.clearRect(0,0,ot,l),dt.drawImage(c,0,0,G,at,0,0,ot,l),c=lt.canvas,G=ot,at=l,vt=vt==="prescale1"?"prescale2":"prescale1"}return{img:c,paintWidth:G,paintHeight:at}}_createMaskCanvas(c){const o=this.ctx,{width:C,height:O}=c,N=this.current.fillColor,V=this.current.patternFill,G=(0,R.getCurrentTransform)(o);let at,vt,lt,dt;if((c.bitmap||c.data)&&c.count>1){const xt=c.bitmap||c.data.buffer;vt=JSON.stringify(V?G:[G.slice(0,4),N]),at=this._cachedBitmapsMap.get(xt),at||(at=new Map,this._cachedBitmapsMap.set(xt,at));const Tt=at.get(vt);if(Tt&&!V){const Lt=Math.round(Math.min(G[0],G[2])+G[4]),Nt=Math.round(Math.min(G[1],G[3])+G[5]);return{canvas:Tt,offsetX:Lt,offsetY:Nt}}lt=Tt}lt||(dt=this.cachedCanvases.getCanvas("maskCanvas",C,O),r(dt.context,c));let ot=E.Util.transform(G,[1/C,0,0,-1/O,0,0]);ot=E.Util.transform(ot,[1,0,0,1,0,-O]);const l=E.Util.applyTransform([0,0],ot),g=E.Util.applyTransform([C,O],ot),k=E.Util.normalizeRect([l[0],l[1],g[0],g[1]]),I=Math.round(k[2]-k[0])||1,M=Math.round(k[3]-k[1])||1,J=this.cachedCanvases.getCanvas("fillCanvas",I,M),pt=J.context,St=Math.min(l[0],g[0]),Mt=Math.min(l[1],g[1]);pt.translate(-St,-Mt),pt.transform(...ot),lt||(lt=this._scaleImage(dt.canvas,(0,R.getCurrentTransformInverse)(pt)),lt=lt.img,at&&V&&at.set(vt,lt)),pt.imageSmoothingEnabled=Z((0,R.getCurrentTransform)(pt),c.interpolate),a(pt,lt,0,0,lt.width,lt.height,0,0,C,O),pt.globalCompositeOperation="source-in";const ct=E.Util.transform((0,R.getCurrentTransformInverse)(pt),[1,0,0,1,-St,-Mt]);return pt.fillStyle=V?N.getPattern(o,this,ct,e.PathType.FILL):N,pt.fillRect(0,0,C,O),at&&!V&&(this.cachedCanvases.delete("fillCanvas"),at.set(vt,J.canvas)),{canvas:J.canvas,offsetX:Math.round(St),offsetY:Math.round(Mt)}}setLineWidth(c){c!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=c,this.ctx.lineWidth=c}setLineCap(c){this.ctx.lineCap=Et[c]}setLineJoin(c){this.ctx.lineJoin=ut[c]}setMiterLimit(c){this.ctx.miterLimit=c}setDash(c,o){const C=this.ctx;C.setLineDash!==void 0&&(C.setLineDash(c),C.lineDashOffset=o)}setRenderingIntent(c){}setFlatness(c){}setGState(c){for(const[o,C]of c)switch(o){case"LW":this.setLineWidth(C);break;case"LC":this.setLineCap(C);break;case"LJ":this.setLineJoin(C);break;case"ML":this.setMiterLimit(C);break;case"D":this.setDash(C[0],C[1]);break;case"RI":this.setRenderingIntent(C);break;case"FL":this.setFlatness(C);break;case"Font":this.setFont(C[0],C[1]);break;case"CA":this.current.strokeAlpha=C;break;case"ca":this.current.fillAlpha=C,this.ctx.globalAlpha=C;break;case"BM":this.ctx.globalCompositeOperation=C;break;case"SMask":this.current.activeSMask=C?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=C}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const c=this.inSMaskMode;this.current.activeSMask&&!c?this.beginSMaskMode():!this.current.activeSMask&&c&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const c=this.ctx.canvas.width,o=this.ctx.canvas.height,C="smaskGroupAt"+this.groupLevel,O=this.cachedCanvases.getCanvas(C,c,o);this.suspendedCtx=this.ctx,this.ctx=O.context;const N=this.ctx;N.setTransform(...(0,R.getCurrentTransform)(this.suspendedCtx)),t(this.suspendedCtx,N),d(N,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),t(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(c){if(!this.current.activeSMask)return;c?(c[0]=Math.floor(c[0]),c[1]=Math.floor(c[1]),c[2]=Math.ceil(c[2]),c[3]=Math.ceil(c[3])):c=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const o=this.current.activeSMask,C=this.suspendedCtx;_(C,o,this.ctx,c),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(t(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const c=this.current;this.stateStack.push(c),this.current=c.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),t(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(c,o,C,O,N,V){this.ctx.transform(c,o,C,O,N,V),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(c,o,C){const O=this.ctx,N=this.current;let V=N.x,G=N.y,at,vt;const lt=(0,R.getCurrentTransform)(O),dt=lt[0]===0&&lt[3]===0||lt[1]===0&&lt[2]===0,ot=dt?C.slice(0):null;for(let l=0,g=0,k=c.length;l<k;l++)switch(c[l]|0){case E.OPS.rectangle:V=o[g++],G=o[g++];const I=o[g++],M=o[g++],J=V+I,pt=G+M;O.moveTo(V,G),I===0||M===0?O.lineTo(J,pt):(O.lineTo(J,G),O.lineTo(J,pt),O.lineTo(V,pt)),dt||N.updateRectMinMax(lt,[V,G,J,pt]),O.closePath();break;case E.OPS.moveTo:V=o[g++],G=o[g++],O.moveTo(V,G),dt||N.updatePathMinMax(lt,V,G);break;case E.OPS.lineTo:V=o[g++],G=o[g++],O.lineTo(V,G),dt||N.updatePathMinMax(lt,V,G);break;case E.OPS.curveTo:at=V,vt=G,V=o[g+4],G=o[g+5],O.bezierCurveTo(o[g],o[g+1],o[g+2],o[g+3],V,G),N.updateCurvePathMinMax(lt,at,vt,o[g],o[g+1],o[g+2],o[g+3],V,G,ot),g+=6;break;case E.OPS.curveTo2:at=V,vt=G,O.bezierCurveTo(V,G,o[g],o[g+1],o[g+2],o[g+3]),N.updateCurvePathMinMax(lt,at,vt,V,G,o[g],o[g+1],o[g+2],o[g+3],ot),V=o[g+2],G=o[g+3],g+=4;break;case E.OPS.curveTo3:at=V,vt=G,V=o[g+2],G=o[g+3],O.bezierCurveTo(o[g],o[g+1],V,G,V,G),N.updateCurvePathMinMax(lt,at,vt,o[g],o[g+1],V,G,V,G,ot),g+=4;break;case E.OPS.closePath:O.closePath();break}dt&&N.updateScalingPathMinMax(lt,ot),N.setCurrentPoint(V,G)}closePath(){this.ctx.closePath()}stroke(c=!0){const o=this.ctx,C=this.current.strokeColor;o.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof C=="object"&&(C!=null&&C.getPattern)?(o.save(),o.strokeStyle=C.getPattern(o,this,(0,R.getCurrentTransformInverse)(o),e.PathType.STROKE),this.rescaleAndStroke(!1),o.restore()):this.rescaleAndStroke(!0)),c&&this.consumePath(this.current.getClippedPathBoundingBox()),o.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(c=!0){const o=this.ctx,C=this.current.fillColor,O=this.current.patternFill;let N=!1;O&&(o.save(),o.fillStyle=C.getPattern(o,this,(0,R.getCurrentTransformInverse)(o),e.PathType.FILL),N=!0);const V=this.current.getClippedPathBoundingBox();this.contentVisible&&V!==null&&(this.pendingEOFill?(o.fill("evenodd"),this.pendingEOFill=!1):o.fill()),N&&o.restore(),c&&this.consumePath(V)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=mt}eoClip(){this.pendingClip=st}beginText(){this.current.textMatrix=E.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const c=this.pendingTextPaths,o=this.ctx;if(c===void 0){o.beginPath();return}o.save(),o.beginPath();for(const C of c)o.setTransform(...C.transform),o.translate(C.x,C.y),C.addToPath(o,C.fontSize);o.restore(),o.clip(),o.beginPath(),delete this.pendingTextPaths}setCharSpacing(c){this.current.charSpacing=c}setWordSpacing(c){this.current.wordSpacing=c}setHScale(c){this.current.textHScale=c/100}setLeading(c){this.current.leading=-c}setFont(c,o){const C=this.commonObjs.get(c),O=this.current;if(!C)throw new Error("Can't find font for ".concat(c));if(O.fontMatrix=C.fontMatrix||E.FONT_IDENTITY_MATRIX,(O.fontMatrix[0]===0||O.fontMatrix[3]===0)&&(0,E.warn)("Invalid font matrix for font "+c),o<0?(o=-o,O.fontDirection=-1):O.fontDirection=1,this.current.font=C,this.current.fontSize=o,C.isType3Font)return;const N=C.loadedName||"sans-serif";let V="normal";C.black?V="900":C.bold&&(V="bold");const G=C.italic?"italic":"normal",at='"'.concat(N,'", ').concat(C.fallbackName);let vt=o;o<ft?vt=ft:o>$&&(vt=$),this.current.fontSizeScale=o/vt,this.ctx.font="".concat(G," ").concat(V," ").concat(vt,"px ").concat(at)}setTextRenderingMode(c){this.current.textRenderingMode=c}setTextRise(c){this.current.textRise=c}moveText(c,o){this.current.x=this.current.lineX+=c,this.current.y=this.current.lineY+=o}setLeadingMoveText(c,o){this.setLeading(-o),this.moveText(c,o)}setTextMatrix(c,o,C,O,N,V){this.current.textMatrix=[c,o,C,O,N,V],this.current.textMatrixScale=Math.hypot(c,o),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(c,o,C,O){const N=this.ctx,V=this.current,G=V.font,at=V.textRenderingMode,vt=V.fontSize/V.fontSizeScale,lt=at&E.TextRenderingMode.FILL_STROKE_MASK,dt=!!(at&E.TextRenderingMode.ADD_TO_PATH_FLAG),ot=V.patternFill&&!G.missingFile;let l;(G.disableFontFace||dt||ot)&&(l=G.getPathGenerator(this.commonObjs,c)),G.disableFontFace||ot?(N.save(),N.translate(o,C),N.beginPath(),l(N,vt),O&&N.setTransform(...O),(lt===E.TextRenderingMode.FILL||lt===E.TextRenderingMode.FILL_STROKE)&&N.fill(),(lt===E.TextRenderingMode.STROKE||lt===E.TextRenderingMode.FILL_STROKE)&&N.stroke(),N.restore()):((lt===E.TextRenderingMode.FILL||lt===E.TextRenderingMode.FILL_STROKE)&&N.fillText(c,o,C),(lt===E.TextRenderingMode.STROKE||lt===E.TextRenderingMode.FILL_STROKE)&&N.strokeText(c,o,C)),dt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,R.getCurrentTransform)(N),x:o,y:C,fontSize:vt,addToPath:l})}get isFontSubpixelAAEnabled(){const{context:c}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);c.scale(1.5,1),c.fillText("I",0,10);const o=c.getImageData(0,0,10,10).data;let C=!1;for(let O=3;O<o.length;O+=4)if(o[O]>0&&o[O]<255){C=!0;break}return(0,E.shadow)(this,"isFontSubpixelAAEnabled",C)}showText(c){const o=this.current,C=o.font;if(C.isType3Font)return this.showType3Text(c);const O=o.fontSize;if(O===0)return;const N=this.ctx,V=o.fontSizeScale,G=o.charSpacing,at=o.wordSpacing,vt=o.fontDirection,lt=o.textHScale*vt,dt=c.length,ot=C.vertical,l=ot?1:-1,g=C.defaultVMetrics,k=O*o.fontMatrix[0],I=o.textRenderingMode===E.TextRenderingMode.FILL&&!C.disableFontFace&&!o.patternFill;N.save(),N.transform(...o.textMatrix),N.translate(o.x,o.y+o.textRise),vt>0?N.scale(lt,-1):N.scale(lt,1);let M;if(o.patternFill){N.save();const ct=o.fillColor.getPattern(N,this,(0,R.getCurrentTransformInverse)(N),e.PathType.FILL);M=(0,R.getCurrentTransform)(N),N.restore(),N.fillStyle=ct}let J=o.lineWidth;const pt=o.textMatrixScale;if(pt===0||J===0){const ct=o.textRenderingMode&E.TextRenderingMode.FILL_STROKE_MASK;(ct===E.TextRenderingMode.STROKE||ct===E.TextRenderingMode.FILL_STROKE)&&(J=this.getSinglePixelWidth())}else J/=pt;if(V!==1&&(N.scale(V,V),J/=V),N.lineWidth=J,C.isInvalidPDFjsFont){const ct=[];let xt=0;for(const Tt of c)ct.push(Tt.unicode),xt+=Tt.width;N.fillText(ct.join(""),0,0),o.x+=xt*k*lt,N.restore(),this.compose();return}let St=0,Mt;for(Mt=0;Mt<dt;++Mt){const ct=c[Mt];if(typeof ct=="number"){St+=l*ct*O/1e3;continue}let xt=!1;const Tt=(ct.isSpace?at:0)+G,Lt=ct.fontChar,Nt=ct.accent;let te,re,Zt=ct.width;if(ot){const j=ct.vmetric||g,q=-(ct.vmetric?j[1]:Zt*.5)*k,Pt=j[2]*k;Zt=j?-j[0]:Zt,te=q/V,re=(St+Pt)/V}else te=St/V,re=0;if(C.remeasure&&Zt>0){const j=N.measureText(Lt).width*1e3/O*V;if(Zt<j&&this.isFontSubpixelAAEnabled){const q=Zt/j;xt=!0,N.save(),N.scale(q,1),te/=q}else Zt!==j&&(te+=(Zt-j)/2e3*O/V)}if(this.contentVisible&&(ct.isInFont||C.missingFile)){if(I&&!Nt)N.fillText(Lt,te,re);else if(this.paintChar(Lt,te,re,M),Nt){const j=te+O*Nt.offset.x/V,q=re-O*Nt.offset.y/V;this.paintChar(Nt.fontChar,j,q,M)}}let L;ot?L=Zt*k-Tt*vt:L=Zt*k+Tt*vt,St+=L,xt&&N.restore()}ot?o.y-=St:o.x+=St*lt,N.restore(),this.compose()}showType3Text(c){const o=this.ctx,C=this.current,O=C.font,N=C.fontSize,V=C.fontDirection,G=O.vertical?1:-1,at=C.charSpacing,vt=C.wordSpacing,lt=C.textHScale*V,dt=C.fontMatrix||E.FONT_IDENTITY_MATRIX,ot=c.length,l=C.textRenderingMode===E.TextRenderingMode.INVISIBLE;let g,k,I,M;if(!(l||N===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,o.save(),o.transform(...C.textMatrix),o.translate(C.x,C.y),o.scale(lt,V),g=0;g<ot;++g){if(k=c[g],typeof k=="number"){M=G*k*N/1e3,this.ctx.translate(M,0),C.x+=M*lt;continue}const J=(k.isSpace?vt:0)+at,pt=O.charProcOperatorList[k.operatorListId];if(!pt){(0,E.warn)('Type3 character "'.concat(k.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=k,this.save(),o.scale(N,N),o.transform(...dt),this.executeOperatorList(pt),this.restore()),I=E.Util.applyTransform([k.width,0],dt)[0]*N+J,o.translate(I,0),C.x+=I*lt}o.restore(),this.processingType3=null}}setCharWidth(c,o){}setCharWidthAndBounds(c,o,C,O,N,V){this.ctx.rect(C,O,N-C,V-O),this.ctx.clip(),this.endPath()}getColorN_Pattern(c){let o;if(c[0]==="TilingPattern"){const C=c[1],O=this.baseTransform||(0,R.getCurrentTransform)(this.ctx),N={createCanvasGraphics:V=>new Ct(V,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};o=new e.TilingPattern(c,C,this.ctx,N,O)}else o=this._getPattern(c[1],c[2]);return o}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(c,o,C){var N;const O=((N=this.selectColor)==null?void 0:N.call(this,c,o,C))||E.Util.makeHexColor(c,o,C);this.ctx.strokeStyle=O,this.current.strokeColor=O}setFillRGBColor(c,o,C){var N;const O=((N=this.selectColor)==null?void 0:N.call(this,c,o,C))||E.Util.makeHexColor(c,o,C);this.ctx.fillStyle=O,this.current.fillColor=O,this.current.patternFill=!1}_getPattern(c,o=null){let C;return this.cachedPatterns.has(c)?C=this.cachedPatterns.get(c):(C=(0,e.getShadingPattern)(this.objs.get(c)),this.cachedPatterns.set(c,C)),o&&(C.matrix=o),C}shadingFill(c){if(!this.contentVisible)return;const o=this.ctx;this.save();const C=this._getPattern(c);o.fillStyle=C.getPattern(o,this,(0,R.getCurrentTransformInverse)(o),e.PathType.SHADING);const O=(0,R.getCurrentTransformInverse)(o);if(O){const N=o.canvas,V=N.width,G=N.height,at=E.Util.applyTransform([0,0],O),vt=E.Util.applyTransform([0,G],O),lt=E.Util.applyTransform([V,0],O),dt=E.Util.applyTransform([V,G],O),ot=Math.min(at[0],vt[0],lt[0],dt[0]),l=Math.min(at[1],vt[1],lt[1],dt[1]),g=Math.max(at[0],vt[0],lt[0],dt[0]),k=Math.max(at[1],vt[1],lt[1],dt[1]);this.ctx.fillRect(ot,l,g-ot,k-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,E.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,E.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(c,o){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(c)&&c.length===6&&this.transform(...c),this.baseTransform=(0,R.getCurrentTransform)(this.ctx),o)){const C=o[2]-o[0],O=o[3]-o[1];this.ctx.rect(o[0],o[1],C,O),this.current.updateRectMinMax((0,R.getCurrentTransform)(this.ctx),o),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(c){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const o=this.ctx;c.isolated||(0,E.info)("TODO: Support non-isolated groups."),c.knockout&&(0,E.warn)("Knockout groups not supported.");const C=(0,R.getCurrentTransform)(o);if(c.matrix&&o.transform(...c.matrix),!c.bbox)throw new Error("Bounding box is required.");let O=E.Util.getAxialAlignedBoundingBox(c.bbox,(0,R.getCurrentTransform)(o));const N=[0,0,o.canvas.width,o.canvas.height];O=E.Util.intersect(O,N)||[0,0,0,0];const V=Math.floor(O[0]),G=Math.floor(O[1]);let at=Math.max(Math.ceil(O[2])-V,1),vt=Math.max(Math.ceil(O[3])-G,1),lt=1,dt=1;at>w&&(lt=at/w,at=w),vt>w&&(dt=vt/w,vt=w),this.current.startNewPathAndClipBox([0,0,at,vt]);let ot="groupAt"+this.groupLevel;c.smask&&(ot+="_smask_"+this.smaskCounter++%2);const l=this.cachedCanvases.getCanvas(ot,at,vt),g=l.context;g.scale(1/lt,1/dt),g.translate(-V,-G),g.transform(...C),c.smask?this.smaskStack.push({canvas:l.canvas,context:g,offsetX:V,offsetY:G,scaleX:lt,scaleY:dt,subtype:c.smask.subtype,backdrop:c.smask.backdrop,transferMap:c.smask.transferMap||null,startTransformInverse:null}):(o.setTransform(1,0,0,1,0,0),o.translate(V,G),o.scale(lt,dt),o.save()),t(o,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(o),this.groupLevel++}endGroup(c){if(!this.contentVisible)return;this.groupLevel--;const o=this.ctx,C=this.groupStack.pop();if(this.ctx=C,this.ctx.imageSmoothingEnabled=!1,c.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const O=(0,R.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...O);const N=E.Util.getAxialAlignedBoundingBox([0,0,o.canvas.width,o.canvas.height],O);this.ctx.drawImage(o.canvas,0,0),this.ctx.restore(),this.compose(N)}}beginAnnotation(c,o,C,O,N){if(wt(this,K,ui).call(this),i(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(o)&&o.length===4){const V=o[2]-o[0],G=o[3]-o[1];if(N&&this.annotationCanvasMap){C=C.slice(),C[4]-=o[0],C[5]-=o[1],o=o.slice(),o[0]=o[1]=0,o[2]=V,o[3]=G;const[at,vt]=E.Util.singularValueDecompose2dScale((0,R.getCurrentTransform)(this.ctx)),{viewportScale:lt}=this,dt=Math.ceil(V*this.outputScaleX*lt),ot=Math.ceil(G*this.outputScaleY*lt);this.annotationCanvas=this.canvasFactory.create(dt,ot);const{canvas:l,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(c,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.setTransform(at,0,0,-vt,0,G*vt),i(this.ctx,this.foregroundColor)}else i(this.ctx,this.foregroundColor),this.ctx.rect(o[0],o[1],V,G),this.ctx.clip(),this.endPath()}this.current=new h(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...C),this.transform(...O)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(c){if(!this.contentVisible)return;const o=c.count;c=this.getObject(c.data,c),c.count=o;const C=this.ctx,O=this.processingType3;if(O&&(O.compiled===void 0&&(O.compiled=u(c)),O.compiled)){O.compiled(C);return}const N=this._createMaskCanvas(c),V=N.canvas;C.save(),C.setTransform(1,0,0,1,0,0),C.drawImage(V,N.offsetX,N.offsetY),C.restore(),this.compose()}paintImageMaskXObjectRepeat(c,o,C=0,O=0,N,V){if(!this.contentVisible)return;c=this.getObject(c.data,c);const G=this.ctx;G.save();const at=(0,R.getCurrentTransform)(G);G.transform(o,C,O,N,0,0);const vt=this._createMaskCanvas(c);G.setTransform(1,0,0,1,vt.offsetX-at[4],vt.offsetY-at[5]);for(let lt=0,dt=V.length;lt<dt;lt+=2){const ot=E.Util.transform(at,[o,C,O,N,V[lt],V[lt+1]]),[l,g]=E.Util.applyTransform([0,0],ot);G.drawImage(vt.canvas,l,g)}G.restore(),this.compose()}paintImageMaskXObjectGroup(c){if(!this.contentVisible)return;const o=this.ctx,C=this.current.fillColor,O=this.current.patternFill;for(const N of c){const{data:V,width:G,height:at,transform:vt}=N,lt=this.cachedCanvases.getCanvas("maskCanvas",G,at),dt=lt.context;dt.save();const ot=this.getObject(V,N);r(dt,ot),dt.globalCompositeOperation="source-in",dt.fillStyle=O?C.getPattern(dt,this,(0,R.getCurrentTransformInverse)(o),e.PathType.FILL):C,dt.fillRect(0,0,G,at),dt.restore(),o.save(),o.transform(...vt),o.scale(1,-1),a(o,lt.canvas,0,0,G,at,0,-1,1,1),o.restore()}this.compose()}paintImageXObject(c){if(!this.contentVisible)return;const o=this.getObject(c);if(!o){(0,E.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(o)}paintImageXObjectRepeat(c,o,C,O){if(!this.contentVisible)return;const N=this.getObject(c);if(!N){(0,E.warn)("Dependent image isn't ready yet");return}const V=N.width,G=N.height,at=[];for(let vt=0,lt=O.length;vt<lt;vt+=2)at.push({transform:[o,0,0,C,O[vt],O[vt+1]],x:0,y:0,w:V,h:G});this.paintInlineImageXObjectGroup(N,at)}paintInlineImageXObject(c){if(!this.contentVisible)return;const o=c.width,C=c.height,O=this.ctx;this.save(),O.scale(1/o,-1/C);let N;if(typeof HTMLElement=="function"&&c instanceof HTMLElement||!c.data)N=c;else{const G=this.cachedCanvases.getCanvas("inlineImage",o,C),at=G.context;s(at,c,this.current.transferMaps),N=G.canvas}const V=this._scaleImage(N,(0,R.getCurrentTransformInverse)(O));O.imageSmoothingEnabled=Z((0,R.getCurrentTransform)(O),c.interpolate),a(O,V.img,0,0,V.paintWidth,V.paintHeight,0,-C,o,C),this.compose(),this.restore()}paintInlineImageXObjectGroup(c,o){if(!this.contentVisible)return;const C=this.ctx,O=c.width,N=c.height,V=this.cachedCanvases.getCanvas("inlineImage",O,N),G=V.context;s(G,c,this.current.transferMaps);for(const at of o)C.save(),C.transform(...at.transform),C.scale(1,-1),a(C,V.canvas,at.x,at.y,at.w,at.h,0,-1,1,1),C.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(c){}markPointProps(c,o){}beginMarkedContent(c){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(c,o){c==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(o)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(c){const o=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(c);const C=this.ctx;this.pendingClip&&(o||(this.pendingClip===st?C.clip("evenodd"):C.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),C.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const c=(0,R.getCurrentTransform)(this.ctx);if(c[1]===0&&c[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(c[0]),Math.abs(c[3]));else{const o=Math.abs(c[0]*c[3]-c[2]*c[1]),C=Math.hypot(c[0],c[2]),O=Math.hypot(c[1],c[3]);this._cachedGetSinglePixelWidth=Math.max(C,O)/o}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:c}=this.current,o=(0,R.getCurrentTransform)(this.ctx);let C,O;if(o[1]===0&&o[2]===0){const N=Math.abs(o[0]),V=Math.abs(o[3]);if(c===0)C=1/N,O=1/V;else{const G=N*c,at=V*c;C=G<1?1/G:1,O=at<1?1/at:1}}else{const N=Math.abs(o[0]*o[3]-o[2]*o[1]),V=Math.hypot(o[0],o[1]),G=Math.hypot(o[2],o[3]);if(c===0)C=G/N,O=V/N;else{const at=c*N;C=G>at?G/at:1,O=V>at?V/at:1}}this._cachedScaleForStroking=[C,O]}return this._cachedScaleForStroking}rescaleAndStroke(c){const{ctx:o}=this,{lineWidth:C}=this.current,[O,N]=this.getScaleForStroking();if(o.lineWidth=C||1,O===1&&N===1){o.stroke();return}let V,G,at;c&&(V=(0,R.getCurrentTransform)(o),G=o.getLineDash().slice(),at=o.lineDashOffset),o.scale(O,N);const vt=Math.max(O,N);o.setLineDash(o.getLineDash().map(lt=>lt/vt)),o.lineDashOffset/=vt,o.stroke(),c&&(o.setTransform(...V),o.setLineDash(G),o.lineDashOffset=at)}isContentVisible(){for(let c=this.markedContentStack.length-1;c>=0;c--)if(!this.markedContentStack[c].visible)return!1;return!0}};K=new WeakSet,ui=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)};let Y=Ct;A.CanvasGraphics=Y;for(const D in E.OPS)Y.prototype[D]!==void 0&&(Y.prototype[E.OPS[D]]=Y.prototype[D])},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.TilingPattern=A.PathType=void 0,A.getShadingPattern=b;var E=ht(1),R=ht(6);const e={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};A.PathType=e;function nt(a,u){if(!u)return;const h=u[2]-u[0],s=u[3]-u[1],r=new Path2D;r.rect(u[0],u[1],h,s),a.clip(r)}class ft{constructor(){this.constructor===ft&&(0,E.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,E.unreachable)("Abstract method `getPattern` called.")}}class $ extends ft{constructor(u){super(),this._type=u[1],this._bbox=u[2],this._colorStops=u[3],this._p0=u[4],this._p1=u[5],this._r0=u[6],this._r1=u[7],this.matrix=null}_createGradient(u){let h;this._type==="axial"?h=u.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(h=u.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)h.addColorStop(s[0],s[1]);return h}getPattern(u,h,s,r){let t;if(r===e.STROKE||r===e.FILL){const i=h.current.getClippedPathBoundingBox(r,(0,R.getCurrentTransform)(u))||[0,0,0,0],v=Math.ceil(i[2]-i[0])||1,T=Math.ceil(i[3]-i[1])||1,x=h.cachedCanvases.getCanvas("pattern",v,T,!0),X=x.context;X.clearRect(0,0,X.canvas.width,X.canvas.height),X.beginPath(),X.rect(0,0,X.canvas.width,X.canvas.height),X.translate(-i[0],-i[1]),s=E.Util.transform(s,[1,0,0,1,i[0],i[1]]),X.transform(...h.baseTransform),this.matrix&&X.transform(...this.matrix),nt(X,this._bbox),X.fillStyle=this._createGradient(X),X.fill(),t=u.createPattern(x.canvas,"no-repeat");const _=new DOMMatrix(s);t.setTransform(_)}else nt(u,this._bbox),t=this._createGradient(u);return t}}function w(a,u,h,s,r,t,i,v){const T=u.coords,x=u.colors,X=a.data,_=a.width*4;let Z;T[h+1]>T[s+1]&&(Z=h,h=s,s=Z,Z=t,t=i,i=Z),T[s+1]>T[r+1]&&(Z=s,s=r,r=Z,Z=i,i=v,v=Z),T[h+1]>T[s+1]&&(Z=h,h=s,s=Z,Z=t,t=i,i=Z);const Et=(T[h]+u.offsetX)*u.scaleX,ut=(T[h+1]+u.offsetY)*u.scaleY,mt=(T[s]+u.offsetX)*u.scaleX,st=(T[s+1]+u.offsetY)*u.scaleY,Y=(T[r]+u.offsetX)*u.scaleX,K=(T[r+1]+u.offsetY)*u.scaleY;if(ut>=K)return;const bt=x[t],Ct=x[t+1],D=x[t+2],c=x[i],o=x[i+1],C=x[i+2],O=x[v],N=x[v+1],V=x[v+2],G=Math.round(ut),at=Math.round(K);let vt,lt,dt,ot,l,g,k,I;for(let M=G;M<=at;M++){if(M<st){let ct;M<ut?ct=0:ct=(ut-M)/(ut-st),vt=Et-(Et-mt)*ct,lt=bt-(bt-c)*ct,dt=Ct-(Ct-o)*ct,ot=D-(D-C)*ct}else{let ct;M>K?ct=1:st===K?ct=0:ct=(st-M)/(st-K),vt=mt-(mt-Y)*ct,lt=c-(c-O)*ct,dt=o-(o-N)*ct,ot=C-(C-V)*ct}let J;M<ut?J=0:M>K?J=1:J=(ut-M)/(ut-K),l=Et-(Et-Y)*J,g=bt-(bt-O)*J,k=Ct-(Ct-N)*J,I=D-(D-V)*J;const pt=Math.round(Math.min(vt,l)),St=Math.round(Math.max(vt,l));let Mt=_*M+pt*4;for(let ct=pt;ct<=St;ct++)J=(vt-ct)/(vt-l),J<0?J=0:J>1&&(J=1),X[Mt++]=lt-(lt-g)*J|0,X[Mt++]=dt-(dt-k)*J|0,X[Mt++]=ot-(ot-I)*J|0,X[Mt++]=255}}function y(a,u,h){const s=u.coords,r=u.colors;let t,i;switch(u.type){case"lattice":const v=u.verticesPerRow,T=Math.floor(s.length/v)-1,x=v-1;for(t=0;t<T;t++){let X=t*v;for(let _=0;_<x;_++,X++)w(a,h,s[X],s[X+1],s[X+v],r[X],r[X+1],r[X+v]),w(a,h,s[X+v+1],s[X+1],s[X+v],r[X+v+1],r[X+1],r[X+v])}break;case"triangles":for(t=0,i=s.length;t<i;t+=3)w(a,h,s[t],s[t+1],s[t+2],r[t],r[t+1],r[t+2]);break;default:throw new Error("illegal figure")}}class W extends ft{constructor(u){super(),this._coords=u[2],this._colors=u[3],this._figures=u[4],this._bounds=u[5],this._bbox=u[7],this._background=u[8],this.matrix=null}_createMeshCanvas(u,h,s){const v=Math.floor(this._bounds[0]),T=Math.floor(this._bounds[1]),x=Math.ceil(this._bounds[2])-v,X=Math.ceil(this._bounds[3])-T,_=Math.min(Math.ceil(Math.abs(x*u[0]*1.1)),3e3),Z=Math.min(Math.ceil(Math.abs(X*u[1]*1.1)),3e3),Et=x/_,ut=X/Z,mt={coords:this._coords,colors:this._colors,offsetX:-v,offsetY:-T,scaleX:1/Et,scaleY:1/ut},st=_+2*2,Y=Z+2*2,K=s.getCanvas("mesh",st,Y,!1),bt=K.context,Ct=bt.createImageData(_,Z);if(h){const c=Ct.data;for(let o=0,C=c.length;o<C;o+=4)c[o]=h[0],c[o+1]=h[1],c[o+2]=h[2],c[o+3]=255}for(const c of this._figures)y(Ct,c,mt);return bt.putImageData(Ct,2,2),{canvas:K.canvas,offsetX:v-2*Et,offsetY:T-2*ut,scaleX:Et,scaleY:ut}}getPattern(u,h,s,r){nt(u,this._bbox);let t;if(r===e.SHADING)t=E.Util.singularValueDecompose2dScale((0,R.getCurrentTransform)(u));else if(t=E.Util.singularValueDecompose2dScale(h.baseTransform),this.matrix){const v=E.Util.singularValueDecompose2dScale(this.matrix);t=[t[0]*v[0],t[1]*v[1]]}const i=this._createMeshCanvas(t,r===e.SHADING?null:this._background,h.cachedCanvases);return r!==e.SHADING&&(u.setTransform(...h.baseTransform),this.matrix&&u.transform(...this.matrix)),u.translate(i.offsetX,i.offsetY),u.scale(i.scaleX,i.scaleY),u.createPattern(i.canvas,"no-repeat")}}class P extends ft{getPattern(){return"hotpink"}}function b(a){switch(a[0]){case"RadialAxial":return new $(a);case"Mesh":return new W(a);case"Dummy":return new P}throw new Error("Unknown IR type: ".concat(a[0]))}const d={COLORED:1,UNCOLORED:2};class m{static get MAX_PATTERN_SIZE(){return(0,E.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(u,h,s,r,t){this.operatorList=u[2],this.matrix=u[3]||[1,0,0,1,0,0],this.bbox=u[4],this.xstep=u[5],this.ystep=u[6],this.paintType=u[7],this.tilingType=u[8],this.color=h,this.ctx=s,this.canvasGraphicsFactory=r,this.baseTransform=t}createPatternCanvas(u){const h=this.operatorList,s=this.bbox,r=this.xstep,t=this.ystep,i=this.paintType,v=this.tilingType,T=this.color,x=this.canvasGraphicsFactory;(0,E.info)("TilingType: "+v);const X=s[0],_=s[1],Z=s[2],Et=s[3],ut=E.Util.singularValueDecompose2dScale(this.matrix),mt=E.Util.singularValueDecompose2dScale(this.baseTransform),st=[ut[0]*mt[0],ut[1]*mt[1]],Y=this.getSizeAndScale(r,this.ctx.canvas.width,st[0]),K=this.getSizeAndScale(t,this.ctx.canvas.height,st[1]),bt=u.cachedCanvases.getCanvas("pattern",Y.size,K.size,!0),Ct=bt.context,D=x.createCanvasGraphics(Ct);D.groupLevel=u.groupLevel,this.setFillAndStrokeStyleToContext(D,i,T);let c=X,o=_,C=Z,O=Et;return X<0&&(c=0,C+=Math.abs(X)),_<0&&(o=0,O+=Math.abs(_)),Ct.translate(-(Y.scale*c),-(K.scale*o)),D.transform(Y.scale,0,0,K.scale,0,0),Ct.save(),this.clipBbox(D,c,o,C,O),D.baseTransform=(0,R.getCurrentTransform)(D.ctx),D.executeOperatorList(h),D.endDrawing(),{canvas:bt.canvas,scaleX:Y.scale,scaleY:K.scale,offsetX:c,offsetY:o}}getSizeAndScale(u,h,s){u=Math.abs(u);const r=Math.max(m.MAX_PATTERN_SIZE,h);let t=Math.ceil(u*s);return t>=r?t=r:s=t/u,{scale:s,size:t}}clipBbox(u,h,s,r,t){const i=r-h,v=t-s;u.ctx.rect(h,s,i,v),u.current.updateRectMinMax((0,R.getCurrentTransform)(u.ctx),[h,s,r,t]),u.clip(),u.endPath()}setFillAndStrokeStyleToContext(u,h,s){const r=u.ctx,t=u.current;switch(h){case d.COLORED:const i=this.ctx;r.fillStyle=i.fillStyle,r.strokeStyle=i.strokeStyle,t.fillColor=i.fillStyle,t.strokeColor=i.strokeStyle;break;case d.UNCOLORED:const v=E.Util.makeHexColor(s[0],s[1],s[2]);r.fillStyle=v,r.strokeStyle=v,t.fillColor=v,t.strokeColor=v;break;default:throw new E.FormatError("Unsupported paint type: ".concat(h))}}getPattern(u,h,s,r){let t=s;r!==e.SHADING&&(t=E.Util.transform(t,h.baseTransform),this.matrix&&(t=E.Util.transform(t,this.matrix)));const i=this.createPatternCanvas(h);let v=new DOMMatrix(t);v=v.translate(i.offsetX,i.offsetY),v=v.scale(1/i.scaleX,1/i.scaleY);const T=u.createPattern(i.canvas,"repeat");return T.setTransform(v),T}}A.TilingPattern=m},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.applyMaskImageData=R;var E=ht(1);function R({src:e,srcPos:nt=0,dest:ft,destPos:$=0,width:w,height:y,inverseDecode:W=!1}){const P=E.FeatureTest.isLittleEndian?4278190080:255,[b,d]=W?[0,P]:[P,0],m=w>>3,a=w&7,u=e.length;ft=new Uint32Array(ft.buffer);for(let h=0;h<y;h++){for(const r=nt+m;nt<r;nt++){const t=nt<u?e[nt]:255;ft[$++]=t&128?d:b,ft[$++]=t&64?d:b,ft[$++]=t&32?d:b,ft[$++]=t&16?d:b,ft[$++]=t&8?d:b,ft[$++]=t&4?d:b,ft[$++]=t&2?d:b,ft[$++]=t&1?d:b}if(a===0)continue;const s=nt<u?e[nt++]:255;for(let r=0;r<a;r++)ft[$++]=s&1<<7-r?d:b}return{srcPos:nt,destPos:$}}},(p,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.GlobalWorkerOptions=void 0;const ht=Object.create(null);A.GlobalWorkerOptions=ht,ht.workerPort=null,ht.workerSrc=""},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.MessageHandler=void 0;var E=ht(1);const R={UNKNOWN:0,DATA:1,ERROR:2},e={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function nt($){switch($ instanceof Error||typeof $=="object"&&$!==null||(0,E.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),$.name){case"AbortException":return new E.AbortException($.message);case"MissingPDFException":return new E.MissingPDFException($.message);case"PasswordException":return new E.PasswordException($.message,$.code);case"UnexpectedResponseException":return new E.UnexpectedResponseException($.message,$.status);case"UnknownErrorException":return new E.UnknownErrorException($.message,$.details);default:return new E.UnknownErrorException($.message,$.toString())}}class ft{constructor(w,y,W){this.sourceName=w,this.targetName=y,this.comObj=W,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=P=>{const b=P.data;if(b.targetName!==this.sourceName)return;if(b.stream){this._processStreamMessage(b);return}if(b.callback){const m=b.callbackId,a=this.callbackCapabilities[m];if(!a)throw new Error("Cannot resolve callback ".concat(m));if(delete this.callbackCapabilities[m],b.callback===R.DATA)a.resolve(b.data);else if(b.callback===R.ERROR)a.reject(nt(b.reason));else throw new Error("Unexpected callback case");return}const d=this.actionHandler[b.action];if(!d)throw new Error("Unknown action from worker: ".concat(b.action));if(b.callbackId){const m=this.sourceName,a=b.sourceName;new Promise(function(u){u(d(b.data))}).then(function(u){W.postMessage({sourceName:m,targetName:a,callback:R.DATA,callbackId:b.callbackId,data:u})},function(u){W.postMessage({sourceName:m,targetName:a,callback:R.ERROR,callbackId:b.callbackId,reason:nt(u)})});return}if(b.streamId){this._createStreamSink(b);return}d(b.data)},W.addEventListener("message",this._onComObjOnMessage)}on(w,y){const W=this.actionHandler;if(W[w])throw new Error('There is already an actionName called "'.concat(w,'"'));W[w]=y}send(w,y,W){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:w,data:y},W)}sendWithPromise(w,y,W){const P=this.callbackId++,b=(0,E.createPromiseCapability)();this.callbackCapabilities[P]=b;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:w,callbackId:P,data:y},W)}catch(d){b.reject(d)}return b.promise}sendWithStream(w,y,W,P){const b=this.streamId++,d=this.sourceName,m=this.targetName,a=this.comObj;return new ReadableStream({start:u=>{const h=(0,E.createPromiseCapability)();return this.streamControllers[b]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},a.postMessage({sourceName:d,targetName:m,action:w,streamId:b,data:y,desiredSize:u.desiredSize},P),h.promise},pull:u=>{const h=(0,E.createPromiseCapability)();return this.streamControllers[b].pullCall=h,a.postMessage({sourceName:d,targetName:m,stream:e.PULL,streamId:b,desiredSize:u.desiredSize}),h.promise},cancel:u=>{(0,E.assert)(u instanceof Error,"cancel must have a valid reason");const h=(0,E.createPromiseCapability)();return this.streamControllers[b].cancelCall=h,this.streamControllers[b].isClosed=!0,a.postMessage({sourceName:d,targetName:m,stream:e.CANCEL,streamId:b,reason:nt(u)}),h.promise}},W)}_createStreamSink(w){const y=w.streamId,W=this.sourceName,P=w.sourceName,b=this.comObj,d=this,m=this.actionHandler[w.action],a={enqueue(u,h=1,s){if(this.isCancelled)return;const r=this.desiredSize;this.desiredSize-=h,r>0&&this.desiredSize<=0&&(this.sinkCapability=(0,E.createPromiseCapability)(),this.ready=this.sinkCapability.promise),b.postMessage({sourceName:W,targetName:P,stream:e.ENQUEUE,streamId:y,chunk:u},s)},close(){this.isCancelled||(this.isCancelled=!0,b.postMessage({sourceName:W,targetName:P,stream:e.CLOSE,streamId:y}),delete d.streamSinks[y])},error(u){(0,E.assert)(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,b.postMessage({sourceName:W,targetName:P,stream:e.ERROR,streamId:y,reason:nt(u)}))},sinkCapability:(0,E.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:w.desiredSize,ready:null};a.sinkCapability.resolve(),a.ready=a.sinkCapability.promise,this.streamSinks[y]=a,new Promise(function(u){u(m(w.data,a))}).then(function(){b.postMessage({sourceName:W,targetName:P,stream:e.START_COMPLETE,streamId:y,success:!0})},function(u){b.postMessage({sourceName:W,targetName:P,stream:e.START_COMPLETE,streamId:y,reason:nt(u)})})}_processStreamMessage(w){const y=w.streamId,W=this.sourceName,P=w.sourceName,b=this.comObj,d=this.streamControllers[y],m=this.streamSinks[y];switch(w.stream){case e.START_COMPLETE:w.success?d.startCall.resolve():d.startCall.reject(nt(w.reason));break;case e.PULL_COMPLETE:w.success?d.pullCall.resolve():d.pullCall.reject(nt(w.reason));break;case e.PULL:if(!m){b.postMessage({sourceName:W,targetName:P,stream:e.PULL_COMPLETE,streamId:y,success:!0});break}m.desiredSize<=0&&w.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=w.desiredSize,new Promise(function(a){a(m.onPull&&m.onPull())}).then(function(){b.postMessage({sourceName:W,targetName:P,stream:e.PULL_COMPLETE,streamId:y,success:!0})},function(a){b.postMessage({sourceName:W,targetName:P,stream:e.PULL_COMPLETE,streamId:y,reason:nt(a)})});break;case e.ENQUEUE:if((0,E.assert)(d,"enqueue should have stream controller"),d.isClosed)break;d.controller.enqueue(w.chunk);break;case e.CLOSE:if((0,E.assert)(d,"close should have stream controller"),d.isClosed)break;d.isClosed=!0,d.controller.close(),this._deleteStreamController(d,y);break;case e.ERROR:(0,E.assert)(d,"error should have stream controller"),d.controller.error(nt(w.reason)),this._deleteStreamController(d,y);break;case e.CANCEL_COMPLETE:w.success?d.cancelCall.resolve():d.cancelCall.reject(nt(w.reason)),this._deleteStreamController(d,y);break;case e.CANCEL:if(!m)break;new Promise(function(a){a(m.onCancel&&m.onCancel(nt(w.reason)))}).then(function(){b.postMessage({sourceName:W,targetName:P,stream:e.CANCEL_COMPLETE,streamId:y,success:!0})},function(a){b.postMessage({sourceName:W,targetName:P,stream:e.CANCEL_COMPLETE,streamId:y,reason:nt(a)})}),m.sinkCapability.reject(nt(w.reason)),m.isCancelled=!0,delete this.streamSinks[y];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(w,y){await Promise.allSettled([w.startCall&&w.startCall.promise,w.pullCall&&w.pullCall.promise,w.cancelCall&&w.cancelCall.promise]),delete this.streamControllers[y]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}A.MessageHandler=ft},(p,A,ht)=>{var e,nt;Object.defineProperty(A,"__esModule",{value:!0}),A.Metadata=void 0;var E=ht(1);class R{constructor({parsedData:$,rawData:w}){gt(this,e,void 0);gt(this,nt,void 0);jt(this,e,$),jt(this,nt,w)}getRaw(){return S(this,nt)}get($){var w;return(w=S(this,e).get($))!=null?w:null}getAll(){return(0,E.objectFromMap)(S(this,e))}has($){return S(this,e).has($)}}e=new WeakMap,nt=new WeakMap,A.Metadata=R},(p,A,ht)=>{var $,w,y,W,P,b,di;Object.defineProperty(A,"__esModule",{value:!0}),A.OptionalContentConfig=void 0;var E=ht(1),R=ht(8);const e=Symbol("INTERNAL");class nt{constructor(a,u){gt(this,$,!0);this.name=a,this.intent=u}get visible(){return S(this,$)}_setVisible(a,u){a!==e&&(0,E.unreachable)("Internal method `_setVisible` called."),jt(this,$,u)}}$=new WeakMap;class ft{constructor(a){gt(this,b);gt(this,w,null);gt(this,y,new Map);gt(this,W,null);gt(this,P,null);if(this.name=null,this.creator=null,a!==null){this.name=a.name,this.creator=a.creator,jt(this,P,a.order);for(const u of a.groups)S(this,y).set(u.id,new nt(u.name,u.intent));if(a.baseState==="OFF")for(const u of S(this,y).values())u._setVisible(e,!1);for(const u of a.on)S(this,y).get(u)._setVisible(e,!0);for(const u of a.off)S(this,y).get(u)._setVisible(e,!1);jt(this,W,this.getHash())}}isVisible(a){if(S(this,y).size===0)return!0;if(!a)return(0,E.warn)("Optional content group not defined."),!0;if(a.type==="OCG")return S(this,y).has(a.id)?S(this,y).get(a.id).visible:((0,E.warn)("Optional content group not found: ".concat(a.id)),!0);if(a.type==="OCMD"){if(a.expression)return wt(this,b,di).call(this,a.expression);if(!a.policy||a.policy==="AnyOn"){for(const u of a.ids){if(!S(this,y).has(u))return(0,E.warn)("Optional content group not found: ".concat(u)),!0;if(S(this,y).get(u).visible)return!0}return!1}else if(a.policy==="AllOn"){for(const u of a.ids){if(!S(this,y).has(u))return(0,E.warn)("Optional content group not found: ".concat(u)),!0;if(!S(this,y).get(u).visible)return!1}return!0}else if(a.policy==="AnyOff"){for(const u of a.ids){if(!S(this,y).has(u))return(0,E.warn)("Optional content group not found: ".concat(u)),!0;if(!S(this,y).get(u).visible)return!0}return!1}else if(a.policy==="AllOff"){for(const u of a.ids){if(!S(this,y).has(u))return(0,E.warn)("Optional content group not found: ".concat(u)),!0;if(S(this,y).get(u).visible)return!1}return!0}return(0,E.warn)("Unknown optional content policy ".concat(a.policy,".")),!0}return(0,E.warn)("Unknown group type ".concat(a.type,".")),!0}setVisibility(a,u=!0){if(!S(this,y).has(a)){(0,E.warn)("Optional content group not found: ".concat(a));return}S(this,y).get(a)._setVisible(e,!!u),jt(this,w,null)}get hasInitialVisibility(){return this.getHash()===S(this,W)}getOrder(){return S(this,y).size?S(this,P)?S(this,P).slice():[...S(this,y).keys()]:null}getGroups(){return S(this,y).size>0?(0,E.objectFromMap)(S(this,y)):null}getGroup(a){return S(this,y).get(a)||null}getHash(){if(S(this,w)!==null)return S(this,w);const a=new R.MurmurHash3_64;for(const[u,h]of S(this,y))a.update("".concat(u,":").concat(h.visible));return jt(this,w,a.hexdigest())}}w=new WeakMap,y=new WeakMap,W=new WeakMap,P=new WeakMap,b=new WeakSet,di=function(a){const u=a.length;if(u<2)return!0;const h=a[0];for(let s=1;s<u;s++){const r=a[s];let t;if(Array.isArray(r))t=wt(this,b,di).call(this,r);else if(S(this,y).has(r))t=S(this,y).get(r).visible;else return(0,E.warn)("Optional content group not found: ".concat(r)),!0;switch(h){case"And":if(!t)return!1;break;case"Or":if(t)return!0;break;case"Not":return!t;default:return!0}}return h==="And"},A.OptionalContentConfig=ft},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.PDFDataTransportStream=void 0;var E=ht(1),R=ht(6);class e{constructor({length:w,initialData:y,progressiveDone:W=!1,contentDispositionFilename:P=null,disableRange:b=!1,disableStream:d=!1},m){if((0,E.assert)(m,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=W,this._contentDispositionFilename=P,(y==null?void 0:y.length)>0){const a=y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength?y.buffer:new Uint8Array(y).buffer;this._queuedChunks.push(a)}this._pdfDataRangeTransport=m,this._isStreamingSupported=!d,this._isRangeSupported=!b,this._contentLength=w,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((a,u)=>{this._onReceiveData({begin:a,chunk:u})}),this._pdfDataRangeTransport.addProgressListener((a,u)=>{this._onProgress({loaded:a,total:u})}),this._pdfDataRangeTransport.addProgressiveReadListener(a=>{this._onReceiveData({chunk:a})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:w,chunk:y}){const W=y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength?y.buffer:new Uint8Array(y).buffer;if(w===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(W):this._queuedChunks.push(W);else{const P=this._rangeReaders.some(function(b){return b._begin!==w?!1:(b._enqueue(W),!0)});(0,E.assert)(P,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var w,y;return(y=(w=this._fullRequestReader)==null?void 0:w._loaded)!=null?y:0}_onProgress(w){var y,W,P,b;w.total===void 0?(W=(y=this._rangeReaders[0])==null?void 0:y.onProgress)==null||W.call(y,{loaded:w.loaded}):(b=(P=this._fullRequestReader)==null?void 0:P.onProgress)==null||b.call(P,{loaded:w.loaded,total:w.total})}_onProgressiveDone(){var w;(w=this._fullRequestReader)==null||w.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(w){const y=this._rangeReaders.indexOf(w);y>=0&&this._rangeReaders.splice(y,1)}getFullReader(){(0,E.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const w=this._queuedChunks;return this._queuedChunks=null,new nt(this,w,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(w,y){if(y<=this._progressiveDataLength)return null;const W=new ft(this,w,y);return this._pdfDataRangeTransport.requestDataRange(w,y),this._rangeReaders.push(W),W}cancelAllRequests(w){var y;(y=this._fullRequestReader)==null||y.cancel(w);for(const W of this._rangeReaders.slice(0))W.cancel(w);this._pdfDataRangeTransport.abort()}}A.PDFDataTransportStream=e;class nt{constructor(w,y,W=!1,P=null){this._stream=w,this._done=W||!1,this._filename=(0,R.isPdfFile)(P)?P:null,this._queuedChunks=y||[],this._loaded=0;for(const b of this._queuedChunks)this._loaded+=b.byteLength;this._requests=[],this._headersReady=Promise.resolve(),w._fullRequestReader=this,this.onProgress=null}_enqueue(w){this._done||(this._requests.length>0?this._requests.shift().resolve({value:w,done:!1}):this._queuedChunks.push(w),this._loaded+=w.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const w=(0,E.createPromiseCapability)();return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ft{constructor(w,y,W){this._stream=w,this._begin=y,this._end=W,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(w){if(!this._done){if(this._requests.length===0)this._queuedChunk=w;else{this._requests.shift().resolve({value:w,done:!1});for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const y=this._queuedChunk;return this._queuedChunk=null,{value:y,done:!1}}if(this._done)return{value:void 0,done:!0};const w=(0,E.createPromiseCapability)();return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(p,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.XfaText=void 0;class ht{static textContent(R){const e=[],nt={items:e,styles:Object.create(null)};function ft($){var W;if(!$)return;let w=null;const y=$.name;if(y==="#text")w=$.value;else if(ht.shouldBuildText(y))(W=$==null?void 0:$.attributes)!=null&&W.textContent?w=$.attributes.textContent:$.value&&(w=$.value);else return;if(w!==null&&e.push({str:w}),!!$.children)for(const P of $.children)ft(P)}return ft(R),nt}static shouldBuildText(R){return!(R==="textarea"||R==="input"||R==="option"||R==="select")}}A.XfaText=ht},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.NodeStandardFontDataFactory=A.NodeCanvasFactory=A.NodeCMapReaderFactory=void 0;var E=ht(7);const R=function($){return new Promise((w,y)=>{require$$5.readFile($,(P,b)=>{if(P||!b){y(new Error(P));return}w(new Uint8Array(b))})})};class e extends E.BaseCanvasFactory{_createCanvas(w,y){return require$$5.createCanvas(w,y)}}A.NodeCanvasFactory=e;class nt extends E.BaseCMapReaderFactory{_fetchData(w,y){return R(w).then(W=>({cMapData:W,compressionType:y}))}}A.NodeCMapReaderFactory=nt;class ft extends E.BaseStandardFontDataFactory{_fetchData(w){return R(w)}}A.NodeStandardFontDataFactory=ft},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.PDFNodeStream=void 0;var E=ht(1),R=ht(22);const e=require$$5,nt=require$$5,ft=require$$5,$=require$$5,w=/^file:\/\/\/[a-zA-Z]:\//;function y(s){const r=$.parse(s);return r.protocol==="file:"||r.host?r:/^[a-z]:[/\\]/i.test(s)?$.parse("file:///".concat(s)):(r.host||(r.protocol="file:"),r)}class W{constructor(r){this.source=r,this.url=y(r.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&r.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var r,t;return(t=(r=this._fullRequestReader)==null?void 0:r._loaded)!=null?t:0}getFullReader(){return(0,E.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new u(this):new m(this),this._fullRequestReader}getRangeReader(r,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new h(this,r,t):new a(this,r,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(r){var t;(t=this._fullRequestReader)==null||t.cancel(r);for(const i of this._rangeRequestReaders.slice(0))i.cancel(r)}}A.PDFNodeStream=W;class P{constructor(r){this._url=r.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=r.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,E.createPromiseCapability)(),this._headersCapability=(0,E.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const r=this._readableStream.read();return r===null?(this._readCapability=(0,E.createPromiseCapability)(),this.read()):(this._loaded+=r.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(r).buffer,done:!1})}cancel(r){if(!this._readableStream){this._error(r);return}this._readableStream.destroy(r)}_error(r){this._storedError=r,this._readCapability.resolve()}_setReadableStream(r){this._readableStream=r,r.on("readable",()=>{this._readCapability.resolve()}),r.on("end",()=>{r.destroy(),this._done=!0,this._readCapability.resolve()}),r.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new E.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class b{constructor(r){this._url=r.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,E.createPromiseCapability)();const t=r.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const r=this._readableStream.read();return r===null?(this._readCapability=(0,E.createPromiseCapability)(),this.read()):(this._loaded+=r.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(r).buffer,done:!1})}cancel(r){if(!this._readableStream){this._error(r);return}this._readableStream.destroy(r)}_error(r){this._storedError=r,this._readCapability.resolve()}_setReadableStream(r){this._readableStream=r,r.on("readable",()=>{this._readCapability.resolve()}),r.on("end",()=>{r.destroy(),this._done=!0,this._readCapability.resolve()}),r.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(s,r){return{protocol:s.protocol,auth:s.auth,host:s.hostname,port:s.port,path:s.path,method:"GET",headers:r}}class m extends P{constructor(r){super(r);const t=i=>{if(i.statusCode===404){const X=new E.MissingPDFException('Missing PDF "'.concat(this._url,'".'));this._storedError=X,this._headersCapability.reject(X);return}this._headersCapability.resolve(),this._setReadableStream(i);const v=X=>this._readableStream.headers[X.toLowerCase()],{allowRangeRequests:T,suggestedLength:x}=(0,R.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:r.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=x||this._contentLength,this._filename=(0,R.extractFilenameFromHeader)(v)};this._request=null,this._url.protocol==="http:"?this._request=nt.request(d(this._url,r.httpHeaders),t):this._request=ft.request(d(this._url,r.httpHeaders),t),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class a extends b{constructor(r,t,i){super(r),this._httpHeaders={};for(const T in r.httpHeaders){const x=r.httpHeaders[T];x!==void 0&&(this._httpHeaders[T]=x)}this._httpHeaders.Range="bytes=".concat(t,"-").concat(i-1);const v=T=>{if(T.statusCode===404){const x=new E.MissingPDFException('Missing PDF "'.concat(this._url,'".'));this._storedError=x;return}this._setReadableStream(T)};this._request=null,this._url.protocol==="http:"?this._request=nt.request(d(this._url,this._httpHeaders),v):this._request=ft.request(d(this._url,this._httpHeaders),v),this._request.on("error",T=>{this._storedError=T}),this._request.end()}}class u extends P{constructor(r){super(r);let t=decodeURIComponent(this._url.path);w.test(this._url.href)&&(t=t.replace(/^\//,"")),e.lstat(t,(i,v)=>{if(i){i.code==="ENOENT"&&(i=new E.MissingPDFException('Missing PDF "'.concat(t,'".'))),this._storedError=i,this._headersCapability.reject(i);return}this._contentLength=v.size,this._setReadableStream(e.createReadStream(t)),this._headersCapability.resolve()})}}class h extends b{constructor(r,t,i){super(r);let v=decodeURIComponent(this._url.path);w.test(this._url.href)&&(v=v.replace(/^\//,"")),this._setReadableStream(e.createReadStream(v,{start:t,end:i-1}))}}},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.createResponseStatusError=$,A.extractFilenameFromHeader=ft,A.validateRangeRequestCapabilities=nt,A.validateResponseStatus=w;var E=ht(1),R=ht(23),e=ht(6);function nt({getResponseHeader:y,isHttp:W,rangeChunkSize:P,disableRange:b}){const d={allowRangeRequests:!1,suggestedLength:void 0},m=parseInt(y("Content-Length"),10);return!Number.isInteger(m)||(d.suggestedLength=m,m<=2*P)||b||!W||y("Accept-Ranges")!=="bytes"||(y("Content-Encoding")||"identity")!=="identity"||(d.allowRangeRequests=!0),d}function ft(y){const W=y("Content-Disposition");if(W){let P=(0,R.getFilenameFromContentDispositionHeader)(W);if(P.includes("%"))try{P=decodeURIComponent(P)}catch(b){}if((0,e.isPdfFile)(P))return P}return null}function $(y,W){return y===404||y===0&&W.startsWith("file:")?new E.MissingPDFException('Missing PDF "'+W+'".'):new E.UnexpectedResponseException("Unexpected server response (".concat(y,') while retrieving PDF "').concat(W,'".'),y)}function w(y){return y===200||y===206}},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.getFilenameFromContentDispositionHeader=R;var E=ht(1);function R(e){let nt=!0,ft=$("filename\\*","i").exec(e);if(ft){ft=ft[1];let m=P(ft);return m=unescape(m),m=b(m),m=d(m),y(m)}if(ft=W(e),ft){const m=d(ft);return y(m)}if(ft=$("filename","i").exec(e),ft){ft=ft[1];let m=P(ft);return m=d(m),y(m)}function $(m,a){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',a)}function w(m,a){if(m){if(!/^[\x00-\xFF]+$/.test(a))return a;try{const u=new TextDecoder(m,{fatal:!0}),h=(0,E.stringToBytes)(a);a=u.decode(h),nt=!1}catch(u){}}return a}function y(m){return nt&&/[\x80-\xff]/.test(m)&&(m=w("utf-8",m),nt&&(m=w("iso-8859-1",m))),m}function W(m){const a=[];let u;const h=$("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(u=h.exec(m))!==null;){let[,r,t,i]=u;if(r=parseInt(r,10),r in a){if(r===0)break;continue}a[r]=[t,i]}const s=[];for(let r=0;r<a.length&&r in a;++r){let[t,i]=a[r];i=P(i),t&&(i=unescape(i),r===0&&(i=b(i))),s.push(i)}return s.join("")}function P(m){if(m.startsWith('"')){const a=m.slice(1).split('\\"');for(let u=0;u<a.length;++u){const h=a[u].indexOf('"');h!==-1&&(a[u]=a[u].slice(0,h),a.length=u+1),a[u]=a[u].replace(/\\(.)/g,"$1")}m=a.join('"')}return m}function b(m){const a=m.indexOf("'");if(a===-1)return m;const u=m.slice(0,a),s=m.slice(a+1).replace(/^[^']*'/,"");return w(u,s)}function d(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(a,u,h,s){if(h==="q"||h==="Q")return s=s.replace(/_/g," "),s=s.replace(/=([0-9a-fA-F]{2})/g,function(r,t){return String.fromCharCode(parseInt(t,16))}),w(u,s);try{s=atob(s)}catch(r){}return w(u,s)})}return""}},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.PDFNetworkStream=void 0;var E=ht(1),R=ht(22);const e=200,nt=206;function ft(P){const b=P.response;return typeof b!="string"?b:(0,E.stringToBytes)(b).buffer}class ${constructor(b,d={}){this.url=b,this.isHttp=/^https?:/i.test(b),this.httpHeaders=this.isHttp&&d.httpHeaders||Object.create(null),this.withCredentials=d.withCredentials||!1,this.getXhr=d.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(b,d,m){const a={begin:b,end:d};for(const u in m)a[u]=m[u];return this.request(a)}requestFull(b){return this.request(b)}request(b){const d=this.getXhr(),m=this.currXhrId++,a=this.pendingRequests[m]={xhr:d};d.open("GET",this.url),d.withCredentials=this.withCredentials;for(const u in this.httpHeaders){const h=this.httpHeaders[u];h!==void 0&&d.setRequestHeader(u,h)}return this.isHttp&&"begin"in b&&"end"in b?(d.setRequestHeader("Range","bytes=".concat(b.begin,"-").concat(b.end-1)),a.expectedStatus=nt):a.expectedStatus=e,d.responseType="arraybuffer",b.onError&&(d.onerror=function(u){b.onError(d.status)}),d.onreadystatechange=this.onStateChange.bind(this,m),d.onprogress=this.onProgress.bind(this,m),a.onHeadersReceived=b.onHeadersReceived,a.onDone=b.onDone,a.onError=b.onError,a.onProgress=b.onProgress,d.send(null),m}onProgress(b,d){var a;const m=this.pendingRequests[b];m&&((a=m.onProgress)==null||a.call(m,d))}onStateChange(b,d){var r,t,i;const m=this.pendingRequests[b];if(!m)return;const a=m.xhr;if(a.readyState>=2&&m.onHeadersReceived&&(m.onHeadersReceived(),delete m.onHeadersReceived),a.readyState!==4||!(b in this.pendingRequests))return;if(delete this.pendingRequests[b],a.status===0&&this.isHttp){(r=m.onError)==null||r.call(m,a.status);return}const u=a.status||e;if(!(u===e&&m.expectedStatus===nt)&&u!==m.expectedStatus){(t=m.onError)==null||t.call(m,a.status);return}const s=ft(a);if(u===nt){const v=a.getResponseHeader("Content-Range"),T=/bytes (\d+)-(\d+)\/(\d+)/.exec(v);m.onDone({begin:parseInt(T[1],10),chunk:s})}else s?m.onDone({begin:0,chunk:s}):(i=m.onError)==null||i.call(m,a.status)}getRequestXhr(b){return this.pendingRequests[b].xhr}isPendingRequest(b){return b in this.pendingRequests}abortRequest(b){const d=this.pendingRequests[b].xhr;delete this.pendingRequests[b],d.abort()}}class w{constructor(b){this._source=b,this._manager=new $(b.url,{httpHeaders:b.httpHeaders,withCredentials:b.withCredentials}),this._rangeChunkSize=b.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(b){const d=this._rangeRequestReaders.indexOf(b);d>=0&&this._rangeRequestReaders.splice(d,1)}getFullReader(){return(0,E.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new y(this._manager,this._source),this._fullRequestReader}getRangeReader(b,d){const m=new W(this._manager,b,d);return m.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(m),m}cancelAllRequests(b){var d;(d=this._fullRequestReader)==null||d.cancel(b);for(const m of this._rangeRequestReaders.slice(0))m.cancel(b)}}A.PDFNetworkStream=w;class y{constructor(b,d){this._manager=b;const m={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=d.url,this._fullRequestId=b.requestFull(m),this._headersReceivedCapability=(0,E.createPromiseCapability)(),this._disableRange=d.disableRange||!1,this._contentLength=d.length,this._rangeChunkSize=d.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const b=this._fullRequestId,d=this._manager.getRequestXhr(b),m=h=>d.getResponseHeader(h),{allowRangeRequests:a,suggestedLength:u}=(0,R.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=(0,R.extractFilenameFromHeader)(m),this._isRangeSupported&&this._manager.abortRequest(b),this._headersReceivedCapability.resolve()}_onDone(b){if(b&&(this._requests.length>0?this._requests.shift().resolve({value:b.chunk,done:!1}):this._cachedChunks.push(b.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(b){this._storedError=(0,R.createResponseStatusError)(b,this._url),this._headersReceivedCapability.reject(this._storedError);for(const d of this._requests)d.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(b){var d;(d=this.onProgress)==null||d.call(this,{loaded:b.loaded,total:b.lengthComputable?b.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=(0,E.createPromiseCapability)();return this._requests.push(b),b.promise}cancel(b){this._done=!0,this._headersReceivedCapability.reject(b);for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class W{constructor(b,d,m){this._manager=b;const a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._requestId=b.requestRange(d,m,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var b;(b=this.onClosed)==null||b.call(this,this)}_onDone(b){const d=b.chunk;this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunk=d,this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(b){this._storedError=(0,R.createResponseStatusError)(b,this._url);for(const d of this._requests)d.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(b){var d;this.isStreamingSupported||(d=this.onProgress)==null||d.call(this,{loaded:b.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};const b=(0,E.createPromiseCapability)();return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.PDFFetchStream=void 0;var E=ht(1),R=ht(22);function e(W,P,b){return{method:"GET",headers:W,signal:b.signal,mode:"cors",credentials:P?"include":"same-origin",redirect:"follow"}}function nt(W){const P=new Headers;for(const b in W){const d=W[b];d!==void 0&&P.append(b,d)}return P}function ft(W){return W instanceof Uint8Array?W.buffer:W instanceof ArrayBuffer?W:((0,E.warn)("getArrayBuffer - unexpected data format: ".concat(W)),new Uint8Array(W).buffer)}class ${constructor(P){this.source=P,this.isHttp=/^https?:/i.test(P.url),this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var P,b;return(b=(P=this._fullRequestReader)==null?void 0:P._loaded)!=null?b:0}getFullReader(){return(0,E.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new w(this),this._fullRequestReader}getRangeReader(P,b){if(b<=this._progressiveDataLength)return null;const d=new y(this,P,b);return this._rangeRequestReaders.push(d),d}cancelAllRequests(P){var b;(b=this._fullRequestReader)==null||b.cancel(P);for(const d of this._rangeRequestReaders.slice(0))d.cancel(P)}}A.PDFFetchStream=$;class w{constructor(P){this._stream=P,this._reader=null,this._loaded=0,this._filename=null;const b=P.source;this._withCredentials=b.withCredentials||!1,this._contentLength=b.length,this._headersCapability=(0,E.createPromiseCapability)(),this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._headers=nt(this._stream.httpHeaders);const d=b.url;fetch(d,e(this._headers,this._withCredentials,this._abortController)).then(m=>{if(!(0,R.validateResponseStatus)(m.status))throw(0,R.createResponseStatusError)(m.status,d);this._reader=m.body.getReader(),this._headersCapability.resolve();const a=s=>m.headers.get(s),{allowRangeRequests:u,suggestedLength:h}=(0,R.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=(0,R.extractFilenameFromHeader)(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new E.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var d;await this._headersCapability.promise;const{value:P,done:b}=await this._reader.read();return b?{value:P,done:b}:(this._loaded+=P.byteLength,(d=this.onProgress)==null||d.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ft(P),done:!1})}cancel(P){var b;(b=this._reader)==null||b.cancel(P),this._abortController.abort()}}class y{constructor(P,b,d){this._stream=P,this._reader=null,this._loaded=0;const m=P.source;this._withCredentials=m.withCredentials||!1,this._readCapability=(0,E.createPromiseCapability)(),this._isStreamingSupported=!m.disableStream,this._abortController=new AbortController,this._headers=nt(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(b,"-").concat(d-1));const a=m.url;fetch(a,e(this._headers,this._withCredentials,this._abortController)).then(u=>{if(!(0,R.validateResponseStatus)(u.status))throw(0,R.createResponseStatusError)(u.status,a);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var d;await this._readCapability.promise;const{value:P,done:b}=await this._reader.read();return b?{value:P,done:b}:(this._loaded+=P.byteLength,(d=this.onProgress)==null||d.call(this,{loaded:this._loaded}),{value:ft(P),done:!1})}cancel(P){var b;(b=this._reader)==null||b.cancel(P),this._abortController.abort()}}},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.TextLayerRenderTask=void 0,A.renderTextLayer=m,A.updateTextLayer=a;var E=ht(1),R=ht(6);const e=1e5,nt=30,ft=.8,$=new Map;function w(u,h){let s;if(h&&E.FeatureTest.isOffscreenCanvasSupported)s=new OffscreenCanvas(u,u).getContext("2d",{alpha:!1});else{const r=document.createElement("canvas");r.width=r.height=u,s=r.getContext("2d",{alpha:!1})}return s}function y(u,h){const s=$.get(u);if(s)return s;const r=w(nt,h);r.font="".concat(nt,"px ").concat(u);const t=r.measureText("");let i=t.fontBoundingBoxAscent,v=Math.abs(t.fontBoundingBoxDescent);if(i){const x=i/(i+v);return $.set(u,x),r.canvas.width=r.canvas.height=0,x}r.strokeStyle="red",r.clearRect(0,0,nt,nt),r.strokeText("g",0,0);let T=r.getImageData(0,0,nt,nt).data;v=0;for(let x=T.length-1-3;x>=0;x-=4)if(T[x]>0){v=Math.ceil(x/4/nt);break}r.clearRect(0,0,nt,nt),r.strokeText("A",0,nt),T=r.getImageData(0,0,nt,nt).data,i=0;for(let x=0,X=T.length;x<X;x+=4)if(T[x]>0){i=nt-Math.floor(x/4/nt);break}if(r.canvas.width=r.canvas.height=0,i){const x=i/(i+v);return $.set(u,x),x}return $.set(u,ft),ft}function W(u,h,s){const r=document.createElement("span"),t={angle:0,canvasWidth:0,hasText:h.str!=="",hasEOL:h.hasEOL,fontSize:0};u._textDivs.push(r);const i=E.Util.transform(u._transform,h.transform);let v=Math.atan2(i[1],i[0]);const T=s[h.fontName];T.vertical&&(v+=Math.PI/2);const x=Math.hypot(i[2],i[3]),X=x*y(T.fontFamily,u._isOffscreenCanvasSupported);let _,Z;v===0?(_=i[4],Z=i[5]-X):(_=i[4]+X*Math.sin(v),Z=i[5]-X*Math.cos(v));const Et="calc(var(--scale-factor)*",ut=r.style;u._container===u._rootContainer?(ut.left="".concat((100*_/u._pageWidth).toFixed(2),"%"),ut.top="".concat((100*Z/u._pageHeight).toFixed(2),"%")):(ut.left="".concat(Et).concat(_.toFixed(2),"px)"),ut.top="".concat(Et).concat(Z.toFixed(2),"px)")),ut.fontSize="".concat(Et).concat(x.toFixed(2),"px)"),ut.fontFamily=T.fontFamily,t.fontSize=x,r.setAttribute("role","presentation"),r.textContent=h.str,r.dir=h.dir,u._fontInspectorEnabled&&(r.dataset.fontName=h.fontName),v!==0&&(t.angle=v*(180/Math.PI));let mt=!1;if(h.str.length>1)mt=!0;else if(h.str!==" "&&h.transform[0]!==h.transform[3]){const st=Math.abs(h.transform[0]),Y=Math.abs(h.transform[3]);st!==Y&&Math.max(st,Y)/Math.min(st,Y)>1.5&&(mt=!0)}mt&&(t.canvasWidth=T.vertical?h.height:h.width),u._textDivProperties.set(r,t),u._isReadableStream&&u._layoutText(r)}function P(u){const{div:h,scale:s,properties:r,ctx:t,prevFontSize:i,prevFontFamily:v}=u,{style:T}=h;let x="";if(r.canvasWidth!==0&&r.hasText){const{fontFamily:X}=T,{canvasWidth:_,fontSize:Z}=r;(i!==Z||v!==X)&&(t.font="".concat(Z*s,"px ").concat(X),u.prevFontSize=Z,u.prevFontFamily=X);const{width:Et}=t.measureText(h.textContent);Et>0&&(x="scaleX(".concat(_*s/Et,")"))}r.angle!==0&&(x="rotate(".concat(r.angle,"deg) ").concat(x)),x.length>0&&(T.transform=x)}function b(u){if(u._canceled)return;const h=u._textDivs,s=u._capability;if(h.length>e){s.resolve();return}if(!u._isReadableStream)for(const t of h)u._layoutText(t);s.resolve()}class d{constructor({textContentSource:h,container:s,viewport:r,textDivs:t,textDivProperties:i,textContentItemsStr:v,isOffscreenCanvasSupported:T}){var Et;this._textContentSource=h,this._isReadableStream=h instanceof ReadableStream,this._container=this._rootContainer=s,this._textDivs=t||[],this._textContentItemsStr=v||[],this._isOffscreenCanvasSupported=T,this._fontInspectorEnabled=!!((Et=globalThis.FontInspector)!=null&&Et.enabled),this._reader=null,this._textDivProperties=i||new WeakMap,this._canceled=!1,this._capability=(0,E.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:r.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:w(0,T)};const{pageWidth:x,pageHeight:X,pageX:_,pageY:Z}=r.rawDims;this._transform=[1,0,0,-1,-_,Z+X],this._pageWidth=x,this._pageHeight=X,(0,R.setLayerDimensions)(s,r),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new E.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new E.AbortException("TextLayer task cancelled."))}_processItems(h,s){for(const r of h){if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const t=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),r.id!==null&&this._container.setAttribute("id","".concat(r.id)),t.append(this._container)}else r.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(r.str),W(this,r,s)}}_layoutText(h){const s=this._layoutTextParams.properties=this._textDivProperties.get(h);if(this._layoutTextParams.div=h,P(this._layoutTextParams),s.hasText&&this._container.append(h),s.hasEOL){const r=document.createElement("br");r.setAttribute("role","presentation"),this._container.append(r)}}_render(){const h=(0,E.createPromiseCapability)();let s=Object.create(null);if(this._isReadableStream){const r=()=>{this._reader.read().then(({value:t,done:i})=>{if(i){h.resolve();return}Object.assign(s,t.styles),this._processItems(t.items,s),r()},h.reject)};this._reader=this._textContentSource.getReader(),r()}else if(this._textContentSource){const{items:r,styles:t}=this._textContentSource;this._processItems(r,t),h.resolve()}else throw new Error('No "textContentSource" parameter specified.');h.promise.then(()=>{s=null,b(this)},this._capability.reject)}}A.TextLayerRenderTask=d;function m(u){!u.textContentSource&&(u.textContent||u.textContentStream)&&((0,R.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),u.textContentSource=u.textContent||u.textContentStream);const h=new d(u);return h._render(),h}function a({container:u,viewport:h,textDivs:s,textDivProperties:r,isOffscreenCanvasSupported:t,mustRotate:i=!0,mustRescale:v=!0}){if(i&&(0,R.setLayerDimensions)(u,{rotation:h.rotation}),v){const T=w(0,t),X={prevFontSize:null,prevFontFamily:null,div:null,scale:h.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:T};for(const _ of s)X.properties=r.get(_),X.div=_,P(X)}}},(p,A,ht)=>{var w,y,W,P,b,d,m,a,u,hi,s,Yi,t,fi,v,pi;Object.defineProperty(A,"__esModule",{value:!0}),A.AnnotationEditorLayer=void 0;var E=ht(1),R=ht(5),e=ht(28),nt=ht(29),ft=ht(6);const x=class x{constructor(_){gt(this,u);gt(this,s);gt(this,t);gt(this,v);gt(this,w,void 0);gt(this,y,!1);gt(this,W,this.pointerup.bind(this));gt(this,P,this.pointerdown.bind(this));gt(this,b,new Map);gt(this,d,!1);gt(this,m,!1);gt(this,a,void 0);x._initialized||(x._initialized=!0,e.FreeTextEditor.initialize(_.l10n),nt.InkEditor.initialize(_.l10n)),_.uiManager.registerEditorTypes([e.FreeTextEditor,nt.InkEditor]),jt(this,a,_.uiManager),this.pageIndex=_.pageIndex,this.div=_.div,jt(this,w,_.accessibilityManager),S(this,a).addLayer(this)}get isEmpty(){return S(this,b).size===0}updateToolbar(_){S(this,a).updateToolbar(_)}updateMode(_=S(this,a).getMode()){wt(this,v,pi).call(this),_===E.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),S(this,a).unselectAll(),_!==E.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",_===E.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",_===E.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(_){if(!_&&S(this,a).getMode()!==E.AnnotationEditorType.INK)return;if(!_){for(const Et of S(this,b).values())if(Et.isEmpty()){Et.setInBackground();return}}wt(this,t,fi).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(_){S(this,a).setEditingState(_)}addCommands(_){S(this,a).addCommands(_)}enable(){this.div.style.pointerEvents="auto";for(const _ of S(this,b).values())_.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const _ of S(this,b).values())_.disableEditing();wt(this,v,pi).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(_){S(this,a).getActive()!==_&&S(this,a).setActiveEditor(_)}enableClick(){this.div.addEventListener("pointerdown",S(this,P)),this.div.addEventListener("pointerup",S(this,W))}disableClick(){this.div.removeEventListener("pointerdown",S(this,P)),this.div.removeEventListener("pointerup",S(this,W))}attach(_){S(this,b).set(_.id,_)}detach(_){var Z;S(this,b).delete(_.id),(Z=S(this,w))==null||Z.removePointerInTextLayer(_.contentDiv)}remove(_){S(this,a).removeEditor(_),this.detach(_),_.div.style.display="none",setTimeout(()=>{_.div.style.display="",_.div.remove(),_.isAttachedToDOM=!1,document.activeElement===document.body&&S(this,a).focusMainContainer()},0),S(this,m)||this.addInkEditorIfNeeded(!1)}add(_){if(wt(this,u,hi).call(this,_),S(this,a).addEditor(_),this.attach(_),!_.isAttachedToDOM){const Z=_.render();this.div.append(Z),_.isAttachedToDOM=!0}this.moveEditorInDOM(_),_.onceAdded(),S(this,a).addToAnnotationStorage(_)}moveEditorInDOM(_){var Z;(Z=S(this,w))==null||Z.moveElementInDOM(this.div,_.div,_.contentDiv,!0)}addOrRebuild(_){_.needsToBeRebuilt()?_.rebuild():this.add(_)}addANewEditor(_){const Z=()=>{this.addOrRebuild(_)},Et=()=>{_.remove()};this.addCommands({cmd:Z,undo:Et,mustExec:!0})}addUndoableEditor(_){const Z=()=>{this.addOrRebuild(_)},Et=()=>{_.remove()};this.addCommands({cmd:Z,undo:Et,mustExec:!1})}getNextId(){return S(this,a).getId()}deserialize(_){switch(_.annotationType){case E.AnnotationEditorType.FREETEXT:return e.FreeTextEditor.deserialize(_,this,S(this,a));case E.AnnotationEditorType.INK:return nt.InkEditor.deserialize(_,this,S(this,a))}return null}setSelected(_){S(this,a).setSelected(_)}toggleSelected(_){S(this,a).toggleSelected(_)}isSelected(_){return S(this,a).isSelected(_)}unselect(_){S(this,a).unselect(_)}pointerup(_){const{isMac:Z}=E.FeatureTest.platform;if(!(_.button!==0||_.ctrlKey&&Z)&&_.target===this.div&&S(this,d)){if(jt(this,d,!1),!S(this,y)){jt(this,y,!0);return}wt(this,t,fi).call(this,_)}}pointerdown(_){const{isMac:Z}=E.FeatureTest.platform;if(_.button!==0||_.ctrlKey&&Z||_.target!==this.div)return;jt(this,d,!0);const Et=S(this,a).getActive();jt(this,y,!Et||Et.isEmpty())}drop(_){const Z=_.dataTransfer.getData("text/plain"),Et=S(this,a).getEditor(Z);if(!Et)return;_.preventDefault(),_.dataTransfer.dropEffect="move",wt(this,u,hi).call(this,Et);const ut=this.div.getBoundingClientRect(),mt=_.clientX-ut.x,st=_.clientY-ut.y;Et.translate(mt-Et.startX,st-Et.startY),this.moveEditorInDOM(Et),Et.div.focus()}dragover(_){_.preventDefault()}destroy(){var _,Z;((_=S(this,a).getActive())==null?void 0:_.parent)===this&&S(this,a).setActiveEditor(null);for(const Et of S(this,b).values())(Z=S(this,w))==null||Z.removePointerInTextLayer(Et.contentDiv),Et.setParent(null),Et.isAttachedToDOM=!1,Et.div.remove();this.div=null,S(this,b).clear(),S(this,a).removeLayer(this)}render({viewport:_}){this.viewport=_,(0,ft.setLayerDimensions)(this.div,_),(0,R.bindEvents)(this,this.div,["dragover","drop"]);for(const Z of S(this,a).getEditors(this.pageIndex))this.add(Z);this.updateMode()}update({viewport:_}){S(this,a).commitOrRemove(),this.viewport=_,(0,ft.setLayerDimensions)(this.div,{rotation:_.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:_,pageHeight:Z}=this.viewport.rawDims;return[_,Z]}};w=new WeakMap,y=new WeakMap,W=new WeakMap,P=new WeakMap,b=new WeakMap,d=new WeakMap,m=new WeakMap,a=new WeakMap,u=new WeakSet,hi=function(_){var Z;_.parent!==this&&(this.attach(_),(Z=_.parent)==null||Z.detach(_),_.setParent(this),_.div&&_.isAttachedToDOM&&(_.div.remove(),this.div.append(_.div)))},s=new WeakSet,Yi=function(_){switch(S(this,a).getMode()){case E.AnnotationEditorType.FREETEXT:return new e.FreeTextEditor(_);case E.AnnotationEditorType.INK:return new nt.InkEditor(_)}return null},t=new WeakSet,fi=function(_){const Z=this.getNextId(),Et=wt(this,s,Yi).call(this,{parent:this,id:Z,x:_.offsetX,y:_.offsetY,uiManager:S(this,a)});return Et&&this.add(Et),Et},v=new WeakSet,pi=function(){jt(this,m,!0);for(const _ of S(this,b).values())_.isEmpty()&&_.remove();jt(this,m,!1)},Ne(x,"_initialized",!1);let $=x;A.AnnotationEditorLayer=$},(p,A,ht)=>{var ft,$,w,y,W,P,b,d,m,a,Ki,h,Ji,r,Qi,i,gi;Object.defineProperty(A,"__esModule",{value:!0}),A.FreeTextEditor=void 0;var E=ht(1),R=ht(5),e=ht(4);const T=class T extends e.AnnotationEditor{constructor(_){super({..._,name:"freeTextEditor"});gt(this,a);gt(this,h);gt(this,r);gt(this,i);gt(this,ft,this.editorDivBlur.bind(this));gt(this,$,this.editorDivFocus.bind(this));gt(this,w,this.editorDivInput.bind(this));gt(this,y,this.editorDivKeydown.bind(this));gt(this,W,void 0);gt(this,P,"");gt(this,b,"".concat(this.id,"-editor"));gt(this,d,!1);gt(this,m,void 0);jt(this,W,_.color||T._defaultColor||e.AnnotationEditor._defaultLineColor),jt(this,m,_.fontSize||T._defaultFontSize)}static initialize(_){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(Et=>[Et,_.get(Et)]));const Z=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Z.getPropertyValue("--freetext-padding"))}static updateDefaultParams(_,Z){switch(_){case E.AnnotationEditorParamsType.FREETEXT_SIZE:T._defaultFontSize=Z;break;case E.AnnotationEditorParamsType.FREETEXT_COLOR:T._defaultColor=Z;break}}updateParams(_,Z){switch(_){case E.AnnotationEditorParamsType.FREETEXT_SIZE:wt(this,a,Ki).call(this,Z);break;case E.AnnotationEditorParamsType.FREETEXT_COLOR:wt(this,h,Ji).call(this,Z);break}}static get defaultPropertiesToUpdate(){return[[E.AnnotationEditorParamsType.FREETEXT_SIZE,T._defaultFontSize],[E.AnnotationEditorParamsType.FREETEXT_COLOR,T._defaultColor||e.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[E.AnnotationEditorParamsType.FREETEXT_SIZE,S(this,m)],[E.AnnotationEditorParamsType.FREETEXT_COLOR,S(this,W)]]}getInitialTranslation(){const _=this.parentScale;return[-T._internalPadding*_,-(T._internalPadding+S(this,m))*_]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(E.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",S(this,y)),this.editorDiv.addEventListener("focus",S(this,$)),this.editorDiv.addEventListener("blur",S(this,ft)),this.editorDiv.addEventListener("input",S(this,w)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",S(this,b)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",S(this,y)),this.editorDiv.removeEventListener("focus",S(this,$)),this.editorDiv.removeEventListener("blur",S(this,ft)),this.editorDiv.removeEventListener("input",S(this,w)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(_){super.focusin(_),_.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),S(this,d)||(jt(this,d,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),jt(this,P,wt(this,r,Qi).call(this).trimEnd()),wt(this,i,gi).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(_){this.enableEditMode(),this.editorDiv.focus()}keydown(_){_.target===this.div&&_.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(_){T._keyboardManager.exec(this,_)}editorDivFocus(_){this.isEditing=!0}editorDivBlur(_){this.isEditing=!1}editorDivInput(_){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let _,Z;this.width&&(_=this.x,Z=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",S(this,b)),this.enableEditing(),T._l10nPromise.get("editor_free_text2_aria_label").then(ut=>{var mt;return(mt=this.editorDiv)==null?void 0:mt.setAttribute("aria-label",ut)}),T._l10nPromise.get("free_text2_default_content").then(ut=>{var mt;return(mt=this.editorDiv)==null?void 0:mt.setAttribute("default-content",ut)}),this.editorDiv.contentEditable=!0;const{style:Et}=this.editorDiv;if(Et.fontSize="calc(".concat(S(this,m),"px * var(--scale-factor))"),Et.color=S(this,W),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,R.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ut,mt]=this.parentDimensions;this.setAt(_*ut,Z*mt,this.width*ut,this.height*mt);for(const st of S(this,P).split("\n")){const Y=document.createElement("div");Y.append(st?document.createTextNode(st):document.createElement("br")),this.editorDiv.append(Y)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(_,Z,Et){const ut=super.deserialize(_,Z,Et);return jt(ut,m,_.fontSize),jt(ut,W,E.Util.makeHexColor(..._.color)),jt(ut,P,_.value),ut}serialize(){if(this.isEmpty())return null;const _=T._internalPadding*this.parentScale,Z=this.getRect(_,_),Et=e.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:S(this,W));return{annotationType:E.AnnotationEditorType.FREETEXT,color:Et,fontSize:S(this,m),value:S(this,P),pageIndex:this.pageIndex,rect:Z,rotation:this.rotation}}};ft=new WeakMap,$=new WeakMap,w=new WeakMap,y=new WeakMap,W=new WeakMap,P=new WeakMap,b=new WeakMap,d=new WeakMap,m=new WeakMap,a=new WeakSet,Ki=function(_){const Z=ut=>{this.editorDiv.style.fontSize="calc(".concat(ut,"px * var(--scale-factor))"),this.translate(0,-(ut-S(this,m))*this.parentScale),jt(this,m,ut),wt(this,i,gi).call(this)},Et=S(this,m);this.addCommands({cmd:()=>{Z(_)},undo:()=>{Z(Et)},mustExec:!0,type:E.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,Ji=function(_){const Z=S(this,W);this.addCommands({cmd:()=>{jt(this,W,this.editorDiv.style.color=_)},undo:()=>{jt(this,W,this.editorDiv.style.color=Z)},mustExec:!0,type:E.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},r=new WeakSet,Qi=function(){const _=this.editorDiv.getElementsByTagName("div");if(_.length===0)return this.editorDiv.innerText;const Z=[];for(const Et of _)Z.push(Et.innerText.replace(/\r\n?|\n/,""));return Z.join("\n")},i=new WeakSet,gi=function(){const[_,Z]=this.parentDimensions;let Et;if(this.isAttachedToDOM)Et=this.div.getBoundingClientRect();else{const{currentLayer:ut,div:mt}=this,st=mt.style.display;mt.style.display="hidden",ut.div.append(this.div),Et=mt.getBoundingClientRect(),mt.remove(),mt.style.display=st}this.width=Et.width/_,this.height=Et.height/Z},Ne(T,"_freeTextDefaultContent",""),Ne(T,"_l10nPromise"),Ne(T,"_internalPadding",0),Ne(T,"_defaultColor",null),Ne(T,"_defaultFontSize",10),Ne(T,"_keyboardManager",new R.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],T.prototype.commitOrRemove]])),Ne(T,"_type","freetext");let nt=T;A.FreeTextEditor=nt},(p,A,ht)=>{var y,W,P,b,d,m,a,u,h,s,r,t,i,v,T,Zi,X,tr,Z,er,ut,nr,st,mi,K,ir,Ct,rr,c,sr,C,on,N,vi,G,Hn,vt,Wn,dt,Pn,l,bi,k,Vn,M,_i,pt,ar,Mt,or,xt,lr,Lt,yi,te,qn,Zt,Tn,j,Ai;Object.defineProperty(A,"__esModule",{value:!0}),A.InkEditor=void 0,Object.defineProperty(A,"fitCurve",{enumerable:!0,get:function(){return e.fitCurve}});var E=ht(1),R=ht(4),e=ht(30),nt=ht(5);const ft=16,$=100,Pt=class Pt extends R.AnnotationEditor{constructor(rt){super({...rt,name:"inkEditor"});gt(this,T);gt(this,X);gt(this,Z);gt(this,ut);gt(this,st);gt(this,K);gt(this,Ct);gt(this,c);gt(this,C);gt(this,N);gt(this,G);gt(this,vt);gt(this,dt);gt(this,l);gt(this,k);gt(this,pt);gt(this,Mt);gt(this,xt);gt(this,Lt);gt(this,te);gt(this,Zt);gt(this,j);gt(this,y,0);gt(this,W,0);gt(this,P,0);gt(this,b,this.canvasPointermove.bind(this));gt(this,d,this.canvasPointerleave.bind(this));gt(this,m,this.canvasPointerup.bind(this));gt(this,a,this.canvasPointerdown.bind(this));gt(this,u,!1);gt(this,h,!1);gt(this,s,null);gt(this,r,null);gt(this,t,0);gt(this,i,0);gt(this,v,null);this.color=rt.color||null,this.thickness=rt.thickness||null,this.opacity=rt.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(rt){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(kt=>[kt,rt.get(kt)]))}static updateDefaultParams(rt,kt){switch(rt){case E.AnnotationEditorParamsType.INK_THICKNESS:Pt._defaultThickness=kt;break;case E.AnnotationEditorParamsType.INK_COLOR:Pt._defaultColor=kt;break;case E.AnnotationEditorParamsType.INK_OPACITY:Pt._defaultOpacity=kt/100;break}}updateParams(rt,kt){switch(rt){case E.AnnotationEditorParamsType.INK_THICKNESS:wt(this,T,Zi).call(this,kt);break;case E.AnnotationEditorParamsType.INK_COLOR:wt(this,X,tr).call(this,kt);break;case E.AnnotationEditorParamsType.INK_OPACITY:wt(this,Z,er).call(this,kt);break}}static get defaultPropertiesToUpdate(){return[[E.AnnotationEditorParamsType.INK_THICKNESS,Pt._defaultThickness],[E.AnnotationEditorParamsType.INK_COLOR,Pt._defaultColor||R.AnnotationEditor._defaultLineColor],[E.AnnotationEditorParamsType.INK_OPACITY,Math.round(Pt._defaultOpacity*100)]]}get propertiesToUpdate(){var rt;return[[E.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Pt._defaultThickness],[E.AnnotationEditorParamsType.INK_COLOR,this.color||Pt._defaultColor||R.AnnotationEditor._defaultLineColor],[E.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((rt=this.opacity)!=null?rt:Pt._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(wt(this,G,Hn).call(this),wt(this,vt,Wn).call(this)),this.isAttachedToDOM||(this.parent.add(this),wt(this,dt,Pn).call(this)),wt(this,Zt,Tn).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,S(this,r).disconnect(),jt(this,r,null),super.remove())}setParent(rt){!this.parent&&rt?this._uiManager.removeShouldRescale(this):this.parent&&rt===null&&this._uiManager.addShouldRescale(this),super.setParent(rt)}onScaleChanging(){const[rt,kt]=this.parentDimensions,Dt=this.width*rt,Bt=this.height*kt;this.setDimensions(Dt,Bt)}enableEditMode(){S(this,u)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",S(this,a)),this.canvas.addEventListener("pointerup",S(this,m)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",S(this,a)),this.canvas.removeEventListener("pointerup",S(this,m)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){S(this,u)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),jt(this,u,!0),this.div.classList.add("disabled"),wt(this,Zt,Tn).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(rt){super.focusin(rt),this.enableEditMode()}canvasPointerdown(rt){rt.button!==0||!this.isInEditMode()||S(this,u)||(this.setInForeground(),rt.type!=="mouse"&&this.div.focus(),rt.stopPropagation(),this.canvas.addEventListener("pointerleave",S(this,d)),this.canvas.addEventListener("pointermove",S(this,b)),wt(this,K,ir).call(this,rt.offsetX,rt.offsetY))}canvasPointermove(rt){rt.stopPropagation(),wt(this,Ct,rr).call(this,rt.offsetX,rt.offsetY)}canvasPointerup(rt){rt.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(rt.stopPropagation(),wt(this,N,vi).call(this,rt),this.setInBackground())}canvasPointerleave(rt){wt(this,N,vi).call(this,rt),this.setInBackground()}render(){if(this.div)return this.div;let rt,kt;this.width&&(rt=this.x,kt=this.y),super.render(),Pt._l10nPromise.get("editor_ink2_aria_label").then(de=>{var fe;return(fe=this.div)==null?void 0:fe.setAttribute("aria-label",de)});const[Dt,Bt,le,Ae]=wt(this,ut,nr).call(this);if(this.setAt(Dt,Bt,0,0),this.setDims(le,Ae),wt(this,G,Hn).call(this),this.width){const[de,fe]=this.parentDimensions;this.setAt(rt*de,kt*fe,this.width*de,this.height*fe),jt(this,h,!0),wt(this,dt,Pn).call(this),this.setDims(this.width*de,this.height*fe),wt(this,C,on).call(this),wt(this,j,Ai).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return wt(this,vt,Wn).call(this),this.div}setDimensions(rt,kt){const Dt=Math.round(rt),Bt=Math.round(kt);if(S(this,t)===Dt&&S(this,i)===Bt)return;jt(this,t,Dt),jt(this,i,Bt),this.canvas.style.visibility="hidden",S(this,y)&&Math.abs(S(this,y)-rt/kt)>.01&&(kt=Math.ceil(rt/S(this,y)),this.setDims(rt,kt));const[le,Ae]=this.parentDimensions;this.width=rt/le,this.height=kt/Ae,S(this,u)&&wt(this,l,bi).call(this,rt,kt),wt(this,dt,Pn).call(this),wt(this,C,on).call(this),this.canvas.style.visibility="visible"}static deserialize(rt,kt,Dt){var De,Le;const Bt=super.deserialize(rt,kt,Dt);Bt.thickness=rt.thickness,Bt.color=E.Util.makeHexColor(...rt.color),Bt.opacity=rt.opacity;const[le,Ae]=Bt.pageDimensions,de=Bt.width*le,fe=Bt.height*Ae,ce=Bt.parentScale,ve=rt.thickness/2;jt(Bt,y,de/fe),jt(Bt,u,!0),jt(Bt,t,Math.round(de)),jt(Bt,i,Math.round(fe));for(const{bezier:Ie}of rt.paths){const Re=[];Bt.paths.push(Re);let $e=ce*(Ie[0]-ve),Je=ce*(fe-Ie[1]-ve);for(let Ze=2,bn=Ie.length;Ze<bn;Ze+=6){const _n=ce*(Ie[Ze]-ve),yn=ce*(fe-Ie[Ze+1]-ve),An=ce*(Ie[Ze+2]-ve),Sn=ce*(fe-Ie[Ze+3]-ve),Fn=ce*(Ie[Ze+4]-ve),On=ce*(fe-Ie[Ze+5]-ve);Re.push([[$e,Je],[_n,yn],[An,Sn],[Fn,On]]),$e=Fn,Je=On}const ln=wt(this,M,_i).call(this,Re);Bt.bezierPath2D.push(ln)}const We=wt(De=Bt,Lt,yi).call(De);return jt(Bt,P,Math.max(ft,We[2]-We[0])),jt(Bt,W,Math.max(ft,We[3]-We[1])),wt(Le=Bt,l,bi).call(Le,de,fe),Bt}serialize(){if(this.isEmpty())return null;const rt=this.getRect(0,0),kt=this.rotation%180===0?rt[3]-rt[1]:rt[2]-rt[0],Dt=R.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:E.AnnotationEditorType.INK,color:Dt,thickness:this.thickness,opacity:this.opacity,paths:wt(this,pt,ar).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,kt),pageIndex:this.pageIndex,rect:rt,rotation:this.rotation}}};y=new WeakMap,W=new WeakMap,P=new WeakMap,b=new WeakMap,d=new WeakMap,m=new WeakMap,a=new WeakMap,u=new WeakMap,h=new WeakMap,s=new WeakMap,r=new WeakMap,t=new WeakMap,i=new WeakMap,v=new WeakMap,T=new WeakSet,Zi=function(rt){const kt=this.thickness;this.addCommands({cmd:()=>{this.thickness=rt,wt(this,Zt,Tn).call(this)},undo:()=>{this.thickness=kt,wt(this,Zt,Tn).call(this)},mustExec:!0,type:E.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},X=new WeakSet,tr=function(rt){const kt=this.color;this.addCommands({cmd:()=>{this.color=rt,wt(this,C,on).call(this)},undo:()=>{this.color=kt,wt(this,C,on).call(this)},mustExec:!0,type:E.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Z=new WeakSet,er=function(rt){rt/=100;const kt=this.opacity;this.addCommands({cmd:()=>{this.opacity=rt,wt(this,C,on).call(this)},undo:()=>{this.opacity=kt,wt(this,C,on).call(this)},mustExec:!0,type:E.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},ut=new WeakSet,nr=function(){const{parentRotation:rt,parentDimensions:[kt,Dt]}=this;switch(rt){case 90:return[0,Dt,Dt,kt];case 180:return[kt,Dt,kt,Dt];case 270:return[kt,0,Dt,kt];default:return[0,0,kt,Dt]}},st=new WeakSet,mi=function(){const{ctx:rt,color:kt,opacity:Dt,thickness:Bt,parentScale:le,scaleFactor:Ae}=this;rt.lineWidth=Bt*le/Ae,rt.lineCap="round",rt.lineJoin="round",rt.miterLimit=10,rt.strokeStyle="".concat(kt).concat((0,nt.opacityToHex)(Dt))},K=new WeakSet,ir=function(rt,kt){var Dt;this.isEditing=!0,S(this,h)||(jt(this,h,!0),wt(this,dt,Pn).call(this),this.thickness||(this.thickness=Pt._defaultThickness),this.color||(this.color=Pt._defaultColor||R.AnnotationEditor._defaultLineColor),(Dt=this.opacity)!=null||(this.opacity=Pt._defaultOpacity)),this.currentPath.push([rt,kt]),jt(this,s,null),wt(this,st,mi).call(this),this.ctx.beginPath(),this.ctx.moveTo(rt,kt),jt(this,v,()=>{S(this,v)&&(S(this,s)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):wt(this,C,on).call(this),this.ctx.lineTo(...S(this,s)),jt(this,s,null),this.ctx.stroke()),window.requestAnimationFrame(S(this,v)))}),window.requestAnimationFrame(S(this,v))},Ct=new WeakSet,rr=function(rt,kt){const[Dt,Bt]=this.currentPath.at(-1);rt===Dt&&kt===Bt||(this.currentPath.push([rt,kt]),jt(this,s,[rt,kt]))},c=new WeakSet,sr=function(rt,kt){var ce;this.ctx.closePath(),jt(this,v,null),rt=Math.min(Math.max(rt,0),this.canvas.width),kt=Math.min(Math.max(kt,0),this.canvas.height);const[Dt,Bt]=this.currentPath.at(-1);(rt!==Dt||kt!==Bt)&&this.currentPath.push([rt,kt]);let le;if(this.currentPath.length!==1)le=(0,e.fitCurve)(this.currentPath,30,null);else{const ve=[rt,kt];le=[[ve,ve.slice(),ve.slice(),ve]]}const Ae=wt(ce=Pt,M,_i).call(ce,le);this.currentPath.length=0;const de=()=>{this.paths.push(le),this.bezierPath2D.push(Ae),this.rebuild()},fe=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(wt(this,G,Hn).call(this),wt(this,vt,Wn).call(this)),wt(this,Zt,Tn).call(this))};this.addCommands({cmd:de,undo:fe,mustExec:!0})},C=new WeakSet,on=function(){if(this.isEmpty()){wt(this,k,Vn).call(this);return}wt(this,st,mi).call(this);const{canvas:rt,ctx:kt}=this;kt.setTransform(1,0,0,1,0,0),kt.clearRect(0,0,rt.width,rt.height),wt(this,k,Vn).call(this);for(const Dt of this.bezierPath2D)kt.stroke(Dt)},N=new WeakSet,vi=function(rt){wt(this,c,sr).call(this,rt.offsetX,rt.offsetY),this.canvas.removeEventListener("pointerleave",S(this,d)),this.canvas.removeEventListener("pointermove",S(this,b)),this.addToAnnotationStorage()},G=new WeakSet,Hn=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Pt._l10nPromise.get("editor_ink_canvas_aria_label").then(rt=>{var kt;return(kt=this.canvas)==null?void 0:kt.setAttribute("aria-label",rt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},vt=new WeakSet,Wn=function(){let rt=null;jt(this,r,new ResizeObserver(kt=>{const Dt=kt[0].contentRect;Dt.width&&Dt.height&&(rt!==null&&clearTimeout(rt),rt=setTimeout(()=>{this.fixDims(),rt=null},$),this.setDimensions(Dt.width,Dt.height))})),S(this,r).observe(this.div)},dt=new WeakSet,Pn=function(){if(!S(this,h))return;const[rt,kt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*rt),this.canvas.height=Math.ceil(this.height*kt),wt(this,k,Vn).call(this)},l=new WeakSet,bi=function(rt,kt){const Dt=wt(this,te,qn).call(this),Bt=(rt-Dt)/S(this,P),le=(kt-Dt)/S(this,W);this.scaleFactor=Math.min(Bt,le)},k=new WeakSet,Vn=function(){const rt=wt(this,te,qn).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+rt,this.translationY*this.scaleFactor+rt)},M=new WeakSet,_i=function(rt){const kt=new Path2D;for(let Dt=0,Bt=rt.length;Dt<Bt;Dt++){const[le,Ae,de,fe]=rt[Dt];Dt===0&&kt.moveTo(...le),kt.bezierCurveTo(Ae[0],Ae[1],de[0],de[1],fe[0],fe[1])}return kt},pt=new WeakSet,ar=function(rt,kt,Dt,Bt){const Ae=[],de=this.thickness/2;let fe,ce;for(const ve of this.paths){fe=[],ce=[];for(let We=0,De=ve.length;We<De;We++){const[Le,Ie,Re,$e]=ve[We],Je=rt*(Le[0]+kt)+de,ln=Bt-rt*(Le[1]+Dt)-de,Ze=rt*(Ie[0]+kt)+de,bn=Bt-rt*(Ie[1]+Dt)-de,_n=rt*(Re[0]+kt)+de,yn=Bt-rt*(Re[1]+Dt)-de,An=rt*($e[0]+kt)+de,Sn=Bt-rt*($e[1]+Dt)-de;We===0&&(fe.push(Je,ln),ce.push(Je,ln)),fe.push(Ze,bn,_n,yn,An,Sn),wt(this,Mt,or).call(this,Je,ln,Ze,bn,_n,yn,An,Sn,4,ce)}Ae.push({bezier:fe,points:ce})}return Ae},Mt=new WeakSet,or=function(rt,kt,Dt,Bt,le,Ae,de,fe,ce,ve){if(wt(this,xt,lr).call(this,rt,kt,Dt,Bt,le,Ae,de,fe)){ve.push(de,fe);return}for(let We=1;We<ce-1;We++){const De=We/ce,Le=1-De;let Ie=De*rt+Le*Dt,Re=De*kt+Le*Bt,$e=De*Dt+Le*le,Je=De*Bt+Le*Ae;const ln=De*le+Le*de,Ze=De*Ae+Le*fe;Ie=De*Ie+Le*$e,Re=De*Re+Le*Je,$e=De*$e+Le*ln,Je=De*Je+Le*Ze,Ie=De*Ie+Le*$e,Re=De*Re+Le*Je,ve.push(Ie,Re)}ve.push(de,fe)},xt=new WeakSet,lr=function(rt,kt,Dt,Bt,le,Ae,de,fe){const ve=(3*Dt-2*rt-de)**2,We=(3*Bt-2*kt-fe)**2,De=(3*le-rt-2*de)**2,Le=(3*Ae-kt-2*fe)**2;return Math.max(ve,De)+Math.max(We,Le)<=10},Lt=new WeakSet,yi=function(){let rt=1/0,kt=-1/0,Dt=1/0,Bt=-1/0;for(const le of this.paths)for(const[Ae,de,fe,ce]of le){const ve=E.Util.bezierBoundingBox(...Ae,...de,...fe,...ce);rt=Math.min(rt,ve[0]),Dt=Math.min(Dt,ve[1]),kt=Math.max(kt,ve[2]),Bt=Math.max(Bt,ve[3])}return[rt,Dt,kt,Bt]},te=new WeakSet,qn=function(){return S(this,u)?Math.ceil(this.thickness*this.parentScale):0},Zt=new WeakSet,Tn=function(rt=!1){if(this.isEmpty())return;if(!S(this,u)){wt(this,C,on).call(this);return}const kt=wt(this,Lt,yi).call(this),Dt=wt(this,te,qn).call(this);jt(this,P,Math.max(ft,kt[2]-kt[0])),jt(this,W,Math.max(ft,kt[3]-kt[1]));const Bt=Math.ceil(Dt+S(this,P)*this.scaleFactor),le=Math.ceil(Dt+S(this,W)*this.scaleFactor),[Ae,de]=this.parentDimensions;this.width=Bt/Ae,this.height=le/de,jt(this,y,Bt/le),wt(this,j,Ai).call(this);const fe=this.translationX,ce=this.translationY;this.translationX=-kt[0],this.translationY=-kt[1],wt(this,dt,Pn).call(this),wt(this,C,on).call(this),jt(this,t,Bt),jt(this,i,le),this.setDims(Bt,le);const ve=rt?Dt/this.scaleFactor/2:0;this.translate(fe-this.translationX-ve,ce-this.translationY-ve)},j=new WeakSet,Ai=function(){const{style:rt}=this.div;S(this,y)>=1?(rt.minHeight="".concat(ft,"px"),rt.minWidth="".concat(Math.round(S(this,y)*ft),"px")):(rt.minWidth="".concat(ft,"px"),rt.minHeight="".concat(Math.round(ft/S(this,y)),"px"))},gt(Pt,M),Ne(Pt,"_defaultColor",null),Ne(Pt,"_defaultOpacity",1),Ne(Pt,"_defaultThickness",1),Ne(Pt,"_l10nPromise"),Ne(Pt,"_type","ink");let w=Pt;A.InkEditor=w},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.fitCurve=void 0;const E=ht(31);A.fitCurve=E},p=>{function A(d,m,a){if(!Array.isArray(d))throw new TypeError("First argument should be an array");if(d.forEach(r=>{if(!Array.isArray(r)||r.some(t=>typeof t!="number")||r.length!==d[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),d=d.filter((r,t)=>t===0||!r.every((i,v)=>i===d[t-1][v])),d.length<2)return[];const u=d.length,h=W(d[1],d[0]),s=W(d[u-2],d[u-1]);return ht(d,h,s,m,a)}function ht(d,m,a,u,h){var r,t,i,v,T,x,X,_,Z,Et,ut,mt,st;if(d.length===2)return mt=P.vectorLen(P.subtract(d[0],d[1]))/3,r=[d[0],P.addArrays(d[0],P.mulItems(m,mt)),P.addArrays(d[1],P.mulItems(a,mt)),d[1]],[r];if(t=ft(d),[r,v,x]=E(d,t,t,m,a,h),v===0||v<u)return[r];if(v<u*u)for(i=t,T=v,X=x,st=0;st<20;st++){if(i=e(r,d,i),[r,v,x]=E(d,t,i,m,a,h),v<u)return[r];if(x===X){let Y=v/T;if(Y>.9999&&Y<1.0001)break}T=v,X=x}return ut=[],_=P.subtract(d[x-1],d[x+1]),_.every(Y=>Y===0)&&(_=P.subtract(d[x-1],d[x]),[_[0],_[1]]=[-_[1],_[0]]),Z=P.normalize(_),Et=P.mulItems(Z,-1),ut=ut.concat(ht(d.slice(0,x+1),m,Z,u,h)),ut=ut.concat(ht(d.slice(x),Et,a,u,h)),ut}function E(d,m,a,u,h,s){var r,t,i;return r=R(d,a,u,h),[t,i]=$(d,r,m),s&&s({bez:r,points:d,params:m,maxErr:t,maxPoint:i}),[r,t,i]}function R(d,m,a,u){var h,s,r,t,i,v,T,x,X,_,Z,Et,ut,mt,st,Y,K,bt=d[0],Ct=d[d.length-1];for(h=[bt,null,null,Ct],s=P.zeros_Xx2x2(m.length),ut=0,mt=m.length;ut<mt;ut++)Y=m[ut],K=1-Y,r=s[ut],r[0]=P.mulItems(a,3*Y*(K*K)),r[1]=P.mulItems(u,3*K*(Y*Y));for(t=[[0,0],[0,0]],i=[0,0],ut=0,mt=d.length;ut<mt;ut++)Y=m[ut],r=s[ut],t[0][0]+=P.dot(r[0],r[0]),t[0][1]+=P.dot(r[0],r[1]),t[1][0]+=P.dot(r[0],r[1]),t[1][1]+=P.dot(r[1],r[1]),st=P.subtract(d[ut],b.q([bt,bt,Ct,Ct],Y)),i[0]+=P.dot(r[0],st),i[1]+=P.dot(r[1],st);return v=t[0][0]*t[1][1]-t[1][0]*t[0][1],T=t[0][0]*i[1]-t[1][0]*i[0],x=i[0]*t[1][1]-i[1]*t[0][1],X=v===0?0:x/v,_=v===0?0:T/v,Et=P.vectorLen(P.subtract(bt,Ct)),Z=1e-6*Et,X<Z||_<Z?(h[1]=P.addArrays(bt,P.mulItems(a,Et/3)),h[2]=P.addArrays(Ct,P.mulItems(u,Et/3))):(h[1]=P.addArrays(bt,P.mulItems(a,X)),h[2]=P.addArrays(Ct,P.mulItems(u,_))),h}function e(d,m,a){return a.map((u,h)=>nt(d,m[h],u))}function nt(d,m,a){var u=P.subtract(b.q(d,a),m),h=b.qprime(d,a),s=P.mulMatrix(u,h),r=P.sum(P.squareItems(h))+2*P.mulMatrix(u,b.qprimeprime(d,a));return r===0?a:a-s/r}function ft(d){var m=[],a,u,h;return d.forEach((s,r)=>{a=r?u+P.vectorLen(P.subtract(s,h)):0,m.push(a),u=a,h=s}),m=m.map(s=>s/u),m}function $(d,m,a){var u,h,s,r,t,i,v,T;h=0,s=Math.floor(d.length/2);const x=w(m,10);for(t=0,i=d.length;t<i;t++)v=d[t],T=y(m,a[t],x,10),r=P.subtract(b.q(m,T),v),u=r[0]*r[0]+r[1]*r[1],u>h&&(h=u,s=t);return[h,s]}var w=function(d,m){for(var a,u=[0],h=d[0],s=0,r=1;r<=m;r++)a=b.q(d,r/m),s+=P.vectorLen(P.subtract(a,h)),u.push(s),h=a;return u=u.map(t=>t/s),u};function y(d,m,a,u){if(m<0)return 0;if(m>1)return 1;for(var h,s,r,t,i,v=1;v<=u;v++)if(m<=a[v]){t=(v-1)/u,r=v/u,s=a[v-1],h=a[v],i=(m-s)/(h-s)*(r-t)+t;break}return i}function W(d,m){return P.normalize(P.subtract(d,m))}class P{static zeros_Xx2x2(m){for(var a=[];m--;)a.push([0,0]);return a}static mulItems(m,a){return m.map(u=>u*a)}static mulMatrix(m,a){return m.reduce((u,h,s)=>u+h*a[s],0)}static subtract(m,a){return m.map((u,h)=>u-a[h])}static addArrays(m,a){return m.map((u,h)=>u+a[h])}static addItems(m,a){return m.map(u=>u+a)}static sum(m){return m.reduce((a,u)=>a+u)}static dot(m,a){return P.mulMatrix(m,a)}static vectorLen(m){return Math.hypot(...m)}static divItems(m,a){return m.map(u=>u/a)}static squareItems(m){return m.map(a=>a*a)}static normalize(m){return this.divItems(m,this.vectorLen(m))}}class b{static q(m,a){var u=1-a,h=P.mulItems(m[0],u*u*u),s=P.mulItems(m[1],3*u*u*a),r=P.mulItems(m[2],3*u*a*a),t=P.mulItems(m[3],a*a*a);return P.addArrays(P.addArrays(h,s),P.addArrays(r,t))}static qprime(m,a){var u=1-a,h=P.mulItems(P.subtract(m[1],m[0]),3*u*u),s=P.mulItems(P.subtract(m[2],m[1]),6*u*a),r=P.mulItems(P.subtract(m[3],m[2]),3*a*a);return P.addArrays(P.addArrays(h,s),r)}static qprimeprime(m,a){return P.addArrays(P.mulItems(P.addArrays(P.subtract(m[2],P.mulItems(m[1],2)),m[0]),6*(1-a)),P.mulItems(P.addArrays(P.subtract(m[3],P.mulItems(m[2],2)),m[1]),6*a))}}p.exports=A,p.exports.fitCubic=ht,p.exports.createTangent=W},(p,A,ht)=>{var o,vn,O,cr,G,Si,vt,Ei;Object.defineProperty(A,"__esModule",{value:!0}),A.AnnotationLayer=void 0;var E=ht(1),R=ht(6),e=ht(3),nt=ht(33),ft=ht(34);const $=1e3,w=9,y=new WeakSet;function W(ot){return{width:ot[2]-ot[0],height:ot[3]-ot[1]}}class P{static create(l){switch(l.data.annotationType){case E.AnnotationType.LINK:return new d(l);case E.AnnotationType.TEXT:return new m(l);case E.AnnotationType.WIDGET:switch(l.data.fieldType){case"Tx":return new u(l);case"Btn":return l.data.radioButton?new s(l):l.data.checkBox?new h(l):new r(l);case"Ch":return new t(l)}return new a(l);case E.AnnotationType.POPUP:return new i(l);case E.AnnotationType.FREETEXT:return new T(l);case E.AnnotationType.LINE:return new x(l);case E.AnnotationType.SQUARE:return new X(l);case E.AnnotationType.CIRCLE:return new _(l);case E.AnnotationType.POLYLINE:return new Z(l);case E.AnnotationType.CARET:return new ut(l);case E.AnnotationType.INK:return new mt(l);case E.AnnotationType.POLYGON:return new Et(l);case E.AnnotationType.HIGHLIGHT:return new st(l);case E.AnnotationType.UNDERLINE:return new Y(l);case E.AnnotationType.SQUIGGLY:return new K(l);case E.AnnotationType.STRIKEOUT:return new bt(l);case E.AnnotationType.STAMP:return new Ct(l);case E.AnnotationType.FILEATTACHMENT:return new D(l);default:return new b(l)}}}class b{constructor(l,{isRenderable:g=!1,ignoreBorder:k=!1,createQuadrilaterals:I=!1}={}){this.isRenderable=g,this.data=l.data,this.layer=l.layer,this.page=l.page,this.viewport=l.viewport,this.linkService=l.linkService,this.downloadManager=l.downloadManager,this.imageResourcesPath=l.imageResourcesPath,this.renderForms=l.renderForms,this.svgFactory=l.svgFactory,this.annotationStorage=l.annotationStorage,this.enableScripting=l.enableScripting,this.hasJSActions=l.hasJSActions,this._fieldObjects=l.fieldObjects,g&&(this.container=this._createContainer(k)),I&&(this.quadrilaterals=this._createQuadrilaterals(k))}_createContainer(l=!1){const{data:g,page:k,viewport:I}=this,M=document.createElement("section");M.setAttribute("data-annotation-id",g.id);const{pageWidth:J,pageHeight:pt,pageX:St,pageY:Mt}=I.rawDims,{width:ct,height:xt}=W(g.rect),Tt=E.Util.normalizeRect([g.rect[0],k.view[3]-g.rect[1]+k.view[1],g.rect[2],k.view[3]-g.rect[3]+k.view[1]]);if(!l&&g.borderStyle.width>0){M.style.borderWidth="".concat(g.borderStyle.width,"px");const Nt=g.borderStyle.horizontalCornerRadius,te=g.borderStyle.verticalCornerRadius;if(Nt>0||te>0){const Zt="calc(".concat(Nt,"px * var(--scale-factor)) / calc(").concat(te,"px * var(--scale-factor))");M.style.borderRadius=Zt}else if(this instanceof s){const Zt="calc(".concat(ct,"px * var(--scale-factor)) / calc(").concat(xt,"px * var(--scale-factor))");M.style.borderRadius=Zt}switch(g.borderStyle.style){case E.AnnotationBorderStyleType.SOLID:M.style.borderStyle="solid";break;case E.AnnotationBorderStyleType.DASHED:M.style.borderStyle="dashed";break;case E.AnnotationBorderStyleType.BEVELED:(0,E.warn)("Unimplemented border style: beveled");break;case E.AnnotationBorderStyleType.INSET:(0,E.warn)("Unimplemented border style: inset");break;case E.AnnotationBorderStyleType.UNDERLINE:M.style.borderBottomStyle="solid";break}const re=g.borderColor||null;re?M.style.borderColor=E.Util.makeHexColor(re[0]|0,re[1]|0,re[2]|0):M.style.borderWidth=0}M.style.left="".concat(100*(Tt[0]-St)/J,"%"),M.style.top="".concat(100*(Tt[1]-Mt)/pt,"%");const{rotation:Lt}=g;return g.hasOwnCanvas||Lt===0?(M.style.width="".concat(100*ct/J,"%"),M.style.height="".concat(100*xt/pt,"%")):this.setRotation(Lt,M),M}setRotation(l,g=this.container){const{pageWidth:k,pageHeight:I}=this.viewport.rawDims,{width:M,height:J}=W(this.data.rect);let pt,St;l%180===0?(pt=100*M/k,St=100*J/I):(pt=100*J/k,St=100*M/I),g.style.width="".concat(pt,"%"),g.style.height="".concat(St,"%"),g.setAttribute("data-main-rotation",(360-l)%360)}get _commonActions(){const l=(g,k,I)=>{const M=I.detail[g];I.target.style[k]=nt.ColorConverters["".concat(M[0],"_HTML")](M.slice(1))};return(0,E.shadow)(this,"_commonActions",{display:g=>{const k=g.detail.display%2===1;this.container.style.visibility=k?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:k,print:g.detail.display===0||g.detail.display===3})},print:g=>{this.annotationStorage.setValue(this.data.id,{print:g.detail.print})},hidden:g=>{this.container.style.visibility=g.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:g.detail.hidden})},focus:g=>{setTimeout(()=>g.target.focus({preventScroll:!1}),0)},userName:g=>{g.target.title=g.detail.userName},readonly:g=>{g.detail.readonly?g.target.setAttribute("readonly",""):g.target.removeAttribute("readonly")},required:g=>{this._setRequired(g.target,g.detail.required)},bgColor:g=>{l("bgColor","backgroundColor",g)},fillColor:g=>{l("fillColor","backgroundColor",g)},fgColor:g=>{l("fgColor","color",g)},textColor:g=>{l("textColor","color",g)},borderColor:g=>{l("borderColor","borderColor",g)},strokeColor:g=>{l("strokeColor","borderColor",g)},rotation:g=>{const k=g.detail.rotation;this.setRotation(k),this.annotationStorage.setValue(this.data.id,{rotation:k})}})}_dispatchEventFromSandbox(l,g){const k=this._commonActions;for(const I of Object.keys(g.detail)){const M=l[I]||k[I];M==null||M(g)}}_setDefaultPropertiesFromJS(l){if(!this.enableScripting)return;const g=this.annotationStorage.getRawValue(this.data.id);if(!g)return;const k=this._commonActions;for(const[I,M]of Object.entries(g)){const J=k[I];if(J){const pt={detail:{[I]:M},target:l};J(pt),delete g[I]}}}_createQuadrilaterals(l=!1){if(!this.data.quadPoints)return null;const g=[],k=this.data.rect;for(const I of this.data.quadPoints)this.data.rect=[I[2].x,I[2].y,I[1].x,I[1].y],g.push(this._createContainer(l));return this.data.rect=k,g}_createPopup(l,g){let k=this.container;this.quadrilaterals&&(l=l||this.quadrilaterals,k=this.quadrilaterals[0]),l||(l=document.createElement("div"),l.className="popupTriggerArea",k.append(l));const M=new v({container:k,trigger:l,color:g.color,titleObj:g.titleObj,modificationDate:g.modificationDate,contentsObj:g.contentsObj,richText:g.richText,hideWrapper:!0}).render();M.style.left="100%",k.append(M)}_renderQuadrilaterals(l){for(const g of this.quadrilaterals)g.className=l;return this.quadrilaterals}render(){(0,E.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(l,g=null){const k=[];if(this._fieldObjects){const I=this._fieldObjects[l];if(I)for(const{page:M,id:J,exportValues:pt}of I){if(M===-1||J===g)continue;const St=typeof pt=="string"?pt:null,Mt=document.querySelector('[data-element-id="'.concat(J,'"]'));if(Mt&&!y.has(Mt)){(0,E.warn)("_getElementsByName - element not allowed: ".concat(J));continue}k.push({id:J,exportValue:St,domElement:Mt})}return k}for(const I of document.getElementsByName(l)){const{exportValue:M}=I,J=I.getAttribute("data-element-id");J!==g&&y.has(I)&&k.push({id:J,exportValue:M,domElement:I})}return k}}class d extends b{constructor(g,k=null){super(g,{isRenderable:!0,ignoreBorder:!!(k!=null&&k.ignoreBorder),createQuadrilaterals:!0});gt(this,o);gt(this,O);this.isTooltipOnly=g.data.isTooltipOnly}render(){const{data:g,linkService:k}=this,I=document.createElement("a");I.setAttribute("data-element-id",g.id);let M=!1;return g.url?(k.addLinkAttributes(I,g.url,g.newWindow),M=!0):g.action?(this._bindNamedAction(I,g.action),M=!0):g.attachment?(this._bindAttachment(I,g.attachment),M=!0):g.setOCGState?(wt(this,O,cr).call(this,I,g.setOCGState),M=!0):g.dest?(this._bindLink(I,g.dest),M=!0):(g.actions&&(g.actions.Action||g.actions["Mouse Up"]||g.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(I,g),M=!0),g.resetForm?(this._bindResetFormAction(I,g.resetForm),M=!0):this.isTooltipOnly&&!M&&(this._bindLink(I,""),M=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((J,pt)=>{const St=pt===0?I:I.cloneNode();return J.append(St),J}):(this.container.className="linkAnnotation",M&&this.container.append(I),this.container)}_bindLink(g,k){g.href=this.linkService.getDestinationHash(k),g.onclick=()=>(k&&this.linkService.goToDestination(k),!1),(k||k==="")&&wt(this,o,vn).call(this)}_bindNamedAction(g,k){g.href=this.linkService.getAnchorUrl(""),g.onclick=()=>(this.linkService.executeNamedAction(k),!1),wt(this,o,vn).call(this)}_bindAttachment(g,k){g.href=this.linkService.getAnchorUrl(""),g.onclick=()=>{var I;return(I=this.downloadManager)==null||I.openOrDownloadData(this.container,k.content,k.filename),!1},wt(this,o,vn).call(this)}_bindJSAction(g,k){g.href=this.linkService.getAnchorUrl("");const I=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const M of Object.keys(k.actions)){const J=I.get(M);J&&(g[J]=()=>{var pt;return(pt=this.linkService.eventBus)==null||pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k.id,name:M}}),!1})}g.onclick||(g.onclick=()=>!1),wt(this,o,vn).call(this)}_bindResetFormAction(g,k){const I=g.onclick;if(I||(g.href=this.linkService.getAnchorUrl("")),wt(this,o,vn).call(this),!this._fieldObjects){(0,E.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),I||(g.onclick=()=>!1);return}g.onclick=()=>{var xt;I==null||I();const{fields:M,refs:J,include:pt}=k,St=[];if(M.length!==0||J.length!==0){const Tt=new Set(J);for(const Lt of M){const Nt=this._fieldObjects[Lt]||[];for(const{id:te}of Nt)Tt.add(te)}for(const Lt of Object.values(this._fieldObjects))for(const Nt of Lt)Tt.has(Nt.id)===pt&&St.push(Nt)}else for(const Tt of Object.values(this._fieldObjects))St.push(...Tt);const Mt=this.annotationStorage,ct=[];for(const Tt of St){const{id:Lt}=Tt;switch(ct.push(Lt),Tt.type){case"text":{const te=Tt.defaultValue||"";Mt.setValue(Lt,{value:te});break}case"checkbox":case"radiobutton":{const te=Tt.defaultValue===Tt.exportValues;Mt.setValue(Lt,{value:te});break}case"combobox":case"listbox":{const te=Tt.defaultValue||"";Mt.setValue(Lt,{value:te});break}default:continue}const Nt=document.querySelector('[data-element-id="'.concat(Lt,'"]'));if(Nt){if(!y.has(Nt)){(0,E.warn)("_bindResetFormAction - element not allowed: ".concat(Lt));continue}}else continue;Nt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((xt=this.linkService.eventBus)==null||xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ct,name:"ResetForm"}})),!1}}}o=new WeakSet,vn=function(){this.container.setAttribute("data-internal-link","")},O=new WeakSet,cr=function(g,k){g.href=this.linkService.getAnchorUrl(""),g.onclick=()=>(this.linkService.executeSetOCGState(k),!1),wt(this,o,vn).call(this)};class m extends b{constructor(l){var k,I,M;const g=!!(l.data.hasPopup||(k=l.data.titleObj)!=null&&k.str||(I=l.data.contentsObj)!=null&&I.str||(M=l.data.richText)!=null&&M.str);super(l,{isRenderable:g})}render(){this.container.className="textAnnotation";const l=document.createElement("img");return l.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",l.alt="[{{type}} Annotation]",l.dataset.l10nId="text_annotation_type",l.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(l,this.data),this.container.append(l),this.container}}class a extends b{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(l){const{isWin:g,isMac:k}=E.FeatureTest.platform;return g&&l.ctrlKey||k&&l.metaKey}_setEventListener(l,g,k,I){g.includes("mouse")?l.addEventListener(g,M=>{var J;(J=this.linkService.eventBus)==null||J.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:k,value:I(M),shift:M.shiftKey,modifier:this._getKeyModifier(M)}})}):l.addEventListener(g,M=>{var J;(J=this.linkService.eventBus)==null||J.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:k,value:I(M)}})})}_setEventListeners(l,g,k){var I;for(const[M,J]of g)(J==="Action"||(I=this.data.actions)!=null&&I[J])&&this._setEventListener(l,M,J,k)}_setBackgroundColor(l){const g=this.data.backgroundColor||null;l.style.backgroundColor=g===null?"transparent":E.Util.makeHexColor(g[0],g[1],g[2])}_setTextStyle(l){const g=["left","center","right"],{fontColor:k}=this.data.defaultAppearanceData,I=this.data.defaultAppearanceData.fontSize||w,M=l.style;let J;const pt=2,St=Mt=>Math.round(10*Mt)/10;if(this.data.multiLine){const Mt=Math.abs(this.data.rect[3]-this.data.rect[1]-pt),ct=Math.round(Mt/(E.LINE_FACTOR*I))||1,xt=Mt/ct;J=Math.min(I,St(xt/E.LINE_FACTOR))}else{const Mt=Math.abs(this.data.rect[3]-this.data.rect[1]-pt);J=Math.min(I,St(Mt/E.LINE_FACTOR))}M.fontSize="calc(".concat(J,"px * var(--scale-factor))"),M.color=E.Util.makeHexColor(k[0],k[1],k[2]),this.data.textAlignment!==null&&(M.textAlign=g[this.data.textAlignment])}_setRequired(l,g){g?l.setAttribute("required",!0):l.removeAttribute("required"),l.setAttribute("aria-required",g)}}class u extends a{constructor(l){const g=l.renderForms||!l.data.hasAppearance&&!!l.data.fieldValue;super(l,{isRenderable:g})}setPropertyOnSiblings(l,g,k,I){const M=this.annotationStorage;for(const J of this._getElementsByName(l.name,l.id))J.domElement&&(J.domElement[g]=k),M.setValue(J.id,{[I]:k})}render(){var I;const l=this.annotationStorage,g=this.data.id;this.container.className="textWidgetAnnotation";let k=null;if(this.renderForms){const M=l.getValue(g,{value:this.data.fieldValue});let J=M.formattedValue||M.value||"";const pt=l.getValue(g,{charLimit:this.data.maxLen}).charLimit;pt&&J.length>pt&&(J=J.slice(0,pt));const St={userValue:J,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(k=document.createElement("textarea"),k.textContent=J,this.data.doNotScroll&&(k.style.overflowY="hidden")):(k=document.createElement("input"),k.type="text",k.setAttribute("value",J),this.data.doNotScroll&&(k.style.overflowX="hidden")),y.add(k),k.setAttribute("data-element-id",g),k.disabled=this.data.readOnly,k.name=this.data.fieldName,k.tabIndex=$,this._setRequired(k,this.data.required),pt&&(k.maxLength=pt),k.addEventListener("input",ct=>{l.setValue(g,{value:ct.target.value}),this.setPropertyOnSiblings(k,"value",ct.target.value,"value")}),k.addEventListener("resetform",ct=>{var Tt;const xt=(Tt=this.data.defaultFieldValue)!=null?Tt:"";k.value=St.userValue=xt,St.formattedValue=null});let Mt=ct=>{const{formattedValue:xt}=St;xt!=null&&(ct.target.value=xt),ct.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){k.addEventListener("focus",xt=>{const{target:Tt}=xt;St.userValue&&(Tt.value=St.userValue),St.lastCommittedValue=Tt.value,St.commitKey=1}),k.addEventListener("updatefromsandbox",xt=>{const Tt={value(Lt){var Nt;St.userValue=(Nt=Lt.detail.value)!=null?Nt:"",l.setValue(g,{value:St.userValue.toString()}),Lt.target.value=St.userValue},formattedValue(Lt){const{formattedValue:Nt}=Lt.detail;St.formattedValue=Nt,Nt!=null&&Lt.target!==document.activeElement&&(Lt.target.value=Nt),l.setValue(g,{formattedValue:Nt})},selRange(Lt){Lt.target.setSelectionRange(...Lt.detail.selRange)},charLimit:Lt=>{var Zt;const{charLimit:Nt}=Lt.detail,{target:te}=Lt;if(Nt===0){te.removeAttribute("maxLength");return}te.setAttribute("maxLength",Nt);let re=St.userValue;!re||re.length<=Nt||(re=re.slice(0,Nt),te.value=St.userValue=re,l.setValue(g,{value:re}),(Zt=this.linkService.eventBus)==null||Zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:re,willCommit:!0,commitKey:1,selStart:te.selectionStart,selEnd:te.selectionEnd}}))}};this._dispatchEventFromSandbox(Tt,xt)}),k.addEventListener("keydown",xt=>{var Nt;St.commitKey=1;let Tt=-1;if(xt.key==="Escape"?Tt=0:xt.key==="Enter"&&!this.data.multiLine?Tt=2:xt.key==="Tab"&&(St.commitKey=3),Tt===-1)return;const{value:Lt}=xt.target;St.lastCommittedValue!==Lt&&(St.lastCommittedValue=Lt,St.userValue=Lt,(Nt=this.linkService.eventBus)==null||Nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:Lt,willCommit:!0,commitKey:Tt,selStart:xt.target.selectionStart,selEnd:xt.target.selectionEnd}}))});const ct=Mt;Mt=null,k.addEventListener("blur",xt=>{var Lt;if(!xt.relatedTarget)return;const{value:Tt}=xt.target;St.userValue=Tt,St.lastCommittedValue!==Tt&&((Lt=this.linkService.eventBus)==null||Lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:Tt,willCommit:!0,commitKey:St.commitKey,selStart:xt.target.selectionStart,selEnd:xt.target.selectionEnd}})),ct(xt)}),(I=this.data.actions)!=null&&I.Keystroke&&k.addEventListener("beforeinput",xt=>{var j;St.lastCommittedValue=null;const{data:Tt,target:Lt}=xt,{value:Nt,selectionStart:te,selectionEnd:re}=Lt;let Zt=te,L=re;switch(xt.inputType){case"deleteWordBackward":{const q=Nt.substring(0,te).match(/\w*[^\w]*$/);q&&(Zt-=q[0].length);break}case"deleteWordForward":{const q=Nt.substring(te).match(/^[^\w]*\w*/);q&&(L+=q[0].length);break}case"deleteContentBackward":te===re&&(Zt-=1);break;case"deleteContentForward":te===re&&(L+=1);break}xt.preventDefault(),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:Nt,change:Tt||"",willCommit:!1,selStart:Zt,selEnd:L}})}),this._setEventListeners(k,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],xt=>xt.target.value)}if(Mt&&k.addEventListener("blur",Mt),this.data.comb){const xt=(this.data.rect[2]-this.data.rect[0])/pt;k.classList.add("comb"),k.style.letterSpacing="calc(".concat(xt,"px * var(--scale-factor) - 1ch)")}}else k=document.createElement("div"),k.textContent=this.data.fieldValue,k.style.verticalAlign="middle",k.style.display="table-cell";return this._setTextStyle(k),this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class h extends a{constructor(l){super(l,{isRenderable:l.renderForms})}render(){const l=this.annotationStorage,g=this.data,k=g.id;let I=l.getValue(k,{value:g.exportValue===g.fieldValue}).value;typeof I=="string"&&(I=I!=="Off",l.setValue(k,{value:I})),this.container.className="buttonWidgetAnnotation checkBox";const M=document.createElement("input");return y.add(M),M.setAttribute("data-element-id",k),M.disabled=g.readOnly,this._setRequired(M,this.data.required),M.type="checkbox",M.name=g.fieldName,I&&M.setAttribute("checked",!0),M.setAttribute("exportValue",g.exportValue),M.tabIndex=$,M.addEventListener("change",J=>{const{name:pt,checked:St}=J.target;for(const Mt of this._getElementsByName(pt,k)){const ct=St&&Mt.exportValue===g.exportValue;Mt.domElement&&(Mt.domElement.checked=ct),l.setValue(Mt.id,{value:ct})}l.setValue(k,{value:St})}),M.addEventListener("resetform",J=>{const pt=g.defaultFieldValue||"Off";J.target.checked=pt===g.exportValue}),this.enableScripting&&this.hasJSActions&&(M.addEventListener("updatefromsandbox",J=>{const pt={value(St){St.target.checked=St.detail.value!=="Off",l.setValue(k,{value:St.target.checked})}};this._dispatchEventFromSandbox(pt,J)}),this._setEventListeners(M,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],J=>J.target.checked)),this._setBackgroundColor(M),this._setDefaultPropertiesFromJS(M),this.container.append(M),this.container}}class s extends a{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const l=this.annotationStorage,g=this.data,k=g.id;let I=l.getValue(k,{value:g.fieldValue===g.buttonValue}).value;typeof I=="string"&&(I=I!==g.buttonValue,l.setValue(k,{value:I}));const M=document.createElement("input");if(y.add(M),M.setAttribute("data-element-id",k),M.disabled=g.readOnly,this._setRequired(M,this.data.required),M.type="radio",M.name=g.fieldName,I&&M.setAttribute("checked",!0),M.tabIndex=$,M.addEventListener("change",J=>{const{name:pt,checked:St}=J.target;for(const Mt of this._getElementsByName(pt,k))l.setValue(Mt.id,{value:!1});l.setValue(k,{value:St})}),M.addEventListener("resetform",J=>{const pt=g.defaultFieldValue;J.target.checked=pt!=null&&pt===g.buttonValue}),this.enableScripting&&this.hasJSActions){const J=g.buttonValue;M.addEventListener("updatefromsandbox",pt=>{const St={value:Mt=>{const ct=J===Mt.detail.value;for(const xt of this._getElementsByName(Mt.target.name)){const Tt=ct&&xt.id===k;xt.domElement&&(xt.domElement.checked=Tt),l.setValue(xt.id,{value:Tt})}}};this._dispatchEventFromSandbox(St,pt)}),this._setEventListeners(M,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],pt=>pt.target.checked)}return this._setBackgroundColor(M),this._setDefaultPropertiesFromJS(M),this.container.append(M),this.container}}class r extends d{constructor(l){super(l,{ignoreBorder:l.data.hasAppearance})}render(){const l=super.render();l.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(l.title=this.data.alternativeText);const g=l.lastChild;return this.enableScripting&&this.hasJSActions&&g&&(this._setDefaultPropertiesFromJS(g),g.addEventListener("updatefromsandbox",k=>{this._dispatchEventFromSandbox({},k)})),l}}class t extends a{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const l=this.annotationStorage,g=this.data.id,k=l.getValue(g,{value:this.data.fieldValue}),I=document.createElement("select");y.add(I),I.setAttribute("data-element-id",g),I.disabled=this.data.readOnly,this._setRequired(I,this.data.required),I.name=this.data.fieldName,I.tabIndex=$;let M=this.data.combo&&this.data.options.length>0;this.data.combo||(I.size=this.data.options.length,this.data.multiSelect&&(I.multiple=!0)),I.addEventListener("resetform",ct=>{const xt=this.data.defaultFieldValue;for(const Tt of I.options)Tt.selected=Tt.value===xt});for(const ct of this.data.options){const xt=document.createElement("option");xt.textContent=ct.displayValue,xt.value=ct.exportValue,k.value.includes(ct.exportValue)&&(xt.setAttribute("selected",!0),M=!1),I.append(xt)}let J=null;if(M){const ct=document.createElement("option");ct.value=" ",ct.setAttribute("hidden",!0),ct.setAttribute("selected",!0),I.prepend(ct),J=()=>{ct.remove(),I.removeEventListener("input",J),J=null},I.addEventListener("input",J)}const pt=ct=>{const xt=ct?"value":"textContent",{options:Tt,multiple:Lt}=I;return Lt?Array.prototype.filter.call(Tt,Nt=>Nt.selected).map(Nt=>Nt[xt]):Tt.selectedIndex===-1?null:Tt[Tt.selectedIndex][xt]};let St=pt(!1);const Mt=ct=>{const xt=ct.target.options;return Array.prototype.map.call(xt,Tt=>({displayValue:Tt.textContent,exportValue:Tt.value}))};return this.enableScripting&&this.hasJSActions?(I.addEventListener("updatefromsandbox",ct=>{const xt={value(Tt){J==null||J();const Lt=Tt.detail.value,Nt=new Set(Array.isArray(Lt)?Lt:[Lt]);for(const te of I.options)te.selected=Nt.has(te.value);l.setValue(g,{value:pt(!0)}),St=pt(!1)},multipleSelection(Tt){I.multiple=!0},remove(Tt){const Lt=I.options,Nt=Tt.detail.remove;Lt[Nt].selected=!1,I.remove(Nt),Lt.length>0&&Array.prototype.findIndex.call(Lt,re=>re.selected)===-1&&(Lt[0].selected=!0),l.setValue(g,{value:pt(!0),items:Mt(Tt)}),St=pt(!1)},clear(Tt){for(;I.length!==0;)I.remove(0);l.setValue(g,{value:null,items:[]}),St=pt(!1)},insert(Tt){const{index:Lt,displayValue:Nt,exportValue:te}=Tt.detail.insert,re=I.children[Lt],Zt=document.createElement("option");Zt.textContent=Nt,Zt.value=te,re?re.before(Zt):I.append(Zt),l.setValue(g,{value:pt(!0),items:Mt(Tt)}),St=pt(!1)},items(Tt){const{items:Lt}=Tt.detail;for(;I.length!==0;)I.remove(0);for(const Nt of Lt){const{displayValue:te,exportValue:re}=Nt,Zt=document.createElement("option");Zt.textContent=te,Zt.value=re,I.append(Zt)}I.options.length>0&&(I.options[0].selected=!0),l.setValue(g,{value:pt(!0),items:Mt(Tt)}),St=pt(!1)},indices(Tt){const Lt=new Set(Tt.detail.indices);for(const Nt of Tt.target.options)Nt.selected=Lt.has(Nt.index);l.setValue(g,{value:pt(!0)}),St=pt(!1)},editable(Tt){Tt.target.disabled=!Tt.detail.editable}};this._dispatchEventFromSandbox(xt,ct)}),I.addEventListener("input",ct=>{var Tt;const xt=pt(!0);l.setValue(g,{value:xt}),ct.preventDefault(),(Tt=this.linkService.eventBus)==null||Tt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:St,changeEx:xt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(I,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ct=>ct.target.value)):I.addEventListener("input",function(ct){l.setValue(g,{value:pt(!0)})}),this.data.combo&&this._setTextStyle(I),this._setBackgroundColor(I),this._setDefaultPropertiesFromJS(I),this.container.append(I),this.container}}const V=class V extends b{constructor(l){var I,M,J;const{data:g}=l,k=!V.IGNORE_TYPES.has(g.parentType)&&!!((I=g.titleObj)!=null&&I.str||(M=g.contentsObj)!=null&&M.str||(J=g.richText)!=null&&J.str);super(l,{isRenderable:k})}render(){this.container.className="popupAnnotation";const l=this.layer.querySelectorAll('[data-annotation-id="'.concat(this.data.parentId,'"]'));if(l.length===0)return this.container;const g=new v({container:this.container,trigger:Array.from(l),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),k=this.page,I=E.Util.normalizeRect([this.data.parentRect[0],k.view[3]-this.data.parentRect[1]+k.view[1],this.data.parentRect[2],k.view[3]-this.data.parentRect[3]+k.view[1]]),M=I[0]+this.data.parentRect[2]-this.data.parentRect[0],J=I[1],{pageWidth:pt,pageHeight:St,pageX:Mt,pageY:ct}=this.viewport.rawDims;return this.container.style.left="".concat(100*(M-Mt)/pt,"%"),this.container.style.top="".concat(100*(J-ct)/St,"%"),this.container.append(g.render()),this.container}};Ne(V,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));let i=V;class v{constructor(l){this.container=l.container,this.trigger=l.trigger,this.color=l.color,this.titleObj=l.titleObj,this.modificationDate=l.modificationDate,this.contentsObj=l.contentsObj,this.richText=l.richText,this.hideWrapper=l.hideWrapper||!1,this.pinned=!1}render(){var pt,St;const g=document.createElement("div");g.className="popupWrapper",this.hideElement=this.hideWrapper?g:this.container,this.hideElement.hidden=!0;const k=document.createElement("div");k.className="popup";const I=this.color;if(I){const Mt=.7*(255-I[0])+I[0],ct=.7*(255-I[1])+I[1],xt=.7*(255-I[2])+I[2];k.style.backgroundColor=E.Util.makeHexColor(Mt|0,ct|0,xt|0)}const M=document.createElement("h1");M.dir=this.titleObj.dir,M.textContent=this.titleObj.str,k.append(M);const J=R.PDFDateString.toDateObject(this.modificationDate);if(J){const Mt=document.createElement("span");Mt.className="popupDate",Mt.textContent="{{date}}, {{time}}",Mt.dataset.l10nId="annotation_date_string",Mt.dataset.l10nArgs=JSON.stringify({date:J.toLocaleDateString(),time:J.toLocaleTimeString()}),k.append(Mt)}if((pt=this.richText)!=null&&pt.str&&(!((St=this.contentsObj)!=null&&St.str)||this.contentsObj.str===this.richText.str))ft.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:k}),k.lastChild.className="richText popupContent";else{const Mt=this._formatContents(this.contentsObj);k.append(Mt)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const Mt of this.trigger)Mt.addEventListener("click",this._toggle.bind(this)),Mt.addEventListener("mouseover",this._show.bind(this,!1)),Mt.addEventListener("mouseout",this._hide.bind(this,!1));return k.addEventListener("click",this._hide.bind(this,!0)),g.append(k),g}_formatContents({str:l,dir:g}){const k=document.createElement("p");k.className="popupContent",k.dir=g;const I=l.split(/(?:\r\n?|\n)/);for(let M=0,J=I.length;M<J;++M){const pt=I[M];k.append(document.createTextNode(pt)),M<J-1&&k.append(document.createElement("br"))}return k}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(l=!1){l&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(l=!0){l&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class T extends b{constructor(l){var k,I,M;const g=!!(l.data.hasPopup||(k=l.data.titleObj)!=null&&k.str||(I=l.data.contentsObj)!=null&&I.str||(M=l.data.richText)!=null&&M.str);super(l,{isRenderable:g,ignoreBorder:!0}),this.textContent=l.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const l=document.createElement("div");l.className="annotationTextContent",l.setAttribute("role","comment");for(const g of this.textContent){const k=document.createElement("span");k.textContent=g,l.append(k)}this.container.append(l)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class x extends b{constructor(l){var k,I,M;const g=!!(l.data.hasPopup||(k=l.data.titleObj)!=null&&k.str||(I=l.data.contentsObj)!=null&&I.str||(M=l.data.richText)!=null&&M.str);super(l,{isRenderable:g,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const l=this.data,{width:g,height:k}=W(l.rect),I=this.svgFactory.create(g,k,!0),M=this.svgFactory.createElement("svg:line");return M.setAttribute("x1",l.rect[2]-l.lineCoordinates[0]),M.setAttribute("y1",l.rect[3]-l.lineCoordinates[1]),M.setAttribute("x2",l.rect[2]-l.lineCoordinates[2]),M.setAttribute("y2",l.rect[3]-l.lineCoordinates[3]),M.setAttribute("stroke-width",l.borderStyle.width||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),I.append(M),this.container.append(I),this._createPopup(M,l),this.container}}class X extends b{constructor(l){var k,I,M;const g=!!(l.data.hasPopup||(k=l.data.titleObj)!=null&&k.str||(I=l.data.contentsObj)!=null&&I.str||(M=l.data.richText)!=null&&M.str);super(l,{isRenderable:g,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const l=this.data,{width:g,height:k}=W(l.rect),I=this.svgFactory.create(g,k,!0),M=l.borderStyle.width,J=this.svgFactory.createElement("svg:rect");return J.setAttribute("x",M/2),J.setAttribute("y",M/2),J.setAttribute("width",g-M),J.setAttribute("height",k-M),J.setAttribute("stroke-width",M||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),I.append(J),this.container.append(I),this._createPopup(J,l),this.container}}class _ extends b{constructor(l){var k,I,M;const g=!!(l.data.hasPopup||(k=l.data.titleObj)!=null&&k.str||(I=l.data.contentsObj)!=null&&I.str||(M=l.data.richText)!=null&&M.str);super(l,{isRenderable:g,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const l=this.data,{width:g,height:k}=W(l.rect),I=this.svgFactory.create(g,k,!0),M=l.borderStyle.width,J=this.svgFactory.createElement("svg:ellipse");return J.setAttribute("cx",g/2),J.setAttribute("cy",k/2),J.setAttribute("rx",g/2-M/2),J.setAttribute("ry",k/2-M/2),J.setAttribute("stroke-width",M||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),I.append(J),this.container.append(I),this._createPopup(J,l),this.container}}class Z extends b{constructor(l){var k,I,M;const g=!!(l.data.hasPopup||(k=l.data.titleObj)!=null&&k.str||(I=l.data.contentsObj)!=null&&I.str||(M=l.data.richText)!=null&&M.str);super(l,{isRenderable:g,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const l=this.data,{width:g,height:k}=W(l.rect),I=this.svgFactory.create(g,k,!0);let M=[];for(const pt of l.vertices){const St=pt.x-l.rect[0],Mt=l.rect[3]-pt.y;M.push(St+","+Mt)}M=M.join(" ");const J=this.svgFactory.createElement(this.svgElementName);return J.setAttribute("points",M),J.setAttribute("stroke-width",l.borderStyle.width||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),I.append(J),this.container.append(I),this._createPopup(J,l),this.container}}class Et extends Z{constructor(l){super(l),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ut extends b{constructor(l){var k,I,M;const g=!!(l.data.hasPopup||(k=l.data.titleObj)!=null&&k.str||(I=l.data.contentsObj)!=null&&I.str||(M=l.data.richText)!=null&&M.str);super(l,{isRenderable:g,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class mt extends b{constructor(l){var k,I,M;const g=!!(l.data.hasPopup||(k=l.data.titleObj)!=null&&k.str||(I=l.data.contentsObj)!=null&&I.str||(M=l.data.richText)!=null&&M.str);super(l,{isRenderable:g,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const l=this.data,{width:g,height:k}=W(l.rect),I=this.svgFactory.create(g,k,!0);for(const M of l.inkLists){let J=[];for(const St of M){const Mt=St.x-l.rect[0],ct=l.rect[3]-St.y;J.push("".concat(Mt,",").concat(ct))}J=J.join(" ");const pt=this.svgFactory.createElement(this.svgElementName);pt.setAttribute("points",J),pt.setAttribute("stroke-width",l.borderStyle.width||1),pt.setAttribute("stroke","transparent"),pt.setAttribute("fill","transparent"),this._createPopup(pt,l),I.append(pt)}return this.container.append(I),this.container}}class st extends b{constructor(l){var k,I,M;const g=!!(l.data.hasPopup||(k=l.data.titleObj)!=null&&k.str||(I=l.data.contentsObj)!=null&&I.str||(M=l.data.richText)!=null&&M.str);super(l,{isRenderable:g,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class Y extends b{constructor(l){var k,I,M;const g=!!(l.data.hasPopup||(k=l.data.titleObj)!=null&&k.str||(I=l.data.contentsObj)!=null&&I.str||(M=l.data.richText)!=null&&M.str);super(l,{isRenderable:g,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class K extends b{constructor(l){var k,I,M;const g=!!(l.data.hasPopup||(k=l.data.titleObj)!=null&&k.str||(I=l.data.contentsObj)!=null&&I.str||(M=l.data.richText)!=null&&M.str);super(l,{isRenderable:g,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class bt extends b{constructor(l){var k,I,M;const g=!!(l.data.hasPopup||(k=l.data.titleObj)!=null&&k.str||(I=l.data.contentsObj)!=null&&I.str||(M=l.data.richText)!=null&&M.str);super(l,{isRenderable:g,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class Ct extends b{constructor(l){var k,I,M;const g=!!(l.data.hasPopup||(k=l.data.titleObj)!=null&&k.str||(I=l.data.contentsObj)!=null&&I.str||(M=l.data.richText)!=null&&M.str);super(l,{isRenderable:g,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class D extends b{constructor(l){var I;super(l,{isRenderable:!0});const{filename:g,content:k}=this.data.file;this.filename=(0,R.getFilenameFromUrl)(g,!0),this.content=k,(I=this.linkService.eventBus)==null||I.dispatch("fileattachmentannotation",{source:this,filename:g,content:k})}render(){var g,k;this.container.className="fileAttachmentAnnotation";let l;return this.data.hasAppearance?l=document.createElement("div"):(l=document.createElement("img"),l.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(this.data.name)?"paperclip":"pushpin",".svg")),l.className="popupTriggerArea",l.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((g=this.data.titleObj)!=null&&g.str||(k=this.data.contentsObj)!=null&&k.str||this.data.richText)&&this._createPopup(l,this.data),this.container.append(l),this.container}_download(){var l;(l=this.downloadManager)==null||l.openOrDownloadData(this.container,this.content,this.filename)}}const dt=class dt{static render(l){var St,Mt;const{annotations:g,div:k,viewport:I,accessibilityManager:M}=l;(0,R.setLayerDimensions)(k,I);const J={data:null,layer:k,page:l.page,viewport:I,linkService:l.linkService,downloadManager:l.downloadManager,imageResourcesPath:l.imageResourcesPath||"",renderForms:l.renderForms!==!1,svgFactory:new R.DOMSVGFactory,annotationStorage:l.annotationStorage||new e.AnnotationStorage,enableScripting:l.enableScripting===!0,hasJSActions:l.hasJSActions,fieldObjects:l.fieldObjects};let pt=0;for(const ct of g){if(ct.annotationType!==E.AnnotationType.POPUP){const{width:Lt,height:Nt}=W(ct.rect);if(Lt<=0||Nt<=0)continue}J.data=ct;const xt=P.create(J);if(!xt.isRenderable)continue;const Tt=xt.render();if(ct.hidden&&(Tt.style.visibility="hidden"),Array.isArray(Tt))for(const Lt of Tt)Lt.style.zIndex=pt++,wt(St=dt,G,Si).call(St,Lt,ct.id,k,M);else Tt.style.zIndex=pt++,xt instanceof i?k.prepend(Tt):wt(Mt=dt,G,Si).call(Mt,Tt,ct.id,k,M)}wt(this,vt,Ei).call(this,k,l.annotationCanvasMap)}static update(l){const{annotationCanvasMap:g,div:k,viewport:I}=l;(0,R.setLayerDimensions)(k,{rotation:I.rotation}),wt(this,vt,Ei).call(this,k,g),k.hidden=!1}};G=new WeakSet,Si=function(l,g,k,I){const M=l.firstChild||l;M.id="".concat(R.AnnotationPrefix).concat(g),k.append(l),I==null||I.moveElementInDOM(k,l,M,!1)},vt=new WeakSet,Ei=function(l,g){if(g){for(const[k,I]of g){const M=l.querySelector('[data-annotation-id="'.concat(k,'"]'));if(!M)continue;const{firstChild:J}=M;J?J.nodeName==="CANVAS"?J.replaceWith(I):J.before(I):M.append(I)}g.clear()}},gt(dt,G),gt(dt,vt);let c=dt;A.AnnotationLayer=c},(p,A)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.ColorConverters=void 0;function ht(R){return Math.floor(Math.max(0,Math.min(1,R))*255).toString(16).padStart(2,"0")}class E{static CMYK_G([e,nt,ft,$]){return["G",1-Math.min(1,.3*e+.59*ft+.11*nt+$)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_HTML([e]){const nt=ht(e);return"#".concat(nt).concat(nt).concat(nt)}static RGB_G([e,nt,ft]){return["G",.3*e+.59*nt+.11*ft]}static RGB_HTML([e,nt,ft]){const $=ht(e),w=ht(nt),y=ht(ft);return"#".concat($).concat(w).concat(y)}static T_HTML(){return"#00000000"}static CMYK_RGB([e,nt,ft,$]){return["RGB",1-Math.min(1,e+$),1-Math.min(1,ft+$),1-Math.min(1,nt+$)]}static CMYK_HTML(e){const nt=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(nt)}static RGB_CMYK([e,nt,ft]){const $=1-e,w=1-nt,y=1-ft,W=Math.min($,w,y);return["CMYK",$,w,y,W]}}A.ColorConverters=E},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.XfaLayer=void 0;var E=ht(19);class R{static setupStorage(nt,ft,$,w,y){const W=w.getValue(ft,{value:null});switch($.name){case"textarea":if(W.value!==null&&(nt.textContent=W.value),y==="print")break;nt.addEventListener("input",P=>{w.setValue(ft,{value:P.target.value})});break;case"input":if($.attributes.type==="radio"||$.attributes.type==="checkbox"){if(W.value===$.attributes.xfaOn?nt.setAttribute("checked",!0):W.value===$.attributes.xfaOff&&nt.removeAttribute("checked"),y==="print")break;nt.addEventListener("change",P=>{w.setValue(ft,{value:P.target.checked?P.target.getAttribute("xfaOn"):P.target.getAttribute("xfaOff")})})}else{if(W.value!==null&&nt.setAttribute("value",W.value),y==="print")break;nt.addEventListener("input",P=>{w.setValue(ft,{value:P.target.value})})}break;case"select":if(W.value!==null)for(const P of $.children)P.attributes.value===W.value&&(P.attributes.selected=!0);nt.addEventListener("input",P=>{const b=P.target.options,d=b.selectedIndex===-1?"":b[b.selectedIndex].value;w.setValue(ft,{value:d})});break}}static setAttributes({html:nt,element:ft,storage:$=null,intent:w,linkService:y}){const{attributes:W}=ft,P=nt instanceof HTMLAnchorElement;W.type==="radio"&&(W.name="".concat(W.name,"-").concat(w));for(const[b,d]of Object.entries(W))if(d!=null)switch(b){case"class":d.length&&nt.setAttribute(b,d.join(" "));break;case"dataId":break;case"id":nt.setAttribute("data-element-id",d);break;case"style":Object.assign(nt.style,d);break;case"textContent":nt.textContent=d;break;default:(!P||b!=="href"&&b!=="newWindow")&&nt.setAttribute(b,d)}P&&y.addLinkAttributes(nt,W.href,W.newWindow),$&&W.dataId&&this.setupStorage(nt,W.dataId,ft,$)}static render(nt){var m;const ft=nt.annotationStorage,$=nt.linkService,w=nt.xfaHtml,y=nt.intent||"display",W=document.createElement(w.name);w.attributes&&this.setAttributes({html:W,element:w,intent:y,linkService:$});const P=[[w,-1,W]],b=nt.div;if(b.append(W),nt.viewport){const a="matrix(".concat(nt.viewport.transform.join(","),")");b.style.transform=a}y!=="richText"&&b.setAttribute("class","xfaLayer xfaFont");const d=[];for(;P.length>0;){const[a,u,h]=P.at(-1);if(u+1===a.children.length){P.pop();continue}const s=a.children[++P.at(-1)[1]];if(s===null)continue;const{name:r}=s;if(r==="#text"){const i=document.createTextNode(s.value);d.push(i),h.append(i);continue}let t;if((m=s==null?void 0:s.attributes)!=null&&m.xmlns?t=document.createElementNS(s.attributes.xmlns,r):t=document.createElement(r),h.append(t),s.attributes&&this.setAttributes({html:t,element:s,storage:ft,intent:y,linkService:$}),s.children&&s.children.length>0)P.push([s,-1,t]);else if(s.value){const i=document.createTextNode(s.value);E.XfaText.shouldBuildText(r)&&d.push(i),t.append(i)}}for(const a of b.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))a.setAttribute("readOnly",!0);return{textDivs:d}}static update(nt){const ft="matrix(".concat(nt.viewport.transform.join(","),")");nt.div.style.transform=ft,nt.div.hidden=!1}}A.XfaLayer=R},(p,A,ht)=>{Object.defineProperty(A,"__esModule",{value:!0}),A.SVGGraphics=void 0;var E=ht(6),R=ht(1),e=ht(10);let nt=class{constructor(){(0,R.unreachable)("Not implemented: SVGGraphics")}};A.SVGGraphics=nt;{let m=function(t){let i=[];const v=[];for(const T of t){if(T.fn==="save"){i.push({fnId:92,fn:"group",items:[]}),v.push(i),i=i.at(-1).items;continue}T.fn==="restore"?i=v.pop():i.push(T)}return i},a=function(t){if(Number.isInteger(t))return t.toString();const i=t.toFixed(10);let v=i.length-1;if(i[v]!=="0")return i;do v--;while(i[v]==="0");return i.substring(0,i[v]==="."?v:v+1)},u=function(t){if(t[4]===0&&t[5]===0){if(t[1]===0&&t[2]===0)return t[0]===1&&t[3]===1?"":"scale(".concat(a(t[0])," ").concat(a(t[3]),")");if(t[0]===t[3]&&t[1]===-t[2]){const i=Math.acos(t[0])*180/Math.PI;return"rotate(".concat(a(i),")")}}else if(t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1)return"translate(".concat(a(t[4])," ").concat(a(t[5]),")");return"matrix(".concat(a(t[0])," ").concat(a(t[1])," ").concat(a(t[2])," ").concat(a(t[3])," ").concat(a(t[4])," ")+"".concat(a(t[5]),")")};const ft={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},$="http://www.w3.org/XML/1998/namespace",w="http://www.w3.org/1999/xlink",y=["butt","round","square"],W=["miter","round","bevel"],P=function(t,i="",v=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!v)return URL.createObjectURL(new Blob([t],{type:i}));const T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let x="data:".concat(i,";base64,");for(let X=0,_=t.length;X<_;X+=3){const Z=t[X]&255,Et=t[X+1]&255,ut=t[X+2]&255,mt=Z>>2,st=(Z&3)<<4|Et>>4,Y=X+1<_?(Et&15)<<2|ut>>6:64,K=X+2<_?ut&63:64;x+=T[mt]+T[st]+T[Y]+T[K]}return x},b=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),i=12,v=new Int32Array(256);for(let ut=0;ut<256;ut++){let mt=ut;for(let st=0;st<8;st++)mt&1?mt=3988292384^mt>>1&2147483647:mt=mt>>1&2147483647;v[ut]=mt}function T(ut,mt,st){let Y=-1;for(let K=mt;K<st;K++){const bt=(Y^ut[K])&255,Ct=v[bt];Y=Y>>>8^Ct}return Y^-1}function x(ut,mt,st,Y){let K=Y;const bt=mt.length;st[K]=bt>>24&255,st[K+1]=bt>>16&255,st[K+2]=bt>>8&255,st[K+3]=bt&255,K+=4,st[K]=ut.charCodeAt(0)&255,st[K+1]=ut.charCodeAt(1)&255,st[K+2]=ut.charCodeAt(2)&255,st[K+3]=ut.charCodeAt(3)&255,K+=4,st.set(mt,K),K+=mt.length;const Ct=T(st,Y+4,K);st[K]=Ct>>24&255,st[K+1]=Ct>>16&255,st[K+2]=Ct>>8&255,st[K+3]=Ct&255}function X(ut,mt,st){let Y=1,K=0;for(let bt=mt;bt<st;++bt)Y=(Y+(ut[bt]&255))%65521,K=(K+Y)%65521;return K<<16|Y}function _(ut){if(!e.isNodeJS)return Z(ut);try{let mt;parseInt(process.versions.node)>=8?mt=ut:mt=Buffer.from(ut);const st=require$$5.deflateSync(mt,{level:9});return st instanceof Uint8Array?st:new Uint8Array(st)}catch(mt){(0,R.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+mt)}return Z(ut)}function Z(ut){let mt=ut.length;const st=65535,Y=Math.ceil(mt/st),K=new Uint8Array(2+mt+Y*5+4);let bt=0;K[bt++]=120,K[bt++]=156;let Ct=0;for(;mt>st;)K[bt++]=0,K[bt++]=255,K[bt++]=255,K[bt++]=0,K[bt++]=0,K.set(ut.subarray(Ct,Ct+st),bt),bt+=st,Ct+=st,mt-=st;K[bt++]=1,K[bt++]=mt&255,K[bt++]=mt>>8&255,K[bt++]=~mt&65535&255,K[bt++]=(~mt&65535)>>8&255,K.set(ut.subarray(Ct),bt),bt+=ut.length-Ct;const D=X(ut,0,ut.length);return K[bt++]=D>>24&255,K[bt++]=D>>16&255,K[bt++]=D>>8&255,K[bt++]=D&255,K}function Et(ut,mt,st,Y){const K=ut.width,bt=ut.height;let Ct,D,c;const o=ut.data;switch(mt){case R.ImageKind.GRAYSCALE_1BPP:D=0,Ct=1,c=K+7>>3;break;case R.ImageKind.RGB_24BPP:D=2,Ct=8,c=K*3;break;case R.ImageKind.RGBA_32BPP:D=6,Ct=8,c=K*4;break;default:throw new Error("invalid format")}const C=new Uint8Array((1+c)*bt);let O=0,N=0;for(let dt=0;dt<bt;++dt)C[O++]=0,C.set(o.subarray(N,N+c),O),N+=c,O+=c;if(mt===R.ImageKind.GRAYSCALE_1BPP&&Y){O=0;for(let dt=0;dt<bt;dt++){O++;for(let ot=0;ot<c;ot++)C[O++]^=255}}const V=new Uint8Array([K>>24&255,K>>16&255,K>>8&255,K&255,bt>>24&255,bt>>16&255,bt>>8&255,bt&255,Ct,D,0,0,0]),G=_(C),at=t.length+i*3+V.length+G.length,vt=new Uint8Array(at);let lt=0;return vt.set(t,lt),lt+=t.length,x("IHDR",V,vt,lt),lt+=i+V.length,x("IDATA",G,vt,lt),lt+=i+G.length,x("IEND",new Uint8Array(0),vt,lt),P(vt,"image/png",st)}return function(mt,st,Y){const K=mt.kind===void 0?R.ImageKind.GRAYSCALE_1BPP:mt.kind;return Et(mt,K,st,Y)}}();class d{constructor(){this.fontSizeScale=1,this.fontWeight=ft.fontWeight,this.fontSize=0,this.textMatrix=R.IDENTITY_MATRIX,this.fontMatrix=R.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=R.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=ft.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,v){this.x=i,this.y=v}}let h=0,s=0,r=0;A.SVGGraphics=nt=class{constructor(t,i,v=!1){(0,E.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new E.DOMSVGFactory,this.current=new d,this.transformMatrix=R.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!v,this._operatorIdMapping=[];for(const T in R.OPS)this._operatorIdMapping[R.OPS[T]]=T}getObject(t,i=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):i}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const i=t.fnArray,v=t.argsArray;for(let T=0,x=i.length;T<x;T++)if(i[T]===R.OPS.dependency)for(const X of v[T]){const _=X.startsWith("g_")?this.commonObjs:this.objs,Z=new Promise(Et=>{_.get(X,Et)});this.current.dependencies.push(Z)}return Promise.all(this.current.dependencies)}transform(t,i,v,T,x,X){const _=[t,i,v,T,x,X];this.transformMatrix=R.Util.transform(this.transformMatrix,_),this.tgrp=null}getSVG(t,i){this.viewport=i;const v=this._initialize(i);return this.loadDependencies(t).then(()=>(this.transformMatrix=R.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),v))}convertOpList(t){const i=this._operatorIdMapping,v=t.argsArray,T=t.fnArray,x=[];for(let X=0,_=T.length;X<_;X++){const Z=T[X];x.push({fnId:Z,fn:i[Z],args:v[X]})}return m(x)}executeOpTree(t){for(const i of t){const v=i.fn,T=i.fnId,x=i.args;switch(T|0){case R.OPS.beginText:this.beginText();break;case R.OPS.dependency:break;case R.OPS.setLeading:this.setLeading(x);break;case R.OPS.setLeadingMoveText:this.setLeadingMoveText(x[0],x[1]);break;case R.OPS.setFont:this.setFont(x);break;case R.OPS.showText:this.showText(x[0]);break;case R.OPS.showSpacedText:this.showText(x[0]);break;case R.OPS.endText:this.endText();break;case R.OPS.moveText:this.moveText(x[0],x[1]);break;case R.OPS.setCharSpacing:this.setCharSpacing(x[0]);break;case R.OPS.setWordSpacing:this.setWordSpacing(x[0]);break;case R.OPS.setHScale:this.setHScale(x[0]);break;case R.OPS.setTextMatrix:this.setTextMatrix(x[0],x[1],x[2],x[3],x[4],x[5]);break;case R.OPS.setTextRise:this.setTextRise(x[0]);break;case R.OPS.setTextRenderingMode:this.setTextRenderingMode(x[0]);break;case R.OPS.setLineWidth:this.setLineWidth(x[0]);break;case R.OPS.setLineJoin:this.setLineJoin(x[0]);break;case R.OPS.setLineCap:this.setLineCap(x[0]);break;case R.OPS.setMiterLimit:this.setMiterLimit(x[0]);break;case R.OPS.setFillRGBColor:this.setFillRGBColor(x[0],x[1],x[2]);break;case R.OPS.setStrokeRGBColor:this.setStrokeRGBColor(x[0],x[1],x[2]);break;case R.OPS.setStrokeColorN:this.setStrokeColorN(x);break;case R.OPS.setFillColorN:this.setFillColorN(x);break;case R.OPS.shadingFill:this.shadingFill(x[0]);break;case R.OPS.setDash:this.setDash(x[0],x[1]);break;case R.OPS.setRenderingIntent:this.setRenderingIntent(x[0]);break;case R.OPS.setFlatness:this.setFlatness(x[0]);break;case R.OPS.setGState:this.setGState(x[0]);break;case R.OPS.fill:this.fill();break;case R.OPS.eoFill:this.eoFill();break;case R.OPS.stroke:this.stroke();break;case R.OPS.fillStroke:this.fillStroke();break;case R.OPS.eoFillStroke:this.eoFillStroke();break;case R.OPS.clip:this.clip("nonzero");break;case R.OPS.eoClip:this.clip("evenodd");break;case R.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case R.OPS.paintImageXObject:this.paintImageXObject(x[0]);break;case R.OPS.paintInlineImageXObject:this.paintInlineImageXObject(x[0]);break;case R.OPS.paintImageMaskXObject:this.paintImageMaskXObject(x[0]);break;case R.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(x[0],x[1]);break;case R.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case R.OPS.closePath:this.closePath();break;case R.OPS.closeStroke:this.closeStroke();break;case R.OPS.closeFillStroke:this.closeFillStroke();break;case R.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case R.OPS.nextLine:this.nextLine();break;case R.OPS.transform:this.transform(x[0],x[1],x[2],x[3],x[4],x[5]);break;case R.OPS.constructPath:this.constructPath(x[0],x[1]);break;case R.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,R.warn)("Unimplemented operator ".concat(v));break}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,i,v,T,x,X){const _=this.current;_.textMatrix=_.lineMatrix=[t,i,v,T,x,X],_.textMatrixScale=Math.hypot(t,i),_.x=_.lineX=0,_.y=_.lineY=0,_.xcoords=[],_.ycoords=[],_.tspan=this.svgFactory.createElement("svg:tspan"),_.tspan.setAttributeNS(null,"font-family",_.fontFamily),_.tspan.setAttributeNS(null,"font-size","".concat(a(_.fontSize),"px")),_.tspan.setAttributeNS(null,"y",a(-_.y)),_.txtElement=this.svgFactory.createElement("svg:text"),_.txtElement.append(_.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=R.IDENTITY_MATRIX,t.lineMatrix=R.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,i){const v=this.current;v.x=v.lineX+=t,v.y=v.lineY+=i,v.xcoords=[],v.ycoords=[],v.tspan=this.svgFactory.createElement("svg:tspan"),v.tspan.setAttributeNS(null,"font-family",v.fontFamily),v.tspan.setAttributeNS(null,"font-size","".concat(a(v.fontSize),"px")),v.tspan.setAttributeNS(null,"y",a(-v.y))}showText(t){const i=this.current,v=i.font,T=i.fontSize;if(T===0)return;const x=i.fontSizeScale,X=i.charSpacing,_=i.wordSpacing,Z=i.fontDirection,Et=i.textHScale*Z,ut=v.vertical,mt=ut?1:-1,st=v.defaultVMetrics,Y=T*i.fontMatrix[0];let K=0;for(const D of t){if(D===null){K+=Z*_;continue}else if(typeof D=="number"){K+=mt*D*T/1e3;continue}const c=(D.isSpace?_:0)+X,o=D.fontChar;let C,O,N=D.width;if(ut){let G;const at=D.vmetric||st;G=D.vmetric?at[1]:N*.5,G=-G*Y;const vt=at[2]*Y;N=at?-at[0]:N,C=G/x,O=(K+vt)/x}else C=K/x,O=0;(D.isInFont||v.missingFile)&&(i.xcoords.push(i.x+C),ut&&i.ycoords.push(-i.y+O),i.tspan.textContent+=o);let V;ut?V=N*Y-c*Z:V=N*Y+c*Z,K+=V}i.tspan.setAttributeNS(null,"x",i.xcoords.map(a).join(" ")),ut?i.tspan.setAttributeNS(null,"y",i.ycoords.map(a).join(" ")):i.tspan.setAttributeNS(null,"y",a(-i.y)),ut?i.y-=K:i.x+=K*Et,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size","".concat(a(i.fontSize),"px")),i.fontStyle!==ft.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==ft.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const bt=i.textRenderingMode&R.TextRenderingMode.FILL_STROKE_MASK;if(bt===R.TextRenderingMode.FILL||bt===R.TextRenderingMode.FILL_STROKE?(i.fillColor!==ft.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.textRenderingMode===R.TextRenderingMode.ADD_TO_PATH?i.tspan.setAttributeNS(null,"fill","transparent"):i.tspan.setAttributeNS(null,"fill","none"),bt===R.TextRenderingMode.STROKE||bt===R.TextRenderingMode.FILL_STROKE){const D=1/(i.textMatrixScale||1);this._setStrokeAttributes(i.tspan,D)}let Ct=i.textMatrix;i.textRise!==0&&(Ct=Ct.slice(),Ct[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform","".concat(u(Ct)," scale(").concat(a(Et),", -1)")),i.txtElement.setAttributeNS($,"xml:space","preserve"),i.txtElement.append(i.tspan),i.txtgrp.append(i.txtElement),this._ensureTransformGroup().append(i.txtElement)}setLeadingMoveText(t,i){this.setLeading(-i),this.moveText(t,i)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const i=P(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(t.loadedName,'";')+" src: url(".concat(i,"); }\n")}setFont(t){const i=this.current,v=this.commonObjs.get(t[0]);let T=t[1];i.font=v,this.embedFonts&&!v.missingFile&&!this.embeddedFonts[v.loadedName]&&(this.addFontStyle(v),this.embeddedFonts[v.loadedName]=v),i.fontMatrix=v.fontMatrix||R.FONT_IDENTITY_MATRIX;let x="normal";v.black?x="900":v.bold&&(x="bold");const X=v.italic?"italic":"normal";T<0?(T=-T,i.fontDirection=-1):i.fontDirection=1,i.fontSize=T,i.fontFamily=v.loadedName,i.fontWeight=x,i.fontStyle=X,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",a(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){var i;const t=this.current;t.textRenderingMode&R.TextRenderingMode.ADD_TO_PATH_FLAG&&((i=t.txtElement)!=null&&i.hasChildNodes())&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=y[t]}setLineJoin(t){this.current.lineJoin=W[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,i,v){this.current.strokeColor=R.Util.makeHexColor(t,i,v)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,i,v){this.current.fillColor=R.Util.makeHexColor(t,i,v),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const i=this.viewport.width,v=this.viewport.height,T=R.Util.inverseTransform(this.transformMatrix),x=R.Util.applyTransform([0,0],T),X=R.Util.applyTransform([0,v],T),_=R.Util.applyTransform([i,0],T),Z=R.Util.applyTransform([i,v],T),Et=Math.min(x[0],X[0],_[0],Z[0]),ut=Math.min(x[1],X[1],_[1],Z[1]),mt=Math.max(x[0],X[0],_[0],Z[0]),st=Math.max(x[1],X[1],_[1],Z[1]),Y=this.svgFactory.createElement("svg:rect");Y.setAttributeNS(null,"x",Et),Y.setAttributeNS(null,"y",ut),Y.setAttributeNS(null,"width",mt-Et),Y.setAttributeNS(null,"height",st-ut),Y.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&Y.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Y)}_makeColorN_Pattern(t){return t[0]==="TilingPattern"?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const i=t[1],v=t[2],T=t[3]||R.IDENTITY_MATRIX,[x,X,_,Z]=t[4],Et=t[5],ut=t[6],mt=t[7],st="shading".concat(r++),[Y,K,bt,Ct]=R.Util.normalizeRect([...R.Util.applyTransform([x,X],T),...R.Util.applyTransform([_,Z],T)]),[D,c]=R.Util.singularValueDecompose2dScale(T),o=Et*D,C=ut*c,O=this.svgFactory.createElement("svg:pattern");O.setAttributeNS(null,"id",st),O.setAttributeNS(null,"patternUnits","userSpaceOnUse"),O.setAttributeNS(null,"width",o),O.setAttributeNS(null,"height",C),O.setAttributeNS(null,"x","".concat(Y)),O.setAttributeNS(null,"y","".concat(K));const N=this.svg,V=this.transformMatrix,G=this.current.fillColor,at=this.current.strokeColor,vt=this.svgFactory.create(bt-Y,Ct-K);if(this.svg=vt,this.transformMatrix=T,mt===2){const lt=R.Util.makeHexColor(...i);this.current.fillColor=lt,this.current.strokeColor=lt}return this.executeOpTree(this.convertOpList(v)),this.svg=N,this.transformMatrix=V,this.current.fillColor=G,this.current.strokeColor=at,O.append(vt.childNodes[0]),this.defs.append(O),"url(#".concat(st,")")}_makeShadingPattern(t){switch(typeof t=="string"&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const i="shading".concat(r++),v=t[3];let T;switch(t[1]){case"axial":const x=t[4],X=t[5];T=this.svgFactory.createElement("svg:linearGradient"),T.setAttributeNS(null,"id",i),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"x1",x[0]),T.setAttributeNS(null,"y1",x[1]),T.setAttributeNS(null,"x2",X[0]),T.setAttributeNS(null,"y2",X[1]);break;case"radial":const _=t[4],Z=t[5],Et=t[6],ut=t[7];T=this.svgFactory.createElement("svg:radialGradient"),T.setAttributeNS(null,"id",i),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"cx",Z[0]),T.setAttributeNS(null,"cy",Z[1]),T.setAttributeNS(null,"r",ut),T.setAttributeNS(null,"fx",_[0]),T.setAttributeNS(null,"fy",_[1]),T.setAttributeNS(null,"fr",Et);break;default:throw new Error("Unknown RadialAxial type: ".concat(t[1]))}for(const x of v){const X=this.svgFactory.createElement("svg:stop");X.setAttributeNS(null,"offset",x[0]),X.setAttributeNS(null,"stop-color",x[1]),T.append(X)}return this.defs.append(T),"url(#".concat(i,")");case"Mesh":return(0,R.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(t[0]))}}setDash(t,i){this.current.dashArray=t,this.current.dashPhase=i}constructPath(t,i){const v=this.current;let T=v.x,x=v.y,X=[],_=0;for(const Z of t)switch(Z|0){case R.OPS.rectangle:T=i[_++],x=i[_++];const Et=i[_++],ut=i[_++],mt=T+Et,st=x+ut;X.push("M",a(T),a(x),"L",a(mt),a(x),"L",a(mt),a(st),"L",a(T),a(st),"Z");break;case R.OPS.moveTo:T=i[_++],x=i[_++],X.push("M",a(T),a(x));break;case R.OPS.lineTo:T=i[_++],x=i[_++],X.push("L",a(T),a(x));break;case R.OPS.curveTo:T=i[_+4],x=i[_+5],X.push("C",a(i[_]),a(i[_+1]),a(i[_+2]),a(i[_+3]),a(T),a(x)),_+=6;break;case R.OPS.curveTo2:X.push("C",a(T),a(x),a(i[_]),a(i[_+1]),a(i[_+2]),a(i[_+3])),T=i[_+2],x=i[_+3],_+=4;break;case R.OPS.curveTo3:T=i[_+2],x=i[_+3],X.push("C",a(i[_]),a(i[_+1]),a(T),a(x),a(T),a(x)),_+=4;break;case R.OPS.closePath:X.push("Z");break}X=X.join(" "),v.path&&t.length>0&&t[0]!==R.OPS.rectangle&&t[0]!==R.OPS.moveTo?X=v.path.getAttributeNS(null,"d")+X:(v.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(v.path)),v.path.setAttributeNS(null,"d",X),v.path.setAttributeNS(null,"fill","none"),v.element=v.path,v.setCurrentPoint(T,x)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element){this.pendingClip=null;return}const i="clippath".concat(h++),v=this.svgFactory.createElement("svg:clipPath");v.setAttributeNS(null,"id",i),v.setAttributeNS(null,"transform",u(this.transformMatrix));const T=t.element.cloneNode(!0);if(this.pendingClip==="evenodd"?T.setAttributeNS(null,"clip-rule","evenodd"):T.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,v.append(T),this.defs.append(v),t.activeClipUrl){t.clipGroup=null;for(const x of this.extraStack)x.clipGroup=null;v.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl="url(#".concat(i,")"),this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const i="".concat(t.path.getAttributeNS(null,"d"),"Z");t.path.setAttributeNS(null,"d",i)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[i,v]of t)switch(i){case"LW":this.setLineWidth(v);break;case"LC":this.setLineCap(v);break;case"LJ":this.setLineJoin(v);break;case"ML":this.setMiterLimit(v);break;case"D":this.setDash(v[0],v[1]);break;case"RI":this.setRenderingIntent(v);break;case"FL":this.setFlatness(v);break;case"Font":this.setFont(v);break;case"CA":this.setStrokeAlpha(v);break;case"ca":this.setFillAlpha(v);break;default:(0,R.warn)("Unimplemented graphic state operator ".concat(i));break}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,i=1){const v=this.current;let T=v.dashArray;i!==1&&T.length>0&&(T=T.map(function(x){return i*x})),t.setAttributeNS(null,"stroke",v.strokeColor),t.setAttributeNS(null,"stroke-opacity",v.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",a(v.miterLimit)),t.setAttributeNS(null,"stroke-linecap",v.lineCap),t.setAttributeNS(null,"stroke-linejoin",v.lineJoin),t.setAttributeNS(null,"stroke-width",a(i*v.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",T.map(a).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",a(i*v.dashPhase)+"px")}eoFill(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){const i=this.getObject(t);if(!i){(0,R.warn)("Dependent image with object ID ".concat(t," is not ready yet"));return}this.paintInlineImageXObject(i)}paintInlineImageXObject(t,i){const v=t.width,T=t.height,x=b(t,this.forceDataSchema,!!i),X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x","0"),X.setAttributeNS(null,"y","0"),X.setAttributeNS(null,"width",a(v)),X.setAttributeNS(null,"height",a(T)),this.current.element=X,this.clip("nonzero");const _=this.svgFactory.createElement("svg:image");_.setAttributeNS(w,"xlink:href",x),_.setAttributeNS(null,"x","0"),_.setAttributeNS(null,"y",a(-T)),_.setAttributeNS(null,"width",a(v)+"px"),_.setAttributeNS(null,"height",a(T)+"px"),_.setAttributeNS(null,"transform","scale(".concat(a(1/v)," ").concat(a(-1/T),")")),i?i.append(_):this._ensureTransformGroup().append(_)}paintImageMaskXObject(t){const i=this.getObject(t.data,t);if(i.bitmap){(0,R.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const v=this.current,T=i.width,x=i.height,X=v.fillColor;v.maskId="mask".concat(s++);const _=this.svgFactory.createElement("svg:mask");_.setAttributeNS(null,"id",v.maskId);const Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x","0"),Z.setAttributeNS(null,"y","0"),Z.setAttributeNS(null,"width",a(T)),Z.setAttributeNS(null,"height",a(x)),Z.setAttributeNS(null,"fill",X),Z.setAttributeNS(null,"mask","url(#".concat(v.maskId,")")),this.defs.append(_),this._ensureTransformGroup().append(Z),this.paintInlineImageXObject(i,_)}paintFormXObjectBegin(t,i){if(Array.isArray(t)&&t.length===6&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),i){const v=i[2]-i[0],T=i[3]-i[1],x=this.svgFactory.createElement("svg:rect");x.setAttributeNS(null,"x",i[0]),x.setAttributeNS(null,"y",i[1]),x.setAttributeNS(null,"width",a(v)),x.setAttributeNS(null,"height",a(T)),this.current.element=x,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const i=this.svgFactory.create(t.width,t.height),v=this.svgFactory.createElement("svg:defs");i.append(v),this.defs=v;const T=this.svgFactory.createElement("svg:g");return T.setAttributeNS(null,"transform",u(t.transform)),i.append(T),this.svg=T,i}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",u(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(p){var A=__webpack_module_cache__[p];if(A!==void 0)return A.exports;var ht=__webpack_module_cache__[p]={exports:{}};return __webpack_modules__[p](ht,ht.exports,__w_pdfjs_require__),ht.exports}var __webpack_exports__={};return(()=>{var p=__webpack_exports__;Object.defineProperty(p,"__esModule",{value:!0}),Object.defineProperty(p,"AbortException",{enumerable:!0,get:function(){return A.AbortException}}),Object.defineProperty(p,"AnnotationEditorLayer",{enumerable:!0,get:function(){return e.AnnotationEditorLayer}}),Object.defineProperty(p,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return A.AnnotationEditorParamsType}}),Object.defineProperty(p,"AnnotationEditorType",{enumerable:!0,get:function(){return A.AnnotationEditorType}}),Object.defineProperty(p,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return nt.AnnotationEditorUIManager}}),Object.defineProperty(p,"AnnotationLayer",{enumerable:!0,get:function(){return ft.AnnotationLayer}}),Object.defineProperty(p,"AnnotationMode",{enumerable:!0,get:function(){return A.AnnotationMode}}),Object.defineProperty(p,"CMapCompressionType",{enumerable:!0,get:function(){return A.CMapCompressionType}}),Object.defineProperty(p,"FeatureTest",{enumerable:!0,get:function(){return A.FeatureTest}}),Object.defineProperty(p,"GlobalWorkerOptions",{enumerable:!0,get:function(){return $.GlobalWorkerOptions}}),Object.defineProperty(p,"InvalidPDFException",{enumerable:!0,get:function(){return A.InvalidPDFException}}),Object.defineProperty(p,"MissingPDFException",{enumerable:!0,get:function(){return A.MissingPDFException}}),Object.defineProperty(p,"OPS",{enumerable:!0,get:function(){return A.OPS}}),Object.defineProperty(p,"PDFDataRangeTransport",{enumerable:!0,get:function(){return ht.PDFDataRangeTransport}}),Object.defineProperty(p,"PDFDateString",{enumerable:!0,get:function(){return E.PDFDateString}}),Object.defineProperty(p,"PDFWorker",{enumerable:!0,get:function(){return ht.PDFWorker}}),Object.defineProperty(p,"PasswordResponses",{enumerable:!0,get:function(){return A.PasswordResponses}}),Object.defineProperty(p,"PermissionFlag",{enumerable:!0,get:function(){return A.PermissionFlag}}),Object.defineProperty(p,"PixelsPerInch",{enumerable:!0,get:function(){return E.PixelsPerInch}}),Object.defineProperty(p,"RenderingCancelledException",{enumerable:!0,get:function(){return E.RenderingCancelledException}}),Object.defineProperty(p,"SVGGraphics",{enumerable:!0,get:function(){return w.SVGGraphics}}),Object.defineProperty(p,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return A.UNSUPPORTED_FEATURES}}),Object.defineProperty(p,"UnexpectedResponseException",{enumerable:!0,get:function(){return A.UnexpectedResponseException}}),Object.defineProperty(p,"Util",{enumerable:!0,get:function(){return A.Util}}),Object.defineProperty(p,"VerbosityLevel",{enumerable:!0,get:function(){return A.VerbosityLevel}}),Object.defineProperty(p,"XfaLayer",{enumerable:!0,get:function(){return y.XfaLayer}}),Object.defineProperty(p,"build",{enumerable:!0,get:function(){return ht.build}}),Object.defineProperty(p,"createPromiseCapability",{enumerable:!0,get:function(){return A.createPromiseCapability}}),Object.defineProperty(p,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return A.createValidAbsoluteUrl}}),Object.defineProperty(p,"getDocument",{enumerable:!0,get:function(){return ht.getDocument}}),Object.defineProperty(p,"getFilenameFromUrl",{enumerable:!0,get:function(){return E.getFilenameFromUrl}}),Object.defineProperty(p,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return E.getPdfFilenameFromUrl}}),Object.defineProperty(p,"getXfaPageViewport",{enumerable:!0,get:function(){return E.getXfaPageViewport}}),Object.defineProperty(p,"isDataScheme",{enumerable:!0,get:function(){return E.isDataScheme}}),Object.defineProperty(p,"isPdfFile",{enumerable:!0,get:function(){return E.isPdfFile}}),Object.defineProperty(p,"loadScript",{enumerable:!0,get:function(){return E.loadScript}}),Object.defineProperty(p,"renderTextLayer",{enumerable:!0,get:function(){return R.renderTextLayer}}),Object.defineProperty(p,"setLayerDimensions",{enumerable:!0,get:function(){return E.setLayerDimensions}}),Object.defineProperty(p,"shadow",{enumerable:!0,get:function(){return A.shadow}}),Object.defineProperty(p,"updateTextLayer",{enumerable:!0,get:function(){return R.updateTextLayer}}),Object.defineProperty(p,"version",{enumerable:!0,get:function(){return ht.version}});var A=__w_pdfjs_require__(1),ht=__w_pdfjs_require__(2),E=__w_pdfjs_require__(6),R=__w_pdfjs_require__(26),e=__w_pdfjs_require__(27),nt=__w_pdfjs_require__(5),ft=__w_pdfjs_require__(32),$=__w_pdfjs_require__(14),w=__w_pdfjs_require__(35),y=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;(function(p){var A=reactExports,ht=pdfExports;function E(n){var f=Object.create(null);return n&&Object.keys(n).forEach(function(F){if(F!=="default"){var B=Object.getOwnPropertyDescriptor(n,F);Object.defineProperty(f,F,B.get?B:{enumerable:!0,get:function(){return n[F]}})}}),f.default=n,Object.freeze(f)}var R,e=E(A),nt=E(ht);p.AnnotationType=void 0,(R=p.AnnotationType||(p.AnnotationType={}))[R.Text=1]="Text",R[R.Link=2]="Link",R[R.FreeText=3]="FreeText",R[R.Line=4]="Line",R[R.Square=5]="Square",R[R.Circle=6]="Circle",R[R.Polygon=7]="Polygon",R[R.Polyline=8]="Polyline",R[R.Highlight=9]="Highlight",R[R.Underline=10]="Underline",R[R.Squiggly=11]="Squiggly",R[R.StrikeOut=12]="StrikeOut",R[R.Stamp=13]="Stamp",R[R.Caret=14]="Caret",R[R.Ink=15]="Ink",R[R.Popup=16]="Popup",R[R.FileAttachment=17]="FileAttachment";var ft=function(n,f){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,B){F.__proto__=B}||function(F,B){for(var H in B)Object.prototype.hasOwnProperty.call(B,H)&&(F[H]=B[H])},ft(n,f)};function $(n,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function F(){this.constructor=n}ft(n,f),n.prototype=f===null?Object.create(f):(F.prototype=f.prototype,new F)}var w,y=function(){return y=Object.assign||function(n){for(var f,F=1,B=arguments.length;F<B;F++)for(var H in f=arguments[F])Object.prototype.hasOwnProperty.call(f,H)&&(n[H]=f[H]);return n},y.apply(this,arguments)};p.TextDirection=void 0,(w=p.TextDirection||(p.TextDirection={})).RightToLeft="RTL",w.LeftToRight="LTR";var W,P=e.createContext({currentTheme:"light",direction:p.TextDirection.LeftToRight,setCurrentTheme:function(){}}),b=function(n){var f=[];return Object.keys(n).forEach(function(F){F&&n[F]&&f.push(F)}),f.join(" ")},d=typeof window<"u"?e.useLayoutEffect:e.useEffect,m=function(n){var f=e.useRef(null),F=n.once,B=n.threshold,H=n.onVisibilityChanged;return d(function(){var z=f.current;if(z){var it=new IntersectionObserver(function(Q){Q.forEach(function(U){var et=U.isIntersecting,tt=U.intersectionRatio;H({isVisible:et,ratio:tt}),et&&F&&(it.unobserve(z),it.disconnect())})},{threshold:B||0});return it.observe(z),function(){it.unobserve(z),it.disconnect()}}},[]),f},a=function(n){var f=n.children,F=n.ignoreDirection,B=F!==void 0&&F,H=n.size,z=H===void 0?24:H,it=e.useContext(P).direction,Q=!B&&it===p.TextDirection.RightToLeft,U="".concat(z||24,"px");return e.createElement("svg",{"aria-hidden":"true",className:b({"rpv-core__icon":!0,"rpv-core__icon--rtl":Q}),focusable:"false",height:U,viewBox:"0 0 24 24",width:U},f)},u=function(){return e.createElement(a,{size:16},e.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},h=function(n){var f=n.children,F=n.testId,B=n.onClick,H=e.useContext(P).direction===p.TextDirection.RightToLeft,z=F?{"data-testid":F}:{};return e.createElement("button",y({className:b({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":H}),type:"button",onClick:B},z),f)},s=function(n){var f=n.size,F=f===void 0?"4rem":f,B=n.testId,H=e.useState(!1),z=H[0],it=H[1],Q=B?{"data-testid":B}:{},U=m({onVisibilityChanged:function(et){it(et.isVisible)}});return e.createElement("div",y({},Q,{className:b({"rpv-core__spinner":!0,"rpv-core__spinner--animating":z}),ref:U,style:{height:F,width:F}}))},r=function(n){var f=n.ariaLabel,F=f===void 0?"":f,B=n.autoFocus,H=B!==void 0&&B,z=n.placeholder,it=z===void 0?"":z,Q=n.testId,U=n.type,et=U===void 0?"text":U,tt=n.value,At=tt===void 0?"":tt,yt=n.onChange,_t=n.onKeyDown,It=_t===void 0?function(){}:_t,Ot=e.useContext(P).direction,Ft=e.useRef(),ue=Ot===p.TextDirection.RightToLeft,Gt={ref:Ft,"data-testid":"","aria-label":F,className:b({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":ue}),placeholder:it,value:At,onChange:function(Xt){return yt(Xt.target.value)},onKeyDown:It};return Q&&(Gt["data-testid"]=Q),d(function(){if(H){var Xt=Ft.current;if(Xt){var Qt=window.scrollX,Ht=window.scrollY;Xt.focus(),window.scrollTo(Qt,Ht)}}},[]),et==="text"?e.createElement("input",y({type:"text"},Gt)):e.createElement("input",y({type:"password"},Gt))};(function(n){n[n.ExitFullScreen=0]="ExitFullScreen",n[n.FullScreenChange=1]="FullScreenChange",n[n.FullScreenElement=2]="FullScreenElement",n[n.FullScreenEnabled=3]="FullScreenEnabled",n[n.RequestFullScreen=4]="RequestFullScreen"})(W||(W={}));var t,i={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},v={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},T={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},x=typeof window<"u",X=x&&(W.FullScreenEnabled in document&&i||v.FullScreenEnabled in document&&v||T.FullScreenEnabled in document&&T)||i,_=function(){return x&&X.FullScreenEnabled in document&&document[X.FullScreenEnabled]===!0},Z=function(n){return x?n[X.ExitFullScreen]():Promise.resolve({})},Et=function(){return x?document[X.FullScreenElement]:null},ut=function(n,f){var F=e.useRef(),B=function(){F.current&&clearTimeout(F.current)};return e.useEffect(function(){return function(){return B()}},[]),e.useCallback(function(){for(var H=[],z=0;z<arguments.length;z++)H[z]=arguments[z];B(),F.current=setTimeout(function(){n.apply(void 0,H)},f)},[n,f])},mt=function(){var n=e.useRef(!1);return e.useEffect(function(){return n.current=!0,function(){n.current=!1}},[]),n},st=function(n){var f=e.useRef(n);return e.useEffect(function(){f.current=n},[n]),f.current};(function(n){n.NotRenderedYet="NotRenderedYet",n.Rendering="Rendering",n.Rendered="Rendered"})(t||(t={}));var Y,K=-9999,bt=function(n){var f=n.doc,F=f.numPages,B=f.loadingTask.docId,H=e.useMemo(function(){return Array(F).fill(null).map(function(Q,U){return{pageIndex:U,renderStatus:t.NotRenderedYet,visibility:K}})},[B]),z=e.useRef({currentRenderingPage:-1,startRange:0,endRange:F-1,visibilities:H}),it=function(Q,U){z.current.visibilities[Q].visibility=U};return{getHighestPriorityPage:function(){var Q=z.current.visibilities.slice(z.current.startRange,z.current.endRange+1).filter(function(yt){return yt.visibility>K});if(!Q.length)return-1;for(var U=Q[0].pageIndex,et=Q[Q.length-1].pageIndex,tt=Q.length,At=0;At<tt;At++){if(Q[At].renderStatus===t.Rendering)return-1;if(Q[At].renderStatus===t.NotRenderedYet)return Q[At].pageIndex}return et+1<F&&z.current.visibilities[et+1].renderStatus!==t.Rendered?et+1:U-1>=0&&z.current.visibilities[U-1].renderStatus!==t.Rendered?U-1:-1},isInRange:function(Q){return Q>=z.current.startRange&&Q<=z.current.endRange},markNotRendered:function(){for(var Q=0;Q<F;Q++)z.current.visibilities[Q].renderStatus=t.NotRenderedYet},markRendered:function(Q){z.current.visibilities[Q].renderStatus=t.Rendered},markRendering:function(Q){z.current.currentRenderingPage!==-1&&z.current.currentRenderingPage!==Q&&z.current.visibilities[z.current.currentRenderingPage].renderStatus===t.Rendering&&(z.current.visibilities[z.current.currentRenderingPage].renderStatus=t.NotRenderedYet),z.current.visibilities[Q].renderStatus=t.Rendering,z.current.currentRenderingPage=Q},setOutOfRange:function(Q){it(Q,K)},setRange:function(Q,U){z.current.startRange=Q,z.current.endRange=U;for(var et=0;et<F;et++)(et<Q||et>U)&&(z.current.visibilities[et].visibility=K,z.current.visibilities[et].renderStatus=t.NotRenderedYet)},setVisibility:it}},Ct={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},D=e.createContext({l10n:Ct,setL10n:function(){}}),c=0,o=function(){return c++},C=function(n,f,F){var B=function(H){var z=f.current;if(z){var it=H.target;if(it instanceof Element&&it.shadowRoot){var Q=H.composedPath();Q.length>0&&!z.contains(Q[0])&&F()}else z.contains(it)||F()}};e.useEffect(function(){if(n){var H={capture:!0};return document.addEventListener("click",B,H),function(){document.removeEventListener("click",B,H)}}},[])},O=function(n){var f=function(F){F.key==="Escape"&&n()};e.useEffect(function(){return document.addEventListener("keyup",f),function(){document.removeEventListener("keyup",f)}},[])},N=function(n){var f=n.ariaControlsSuffix,F=n.children,B=n.closeOnClickOutside,H=n.closeOnEscape,z=n.onToggle,it=e.useRef(),Q=e.useContext(P).direction===p.TextDirection.RightToLeft;return e.useEffect(function(){var U=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=U}},[]),O(function(){it.current&&H&&z()}),C(B,it,z),d(function(){var U=it.current;if(U){var et=.75*document.body.clientHeight;U.getBoundingClientRect().height>=et&&(U.style.overflow="auto",U.style.maxHeight="".concat(et,"px"))}},[]),e.createElement("div",{"aria-modal":"true",className:b({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":Q}),id:"rpv-core__modal-body-".concat(f),ref:it,role:"dialog",tabIndex:-1},F)},V=function(n){var f=n.children;return e.createElement("div",{className:"rpv-core__modal-overlay"},f)};p.ToggleStatus=void 0,(Y=p.ToggleStatus||(p.ToggleStatus={})).Close="Close",Y.Open="Open",Y.Toggle="Toggle";var G,at=function(n){var f=e.useState(n),F=f[0],B=f[1];return{opened:F,toggle:function(H){switch(H){case p.ToggleStatus.Close:B(!1);break;case p.ToggleStatus.Open:B(!0);break;case p.ToggleStatus.Toggle:default:B(function(z){return!z})}}}},vt=function(n){var f=n.content,F=n.isOpened,B=F!==void 0&&F,H=n.target,z=at(B),it=z.opened,Q=z.toggle;return e.createElement(e.Fragment,null,H&&H(Q,it),it&&f(Q))};p.Position=void 0,(G=p.Position||(p.Position={})).TopLeft="TOP_LEFT",G.TopCenter="TOP_CENTER",G.TopRight="TOP_RIGHT",G.RightTop="RIGHT_TOP",G.RightCenter="RIGHT_CENTER",G.RightBottom="RIGHT_BOTTOM",G.BottomLeft="BOTTOM_LEFT",G.BottomCenter="BOTTOM_CENTER",G.BottomRight="BOTTOM_RIGHT",G.LeftTop="LEFT_TOP",G.LeftCenter="LEFT_CENTER",G.LeftBottom="LEFT_BOTTOM";var lt,dt,ot,l,g,k,I,M,J=function(n,f,F,B,H){d(function(){var z=f.current,it=n.current,Q=F.current;if(it&&z&&Q){var U=Q.getBoundingClientRect(),et=function(yt,_t,It,Ot){var Ft=_t.getBoundingClientRect(),ue=yt.getBoundingClientRect(),Gt=ue.height,Xt=ue.width,Qt=0,Ht=0;switch(It){case p.Position.TopLeft:Qt=Ft.top-Gt,Ht=Ft.left;break;case p.Position.TopCenter:Qt=Ft.top-Gt,Ht=Ft.left+Ft.width/2-Xt/2;break;case p.Position.TopRight:Qt=Ft.top-Gt,Ht=Ft.left+Ft.width-Xt;break;case p.Position.RightTop:Qt=Ft.top,Ht=Ft.left+Ft.width;break;case p.Position.RightCenter:Qt=Ft.top+Ft.height/2-Gt/2,Ht=Ft.left+Ft.width;break;case p.Position.RightBottom:Qt=Ft.top+Ft.height-Gt,Ht=Ft.left+Ft.width;break;case p.Position.BottomLeft:Qt=Ft.top+Ft.height,Ht=Ft.left;break;case p.Position.BottomCenter:Qt=Ft.top+Ft.height,Ht=Ft.left+Ft.width/2-Xt/2;break;case p.Position.BottomRight:Qt=Ft.top+Ft.height,Ht=Ft.left+Ft.width-Xt;break;case p.Position.LeftTop:Qt=Ft.top,Ht=Ft.left-Xt;break;case p.Position.LeftCenter:Qt=Ft.top+Ft.height/2-Gt/2,Ht=Ft.left-Xt;break;case p.Position.LeftBottom:Qt=Ft.top+Ft.height-Gt,Ht=Ft.left-Xt}return{left:Ht+(Ot.left||0),top:Qt+(Ot.top||0)}}(it,z,B,H),tt=et.top,At=et.left;it.style.top="".concat(tt-U.top,"px"),it.style.left="".concat(At-U.left,"px")}},[])},pt=function(n){var f,F=n.customClassName,B=n.position;return e.createElement("div",{className:b((f={"rpv-core__arrow":!0,"rpv-core__arrow--tl":B===p.Position.TopLeft,"rpv-core__arrow--tc":B===p.Position.TopCenter,"rpv-core__arrow--tr":B===p.Position.TopRight,"rpv-core__arrow--rt":B===p.Position.RightTop,"rpv-core__arrow--rc":B===p.Position.RightCenter,"rpv-core__arrow--rb":B===p.Position.RightBottom,"rpv-core__arrow--bl":B===p.Position.BottomLeft,"rpv-core__arrow--bc":B===p.Position.BottomCenter,"rpv-core__arrow--br":B===p.Position.BottomRight,"rpv-core__arrow--lt":B===p.Position.LeftTop,"rpv-core__arrow--lc":B===p.Position.LeftCenter,"rpv-core__arrow--lb":B===p.Position.LeftBottom},f["".concat(F)]=F!=="",f))})},St=function(n){var f=n.ariaControlsSuffix,F=n.children,B=n.closeOnClickOutside,H=n.offset,z=n.position,it=n.targetRef,Q=n.onClose,U=e.useRef(),et=e.useRef(),tt=e.useRef(),At=e.useContext(P).direction===p.TextDirection.RightToLeft;C(B,U,Q),J(U,it,tt,z,H),d(function(){var _t=et.current;if(_t){var It=.75*document.body.clientHeight;_t.getBoundingClientRect().height>=It&&(_t.style.overflow="auto",_t.style.maxHeight="".concat(It,"px"))}},[]);var yt="rpv-core__popover-body-inner-".concat(f);return e.createElement(e.Fragment,null,e.createElement("div",{ref:tt,style:{left:0,position:"absolute",top:0}}),e.createElement("div",{"aria-describedby":yt,className:b({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":At}),id:"rpv-core__popover-body-".concat(f),ref:U,role:"dialog",tabIndex:-1},e.createElement(pt,{customClassName:"rpv-core__popover-body-arrow",position:z}),e.createElement("div",{id:yt,ref:et},F)))},Mt=function(n){var f=n.closeOnEscape,F=n.onClose,B=e.useRef();return O(function(){B.current&&f&&F()}),e.createElement("div",{className:"rpv-core__popover-overlay",ref:B})},ct=function(n){var f=n.ariaControlsSuffix,F=n.children,B=n.contentRef,H=n.offset,z=n.position,it=n.targetRef,Q=e.useRef(),U=e.useContext(P).direction===p.TextDirection.RightToLeft;return J(B,it,Q,z,H),e.createElement(e.Fragment,null,e.createElement("div",{ref:Q,style:{left:0,position:"absolute",top:0}}),e.createElement("div",{className:b({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":U}),id:"rpv-core__tooltip-body-".concat(f),ref:B,role:"tooltip"},e.createElement(pt,{customClassName:"rpv-core__tooltip-body-arrow",position:z}),e.createElement("div",{className:"rpv-core__tooltip-body-content"},F)))};p.FullScreenMode=void 0,(lt=p.FullScreenMode||(p.FullScreenMode={})).Normal="Normal",lt.Entering="Entering",lt.Entered="Entered",lt.EnteredCompletely="EnteredCompletely",lt.Exitting="Exitting",lt.Exited="Exited",p.LayerRenderStatus=void 0,(dt=p.LayerRenderStatus||(p.LayerRenderStatus={}))[dt.PreRender=0]="PreRender",dt[dt.DidRender=1]="DidRender",p.PageMode=void 0,(ot=p.PageMode||(p.PageMode={})).Attachments="UseAttachments",ot.Bookmarks="UseOutlines",ot.ContentGroup="UseOC",ot.Default="UserNone",ot.FullScreen="FullScreen",ot.Thumbnails="UseThumbs",p.PasswordStatus=void 0,(l=p.PasswordStatus||(p.PasswordStatus={})).RequiredPassword="RequiredPassword",l.WrongPassword="WrongPassword",p.RotateDirection=void 0,(g=p.RotateDirection||(p.RotateDirection={})).Backward="Backward",g.Forward="Forward",p.ScrollMode=void 0,(k=p.ScrollMode||(p.ScrollMode={})).Page="Page",k.Horizontal="Horizontal",k.Vertical="Vertical",k.Wrapped="Wrapped",p.SpecialZoomLevel=void 0,(I=p.SpecialZoomLevel||(p.SpecialZoomLevel={})).ActualSize="ActualSize",I.PageFit="PageFit",I.PageWidth="PageWidth",p.ViewMode=void 0,(M=p.ViewMode||(p.ViewMode={})).DualPage="DualPage",M.DualPageWithCover="DualPageWithCover",M.SinglePage="SinglePage";var xt,Tt=function(n,f){return n.reduce(function(F,B,H){return H%f?F[F.length-1].push(B):F.push([B]),F},[])},Lt=function(n,f){switch(f[1].name){case"XYZ":return{bottomOffset:function(F,B){return f[3]===null?B:f[3]},leftOffset:function(F,B){return f[2]===null?0:f[2]},pageIndex:n,scaleTo:f[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:n,scaleTo:p.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:f[2],leftOffset:0,pageIndex:n,scaleTo:p.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:n,scaleTo:1}}},Nt=new Map,te=new Map,re=function(n,f){return"".concat(n.loadingTask.docId,"___").concat(f.num,"R").concat(f.gen===0?"":f.gen)},Zt=function(n,f,F){Nt.set(re(n,f),F)},L=function(n,f){if(!n)return Promise.reject("The document is not loaded yet");var F="".concat(n.loadingTask.docId,"___").concat(f),B=te.get(F);return B?Promise.resolve(B):new Promise(function(H,z){n.getPage(f+1).then(function(it){te.set(F,it),it.ref&&Zt(n,it.ref,f),H(it)})})},j=function(n,f){return new Promise(function(F){new Promise(function(B){typeof f=="string"?n.getDestination(f).then(function(H){B(H)}):B(f)}).then(function(B){if(typeof B[0]=="object"&&B[0]!==null){var H=B[0],z=function(Q,U){var et=re(Q,U);return Nt.has(et)?Nt.get(et):null}(n,H);z===null?n.getPageIndex(H).then(function(Q){Zt(n,H,Q),j(n,f).then(function(U){return F(U)})}):F(Lt(z,B))}else{var it=Lt(B[0],B);F(it)}})})};(function(n){n[n.Solid=1]="Solid",n[n.Dashed=2]="Dashed",n[n.Beveled=3]="Beveled",n[n.Inset=4]="Inset",n[n.Underline=5]="Underline"})(xt||(xt={}));var q,Pt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),Jt=function(n,f,F,B){var H=parseInt(n,10);return H>=f&&H<=F?H:B},he=function(n){return n.contentsObj?n.contentsObj.str:n.contents||""},rt=function(n){return n.titleObj?n.titleObj.str:n.title||""},kt=function(n){var f=n.annotation,F=e.useContext(P).direction,B=rt(f),H=he(f),z=F===p.TextDirection.RightToLeft,it=e.useRef(),Q="";if(f.modificationDate){var U=function(et){var tt=Pt.exec(et);if(!tt)return null;var At=parseInt(tt[1],10),yt=Jt(tt[2],1,12,1)-1,_t=Jt(tt[3],1,31,1),It=Jt(tt[4],0,23,0),Ot=Jt(tt[5],0,59,0),Ft=Jt(tt[6],0,59,0),ue=tt[7]||"Z",Gt=Jt(tt[8],0,23,0),Xt=Jt(tt[9],0,59,0);switch(ue){case"-":It+=Gt,Ot+=Xt;break;case"+":It-=Gt,Ot-=Xt}return new Date(Date.UTC(At,yt,_t,It,Ot,Ft))}(f.modificationDate);Q=U?"".concat(U.toLocaleDateString(),", ").concat(U.toLocaleTimeString()):""}return e.useLayoutEffect(function(){if(it.current){var et=document.querySelector('[data-annotation-id="'.concat(f.id,'"]'));if(et){var tt=et;return tt.style.zIndex+=1,function(){tt.style.zIndex="".concat(parseInt(tt.style.zIndex,10)-1)}}}},[]),e.createElement("div",{ref:it,className:b({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":z}),style:{top:f.annotationType===p.AnnotationType.Popup?"":"100%"}},B&&e.createElement(e.Fragment,null,e.createElement("div",{className:b({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!z,"rpv-core__annotation-popup-title--rtl":z})},B),e.createElement("div",{className:"rpv-core__annotation-popup-date"},Q)),H&&e.createElement("div",{className:"rpv-core__annotation-popup-content"},H.split("\n").map(function(et,tt){return e.createElement(e.Fragment,{key:tt},et,e.createElement("br",null))})))};(function(n){n.Click="Click",n.Hover="Hover"})(q||(q={}));var Dt,Bt=function(n){var f,F=n.annotation,B=n.children,H=n.ignoreBorder,z=n.hasPopup,it=n.isRenderable,Q=n.page,U=n.viewport,et=F.rect,tt=function(){var Yt=at(!1),_e=Yt.opened,be=Yt.toggle,ye=e.useState(q.Hover),Se=ye[0],Ce=ye[1];return{opened:_e,closeOnHover:function(){Se===q.Hover&&be(p.ToggleStatus.Close)},openOnHover:function(){Se===q.Hover&&be(p.ToggleStatus.Open)},toggleOnClick:function(){switch(Se){case q.Click:_e&&Ce(q.Hover),be(p.ToggleStatus.Toggle);break;case q.Hover:Ce(q.Click),be(p.ToggleStatus.Open)}}}}(),At=tt.closeOnHover,yt=tt.opened,_t=tt.openOnHover,It=tt.toggleOnClick,Ot=(f=[et[0],Q.view[3]+Q.view[1]-et[1],et[2],Q.view[3]+Q.view[1]-et[3]],[Math.min(f[0],f[2]),Math.min(f[1],f[3]),Math.max(f[0],f[2]),Math.max(f[1],f[3])]),Ft=et[2]-et[0],ue=et[3]-et[1],Gt={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!H&&F.borderStyle.width>0){switch(F.borderStyle.style){case xt.Dashed:Gt.borderStyle="dashed";break;case xt.Solid:Gt.borderStyle="solid";break;case xt.Underline:Gt=Object.assign({borderBottomStyle:"solid"},Gt);case xt.Beveled:case xt.Inset:}var Xt=F.borderStyle.width;Gt.borderWidth="".concat(Xt,"px"),F.borderStyle.style!==xt.Underline&&(Ft-=2*Xt,ue-=2*Xt);var Qt=F.borderStyle,Ht=Qt.horizontalCornerRadius,ee=Qt.verticalCornerRadius;(Ht>0||ee>0)&&(Gt.borderRadius="".concat(Ht,"px / ").concat(ee,"px")),F.color?Gt.borderColor="rgb(".concat(0|F.color[0],", ").concat(0|F.color[1],", ").concat(0|F.color[2],")"):Gt.borderWidth="0"}return e.createElement(e.Fragment,null,it&&B({popup:{opened:yt,closeOnHover:At,openOnHover:_t,toggleOnClick:It},slot:{attrs:{style:Object.assign({height:"".concat(ue,"px"),left:"".concat(Ot[0],"px"),top:"".concat(Ot[1],"px"),transform:"matrix(".concat(U.transform.join(","),")"),transformOrigin:"-".concat(Ot[0],"px -").concat(Ot[1],"px"),width:"".concat(Ft,"px")},Gt)},children:e.createElement(e.Fragment,null,z&&yt&&e.createElement(kt,{annotation:F}))}}))},le=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=f.hasPopup===!1,z=rt(f),it=he(f),Q=!!(f.hasPopup||z||it);return e.createElement(Bt,{annotation:f,hasPopup:H,ignoreBorder:!0,isRenderable:Q,page:F,viewport:B},function(U){return e.createElement("div",y({},U.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":f.id,onClick:U.popup.toggleOnClick,onMouseEnter:U.popup.openOnHover,onMouseLeave:U.popup.closeOnHover}),U.slot.children)})},Ae=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=f.hasPopup===!1,z=rt(f),it=he(f),Q=!!(f.hasPopup||z||it),U=f.rect,et=U[2]-U[0],tt=U[3]-U[1],At=f.borderStyle.width;return e.createElement(Bt,{annotation:f,hasPopup:H,ignoreBorder:!0,isRenderable:Q,page:F,viewport:B},function(yt){return e.createElement("div",y({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":f.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),e.createElement("svg",{height:"".concat(tt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(et," ").concat(tt),width:"".concat(et,"px")},e.createElement("circle",{cy:tt/2,fill:"none",rx:et/2-At/2,ry:tt/2-At/2,stroke:"transparent",strokeWidth:At||1})),yt.slot.children)})},de=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=rt(f),z=he(f),it=!(f.hasPopup!==!1||!H&&!z),Q=function(){var U,et,tt,At,yt=f.file;yt&&(U=yt.filename,et=yt.content,tt=typeof et=="string"?"":URL.createObjectURL(new Blob([et],{type:""})),(At=document.createElement("a")).style.display="none",At.href=tt||U,At.setAttribute("download",function(_t){var It=_t.split("/").pop();return It?It.split("#")[0].split("?")[0]:_t}(U)),document.body.appendChild(At),At.click(),document.body.removeChild(At),tt&&URL.revokeObjectURL(tt))};return e.createElement(Bt,{annotation:f,hasPopup:it,ignoreBorder:!0,isRenderable:!0,page:F,viewport:B},function(U){return e.createElement("div",y({},U.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":f.id,onClick:U.popup.toggleOnClick,onDoubleClick:Q,onMouseEnter:U.popup.openOnHover,onMouseLeave:U.popup.closeOnHover}),U.slot.children)})},fe=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=f.hasPopup===!1,z=rt(f),it=he(f),Q=!!(f.hasPopup||z||it);return e.createElement(Bt,{annotation:f,hasPopup:H,ignoreBorder:!0,isRenderable:Q,page:F,viewport:B},function(U){return e.createElement("div",y({},U.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":f.id,onClick:U.popup.toggleOnClick,onMouseEnter:U.popup.openOnHover,onMouseLeave:U.popup.closeOnHover}),U.slot.children)})},ce=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=rt(f),z=he(f),it=!(!H&&!z),Q=!f.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(f.parentType)!==-1;return d(function(){if(f.parentId){var U=document.querySelector('[data-annotation-id="'.concat(f.parentId,'"]')),et=document.querySelector('[data-annotation-id="'.concat(f.id,'"]'));if(U&&et){var tt=parseFloat(U.style.left),At=parseFloat(U.style.top)+parseFloat(U.style.height);et.style.left="".concat(tt,"px"),et.style.top="".concat(At,"px"),et.style.transformOrigin="-".concat(tt,"px -").concat(At,"px")}}},[]),e.createElement(Bt,{annotation:f,hasPopup:Q,ignoreBorder:!1,isRenderable:it,page:F,viewport:B},function(U){return e.createElement("div",y({},U.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":f.id}),e.createElement(kt,{annotation:f}))})},ve=function(n){var f=n.annotation,F=n.childAnnotation,B=n.page,H=n.viewport,z=f.hasPopup===!1,it=rt(f),Q=he(f),U=!!(f.hasPopup||it||Q);if(f.quadPoints&&f.quadPoints.length>0){var et=f.quadPoints.map(function(tt){return Object.assign({},f,{rect:[tt[2].x,tt[2].y,tt[1].x,tt[1].y],quadPoints:[]})});return e.createElement(e.Fragment,null,et.map(function(tt,At){return e.createElement(ve,{key:At,annotation:tt,childAnnotation:F,page:B,viewport:H})}))}return e.createElement(Bt,{annotation:f,hasPopup:z,ignoreBorder:!0,isRenderable:U,page:B,viewport:H},function(tt){return e.createElement(e.Fragment,null,e.createElement("div",y({},tt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":f.id,onClick:tt.popup.toggleOnClick,onMouseEnter:tt.popup.openOnHover,onMouseLeave:tt.popup.closeOnHover}),tt.slot.children),F&&F.annotationType===p.AnnotationType.Popup&&tt.popup.opened&&e.createElement(ce,{annotation:F,page:B,viewport:H}))})},We=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=f.hasPopup===!1,z=rt(f),it=he(f),Q=!!(f.hasPopup||z||it),U=f.rect,et=U[2]-U[0],tt=U[3]-U[1],At=f.borderStyle.width;return e.createElement(Bt,{annotation:f,hasPopup:H,ignoreBorder:!0,isRenderable:Q,page:F,viewport:B},function(yt){return e.createElement("div",y({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":f.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),f.inkLists&&f.inkLists.length&&e.createElement("svg",{height:"".concat(tt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(et," ").concat(tt),width:"".concat(et,"px")},f.inkLists.map(function(_t,It){return e.createElement("polyline",{key:It,fill:"none",stroke:"transparent",strokeWidth:At||1,points:_t.map(function(Ot){return"".concat(Ot.x-U[0],",").concat(U[3]-Ot.y)}).join(" ")})})),yt.slot.children)})},De=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=f.hasPopup===!1,z=rt(f),it=he(f),Q=!!(f.hasPopup||z||it),U=f.rect,et=U[2]-U[0],tt=U[3]-U[1],At=f.borderStyle.width;return e.createElement(Bt,{annotation:f,hasPopup:H,ignoreBorder:!0,isRenderable:Q,page:F,viewport:B},function(yt){return e.createElement("div",y({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":f.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),e.createElement("svg",{height:"".concat(tt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(et," ").concat(tt),width:"".concat(et,"px")},e.createElement("line",{stroke:"transparent",strokeWidth:At||1,x1:U[2]-f.lineCoordinates[0],x2:U[2]-f.lineCoordinates[2],y1:U[3]-f.lineCoordinates[1],y2:U[3]-f.lineCoordinates[3]})),yt.slot.children)})},Le=/^([^\w]*)(javascript|data|vbscript)/im,Ie=/&#(\w+)(^\w|;)?/g,Re=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,$e=/^([^:]+):/gm,Je=function(n,f){f===void 0&&(f="about:blank");var F,B=(F=n||"",F.replace(Ie,function(Q,U){return String.fromCharCode(U)})).replace(Re,"").trim();if(!B)return f;var H=B[0];if(H==="."||H==="/")return B;var z=B.match($e);if(!z)return B;var it=z[0];return Le.test(it)?f:B},ln=function(n){var f,F=n.annotation,B=n.annotationContainerRef,H=n.doc,z=n.outlines,it=n.page,Q=n.pageIndex,U=n.scale,et=n.viewport,tt=n.onExecuteNamedAction,At=n.onJumpFromLinkAnnotation,yt=n.onJumpToDest,_t=e.useRef(),It=z&&z.length&&F.dest&&typeof F.dest=="string"?(f=z.find(function(Gt){return Gt.dest===F.dest}))===null||f===void 0?void 0:f.title:"",Ot=!!(F.url||F.dest||F.action||F.unsafeUrl),Ft={};if(F.url||F.unsafeUrl){var ue=Je(F.url||F.unsafeUrl,"");ue?Ft={"data-target":"external",href:ue,rel:"noopener noreferrer nofollow",target:F.newWindow?"_blank":"",title:ue}:Ot=!1}else Ft={href:"","data-annotation-link":F.id,onClick:function(Gt){Gt.preventDefault(),F.action?tt(F.action):j(H,F.dest).then(function(Xt){var Qt=_t.current,Ht=B.current;if(Qt&&Ht){var ee=Qt.getBoundingClientRect();Ht.style.setProperty("height","100%"),Ht.style.setProperty("width","100%");var Yt=Ht.getBoundingClientRect();Ht.style.removeProperty("height"),Ht.style.removeProperty("width");var _e=(ee.left-Yt.left)/U,be=(Yt.bottom-ee.bottom+ee.height)/U;At({bottomOffset:be,label:It,leftOffset:_e,pageIndex:Q})}yt(Xt)})}};return It&&(Ft=Object.assign({},Ft,{title:It,"aria-label":It})),e.createElement(Bt,{annotation:F,hasPopup:!1,ignoreBorder:!1,isRenderable:Ot,page:it,viewport:et},function(Gt){return e.createElement("div",y({},Gt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":F.id,"data-testid":"core__annotation--link-".concat(F.id)}),e.createElement("a",y({ref:_t},Ft)))})},Ze=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=f.hasPopup===!1,z=rt(f),it=he(f),Q=!!(f.hasPopup||z||it),U=f.rect,et=U[2]-U[0],tt=U[3]-U[1],At=f.borderStyle.width;return e.createElement(Bt,{annotation:f,hasPopup:H,ignoreBorder:!0,isRenderable:Q,page:F,viewport:B},function(yt){return e.createElement("div",y({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":f.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),f.vertices&&f.vertices.length&&e.createElement("svg",{height:"".concat(tt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(et," ").concat(tt),width:"".concat(et,"px")},e.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:At||1,points:f.vertices.map(function(_t){return"".concat(_t.x-U[0],",").concat(U[3]-_t.y)}).join(" ")})),yt.slot.children)})},bn=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=f.hasPopup===!1,z=rt(f),it=he(f),Q=!!(f.hasPopup||z||it),U=f.rect,et=U[2]-U[0],tt=U[3]-U[1],At=f.borderStyle.width;return e.createElement(Bt,{annotation:f,hasPopup:H,ignoreBorder:!0,isRenderable:Q,page:F,viewport:B},function(yt){return e.createElement("div",y({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":f.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),f.vertices&&f.vertices.length&&e.createElement("svg",{height:"".concat(tt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(et," ").concat(tt),width:"".concat(et,"px")},e.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:At||1,points:f.vertices.map(function(_t){return"".concat(_t.x-U[0],",").concat(U[3]-_t.y)}).join(" ")})),yt.slot.children)})},_n=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=f.hasPopup===!1,z=rt(f),it=he(f),Q=!!(f.hasPopup||z||it),U=f.rect,et=U[2]-U[0],tt=U[3]-U[1],At=f.borderStyle.width;return e.createElement(Bt,{annotation:f,hasPopup:H,ignoreBorder:!0,isRenderable:Q,page:F,viewport:B},function(yt){return e.createElement("div",y({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":f.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),e.createElement("svg",{height:"".concat(tt,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(et," ").concat(tt),width:"".concat(et,"px")},e.createElement("rect",{height:tt-At,fill:"none",stroke:"transparent",strokeWidth:At||1,x:At/2,y:At/2,width:et-At})),yt.slot.children)})},yn=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=f.hasPopup===!1,z=rt(f),it=he(f),Q=!!(f.hasPopup||z||it);return e.createElement(Bt,{annotation:f,hasPopup:H,ignoreBorder:!0,isRenderable:Q,page:F,viewport:B},function(U){return e.createElement("div",y({},U.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":f.id,onClick:U.popup.toggleOnClick,onMouseEnter:U.popup.openOnHover,onMouseLeave:U.popup.closeOnHover}),U.slot.children)})},An=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=f.hasPopup===!1,z=rt(f),it=he(f),Q=!!(f.hasPopup||z||it);return e.createElement(Bt,{annotation:f,hasPopup:H,ignoreBorder:!0,isRenderable:Q,page:F,viewport:B},function(U){return e.createElement("div",y({},U.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":f.id,onClick:U.popup.toggleOnClick,onMouseEnter:U.popup.openOnHover,onMouseLeave:U.popup.closeOnHover}),U.slot.children)})},Sn=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=f.hasPopup===!1,z=rt(f),it=he(f),Q=!!(f.hasPopup||z||it);return e.createElement(Bt,{annotation:f,hasPopup:H,ignoreBorder:!0,isRenderable:Q,page:F,viewport:B},function(U){return e.createElement("div",y({},U.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":f.id,onClick:U.popup.toggleOnClick,onMouseEnter:U.popup.openOnHover,onMouseLeave:U.popup.closeOnHover}),U.slot.children)})},Fn=function(){return e.createElement(a,{size:16},e.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),e.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),e.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),e.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},On=function(){return e.createElement(a,{size:16},e.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),e.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),e.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),e.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),e.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),e.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),e.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),e.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),e.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),e.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},ur=function(){return e.createElement(a,{size:16},e.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),e.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},dr=function(){return e.createElement(a,{size:16},e.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),e.createElement("path",{d:"M6 4.5L6 0.5"}),e.createElement("path",{d:"M18 4.5L18 0.5"}),e.createElement("path",{d:"M10 4.5L10 0.5"}),e.createElement("path",{d:"M14 4.5L14 0.5"}))},hr=function(){return e.createElement(a,{size:16},e.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),e.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),e.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},fr=function(){return e.createElement(a,{size:16},e.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},pr=function(n){var f=n.annotation,F=n.childAnnotation,B=n.page,H=n.viewport,z=f.hasPopup===!1,it=rt(f),Q=he(f),U=!!(f.hasPopup||it||Q),et=f.name?f.name.toLowerCase():"";return e.createElement(Bt,{annotation:f,hasPopup:z,ignoreBorder:!1,isRenderable:U,page:B,viewport:H},function(tt){return e.createElement(e.Fragment,null,e.createElement("div",y({},tt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":f.id,onClick:tt.popup.toggleOnClick,onMouseEnter:tt.popup.openOnHover,onMouseLeave:tt.popup.closeOnHover}),et&&e.createElement("div",{className:"rpv-core__annotation-text-icon"},et==="check"&&e.createElement(u,null),et==="comment"&&e.createElement(Fn,null),et==="help"&&e.createElement(On,null),et==="insert"&&e.createElement(fr,null),et==="key"&&e.createElement(ur,null),et==="note"&&e.createElement(dr,null),(et==="newparagraph"||et==="paragraph")&&e.createElement(hr,null)),tt.slot.children),F&&F.annotationType===p.AnnotationType.Popup&&tt.popup.opened&&e.createElement(ce,{annotation:F,page:B,viewport:H}))})},gr=function(n){var f=n.annotation,F=n.page,B=n.viewport,H=f.hasPopup===!1,z=rt(f),it=he(f),Q=!!(f.hasPopup||z||it);return e.createElement(Bt,{annotation:f,hasPopup:H,ignoreBorder:!0,isRenderable:Q,page:F,viewport:B},function(U){return e.createElement("div",y({},U.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":f.id,onClick:U.popup.toggleOnClick,onMouseEnter:U.popup.openOnHover,onMouseLeave:U.popup.closeOnHover}),U.slot.children)})},mr=function(n){var f=n.annotations,F=n.doc,B=n.outlines,H=n.page,z=n.pageIndex,it=n.plugins,Q=n.rotation,U=n.scale,et=n.onExecuteNamedAction,tt=n.onJumpFromLinkAnnotation,At=n.onJumpToDest,yt=e.useRef(),_t=H.getViewport({rotation:Q,scale:U}).clone({dontFlip:!0}),It=f.filter(function(Ot){return!Ot.parentId});return d(function(){var Ot=yt.current;Ot&&it.forEach(function(Ft){Ft.onAnnotationLayerRender&&Ft.onAnnotationLayerRender({annotations:It,container:Ot,pageIndex:z,rotation:Q,scale:U})})},[]),e.createElement("div",{ref:yt,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(z)},It.map(function(Ot){var Ft=f.find(function(ue){return ue.parentId===Ot.id});switch(Ot.annotationType){case p.AnnotationType.Caret:return e.createElement(le,{key:Ot.id,annotation:Ot,page:H,viewport:_t});case p.AnnotationType.Circle:return e.createElement(Ae,{key:Ot.id,annotation:Ot,page:H,viewport:_t});case p.AnnotationType.FileAttachment:return e.createElement(de,{key:Ot.id,annotation:Ot,page:H,viewport:_t});case p.AnnotationType.FreeText:return e.createElement(fe,{key:Ot.id,annotation:Ot,page:H,viewport:_t});case p.AnnotationType.Highlight:return e.createElement(ve,{key:Ot.id,annotation:Ot,childAnnotation:Ft,page:H,viewport:_t});case p.AnnotationType.Ink:return e.createElement(We,{key:Ot.id,annotation:Ot,page:H,viewport:_t});case p.AnnotationType.Line:return e.createElement(De,{key:Ot.id,annotation:Ot,page:H,viewport:_t});case p.AnnotationType.Link:return e.createElement(ln,{key:Ot.id,annotation:Ot,annotationContainerRef:yt,doc:F,outlines:B,page:H,pageIndex:z,scale:U,viewport:_t,onExecuteNamedAction:et,onJumpFromLinkAnnotation:tt,onJumpToDest:At});case p.AnnotationType.Polygon:return e.createElement(Ze,{key:Ot.id,annotation:Ot,page:H,viewport:_t});case p.AnnotationType.Polyline:return e.createElement(bn,{key:Ot.id,annotation:Ot,page:H,viewport:_t});case p.AnnotationType.Popup:return e.createElement(ce,{key:Ot.id,annotation:Ot,page:H,viewport:_t});case p.AnnotationType.Square:return e.createElement(_n,{key:Ot.id,annotation:Ot,page:H,viewport:_t});case p.AnnotationType.Squiggly:return e.createElement(yn,{key:Ot.id,annotation:Ot,page:H,viewport:_t});case p.AnnotationType.Stamp:return e.createElement(An,{key:Ot.id,annotation:Ot,page:H,viewport:_t});case p.AnnotationType.StrikeOut:return e.createElement(Sn,{key:Ot.id,annotation:Ot,page:H,viewport:_t});case p.AnnotationType.Text:return e.createElement(pr,{key:Ot.id,annotation:Ot,childAnnotation:Ft,page:H,viewport:_t});case p.AnnotationType.Underline:return e.createElement(gr,{key:Ot.id,annotation:Ot,page:H,viewport:_t});default:return e.createElement(e.Fragment,{key:Ot.id})}}))},vr=function(n){var f=n.page,F=n.renderAnnotations,B=mt(),H=e.useState({loading:!0,annotations:[]}),z=H[0],it=H[1];return e.useEffect(function(){f.getAnnotations({intent:"display"}).then(function(Q){B.current&&it({loading:!1,annotations:Q})})},[]),z.loading?e.createElement(e.Fragment,null):F(z.annotations)},br=function(n){var f=n.doc,F=n.outlines,B=n.page,H=n.pageIndex,z=n.plugins,it=n.rotation,Q=n.scale,U=n.onExecuteNamedAction,et=n.onJumpFromLinkAnnotation,tt=n.onJumpToDest;return e.createElement(vr,{page:B,renderAnnotations:function(At){return e.createElement(mr,{annotations:At,doc:f,outlines:F,page:B,pageIndex:H,plugins:z,rotation:it,scale:Q,onExecuteNamedAction:U,onJumpFromLinkAnnotation:et,onJumpToDest:tt})}})},Dn=function(n,f){var F=n%f;return F===0?n:Math.floor(n-F)},_r=function(n){var f=n.canvasLayerRef,F=n.height,B=n.page,H=n.pageIndex,z=n.plugins,it=n.rotation,Q=n.scale,U=n.width,et=n.onRenderCanvasCompleted,tt=e.useRef();return d(function(){var At=tt.current;At&&At.cancel();var yt=f.current;yt.removeAttribute("data-testid"),z.forEach(function(Yt){Yt.onCanvasLayerRender&&Yt.onCanvasLayerRender({ele:yt,pageIndex:H,rotation:it,scale:Q,status:p.LayerRenderStatus.PreRender})});var _t=B.getViewport({rotation:it,scale:Q}),It=window.devicePixelRatio||1,Ot=Math.sqrt(16777216/(_t.width*_t.height)),Ft=It>Ot;Ft?yt.style.transform="scale(1, 1)":yt.style.removeProperty("transform");var ue=Math.min(Ot,It),Gt=function(Yt,_e){var be,ye;if(Math.floor(Yt)===Yt)return[Yt,1];var Se=1/Yt;if(Se>_e)return[1,_e];if(Math.floor(Se)===Se)return[1,Se];for(var Ce=Yt>1?Se:Yt,Ve=0,Fe=1,qe=1,Be=1;;){var Ue=Ve+qe,He=Fe+Be;if(He>_e)break;Ce<=Ue/He?(qe=(be=[Ue,He])[0],Be=be[1]):(Ve=(ye=[Ue,He])[0],Fe=ye[1])}return Ce<(Ve/Fe+qe/Be)/2?Ce===Yt?[Ve,Fe]:[Fe,Ve]:Ce===Yt?[qe,Be]:[Be,qe]}(ue,8),Xt=Gt[0],Qt=Gt[1];yt.width=Dn(_t.width*ue,Xt),yt.height=Dn(_t.height*ue,Xt),yt.style.width="".concat(Dn(_t.width,Qt),"px"),yt.style.height="".concat(Dn(_t.height,Qt),"px"),yt.hidden=!0;var Ht=yt.getContext("2d",{alpha:!1}),ee=Ft||It!==1?[ue,0,0,ue,0,0]:null;return tt.current=B.render({canvasContext:Ht,transform:ee,viewport:_t}),tt.current.promise.then(function(){yt.hidden=!1,yt.setAttribute("data-testid","core__canvas-layer-".concat(H)),z.forEach(function(Yt){Yt.onCanvasLayerRender&&Yt.onCanvasLayerRender({ele:yt,pageIndex:H,rotation:it,scale:Q,status:p.LayerRenderStatus.DidRender})}),et()},function(){et()}),function(){yt&&(yt.width=0,yt.height=0)}},[]),e.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(F,"px"),width:"".concat(U,"px")}},e.createElement("canvas",{ref:f}))},yr=function(n){var f=n.height,F=n.page,B=n.rotation,H=n.scale,z=n.width,it=e.useRef();return d(function(){var Q=it.current,U=F.getViewport({rotation:B,scale:H});F.getOperatorList().then(function(et){(function(){var tt=it.current;tt&&(tt.innerHTML="")})(),new nt.SVGGraphics(F.commonObjs,F.objs).getSVG(et,U).then(function(tt){tt.style.height="".concat(f,"px"),tt.style.width="".concat(z,"px"),Q.appendChild(tt)})})},[]),e.createElement("div",{className:"rpv-core__svg-layer",ref:it})},Ar=function(n){var f=n.containerRef,F=n.page,B=n.pageIndex,H=n.plugins,z=n.rotation,it=n.scale,Q=n.onRenderTextCompleted,U=e.useRef(),et=function(){var tt=f.current;tt&&([].slice.call(tt.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(At){return tt.removeChild(At)}),[].slice.call(tt.querySelectorAll('br[role="presentation"]')).forEach(function(At){return tt.removeChild(At)}))};return d(function(){var tt=U.current;tt&&tt.cancel();var At=f.current;if(At){At.removeAttribute("data-testid");var yt=F.getViewport({rotation:z,scale:it});return H.forEach(function(_t){_t.onTextLayerRender&&_t.onTextLayerRender({ele:At,pageIndex:B,scale:it,status:p.LayerRenderStatus.PreRender})}),F.getTextContent().then(function(_t){et(),U.current=nt.renderTextLayer({container:At,textContent:_t,textContentSource:_t,viewport:yt}),U.current.promise.then(function(){At.setAttribute("data-testid","core__text-layer-".concat(B)),[].slice.call(At.children).forEach(function(It){It.classList.contains("rpv-core__text-layer-text--not")||It.classList.add("rpv-core__text-layer-text")}),H.forEach(function(It){It.onTextLayerRender&&It.onTextLayerRender({ele:At,pageIndex:B,scale:it,status:p.LayerRenderStatus.DidRender})}),Q()},function(){At.removeAttribute("data-testid"),Q()})}),function(){var _t;et(),(_t=U.current)===null||_t===void 0||_t.cancel()}}},[]),e.createElement("div",{className:"rpv-core__text-layer",ref:f})},Sr=function(n){var f=n.doc,F=n.measureRef,B=n.outlines,H=n.pageIndex,z=n.pageRotation,it=n.pageSize,Q=n.plugins,U=n.renderPage,et=n.renderQueueKey,tt=n.rotation,At=n.scale,yt=n.shouldRender,_t=n.viewMode,It=n.onExecuteNamedAction,Ot=n.onJumpFromLinkAnnotation,Ft=n.onJumpToDest,ue=n.onRenderCompleted,Gt=n.onRotatePage,Xt=mt(),Qt=e.useState(null),Ht=Qt[0],ee=Qt[1],Yt=e.useState(!1),_e=Yt[0],be=Yt[1],ye=e.useState(!1),Se=ye[0],Ce=ye[1],Ve=e.useRef(),Fe=e.useRef(),qe=Math.abs(tt+z)%180==0,Be=it.pageWidth*At,Ue=it.pageHeight*At,He=qe?Be:Ue,je=qe?Ue:Be,Qe=(it.rotation+tt+z)%360,an=e.useRef(0),sn=U||function(Xe){return e.createElement(e.Fragment,null,Xe.canvasLayer.children,Xe.textLayer.children,Xe.annotationLayer.children)};return e.useEffect(function(){ee(null),be(!1),Ce(!1)},[z,tt,At]),e.useEffect(function(){yt&&Xt.current&&!Ht&&L(f,H).then(function(Xe){Xt.current&&(an.current=et,ee(Xe))})},[yt,Ht]),e.useEffect(function(){_e&&Se&&(et!==an.current?(ee(null),be(!1),Ce(!1)):ue(H))},[_e,Se]),e.createElement("div",{className:b({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":_t===p.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":_t===p.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":_t===p.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(H),ref:F,style:{height:"".concat(je,"px"),width:"".concat(He,"px")}},Ht?e.createElement(e.Fragment,null,sn({annotationLayer:{attrs:{},children:e.createElement(br,{doc:f,outlines:B,page:Ht,pageIndex:H,plugins:Q,rotation:Qe,scale:At,onExecuteNamedAction:It,onJumpFromLinkAnnotation:Ot,onJumpToDest:Ft})},canvasLayer:{attrs:{},children:e.createElement(_r,{canvasLayerRef:Ve,height:je,page:Ht,pageIndex:H,plugins:Q,rotation:Qe,scale:At,width:He,onRenderCanvasCompleted:function(){Xt.current&&be(!0)}})},canvasLayerRendered:_e,doc:f,height:je,pageIndex:H,rotation:Qe,scale:At,svgLayer:{attrs:{},children:e.createElement(yr,{height:je,page:Ht,rotation:Qe,scale:At,width:He})},textLayer:{attrs:{},children:e.createElement(Ar,{containerRef:Fe,page:Ht,pageIndex:H,plugins:Q,rotation:Qe,scale:At,onRenderTextCompleted:function(){Xt.current&&Ce(!0)}})},textLayerRendered:Se,width:He,markRendered:ue,onRotatePage:function(Xe){return Gt(H,Xe)}}),Q.map(function(Xe,tn){return Xe.renderPageLayer?e.createElement(e.Fragment,{key:tn},Xe.renderPageLayer({canvasLayerRef:Ve,canvasLayerRendered:_e,doc:f,height:je,pageIndex:H,rotation:Qe,scale:At,textLayerRef:Fe,textLayerRendered:Se,width:He})):e.createElement(e.Fragment,{key:tn})})):e.createElement(s,{testId:"core__page-layer-loading-".concat(H)}))},Er=function(n,f){var F=f.rect;return n.height!==F.height||n.width!==F.width?F:n};(function(n){n.Horizontal="Horizontal",n.Vertical="Vertical",n.Both="Both"})(Dt||(Dt={}));var Cr=function(n){return 1-Math.pow(1-n,4)},Ln=1e-4,Ci={left:0,top:0},wi={capture:!1,passive:!0},wr=function(n){var f=n.elementRef,F=n.enableSmoothScroll,B=n.isRtl,H=n.scrollDirection,z=n.onSmoothScroll,it=e.useState(Ci),Q=it[0],U=it[1],et=e.useState(f.current),tt=et[0],At=et[1],yt=B?-1:1,_t=e.useRef(H);_t.current=H;var It=e.useRef(Ci),Ot=e.useRef(!0),Ft=e.useCallback(function(){Ot.current=!0,F&&U(It.current),z(!1)},[]),ue=e.useCallback(function(){if(tt){switch(_t.current){case Dt.Horizontal:It.current={left:yt*tt.scrollLeft,top:0};break;case Dt.Both:It.current={left:yt*tt.scrollLeft,top:tt.scrollTop};break;case Dt.Vertical:default:It.current={left:0,top:tt.scrollTop}}F&&!Ot.current||U(It.current)}},[tt]);d(function(){At(f.current)}),d(function(){if(tt)return tt.addEventListener("scroll",ue,wi),function(){tt.removeEventListener("scroll",ue,wi)}},[tt]);var Gt=e.useCallback(function(Xt,Qt){var Ht=f.current;if(!Ht)return Promise.resolve();var ee={left:0,top:0};switch(_t.current){case Dt.Horizontal:ee.left=yt*Xt.left;break;case Dt.Both:ee.left=yt*Xt.left,ee.top=Xt.top;break;case Dt.Vertical:default:ee.top=Xt.top}return Qt?(Ot.current=!1,z(!0),new Promise(function(Yt,_e){(function(be,ye,Se,Ce,Ve,Fe){Ve===void 0&&(Ve=function(tn){return tn}),Fe===void 0&&(Fe=function(){});var qe=0,Be=0,Ue=!1;switch(ye){case Dt.Horizontal:Be=be.scrollLeft,qe=0;case Dt.Both:Be=be.scrollLeft,qe=be.scrollTop;break;case Dt.Vertical:default:Be=0,qe=be.scrollTop}var He=function(){Ue||(Ue=!0,be.scrollLeft=Se.left,be.scrollTop=Se.top,Fe())};if(Math.abs(qe-Se.top)<=Ln&&ye===Dt.Vertical)He();else if(Math.abs(Be-Se.left)<=Ln&&ye===Dt.Horizontal)He();else{var je,Qe=-1,an=Be-Se.left,sn=qe-Se.top,Xe=function(tn){Qe===-1&&(Qe=tn);var cn=tn-Qe,Kt=Math.min(cn/Ce,1),$t=Ve(Kt),Wt={left:Be-an*$t,top:qe-sn*$t};switch(ye){case Dt.Horizontal:be.scrollLeft=Wt.left;break;case Dt.Both:be.scrollLeft=Wt.left,be.scrollTop=Wt.top;break;case Dt.Vertical:default:be.scrollTop=Wt.top}Math.abs(Wt.top-Se.top)<=Ln&&Math.abs(Wt.left-Se.left)<=Ln&&!Ue&&(window.cancelAnimationFrame(je),He()),cn<Ce?je=window.requestAnimationFrame(Xe):window.cancelAnimationFrame(je)};je=window.requestAnimationFrame(Xe)}})(Ht,_t.current,ee,400,Cr,function(){Ft(),Yt()})})):new Promise(function(Yt,_e){switch(_t.current){case Dt.Horizontal:Ht.scrollLeft=ee.left;break;case Dt.Both:Ht.scrollLeft=ee.left,Ht.scrollTop=ee.top;break;case Dt.Vertical:default:Ht.scrollTop=ee.top}Yt()})},[f]);return{scrollOffset:Q,scrollTo:Gt}},kn=function(n,f,F){return Math.max(n,Math.min(F,f))},Pr=function(n,f){if(f!==p.ViewMode.DualPageWithCover)return 0;if(!function(H){var z=H.length;if(z===1)return!1;for(var it=1;it<z;it++)if(H[it].height!==H[0].height||H[it].width!==H[0].width)return!0;return!1}(n))return 2*n[0].width;var F=Tt(n.slice(1),2).map(function(H){return H.length===2?H[0].width+H[1].width:H[0].width}),B=[n[0].width].concat(F);return Math.max.apply(Math,B)},Tr={left:0,top:0},kr={left:0,top:0},zn={left:0,top:0},Rr={left:0,top:0},Mr={height:0,width:0},Pi={left:0,top:0},Ti="data-virtual-index",xr=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Fr=function(n){var f=n.enableSmoothScroll,F=n.isRtl,B=n.numberOfItems,H=n.parentRef,z=n.setRenderRange,it=n.sizes,Q=n.scrollMode,U=n.viewMode,et=e.useState(!1),tt=et[0],At=et[1],yt=e.useCallback(function(Kt){return At(Kt)},[]),_t=e.useRef(Q);_t.current=Q;var It=e.useRef(U);It.current=U;var Ot=Q===p.ScrollMode.Wrapped||U===p.ViewMode.DualPageWithCover||U===p.ViewMode.DualPage?Dt.Both:Q===p.ScrollMode.Horizontal?Dt.Horizontal:Dt.Vertical,Ft=wr({elementRef:H,enableSmoothScroll:f,isRtl:F,scrollDirection:Ot,onSmoothScroll:yt}),ue=Ft.scrollOffset,Gt=Ft.scrollTo,Xt=function(Kt){var $t=Kt.elementRef,Wt=e.useState($t.current),qt=Wt[0],Vt=Wt[1],ne=e.useRef(!1),ie=e.useReducer(Er,{height:0,width:0}),zt=ie[0],Ut=ie[1];return d(function(){$t.current!==qt&&Vt($t.current)}),d(function(){if(qt&&!ne.current){ne.current=!0;var se=qt.getBoundingClientRect(),pe=se.height,Me=se.width;Ut({rect:{height:pe,width:Me}})}},[qt]),e.useEffect(function(){if(qt){var se=new ResizeObserver(function(pe,Me){pe.forEach(function(Te){if(Te.target===qt){var Ye=Te.contentRect,en=Ye.height,oe=Ye.width;Ut({rect:{height:en,width:oe}})}})});return se.observe(qt),function(){se.unobserve(qt)}}},[qt]),zt}({elementRef:H}),Qt=e.useRef({scrollOffset:Pi,measurements:[]});Qt.current.scrollOffset=ue;var Ht=e.useMemo(function(){return Array(B).fill(-1)},[]),ee=e.useState(Ht),Yt=ee[0],_e=ee[1],be=e.useMemo(function(){var Kt=new IntersectionObserver(function($t){$t.forEach(function(Wt){var qt=Wt.isIntersecting?Wt.intersectionRatio:-1,Vt=Wt.target.getAttribute(Ti);if(Vt){var ne=parseInt(Vt,10);0<=ne&&ne<B&&_e(function(ie){return ie[ne]=qt,function(zt,Ut,se){if(se||arguments.length===2)for(var pe,Me=0,Te=Ut.length;Me<Te;Me++)!pe&&Me in Ut||(pe||(pe=Array.prototype.slice.call(Ut,0,Me)),pe[Me]=Ut[Me]);return zt.concat(pe||Array.prototype.slice.call(Ut))}([],ie,!0)})}})},{threshold:xr});return Kt},[]),ye=e.useMemo(function(){return Q===p.ScrollMode.Page&&U===p.ViewMode.SinglePage?function(Kt,$t,Wt){for(var qt=[],Vt=0;Vt<Kt;Vt++){var ne={height:Math.max($t.height,Wt[Vt].height),width:Math.max($t.width,Wt[Vt].width)},ie=Vt===0?Rr:qt[Vt-1].end,zt={left:ie.left+ne.width,top:ie.top+ne.height};qt[Vt]={index:Vt,start:ie,size:ne,end:zt,visibility:-1}}return qt}(B,Xt,it):U===p.ViewMode.DualPageWithCover?function(Kt,$t,Wt,qt){for(var Vt=[],ne=0,ie=0,zt=zn,Ut=0;Ut<Kt;Ut++){var se=Ut===0?{height:qt===p.ScrollMode.Page?Math.max($t.height,Wt[Ut].height):Wt[Ut].height,width:qt===p.ScrollMode.Page?Math.max($t.width,Wt[Ut].width):Wt[Ut].width}:{height:qt===p.ScrollMode.Page?Math.max($t.height,Wt[Ut].height):Wt[Ut].height,width:Math.max($t.width/2,Wt[Ut].width)};qt===p.ScrollMode.Page?zt=Ut===0?zn:{left:Ut%2==0?se.width:0,top:Math.floor((Ut-1)/2)*se.height+Vt[0].end.top}:Ut===0?(zt=zn,ne=Wt[0].height,ie=0):Ut%2==1?(zt={left:0,top:ne+=ie},ie=Ut===Kt-1?Wt[Ut].height:Math.max(Wt[Ut].height,Wt[Ut+1].height)):zt={left:Vt[Ut-1].end.left,top:ne};var pe={left:zt.left+se.width,top:zt.top+se.height};Vt[Ut]={index:Ut,start:zt,size:se,end:pe,visibility:-1}}return Vt}(B,Xt,it,Q):U===p.ViewMode.DualPage?function(Kt,$t,Wt,qt){for(var Vt=[],ne=0,ie=0,zt=kr,Ut=0;Ut<Kt;Ut++){var se={height:qt===p.ScrollMode.Page?Math.max($t.height,Wt[Ut].height):Wt[Ut].height,width:Math.max($t.width/2,Wt[Ut].width)};qt===p.ScrollMode.Page?zt={left:Ut%2==0?0:se.width,top:Math.floor(Ut/2)*se.height}:Ut%2==0?(zt={left:0,top:ne+=ie},ie=Ut===Kt-1?Wt[Ut].height:Math.max(Wt[Ut].height,Wt[Ut+1].height)):zt={left:Vt[Ut-1].end.left,top:ne};var pe={left:zt.left+se.width,top:zt.top+se.height};Vt[Ut]={index:Ut,start:zt,size:se,end:pe,visibility:-1}}return Vt}(B,Xt,it,Q):function(Kt,$t,Wt,qt){for(var Vt=[],ne=0,ie={left:0,top:0},zt=0,Ut=Tr,se=0;se<Kt;se++){var pe=Wt[se];if(se===0)ne=pe.width,ie={left:0,top:0},zt=pe.height;else switch(qt){case p.ScrollMode.Wrapped:(ne+=pe.width)<$t.width?(Ut={left:Vt[se-1].end.left,top:ie.top},zt=Math.max(zt,pe.height)):(ne=pe.width,ie={left:(Ut={left:ie.left,top:ie.top+zt}).left,top:Ut.top},zt=pe.height);break;case p.ScrollMode.Horizontal:case p.ScrollMode.Vertical:default:Ut=Vt[se-1].end}var Me={left:Ut.left+pe.width,top:Ut.top+pe.height};Vt[se]={index:se,start:Ut,size:pe,end:Me,visibility:-1}}return Vt}(B,Xt,it,Q)},[Q,it,U,Xt]),Se=ye[B-1]?{height:ye[B-1].end.top,width:ye[B-1].end.left}:Mr;Qt.current.measurements=ye;var Ce=e.useMemo(function(){var Kt=function(se,pe,Me,Te){var Ye=0;switch(se){case Dt.Horizontal:Ye=Te.left;break;case Dt.Vertical:default:Ye=Te.top}var en=pe.length-1,oe=function(Pe,un,Cn,Nn){for(;Pe<=un;){var gn=(Pe+un)/2|0,Rn=Nn(gn);if(Rn<Cn)Pe=gn+1;else{if(!(Rn>Cn))return gn;un=gn-1}}return Pe>0?Pe-1:0}(0,en,Ye,function(Pe){switch(se){case Dt.Horizontal:return pe[Pe].start.left;case Dt.Both:case Dt.Vertical:default:return pe[Pe].start.top}});if(se===Dt.Both)for(var Ke=pe[oe].start.top;oe-1>=0&&pe[oe-1].start.top===Ke&&pe[oe-1].start.left>=Te.left;)oe--;for(var xe=oe;xe<=en;){var Oe={top:pe[xe].start.top-Te.top,left:pe[xe].start.left-Te.left},ze={height:Me.height-Oe.top,width:Me.width-Oe.left};if(se===Dt.Horizontal&&ze.width<0||se===Dt.Vertical&&ze.height<0||se===Dt.Both&&(ze.width<0||ze.height<0))break;xe++}return{start:oe,end:xe}}(Ot,ye,Xt,ue),$t=Kt.start,Wt=Kt.end,qt=Yt.slice(kn(0,B,$t),kn(0,B,Wt)),Vt=$t+qt.reduce(function(se,pe,Me,Te){return pe>Te[se]?Me:se},0),ne=Vt=kn(0,B-1,Vt),ie=z({endPage:Wt,numPages:B,startPage:$t}),zt=ie.startPage,Ut=ie.endPage;switch(zt=Math.max(zt,0),Ut=Math.min(Ut,B-1),U){case p.ViewMode.DualPageWithCover:Vt>0&&(ne=Vt%2==1?Vt:Vt-1),zt=zt===0?0:zt%2==1?zt:zt-1,B-(Ut=Ut%2==1?Ut-1:Ut)<=2&&(Ut=B-1);break;case p.ViewMode.DualPage:ne=Vt%2==0?Vt:Vt-1,zt=zt%2==0?zt:zt-1,Ut=Ut%2==1?Ut:Ut-1;break;case p.ViewMode.SinglePage:default:ne=Vt}return{startPage:zt,endPage:Ut,maxVisbilityIndex:ne}},[ye,Xt,ue,U,Yt]),Ve=Ce.startPage,Fe=Ce.endPage,qe=Ce.maxVisbilityIndex,Be=e.useMemo(function(){for(var Kt=[],$t=function(qt){var Vt=ye[qt],ne=y(y({},Vt),{visibility:Yt[qt]!==void 0?Yt[qt]:-1,measureRef:function(ie){ie&&(ie.setAttribute(Ti,"".concat(qt)),be.observe(ie))}});Kt.push(ne)},Wt=Ve;Wt<=Fe;Wt++)$t(Wt);return Kt},[Ve,Fe,Yt,ye]),Ue=e.useCallback(function(Kt,$t){var Wt=Qt.current.measurements[kn(0,B-1,Kt)],qt=_t.current===p.ScrollMode.Page?Pi:$t;return Wt?Gt({left:qt.left+Wt.start.left,top:qt.top+Wt.start.top},f):Promise.resolve()},[Gt,f]),He=e.useCallback(function(Kt,$t){var Wt=Qt.current.measurements,qt=Wt[Kt].start,Vt=Wt.find(function(ie){return ie.start.top-qt.top>1e-12});if(!Vt)return Promise.resolve();var ne=Vt.index;switch(It.current){case p.ViewMode.DualPage:ne=ne%2==0?ne:ne+1;break;case p.ViewMode.DualPageWithCover:ne=ne%2==1?ne:ne+1}return Ue(ne,$t)},[]),je=e.useCallback(function(Kt,$t){for(var Wt=Qt.current.measurements,qt=Wt[Kt].start,Vt=Kt,ne=!1,ie=B-1;ie>=0;ie--)if(qt.top-Wt[ie].start.top>1e-12){ne=!0,Vt=Wt[ie].index;break}if(!ne)return Promise.resolve();switch(It.current){case p.ViewMode.DualPage:Vt=Vt%2==0?Vt:Vt-1;break;case p.ViewMode.DualPageWithCover:Vt=Vt%2==0?Vt-1:Vt}return Vt===Kt&&(Vt=Kt-1),Ue(Vt,$t)},[]),Qe=e.useCallback(function(Kt,$t){if(It.current===p.ViewMode.DualPageWithCover||It.current===p.ViewMode.DualPage)return He(Kt,$t);switch(_t.current){case p.ScrollMode.Wrapped:return He(Kt,$t);case p.ScrollMode.Horizontal:case p.ScrollMode.Vertical:default:return Ue(Kt+1,$t)}},[]),an=e.useCallback(function(Kt,$t){if(It.current===p.ViewMode.DualPageWithCover||It.current===p.ViewMode.DualPage)return je(Kt,$t);switch(_t.current){case p.ScrollMode.Wrapped:return je(Kt,$t);case p.ScrollMode.Horizontal:case p.ScrollMode.Vertical:default:return Ue(Kt-1,$t)}},[]),sn=e.useCallback(function(){return function(Kt,$t){switch($t){case p.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Kt.width,"px")};case p.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Kt.height,"px"),width:"100%"}}}(Se,_t.current)},[Se]),Xe=e.useCallback(function(Kt){return function($t,Wt,qt){return qt!==p.ScrollMode.Page?{}:{height:"".concat(Wt.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat($t.start.top,"px)")}}(Kt,Xt,_t.current)},[Xt]),tn=e.useCallback(function(Kt){return function($t,Wt,qt,Vt,ne){var ie,zt,Ut,se,pe,Me,Te,Ye=Wt?"right":"left",en=Wt?-1:1,oe=qt.length,Ke=$t.start.left*en,xe=$t.size,Oe=xe.height,ze=xe.width;if(Vt===p.ViewMode.DualPageWithCover){var Pe=ne===p.ScrollMode.Page?0:$t.start.top;return $t.index===0||oe%2==0&&$t.index===oe-1?((ie={height:"".concat(Oe,"px"),minWidth:"".concat(Pr(qt,Vt),"px"),width:"100%"})[Ye]=0,ie.position="absolute",ie.top=0,ie.transform="translate(".concat(Ke,"px, ").concat(Pe,"px)"),ie):((zt={height:"".concat(Oe,"px"),width:"".concat(ze,"px")})[Ye]=0,zt.position="absolute",zt.top=0,zt.transform="translate(".concat(Ke,"px, ").concat(Pe,"px)"),zt)}if(Vt===p.ViewMode.DualPage)return(Ut={height:"".concat(Oe,"px"),width:"".concat(ze,"px")})[Ye]=0,Ut.position="absolute",Ut.top=0,Ut.transform="translate(".concat(Ke,"px, ").concat(ne===p.ScrollMode.Page?0:$t.start.top,"px)"),Ut;switch(ne){case p.ScrollMode.Horizontal:return(se={height:"100%",width:"".concat(ze,"px")})[Ye]=0,se.position="absolute",se.top=0,se.transform="translateX(".concat(Ke,"px)"),se;case p.ScrollMode.Page:return(pe={height:"".concat(Oe,"px"),width:"".concat(ze,"px")})[Ye]=0,pe.position="absolute",pe.top=0,pe;case p.ScrollMode.Wrapped:return(Me={height:"".concat(Oe,"px"),width:"".concat(ze,"px")})[Ye]=0,Me.position="absolute",Me.top=0,Me.transform="translate(".concat(Ke,"px, ").concat($t.start.top,"px)"),Me;case p.ScrollMode.Vertical:default:return(Te={height:"".concat(Oe,"px"),width:"100%"})[Ye]=0,Te.position="absolute",Te.top=0,Te.transform="translateY(".concat($t.start.top,"px)"),Te}}(Kt,F,it,It.current,_t.current)},[F,it]),cn=e.useCallback(function(Kt,$t){var Wt=Qt.current,qt=Wt.measurements,Vt=Wt.scrollOffset,ne=qt[kn(0,B-1,$t)];if(ne){var ie=_t.current===p.ScrollMode.Page?{left:ne.start.left,top:ne.start.top}:{left:Vt.left*Kt,top:Vt.top*Kt};return Gt(ie,!1)}return Promise.resolve()},[]);return e.useEffect(function(){return function(){be.disconnect()}},[]),{boundingClientRect:Xt,isSmoothScrolling:tt,startPage:Ve,endPage:Fe,maxVisbilityIndex:qe,virtualItems:Be,getContainerStyles:sn,getItemContainerStyles:Xe,getItemStyles:tn,scrollToItem:Ue,scrollToNextItem:Qe,scrollToPreviousItem:an,zoom:cn}},Gn=function(n,f,F,B,H,z){var it=F;switch(!0){case(H===p.ViewMode.DualPageWithCover&&z>=3):case(H===p.ViewMode.DualPage&&z>=3):it=2*F;break;default:it=F}switch(B){case p.SpecialZoomLevel.ActualSize:return 1;case p.SpecialZoomLevel.PageFit:return Math.min((n.clientWidth-17)/it,(n.clientHeight-16)/f);case p.SpecialZoomLevel.PageWidth:return(n.clientWidth-17)/it}},Or=function(n){var f,F,B=n.getCurrentPage,H=(f=50,F=e.useRef([]),e.useEffect(function(){return function(){F.current=[]}},[]),{push:function(et){var tt=F.current;tt.length+1>f&&tt.shift(),tt.push(et),F.current=tt},map:function(et){return F.current.map(function(tt){return et(tt)})},pop:function(){var et=F.current;if(et.length===0)return null;var tt=et.pop();return F.current=et,tt}}),z=function(et){var tt=e.useRef([]);return e.useEffect(function(){return function(){tt.current=[]}},[]),{dequeue:function(){var At=tt.current;if(At.length===0)return null;var yt=At.shift();return tt.current=At,yt||null},enqueue:function(At){var yt=tt.current;yt.length+1>et&&yt.pop(),tt.current=[At].concat(yt)},map:function(At){return tt.current.map(function(yt){return At(yt)})}}}(50),it=function(){var et=z.dequeue();return et&&H.push(et),et&&et.pageIndex===B()?it():et},Q=function(){var et=H.pop();return et&&z.enqueue(et),et&&et.pageIndex===B()?Q():et},U=e.useCallback(function(et){H.push(et)},[]);return{getNextDestination:it,getPreviousDestination:Q,markVisitedDestination:U}},ki=function(n){var f=[];return n.map(function(F){f=f.concat(F).concat(function(B){var H=[];return B.items&&B.items.length>0&&(H=H.concat(ki(B.items))),H}(F))}),f},Ri={capture:!1,passive:!0},Dr={height:0,width:0},Xn={height:0,width:0},Lr=function(n){var f=n.getCurrentPage,F=n.getCurrentScrollMode,B=n.jumpToPage,H=n.targetRef,z=e.useState(p.FullScreenMode.Normal),it=z[0],Q=z[1],U=function(){var Yt=e.useState(Dr),_e=Yt[0],be=Yt[1],ye=ut(function(){be({height:window.innerHeight,width:window.innerWidth})},100);return d(function(){return window.addEventListener("resize",ye,Ri),function(){window.removeEventListener("resize",ye,Ri)}},[]),_e}(),et=e.useState(Xn),tt=et[0],At=et[1],yt=e.useRef(Xn),_t=e.useRef(f()),It=e.useRef(Xn),Ot=e.useState(H.current),Ft=Ot[0],ue=Ot[1],Gt=e.useRef();d(function(){H.current!==Ft&&ue(H.current)},[]),d(function(){if(Ft){var Yt=new ResizeObserver(function(_e){_e.forEach(function(be){var ye=be.target.getBoundingClientRect(),Se=ye.height,Ce=ye.width;At({height:Se,width:Ce})})});return Yt.observe(Ft),function(){Yt.unobserve(Ft),Yt.disconnect()}}},[Ft]);var Xt=e.useCallback(function(Yt){var _e=Et();return _e&&_e!==Yt?(Q(p.FullScreenMode.Normal),Z(_e)):Promise.resolve()},[]),Qt=e.useCallback(function(Yt){Yt&&_()&&(ue(Yt),Xt(Yt).then(function(){Gt.current=Yt,Q(p.FullScreenMode.Entering),function(_e){x&&_e[X.RequestFullScreen]()}(Yt)}))},[]),Ht=e.useCallback(function(){Et()&&(Q(p.FullScreenMode.Exitting),Z(document))},[]),ee=e.useCallback(function(){Ft&&Et()!==Ft&&Q(p.FullScreenMode.Exitting)},[Ft]);return e.useEffect(function(){switch(it){case p.FullScreenMode.Entering:Gt.current&&(Gt.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),_t.current=f(),yt.current={height:window.innerHeight,width:window.innerWidth};break;case p.FullScreenMode.Entered:F()===p.ScrollMode.Page?B(_t.current).then(function(){Q(p.FullScreenMode.EnteredCompletely)}):Q(p.FullScreenMode.EnteredCompletely);break;case p.FullScreenMode.Exitting:Gt.current&&(Gt.current.style.backgroundColor="",Gt.current=null),_t.current=f();break;case p.FullScreenMode.Exited:Q(p.FullScreenMode.Normal),F()===p.ScrollMode.Page&&B(_t.current)}},[it]),e.useEffect(function(){if(it!==p.FullScreenMode.Normal)return it===p.FullScreenMode.Entering&&U.height===tt.height&&U.width===tt.width&&U.height>0&&U.width>0&&(It.current.height===0||U.height==It.current.height)?(It.current={height:window.innerHeight,width:window.innerWidth},void Q(p.FullScreenMode.Entered)):void(it===p.FullScreenMode.Exitting&&yt.current.height===U.height&&yt.current.width===U.width&&U.height>0&&U.width>0&&Q(p.FullScreenMode.Exited))},[it,U,tt]),e.useEffect(function(){var Yt;return Yt=ee,x&&document.addEventListener(X.FullScreenChange,Yt),function(){(function(_e){x&&document.removeEventListener(X.FullScreenChange,_e)})(ee)}},[Ft]),{enterFullScreenMode:Qt,exitFullScreenMode:Ht,fullScreenMode:it}},Ir={buildPageStyles:function(){return{}},transformSize:function(n){return n.size}},En={left:0,top:0},Nr=function(n){var f=n.currentFile,F=n.defaultScale,B=n.doc,H=n.enableSmoothScroll,z=n.initialPage,it=n.initialRotation,Q=n.initialScale,U=n.pageLayout,et=n.pageSizes,tt=n.plugins,At=n.renderPage,yt=n.scrollMode,_t=n.setRenderRange,It=n.viewMode,Ot=n.viewerState,Ft=n.onDocumentLoad,ue=n.onOpenFile,Gt=n.onPageChange,Xt=n.onRotate,Qt=n.onRotatePage,Ht=n.onZoom,ee=B.numPages,Yt=B.loadingTask.docId,_e=e.useContext(D).l10n,be=e.useContext(P),ye=be.direction===p.TextDirection.RightToLeft,Se=e.useRef(),Ce=e.useRef(),Ve=e.useState(z),Fe=Ve[0],qe=Ve[1],Be=e.useRef(null),Ue=Or({getCurrentPage:function(){return oe.current.pageIndex}}),He=e.useState(it),je=He[0],Qe=He[1],an=st(je),sn=e.useState(!1),Xe=sn[0],tn=sn[1],cn=e.useState(new Map),Kt=cn[0],$t=cn[1],Wt=e.useState(yt),qt=Wt[0],Vt=Wt[1],ne=st(qt),ie=e.useState(It),zt=ie[0],Ut=ie[1],se=st(zt),pe=function(Rt){var ae=mt(),ge=e.useState([]),we=ge[0],Ee=ge[1];return e.useEffect(function(){Rt.getOutline().then(function(me){if(ae.current&&me!==null){var Ge=ki(me);Ee(Ge)}})},[]),we}(B),Me=e.useState(Q),Te=Me[0],Ye=Me[1],en=st(Te),oe=e.useRef(Ot),Ke=e.useRef(typeof F=="string"?F:null),xe=e.useRef(-1),Oe=e.useRef(-1),ze=e.useRef(z),Pe=Lr({getCurrentPage:function(){return oe.current.pageIndex},getCurrentScrollMode:function(){return oe.current.scrollMode},jumpToPage:function(Rt){return hn(Rt)},targetRef:Ce}),un=e.useState(-1),Cn=un[0],Nn=un[1],gn=e.useState(0),Rn=gn[0],Vr=gn[1],nn=bt({doc:B});e.useEffect(function(){return function(){Nt.clear(),te.clear()}},[Yt]);var Oi=e.useMemo(function(){return Object.assign({},Ir,U)},[]),qr=e.useMemo(function(){return Array(ee).fill(0).map(function(Rt,ae){var ge=[et[ae].pageHeight,et[ae].pageWidth],we=Math.abs(je)%180==0?{height:ge[0],width:ge[1]}:{height:ge[1],width:ge[0]},Ee={height:we.height*Te,width:we.width*Te};return Oi.transformSize({numPages:ee,pageIndex:ae,size:Ee})})},[je,Te]),ke=Fr({enableSmoothScroll:H,isRtl:ye,numberOfItems:ee,parentRef:Ce,scrollMode:qt,setRenderRange:_t,sizes:qr,viewMode:zt}),zr=ut(function(){!Ke.current||oe.current.fullScreenMode!==p.FullScreenMode.Normal||z>0&&ze.current===z||mn(Ke.current)},200);(function(Rt){var ae=Rt.targetRef,ge=Rt.onResize;d(function(){var we=new ResizeObserver(function(me){me.forEach(function(Ge){ge(Ge.target)})}),Ee=ae.current;if(Ee)return we.observe(Ee),function(){we.unobserve(Ee)}},[])})({targetRef:Ce,onResize:zr});var dn=function(Rt){var ae=Rt;tt.forEach(function(ge){ge.onViewerStateChange&&(ae=ge.onViewerStateChange(ae))}),oe.current=ae},Gr=function(){return Ce.current},Xr=function(){return oe.current},$r=e.useCallback(function(Rt){Ue.markVisitedDestination(Rt)},[]),Kn=e.useCallback(function(Rt){var ae=Rt.pageIndex,ge=Rt.bottomOffset,we=Rt.leftOffset,Ee=Rt.scaleTo,me=Ce.current,Ge=oe.current;return me&&Ge?new Promise(function(fn,ni){L(B,ae).then(function(Bn){var pn=Bn.getViewport({scale:1}),jn=0,Hi=(typeof ge=="function"?ge(pn.width,pn.height):ge)||0,Un=(typeof we=="function"?we(pn.width,pn.height):we)||0,wn=Ge.scale;switch(Ee){case p.SpecialZoomLevel.PageFit:jn=0,Un=0,mn(p.SpecialZoomLevel.PageFit);break;case p.SpecialZoomLevel.PageWidth:wn=Gn(me,et[ae].pageHeight,et[ae].pageWidth,p.SpecialZoomLevel.PageWidth,It,ee),jn=(pn.height-Hi)*wn,Un*=wn,mn(wn);break;default:jn=(pn.height-Hi)*wn,Un*=wn}switch(Ge.scrollMode){case p.ScrollMode.Horizontal:ke.scrollToItem(ae,{left:Un,top:0}).then(function(){fn()});break;case p.ScrollMode.Vertical:default:ke.scrollToItem(ae,{left:0,top:jn}).then(function(){fn()})}})}):Promise.resolve()},[]),Di=e.useCallback(function(Rt){return Ue.markVisitedDestination(Rt),Kn(Rt)},[]),Yr=e.useCallback(function(){var Rt=Ue.getNextDestination();return Rt?Kn(Rt):Promise.resolve()},[]),Kr=e.useCallback(function(){var Rt=Ue.getPreviousDestination();return Rt?Kn(Rt):Promise.resolve()},[]),Jr=e.useCallback(function(){return ke.scrollToNextItem(oe.current.pageIndex,En)},[]),hn=e.useCallback(function(Rt){return 0<=Rt&&Rt<ee?ke.scrollToItem(Rt,En):Promise.resolve()},[]),Qr=e.useCallback(function(){return ke.scrollToPreviousItem(oe.current.pageIndex,En)},[]),Li=e.useCallback(function(Rt){var ae,ge;(ae=Rt.name,ge=ae.split(/\./).pop(),ge?ge.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(we){var Ee=new FileReader;Ee.readAsArrayBuffer(Rt),Ee.onload=function(){var me=new Uint8Array(Ee.result);we(me)}}).then(function(we){ue(Rt.name,we)})},[ue]),Ii=e.useCallback(function(Rt){var ae=Rt===p.RotateDirection.Backward?-90:90,ge=oe.current.rotation,we=ge===360||ge===-360?ae:ge+ae;nn.markNotRendered(),Qe(we),dn(y(y({},oe.current),{rotation:we})),Xt({direction:Rt,doc:B,rotation:we})},[]),Jn=e.useCallback(function(Rt,ae){var ge=ae===p.RotateDirection.Backward?-90:90,we=oe.current.pagesRotation,Ee=(we.has(Rt)?we.get(Rt):it)+ge,me=we.set(Rt,Ee);$t(me),tn(function(Ge){return!Ge}),dn(y(y({},oe.current),{pagesRotation:me,rotatedPage:Rt})),Qt({direction:ae,doc:B,pageIndex:Rt,rotation:Ee}),nn.markRendering(Rt),Nn(Rt)},[]),Ni=e.useCallback(function(Rt){dn(y(y({},oe.current),{scrollMode:Rt})),Vt(Rt)},[]),Bi=e.useCallback(function(Rt){dn(y(y({},oe.current),{viewMode:Rt})),Ut(Rt)},[]),mn=e.useCallback(function(Rt){var ae=Ce.current,ge=oe.current.pageIndex;if(!(ge<0||ge>=ee)){var we=et[ge].pageHeight,Ee=et[ge].pageWidth,me=ae?typeof Rt=="string"?Gn(ae,we,Ee,Rt,oe.current.viewMode,ee):Rt:1;Ke.current=typeof Rt=="string"?Rt:null,me!==oe.current.scale&&(Vr(function(Ge){return Ge+1}),nn.markNotRendered(),Ye(me),Ht({doc:B,scale:me}),dn(y(y({},oe.current),{scale:me})))}},[]),Zr=e.useCallback(function(Rt){Pe.enterFullScreenMode(Rt)},[]),ts=e.useCallback(function(){Pe.exitFullScreenMode()},[]);e.useEffect(function(){dn(y(y({},oe.current),{fullScreenMode:Pe.fullScreenMode}))},[Pe.fullScreenMode]),e.useEffect(function(){var Rt={enterFullScreenMode:Zr,exitFullScreenMode:ts,getPagesContainer:Gr,getViewerState:Xr,jumpToDestination:Di,jumpToNextDestination:Yr,jumpToPreviousDestination:Kr,jumpToNextPage:Jr,jumpToPreviousPage:Qr,jumpToPage:hn,openFile:Li,rotate:Ii,rotatePage:Jn,setViewerState:dn,switchScrollMode:Ni,switchViewMode:Bi,zoom:mn};return tt.forEach(function(ae){ae.install&&ae.install(Rt)}),function(){tt.forEach(function(ae){ae.uninstall&&ae.uninstall(Rt)})}},[Yt]),e.useEffect(function(){Ft({doc:B,file:f}),tt.forEach(function(Rt){Rt.onDocumentLoad&&Rt.onDocumentLoad({doc:B,file:f})})},[Yt]);var Qn,Zn,ti,ji=ke.boundingClientRect;Qn=function(){z&&hn(z)},Zn=ji.height>0&&ji.width>0,ti=e.useRef(!1),d(function(){Zn&&!ti.current&&(ti.current=!0,Qn())},[Qn,Zn]),d(function(){var Rt=oe.current.pageIndex;Rt>-1&&ne!==qt&&ke.scrollToItem(Rt,En).then(function(){Pe.fullScreenMode===p.FullScreenMode.EnteredCompletely&&(H||nn.markNotRendered(),xe.current=-1)})},[qt]),d(function(){var Rt=oe.current.pageIndex;Rt>-1&&an!==je&&ke.scrollToItem(Rt,En)},[je]),d(function(){en!=0&&en!=oe.current.scale&&ke.zoom(oe.current.scale/en,oe.current.pageIndex).then(function(){Pe.fullScreenMode===p.FullScreenMode.EnteredCompletely&&(Oe.current=-1)})},[Te]),d(function(){if(se!==oe.current.viewMode){var Rt=ke.startPage,ae=ke.endPage,ge=ke.virtualItems;nn.markNotRendered(),nn.setRange(Rt,ae);for(var we=function(me){var Ge=ge.find(function(fn){return fn.index===me});Ge&&nn.setVisibility(me,Ge.visibility)},Ee=Rt;Ee<=ae;Ee++)we(Ee);ei()}},[zt]),d(function(){var Rt=oe.current.pageIndex;Rt>-1&&se!==zt&&ke.scrollToItem(Rt,En)},[zt]),d(function(){var Rt=oe.current.pageIndex;Rt>0&&Rt===z&&ze.current===z&&Ke.current&&(ze.current=-1,mn(Ke.current))},[Fe]),e.useEffect(function(){ke.isSmoothScrolling||Be.current!==null&&Be.current===Fe||(Be.current=Fe,Gt({currentPage:Fe,doc:B}))},[Fe,ke.isSmoothScrolling]),e.useEffect(function(){Pe.fullScreenMode===p.FullScreenMode.Entering&&oe.current.scrollMode===p.ScrollMode.Page&&(xe.current=oe.current.pageIndex),Pe.fullScreenMode===p.FullScreenMode.EnteredCompletely&&oe.current.scrollMode===p.ScrollMode.Page&&H&&(xe.current=-1),Pe.fullScreenMode===p.FullScreenMode.EnteredCompletely&&Ke.current&&(Oe.current=oe.current.pageIndex,mn(Ke.current))},[Pe.fullScreenMode]),e.useEffect(function(){if(Pe.fullScreenMode!==p.FullScreenMode.Entering&&Pe.fullScreenMode!==p.FullScreenMode.Exitting&&!ke.isSmoothScrolling){var Rt=ke.startPage,ae=ke.endPage,ge=ke.maxVisbilityIndex,we=ke.virtualItems,Ee=ge,me=Pe.fullScreenMode===p.FullScreenMode.Entered||Pe.fullScreenMode===p.FullScreenMode.EnteredCompletely;if(!(me&&Ee!==xe.current&&xe.current>-1||me&&Ee!==Oe.current&&Oe.current>-1)){qe(Ee),dn(y(y({},oe.current),{pageIndex:Ee})),nn.setRange(Rt,ae);for(var Ge=function(ni){var Bn=we.find(function(pn){return pn.index===ni});Bn&&nn.setVisibility(ni,Bn.visibility)},fn=Rt;fn<=ae;fn++)Ge(fn);ei()}}},[ke.startPage,ke.endPage,ke.isSmoothScrolling,ke.maxVisbilityIndex,Pe.fullScreenMode,Xe,je,Te]);var es=e.useCallback(function(Rt){nn.markRendered(Rt),ei()},[Rn]),ei=function(){var Rt=nn.getHighestPriorityPage();Rt>-1&&nn.isInRange(Rt)&&(nn.markRendering(Rt),Nn(Rt))},ns=function(Rt){var ae=Fe-1,ge=Fe+1;switch(Rt){case"FirstPage":hn(0);break;case"LastPage":hn(ee-1);break;case"NextPage":ge<ee&&hn(ge);break;case"PrevPage":ae>=0&&hn(ae)}},is=e.useCallback(function(){var Rt=ke.virtualItems,ae=[];switch(zt){case p.ViewMode.DualPage:ae=Tt(Rt,2);break;case p.ViewMode.DualPageWithCover:Rt.length&&(ae=Rt[0].index===0?[[Rt[0]]].concat(Tt(Rt.slice(1),2)):Tt(Rt,2));break;case p.ViewMode.SinglePage:default:ae=Tt(Rt,1)}var ge=_e&&_e.core?_e.core.pageLabel:"Page {{pageIndex}}",we={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:Se,style:{height:"100%"}},children:e.createElement(e.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:b({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":qt===p.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":ye,"rpv-core__inner-pages--single":qt===p.ScrollMode.Page,"rpv-core__inner-pages--vertical":qt===p.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":qt===p.ScrollMode.Wrapped}),ref:Ce,style:{height:"100%",position:"relative"}},children:e.createElement("div",{"data-testid":"core__inner-current-page-".concat(Fe),style:Object.assign({"--scale-factor":Te},ke.getContainerStyles())},ae.map(function(Ee){return e.createElement("div",{className:b({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":qt===p.ScrollMode.Page}),style:ke.getItemContainerStyles(Ee[0]),key:"".concat(Ee[0].index,"-").concat(zt)},Ee.map(function(me){var Ge=zt===p.ViewMode.DualPageWithCover&&(me.index===0||ee%2==0&&me.index===ee-1);return e.createElement("div",{"aria-label":ge.replace("{{pageIndex}}","".concat(me.index+1)),className:b({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":zt===p.ViewMode.DualPage&&me.index%2==0,"rpv-core__inner-page--dual-odd":zt===p.ViewMode.DualPage&&me.index%2==1,"rpv-core__inner-page--dual-cover":Ge,"rpv-core__inner-page--dual-cover-even":zt===p.ViewMode.DualPageWithCover&&!Ge&&me.index%2==0,"rpv-core__inner-page--dual-cover-odd":zt===p.ViewMode.DualPageWithCover&&!Ge&&me.index%2==1,"rpv-core__inner-page--single":zt===p.ViewMode.SinglePage&&qt===p.ScrollMode.Page}),role:"region",key:"".concat(me.index,"-").concat(zt),style:Object.assign({},ke.getItemStyles(me),Oi.buildPageStyles({numPages:ee,pageIndex:me.index,scrollMode:qt,viewMode:zt}))},e.createElement(Sr,{doc:B,measureRef:me.measureRef,outlines:pe,pageIndex:me.index,pageRotation:Kt.has(me.index)?Kt.get(me.index):0,pageSize:et[me.index],plugins:tt,renderPage:At,renderQueueKey:Rn,rotation:je,scale:Te,shouldRender:Cn===me.index,viewMode:zt,onExecuteNamedAction:ns,onJumpFromLinkAnnotation:$r,onJumpToDest:Di,onRenderCompleted:es,onRotatePage:Jn}))}))}))}};return tt.forEach(function(Ee){Ee.renderViewer&&(we=Ee.renderViewer({containerRef:Se,doc:B,pagesContainerRef:Ce,pagesRotation:Kt,pageSizes:et,rotation:je,slot:we,themeContext:be,jumpToPage:hn,openFile:Li,rotate:Ii,rotatePage:Jn,switchScrollMode:Ni,switchViewMode:Bi,zoom:mn}))}),we},[tt,ke]),Ui=e.useCallback(function(Rt){return e.createElement("div",y({},Rt.attrs,{style:Rt.attrs&&Rt.attrs.style?Rt.attrs.style:{}}),Rt.children,Rt.subSlot&&Ui(Rt.subSlot))},[]);return Ui(is())},Mi=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Br=function(n){var f=n.defaultScale,F=n.doc,B=n.render,H=n.scrollMode,z=n.viewMode,it=e.useRef(),Q=e.useState({pageSizes:[],scale:0}),U=Q[0],et=Q[1];return e.useLayoutEffect(function(){var tt=Array(F.numPages).fill(0).map(function(At,yt){return new Promise(function(_t,It){L(F,yt).then(function(Ot){var Ft=Ot.getViewport({scale:1});_t({pageHeight:Ft.height,pageWidth:Ft.width,rotation:Ft.rotation})})})});Promise.all(tt).then(function(At){var yt=it.current;if(yt&&At.length!==0){var _t=At[0].pageWidth,It=At[0].pageHeight,Ot=yt.parentElement,Ft=(Ot.clientWidth-45)/_t,ue=(Ot.clientHeight-45)/It,Gt=Ft;switch(H){case p.ScrollMode.Horizontal:Gt=Math.min(Ft,ue);break;case p.ScrollMode.Vertical:default:Gt=Ft}var Xt,Qt,Ht=f?typeof f=="string"?Gn(Ot,It,_t,f,z,F.numPages):f:(Xt=Gt,(Qt=Mi.findIndex(function(ee){return ee>=Xt}))===-1||Qt===0?Xt:Mi[Qt-1]);et({pageSizes:At,scale:Ht})}})},[F.loadingTask.docId]),U.pageSizes.length===0||U.scale===0?e.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:it},e.createElement(s,null)):B(U.pageSizes,U.scale)},In=function(){},$n=function(n){function f(F,B){var H=n.call(this)||this;return H.verifyPassword=F,H.passwordStatus=B,H}return $(f,n),f}(In),jr=function(n){var f=n.passwordStatus,F=n.renderProtectedView,B=n.verifyPassword,H=n.onDocumentAskPassword,z=e.useContext(D).l10n,it=e.useState(""),Q=it[0],U=it[1],et=e.useContext(P).direction===p.TextDirection.RightToLeft,tt=function(){return B(Q)};return e.useEffect(function(){H&&H({verifyPassword:B})},[]),F?F({passwordStatus:f,verifyPassword:B}):e.createElement("div",{className:"rpv-core__asking-password-wrapper"},e.createElement("div",{className:b({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":et})},e.createElement("div",{className:"rpv-core__asking-password-message"},f===p.PasswordStatus.RequiredPassword&&z.core.askingPassword.requirePasswordToOpen,f===p.PasswordStatus.WrongPassword&&z.core.wrongPassword.tryAgain),e.createElement("div",{className:"rpv-core__asking-password-body"},e.createElement("div",{className:b({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!et,"rpv-core__asking-password-input--rtl":et})},e.createElement(r,{testId:"core__asking-password-input",type:"password",value:Q,onChange:U,onKeyDown:function(At){At.key==="Enter"&&tt()}})),e.createElement(h,{onClick:tt},z.core.askingPassword.submit))))},xi=function(n){function f(F){var B=n.call(this)||this;return B.doc=F,B}return $(f,n),f}(In),Fi=function(n){function f(F){var B=n.call(this)||this;return B.error=F,B}return $(f,n),f}(In),Yn=function(n){function f(F){var B=n.call(this)||this;return B.percentages=F,B}return $(f,n),f}(In),Ur=function(n){var f=n.characterMap,F=n.file,B=n.httpHeaders,H=n.render,z=n.renderError,it=n.renderLoader,Q=n.renderProtectedView,U=n.transformGetDocumentParams,et=n.withCredentials,tt=n.onDocumentAskPassword,At=e.useContext(P).direction===p.TextDirection.RightToLeft,yt=e.useState(new Yn(0)),_t=yt[0],It=yt[1],Ot=e.useRef(""),Ft=mt();return e.useEffect(function(){Ot.current="",It(new Yn(0));var ue=new nt.PDFWorker({name:"PDFWorker_".concat(Date.now())}),Gt=Object.assign({httpHeaders:B,withCredentials:et,worker:ue},typeof F=="string"?{url:F}:{data:F},f?{cMapUrl:f.url,cMapPacked:f.isCompressed}:{}),Xt=U?U(Gt):Gt,Qt=nt.getDocument(Xt);return Qt.onPassword=function(Ht,ee){switch(ee){case nt.PasswordResponses.NEED_PASSWORD:Ft.current&&It(new $n(Ht,p.PasswordStatus.RequiredPassword));break;case nt.PasswordResponses.INCORRECT_PASSWORD:Ft.current&&It(new $n(Ht,p.PasswordStatus.WrongPassword))}},Qt.onProgress=function(Ht){var ee=Ht.total>0?Math.min(100,100*Ht.loaded/Ht.total):100;Ft.current&&Ot.current===""&&It(new Yn(ee))},Qt.promise.then(function(Ht){Ot.current=Ht.loadingTask.docId,Ft.current&&It(new xi(Ht))},function(Ht){return Ft.current&&!ue.destroyed&&It(new Fi({message:Ht.message||"Cannot load document",name:Ht.name}))}),function(){Qt.destroy(),ue.destroy()}},[F]),_t instanceof $n?e.createElement(jr,{passwordStatus:_t.passwordStatus,renderProtectedView:Q,verifyPassword:_t.verifyPassword,onDocumentAskPassword:tt}):_t instanceof xi?H(_t.doc):_t instanceof Fi?z?z(_t.error):e.createElement("div",{className:b({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":At})},e.createElement("div",{className:"rpv-core__doc-error-text"},_t.error.message)):e.createElement("div",{"data-testid":"core__doc-loading",className:b({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":At})},it?it(_t.percentages):e.createElement(s,null))},Hr=function(n,f){var F=e.useMemo(function(){return n==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":n},[]),B=e.useState(F),H=B[0],z=B[1],it=st(H);return e.useEffect(function(){if(n==="auto"){var Q=window.matchMedia("(prefers-color-scheme: dark)"),U=function(et){z(et.matches?"dark":"light")};return Q.addEventListener("change",U),function(){return Q.removeEventListener("change",U)}}},[]),e.useEffect(function(){H!==it&&f&&f(H)},[H]),e.useEffect(function(){n!==H&&z(n)},[n]),{currentTheme:H,setCurrentTheme:z}},Wr=function(n){return{startPage:n.startPage-3,endPage:n.endPage+3}};p.Button=function(n){var f=n.children,F=n.testId,B=n.onClick,H=e.useContext(P).direction===p.TextDirection.RightToLeft,z=F?{"data-testid":F}:{};return e.createElement("button",y({className:b({"rpv-core__button":!0,"rpv-core__button--rtl":H}),type:"button",onClick:B},z),f)},p.Icon=a,p.LazyRender=function(n){var f=n.attrs,F=n.children,B=n.testId,H=e.useState(!1),z=H[0],it=H[1],Q=B?y(y({},f),{"data-testid":B}):f,U=m({once:!0,onVisibilityChanged:function(et){et.isVisible&&it(!0)}});return e.createElement("div",y({ref:U},Q),z&&F)},p.LocalizationContext=D,p.Menu=function(n){var f=n.children,F=e.useRef(),B=e.useRef([]),H=e.useContext(P).direction===p.TextDirection.RightToLeft,z=function(Q){if(F.current)switch(Q.key){case"Tab":Q.preventDefault();break;case"ArrowDown":Q.preventDefault(),it(function(U,et){return et+1});break;case"ArrowUp":Q.preventDefault(),it(function(U,et){return et-1});break;case"End":Q.preventDefault(),it(function(U,et){return U.length-1});break;case"Home":Q.preventDefault(),it(function(U,et){return 0})}},it=function(Q){if(F.current){var U=B.current,et=U.findIndex(function(At){return At.getAttribute("tabindex")==="0"}),tt=Math.min(U.length-1,Math.max(0,Q(U,et)));et>=0&&et<=U.length-1&&U[et].setAttribute("tabindex","-1"),U[tt].setAttribute("tabindex","0"),U[tt].focus()}};return d(function(){var Q=F.current;if(Q){var U=function(et){var tt=[];return et.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(At){if(At instanceof HTMLElement){var yt=At.parentElement;(yt===et||window.getComputedStyle(yt).display!=="none")&&tt.push(At)}}),tt}(Q);B.current=U}},[]),d(function(){return document.addEventListener("keydown",z),function(){document.removeEventListener("keydown",z)}},[]),e.createElement("div",{ref:F,"aria-orientation":"vertical",className:b({"rpv-core__menu":!0,"rpv-core__menu--rtl":H}),role:"menu",tabIndex:0},f)},p.MenuDivider=function(){return e.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},p.MenuItem=function(n){var f=n.checked,F=f!==void 0&&f,B=n.children,H=n.icon,z=H===void 0?null:H,it=n.isDisabled,Q=it!==void 0&&it,U=n.testId,et=n.onClick,tt=e.useContext(P).direction===p.TextDirection.RightToLeft,At=U?{"data-testid":U}:{};return e.createElement("button",y({className:b({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":Q,"rpv-core__menu-item--ltr":!tt,"rpv-core__menu-item--rtl":tt}),role:"menuitem",tabIndex:-1,type:"button",onClick:et},At),e.createElement("div",{className:b({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!tt,"rpv-core__menu-item-icon--rtl":tt})},z),e.createElement("div",{className:b({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!tt,"rpv-core__menu-item-label--rtl":tt})},B),e.createElement("div",{className:b({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!tt,"rpv-core__menu-item-check--rtl":tt})},F&&e.createElement(u,null)))},p.MinimalButton=function(n){var f=n.ariaLabel,F=f===void 0?"":f,B=n.ariaKeyShortcuts,H=B===void 0?"":B,z=n.children,it=n.isDisabled,Q=it!==void 0&&it,U=n.isSelected,et=U!==void 0&&U,tt=n.testId,At=n.onClick,yt=e.useContext(P).direction===p.TextDirection.RightToLeft,_t=tt?{"data-testid":tt}:{};return e.createElement("button",y({"aria-label":F},H&&{"aria-keyshortcuts":H},Q&&{"aria-disabled":!0},{className:b({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":Q,"rpv-core__minimal-button--rtl":yt,"rpv-core__minimal-button--selected":et}),type:"button",onClick:At},_t),z)},p.Modal=function(n){var f=n.ariaControlsSuffix,F=n.closeOnClickOutside,B=n.closeOnEscape,H=n.content,z=n.isOpened,it=z!==void 0&&z,Q=n.target,U=f||"".concat(o());return e.createElement(vt,{target:Q?function(et,tt){return e.createElement("div",{"aria-expanded":tt?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(U)},Q(et,tt))}:null,content:function(et){return e.createElement(V,null,e.createElement(N,{ariaControlsSuffix:U,closeOnClickOutside:F,closeOnEscape:B,onToggle:et},H(et)))},isOpened:it})},p.Popover=function(n){var f=n.ariaHasPopup,F=f===void 0?"dialog":f,B=n.ariaControlsSuffix,H=n.closeOnClickOutside,z=n.closeOnEscape,it=n.content,Q=n.lockScroll,U=Q===void 0||Q,et=n.offset,tt=n.position,At=n.target,yt=at(!1),_t=yt.opened,It=yt.toggle,Ot=e.useRef(),Ft=e.useMemo(function(){return B||"".concat(o())},[]);return e.createElement("div",{ref:Ot,"aria-expanded":_t?"true":"false","aria-haspopup":F,"aria-controls":"rpv-core__popver-body-".concat(Ft)},At(It,_t),_t&&e.createElement(e.Fragment,null,U&&e.createElement(Mt,{closeOnEscape:z,onClose:It}),e.createElement(St,{ariaControlsSuffix:Ft,closeOnClickOutside:H,offset:et,position:tt,targetRef:Ot,onClose:It},it(It))))},p.PrimaryButton=h,p.ProgressBar=function(n){var f=n.progress,F=e.useContext(P).direction===p.TextDirection.RightToLeft;return e.createElement("div",{className:b({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":F})},e.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(f,"%")}},f,"%"))},p.Separator=function(){return e.createElement("div",{className:"rpv-core__separator"})},p.Spinner=s,p.Splitter=function(n){var f=n.constrain,F=e.useContext(P).direction===p.TextDirection.RightToLeft,B=e.useRef(),H=e.useRef(),z=e.useRef(),it=e.useRef(0),Q=e.useRef(0),U=e.useRef(0),et=e.useRef(0),tt={capture:!0},At=function(_t){var It=B.current,Ot=H.current,Ft=z.current;if(It&&Ot&&Ft){var ue=et.current,Gt=_t.clientX-it.current,Xt=U.current+(F?-Gt:Gt),Qt=It.parentElement.getBoundingClientRect().width,Ht=100*Xt/Qt;if(It.classList.add("rpv-core__splitter--resizing"),f){var ee=Qt-Xt-ue;if(!f({firstHalfPercentage:Ht,firstHalfSize:Xt,secondHalfPercentage:100*ee/Qt,secondHalfSize:ee}))return}Ot.style.width="".concat(Ht,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),Ot.classList.add("rpv-core__splitter-sibling--resizing"),Ft.classList.add("rpv-core__splitter-sibling--resizing")}},yt=function(_t){var It=B.current,Ot=H.current,Ft=z.current;It&&Ot&&Ft&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),It.classList.remove("rpv-core__splitter--resizing"),Ot.classList.remove("rpv-core__splitter-sibling--resizing"),Ft.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",At,tt),document.removeEventListener("mouseup",yt,tt))};return e.useEffect(function(){var _t=B.current;_t&&(et.current=_t.getBoundingClientRect().width,H.current=_t.previousElementSibling,z.current=_t.nextElementSibling)},[]),e.createElement("div",{ref:B,className:"rpv-core__splitter",onMouseDown:function(_t){var It=H.current;It&&(it.current=_t.clientX,Q.current=_t.clientY,U.current=It.getBoundingClientRect().width,document.addEventListener("mousemove",At,tt),document.addEventListener("mouseup",yt,tt))}})},p.TextBox=r,p.ThemeContext=P,p.Tooltip=function(n){var f=n.ariaControlsSuffix,F=n.content,B=n.offset,H=n.position,z=n.target,it=at(!1),Q=it.opened,U=it.toggle,et=e.useRef(),tt=e.useRef(),At=e.useMemo(function(){return f||"".concat(o())},[]);O(function(){et.current&&document.activeElement&&et.current.contains(document.activeElement)&&_t()});var yt=function(){U(p.ToggleStatus.Open)},_t=function(){U(p.ToggleStatus.Close)};return e.createElement(e.Fragment,null,e.createElement("div",{ref:et,"aria-describedby":"rpv-core__tooltip-body-".concat(At),onBlur:function(It){It.relatedTarget instanceof HTMLElement&&It.currentTarget.parentElement&&It.currentTarget.parentElement.contains(It.relatedTarget)?tt.current&&(tt.current.style.display="none"):_t()},onFocus:yt,onMouseEnter:yt,onMouseLeave:_t},z),Q&&e.createElement(ct,{ariaControlsSuffix:At,contentRef:tt,offset:B,position:H,targetRef:et},F()))},p.Viewer=function(n){var f=n.characterMap,F=n.defaultScale,B=n.enableSmoothScroll,H=B===void 0||B,z=n.fileUrl,it=n.httpHeaders,Q=it===void 0?{}:it,U=n.initialPage,et=U===void 0?0:U,tt=n.pageLayout,At=n.initialRotation,yt=At===void 0?0:At,_t=n.localization,It=n.plugins,Ot=It===void 0?[]:It,Ft=n.renderError,ue=n.renderLoader,Gt=n.renderPage,Xt=n.renderProtectedView,Qt=n.scrollMode,Ht=Qt===void 0?p.ScrollMode.Vertical:Qt,ee=n.setRenderRange,Yt=ee===void 0?Wr:ee,_e=n.transformGetDocumentParams,be=n.theme,ye=be===void 0?{direction:p.TextDirection.LeftToRight,theme:"light"}:be,Se=n.viewMode,Ce=Se===void 0?p.ViewMode.SinglePage:Se,Ve=n.withCredentials,Fe=Ve!==void 0&&Ve,qe=n.onDocumentAskPassword,Be=n.onDocumentLoad,Ue=Be===void 0?function(){}:Be,He=n.onPageChange,je=He===void 0?function(){}:He,Qe=n.onRotate,an=Qe===void 0?function(){}:Qe,sn=n.onRotatePage,Xe=sn===void 0?function(){}:sn,tn=n.onSwitchTheme,cn=tn===void 0?function(){}:tn,Kt=n.onZoom,$t=Kt===void 0?function(){}:Kt,Wt=e.useState({data:z,name:typeof z=="string"?z:"",shouldLoad:!1}),qt=Wt[0],Vt=Wt[1],ne=function(xe,Oe){Vt({data:Oe,name:xe,shouldLoad:!0})},ie=e.useState(!1),zt=ie[0],Ut=ie[1],se=st(qt);e.useEffect(function(){var xe,Oe,ze,Pe;xe=se.data,Pe=typeof(Oe=z),(ze=typeof xe)=="string"&&Pe==="string"&&xe===Oe||ze==="object"&&Pe==="object"&&xe.length===Oe.length&&xe.every(function(un,Cn){return un===Oe[Cn]})||Vt({data:z,name:typeof z=="string"?z:"",shouldLoad:zt})},[z,zt]);var pe=m({onVisibilityChanged:function(xe){Ut(xe.isVisible),xe.isVisible&&Vt(function(Oe){return Object.assign({},Oe,{shouldLoad:!0})})}}),Me=typeof ye=="string"?{direction:p.TextDirection.LeftToRight,theme:ye}:ye,Te=e.useState(_t||Ct),Ye=Te[0],en=Te[1],oe={l10n:Ye,setL10n:en},Ke=Object.assign({},{direction:Me.direction},Hr(Me.theme||"light",cn));return e.useEffect(function(){_t&&en(_t)},[_t]),e.createElement(D.Provider,{value:oe},e.createElement(P.Provider,{value:Ke},e.createElement("div",{ref:pe,className:"rpv-core__viewer rpv-core__viewer--".concat(Ke.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},qt.shouldLoad&&e.createElement(Ur,{characterMap:f,file:qt.data,httpHeaders:Q,render:function(xe){return e.createElement(Br,{defaultScale:F,doc:xe,render:function(Oe,ze){return e.createElement(Nr,{currentFile:{data:qt.data,name:qt.name},defaultScale:F,doc:xe,enableSmoothScroll:H,initialPage:et,initialRotation:yt,initialScale:ze,pageLayout:tt,pageSizes:Oe,plugins:Ot,renderPage:Gt,scrollMode:Ht,setRenderRange:Yt,viewMode:Ce,viewerState:{file:qt,fullScreenMode:p.FullScreenMode.Normal,pageIndex:-1,pageHeight:Oe[0].pageHeight,pageWidth:Oe[0].pageWidth,pagesRotation:new Map,rotation:yt,scale:ze,scrollMode:Ht,viewMode:Ce},onDocumentLoad:Ue,onOpenFile:ne,onPageChange:je,onRotate:an,onRotatePage:Xe,onZoom:$t})},scrollMode:Ht,viewMode:Ce})},renderError:Ft,renderLoader:ue,renderProtectedView:Xt,transformGetDocumentParams:_e,withCredentials:Fe,onDocumentAskPassword:qe}))))},p.Worker=function(n){var f=n.children,F=n.workerUrl;return nt.GlobalWorkerOptions.workerSrc=F,e.createElement(e.Fragment,null,f)},p.chunk=Tt,p.classNames=b,p.createStore=function(n){var f=n||{},F={},B=function(z,it){var Q;f=y(y({},f),((Q={})[z]=it,Q)),(F[z]||[]).forEach(function(U){return U(f[z])})},H=function(z){return f[z]};return{subscribe:function(z,it){F[z]=(F[z]||[]).concat(it)},unsubscribe:function(z,it){F[z]=(F[z]||[]).filter(function(Q){return Q!==it})},update:function(z,it){B(z,it)},updateCurrentValue:function(z,it){var Q=H(z);Q!==void 0&&B(z,it(Q))},get:function(z){return H(z)}}},p.getDestination=j,p.getPage=L,p.isFullScreenEnabled=_,p.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},p.useDebounceCallback=ut,p.useIntersectionObserver=m,p.useIsMounted=mt,p.useIsomorphicLayoutEffect=d,p.usePrevious=st,p.useRenderQueue=bt})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib.exports=core_min;var libExports=lib.exports;export{libExports as l};
