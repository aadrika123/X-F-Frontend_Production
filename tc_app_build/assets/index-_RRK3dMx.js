import{j as e,b as Va,d as Ba,c as cs,p as De,w as Ca,S as Fa,Q as G,I as Ta}from"./index-7NsreNMS.js";import{d as me,u as qa,f as Sa,e as Ra,r as Na}from"./router-5yjtezO8.js";import{u as fa,F as $a}from"./formik.esm-BnzrXcQN.js";import{c as os,a as j,e as Ia,b as wa}from"./index.esm-uHa2PMRf.js";import{F as Aa}from"./FormProvider-mgiWBhWO.js";import{T as q}from"./TextField-2cNf8gLp.js";import{S}from"./SelectField-hOHrr-Tn.js";import{R as $}from"./RadioButton-3KottmWC.js";import"./index-iFVn5AxS.js";import{r as A}from"./tailwind-6U-kYQAu.js";import{P as ka}from"./index-4egx4X3W.js";import{u as za}from"./useErrorFocusFields-mwtEYYKc.js";import{O as La}from"./OverLayLoader-VvepKYYM.js";import{u as Ya}from"./usePathWisePermission-3asmerns.js";import"./reactQuery-QTVGT_ni.js";import"./axios-lPgvryBG.js";import"./reactIcons-ElHvrKTF.js";import"./headlessui-iZReL1Rn.js";import"./customInputValidation-jhKsg103.js";import"./module-fXU0BTDy.js";const Wa=os().shape({floorNo:j().required("Floor No is required"),usagesTypeId:j().required("Usages Type is required"),occupancyTypeId:j().required("Occupancy Type is required"),isRentAgreement:j().when("occupancyTypeId",{is:C=>C==="2",then:()=>j().required("Rent Agreement is required")}),rentAmount:j().when("isRentAgreement",{is:C=>C==="1",then:()=>j().required("Rent Amount is required")}),rentAgreementDate:j().when("isRentAgreement",{is:C=>C==="1",then:()=>j().required("Rent Agreement Date is required")}),constructionTypeId:j().required("Construction Type is required"),builtUpArea:j().required("Built Up Area is required"),dateFrom:j().required("Date From is required")});function Ua({open:C,setOpen:es,addFloorData:y,masterData:R,safData:I}){var ss,fe,Fe,Ne,w,Q,a,v,we,T,Ae,s,as,ls,Ve,Be,Ce,rs,f,ds,Te,qe,Se;const X=()=>es(!C),B=fa({enableReinitialize:!0,initialValues:{floorNo:"",floorName:"",usagesTypeId:"",usagesTypeName:"",occupancyTypeId:"",occupancyTypeName:"",isRentAgreement:"",rentAmount:"",rentAgreementDate:"",constructionTypeId:"",constructionTypeName:"",builtUpArea:"",dateFrom:"",dateTo:""},validationSchema:Wa,onSubmit:(x,{resetForm:ns})=>{var Re;y.setFieldValue("addFloor",[...(Re=y==null?void 0:y.values)==null?void 0:Re.addFloor,x]),ns(),X()}});return e.jsxs(Aa,{formik:B,children:[C&&e.jsx("div",{onClick:X,className:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40"}),e.jsx("div",{id:"authentication-modal",tabIndex:-1,"aria-hidden":"true",className:"".concat(C?"flex":"hidden"," overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"),children:e.jsx("div",{className:"relative p-4 w-full max-w-md max-h-full",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add Floor"}),e.jsxs("button",{onClick:X,type:"button",className:"end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"authentication-modal",children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),e.jsxs("div",{className:"p-4 md:p-5",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsxs(S,{name:"floorNo",selectedText:"floorName",label:"Floor No",formik:B,children:[e.jsx("option",{value:"",children:"Select Floor No"}),(Fe=(fe=(ss=R==null?void 0:R.data)==null?void 0:ss.data)==null?void 0:fe.floor_type)==null?void 0:Fe.map(x=>e.jsx("option",{value:x==null?void 0:x.id,children:x==null?void 0:x.floor_name},x==null?void 0:x.id))]})}),e.jsx("div",{children:e.jsxs(S,{name:"usagesTypeId",selectedText:"usagesTypeName",label:"Usages Type",formik:B,children:[e.jsx("option",{value:"",children:"Select Usages Type"}),(Q=(w=(Ne=R==null?void 0:R.data)==null?void 0:Ne.data)==null?void 0:w.usage_type)==null?void 0:Q.map(x=>e.jsx("option",{value:x==null?void 0:x.id,children:x==null?void 0:x.usage_type},x==null?void 0:x.id))]})}),e.jsx("div",{children:e.jsxs(S,{label:"Occupancy Type",onChange:x=>{B.setFieldValue("occupancyTypeId",x.target.value),B.setFieldValue("occupancyTypeName",x.target.options[x.target.selectedIndex].text),x.target.value==="1"&&B.setFieldValue("isRentAgreement","")},value:(a=B==null?void 0:B.values)==null?void 0:a.occupancyTypeId,children:[e.jsx("option",{value:"",children:"Select Occupancy Type"}),(T=(we=(v=R==null?void 0:R.data)==null?void 0:v.data)==null?void 0:we.occupancy_type)==null?void 0:T.map(x=>e.jsx("option",{value:x==null?void 0:x.id,children:x==null?void 0:x.occupancy_type},x==null?void 0:x.id))]})}),((Ae=B==null?void 0:B.values)==null?void 0:Ae.occupancyTypeId)==="2"&&e.jsx("div",{className:"mt-2",children:e.jsxs(S,{name:"isRentAgreement",label:"Is Rent Agreement",formik:B,children:[e.jsx("option",{value:"",children:"Select Rent Agreement"}),["0","1"].map(x=>e.jsx("option",{value:x,children:x==="0"?"No":"Yes"},x))]})}),((s=B==null?void 0:B.values)==null?void 0:s.isRentAgreement)==="1"&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{children:e.jsx(q,{type:"number",name:"rentAmount",label:"Rent Amount",formik:B})}),e.jsx("div",{children:e.jsx(q,{name:"rentAgreementDate",label:"Rent Agreement Date",formik:B,type:"date"})})]}),e.jsx("div",{children:e.jsxs(S,{name:"constructionTypeId",selectedText:"constructionTypeName",label:"Construction Type",formik:B,children:[e.jsx("option",{value:"",children:"Select Construction Type"}),(Ve=(ls=(as=R==null?void 0:R.data)==null?void 0:as.data)==null?void 0:ls.construction_type)==null?void 0:Ve.map(x=>e.jsx("option",{value:x==null?void 0:x.id,children:x==null?void 0:x.construction_type},x==null?void 0:x.id))]})}),e.jsx("div",{children:e.jsx(q,{type:"number",name:"builtUpArea",label:"Built Up Area",formik:B})}),e.jsx("div",{children:e.jsx(q,{name:"dateFrom",label:"Date From",formik:B,type:"date",max:(Ce=(Be=I==null?void 0:I.data)==null?void 0:Be.data)!=null&&Ce.application_date?(f=(rs=I==null?void 0:I.data)==null?void 0:rs.data)==null?void 0:f.application_date:""})}),e.jsx("div",{children:e.jsx(q,{name:"dateTo",label:"Date To",formik:B,type:"date",max:(Te=(ds=I==null?void 0:I.data)==null?void 0:ds.data)!=null&&Te.application_date?(Se=(qe=I==null?void 0:I.data)==null?void 0:qe.data)==null?void 0:Se.application_date:""})})]}),e.jsxs("div",{className:"flex items-center justify-end mt-4 gap-5",children:[e.jsx(A.Button,{type:"button",size:"sm",variant:"text",color:"red",onClick:X,className:"mr-1 bg-gray-300",children:e.jsx("span",{children:"Cancel"})}),e.jsx(A.Button,{type:"submit",size:"sm",children:e.jsx("span",{children:"Add"})})]})]})]})})})]})}const Ea=os().shape({zoneId:j().required("Required"),wardNo:j().required("Required"),propertyType:j().required("Required"),areaOfPlot:j().required("Required"),category:j().required("Required"),isHoardingBoard:j().required("Required").oneOf(["yes","no"]),hoardingArea:j().when("isHoardingBoard",{is:"yes",then:()=>j().required("Required")}),hoardingInstallationDate:j().when("isHoardingBoard",{is:"yes",then:()=>j().required("Required")}),isMobileTower:j().required("Required").oneOf(["yes","no"]),mobileTowerArea:j().when("isMobileTower",{is:"yes",then:()=>j().required("Required")}),mobileTowerInstallationDate:j().when("isMobileTower",{is:"yes",then:()=>j().required("Required")}),isPetrolPump:j().required("Required").oneOf(["yes","no"]),petrolPumpArea:j().when("isPetrolPump",{is:"yes",then:()=>j().required("Required")}),petrolPumpInstallationDate:j().when("isPetrolPump",{is:"yes",then:()=>j().required("Required")}),isRainWaterHarvesting:j().required("Required").oneOf(["yes","no"]),isFloorFromDB:Ia().required(),floorFromDB:wa().when(["isFloorFromDB"],{is:C=>C==!0,then:()=>wa().of(os().shape({floorNo:j().required("Required"),usageTypeId:j().required("Required"),constructionTypeId:j().required("Required"),occupancyTypeId:j().required("Required"),isRentAgreement:j().when("occupancyTypeId",{is:C=>C=="2",then:()=>j().required("Required")}),rentAmount:j().when("isRentAgreement",{is:C=>C=="1",then:()=>j().required("Required")}),rentAgreementDate:j().when("isRentAgreement",{is:C=>C=="1",then:()=>j().required("Required")}),builtUpArea:j().required("Required"),dateFrom:j().required("Required")}))})});function ol(){var Te,qe,Se,x,ns,Re,ts,us,hs,ps,xs,ys,js,_s,bs,gs,is,vs,Fs,Ns,ws,fs,As,Vs,Bs,Cs,Ts,qs,Ss,Rs,$s,Is,ks,zs,Ls,Ys,Ws,Us,Es,Ks,Os,Qs,Gs,Js,Xs,Ms,Ps,Hs,Zs,Ds,ms,ea,sa,aa,la,ra,da,na,ca,oa,ta,ua,ha,pa,xa,ya,ja,_a,ba,ga;const[C,es]=me.useState("FORWARD"),y=Va(),R=qa(),{AutoFocusErrorField:I}=za(),[X,B]=me.useState([]),[ss,fe]=me.useState(!1),Fe=Ba({}),{pathname:Ne}=Sa(),{result:w}=Ya((qe=(Te=Ne==null?void 0:Ne.split("/"))==null?void 0:Te.slice(0,-1))==null?void 0:qe.join("/")),{id:Q}=Ra(),a=cs({api:De.staticSafDetailForVerification,config:{applicationId:Q},value:[Q],options:{enabled:!!Q}}),v=cs({api:De.masterSaf,config:{},options:{enabled:!!Q}}),we=cs({api:Ca.workFlowInfo,config:{workflowId:(x=(Se=a==null?void 0:a.data)==null?void 0:Se.data)==null?void 0:x.workflow_id},value:[(Re=(ns=a==null?void 0:a.data)==null?void 0:ns.data)==null?void 0:Re.workflow_id],options:{enabled:!!((us=(ts=a==null?void 0:a.data)==null?void 0:ts.data)!=null&&us.workflow_id)}});me.useEffect(()=>{var r,b,N,F,d,t,k,z,L,Y,W,U,E,K,O,o,J,c,M,P,H,Z,D,m,ee,se,ae,le,re,de,ne,ce,oe,te,ue,he,pe,xe,ye,je,_e,be,ge,l,_,u,h,p,ie,ve,$e,Ie,ke,ze,Le,Ye,We,Ue,Ee,Ke,Oe,Qe,Ge,Je,Xe,Me,Pe,He,Ze,n,V,g,i,ia,va;(r=a==null?void 0:a.data)!=null&&r.data&&B([{id:1,title:"Zone",assessedLabel:"Self Assessed",selfAssessedValue:(F=T("zone",(N=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:N.zone_mstr_id))==null?void 0:F.zone_name,tcVerifiedLabel:"TC Verified",tcVerifiedValue:((z=T("zone",(k=(t=(d=a==null?void 0:a.data)==null?void 0:d.data)==null?void 0:t.lastTcVerificationData)==null?void 0:k.zone_mstr_id))==null?void 0:z.zone_name)||"--",headerName:"basicDetail"},{id:2,title:"Ward No",assessedLabel:"Self Assessed",selfAssessedValue:(W=T("ward_master",(Y=(L=a==null?void 0:a.data)==null?void 0:L.data)==null?void 0:Y.ward_mstr_id))==null?void 0:W.ward_name,tcVerifiedLabel:"TC Verified",tcVerifiedValue:((O=T("ward_master",(K=(E=(U=a==null?void 0:a.data)==null?void 0:U.data)==null?void 0:E.lastTcVerificationData)==null?void 0:K.ward_id))==null?void 0:O.ward_name)||"--",headerName:"basicDetail"},{id:3,title:"Property Type",assessedLabel:"Self Assessed",selfAssessedValue:(c=T("property_type",(J=(o=a==null?void 0:a.data)==null?void 0:o.data)==null?void 0:J.prop_type_mstr_id))==null?void 0:c.property_type,tcVerifiedLabel:"TC Verified",tcVerifiedValue:((Z=T("property_type",(H=(P=(M=a==null?void 0:a.data)==null?void 0:M.data)==null?void 0:P.lastTcVerificationData)==null?void 0:H.prop_type_id))==null?void 0:Z.property_type)||"--",headerName:"basicDetail"},{id:4,title:"Area of plot(In decimal)",assessedLabel:"Self Assessed",selfAssessedValue:(m=(D=a==null?void 0:a.data)==null?void 0:D.data)==null?void 0:m.area_of_plot,tcVerifiedLabel:"TC Verified",tcVerifiedValue:((ae=(se=(ee=a==null?void 0:a.data)==null?void 0:ee.data)==null?void 0:se.lastTcVerificationData)==null?void 0:ae.area_of_plot)||"--",headerName:"basicDetail"},{id:5,title:"Category",assessedLabel:"Self Assessed",selfAssessedValue:(de=T("categories",(re=(le=a==null?void 0:a.data)==null?void 0:le.data)==null?void 0:re.category_id))==null?void 0:de.category,tcVerifiedLabel:"TC Verified",tcVerifiedValue:((te=T("categories",(oe=(ce=(ne=a==null?void 0:a.data)==null?void 0:ne.data)==null?void 0:ce.lastTcVerificationData)==null?void 0:oe.category_id))==null?void 0:te.category)||"--",headerName:"basicDetail"},{id:6,title:"Hoarding Board(s)?",assessedLabel:"Self Assessed",selfAssessedValue:(he=(ue=a==null?void 0:a.data)==null?void 0:ue.data)!=null&&he.is_hoarding_board?"Yes":"No",headerName:"extraDetail",tcVerifiedLabel:"TC Verified",tcVerifiedValue:(ye=(xe=(pe=a==null?void 0:a.data)==null?void 0:pe.data)==null?void 0:xe.lastTcVerificationData)!=null&&ye.has_hoarding?"Yes":"No",area:((be=(_e=(je=a==null?void 0:a.data)==null?void 0:je.data)==null?void 0:_e.lastTcVerificationData)==null?void 0:be.hoarding_area)||"--",installationDate:(_=(l=(ge=a==null?void 0:a.data)==null?void 0:ge.data)==null?void 0:l.lastTcVerificationData)==null?void 0:_.hoarding_installation_date},{id:7,title:"Mobile Tower?",assessedLabel:"Self Assessed",selfAssessedValue:(h=(u=a==null?void 0:a.data)==null?void 0:u.data)!=null&&h.is_mobile_tower?"Yes":"No",headerName:"extraDetail",tcVerifiedLabel:"TC Verified",tcVerifiedValue:(ve=(ie=(p=a==null?void 0:a.data)==null?void 0:p.data)==null?void 0:ie.lastTcVerificationData)!=null&&ve.has_mobile_tower?"Yes":"No",area:((ke=(Ie=($e=a==null?void 0:a.data)==null?void 0:$e.data)==null?void 0:Ie.lastTcVerificationData)==null?void 0:ke.tower_area)||"--",installationDate:(Ye=(Le=(ze=a==null?void 0:a.data)==null?void 0:ze.data)==null?void 0:Le.lastTcVerificationData)==null?void 0:Ye.tower_installation_date},{id:8,title:"Petrol Pump?",assessedLabel:"Self Assessed",selfAssessedValue:(Ue=(We=a==null?void 0:a.data)==null?void 0:We.data)!=null&&Ue.is_petrol_pump?"Yes":"No",headerName:"extraDetail",tcVerifiedLabel:"TC Verified",tcVerifiedValue:(Oe=(Ke=(Ee=a==null?void 0:a.data)==null?void 0:Ee.data)==null?void 0:Ke.lastTcVerificationData)!=null&&Oe.has_petrol_pump?"Yes":"No",area:((Je=(Ge=(Qe=a==null?void 0:a.data)==null?void 0:Qe.data)==null?void 0:Ge.lastTcVerificationData)==null?void 0:Je.underground_area)||"--",installationDate:(Pe=(Me=(Xe=a==null?void 0:a.data)==null?void 0:Xe.data)==null?void 0:Me.lastTcVerificationData)==null?void 0:Pe.petrol_pump_completion_date},{id:9,title:"Rain Water Harvesting?",assessedLabel:"Self Assessed",selfAssessedValue:(Ze=(He=a==null?void 0:a.data)==null?void 0:He.data)!=null&&Ze.is_water_harvesting?"Yes":"No",headerName:"extraDetail",tcVerifiedLabel:"TC Verified",tcVerifiedValue:(g=(V=(n=a==null?void 0:a.data)==null?void 0:n.data)==null?void 0:V.lastTcVerificationData)!=null&&g.has_water_harvesting?"Yes":"No",installationDate:((va=(ia=(i=a==null?void 0:a.data)==null?void 0:i.data)==null?void 0:ia.lastTcVerificationData)==null?void 0:va.rwh_date_from)||""}])},[(hs=a==null?void 0:a.data)==null?void 0:hs.data,(ps=v==null?void 0:v.data)==null?void 0:ps.data]);const T=(r,b)=>{var N,F,d;return(d=(F=(N=v==null?void 0:v.data)==null?void 0:N.data)==null?void 0:F[r])==null?void 0:d.filter(t=>t.id==b)[0]},Ae=()=>{var r,b,N,F,d,t,k,z,L,Y,W,U,E,K,O,o;if(((b=(r=y==null?void 0:y.user)==null?void 0:r.roleWithId[0])==null?void 0:b.role_id)==5)return[...((d=(F=(N=a==null?void 0:a.data)==null?void 0:N.data)==null?void 0:F.floors)==null?void 0:d.length)>0?(z=(k=(t=a==null?void 0:a.data)==null?void 0:t.data)==null?void 0:k.floors)==null?void 0:z.map(c=>({floorId:(c==null?void 0:c.id)||"",checkFloorNo:"1",floorNo:(c==null?void 0:c.floor_mstr_id)||"",checkUsagesType:"1",usageTypeId:(c==null?void 0:c.usage_type_mstr_id)||"",checkConstructionTypeId:"1",constructionTypeId:(c==null?void 0:c.const_type_mstr_id)||"",checkOccupancyType:"1",occupancyTypeId:(c==null?void 0:c.occupancy_type_mstr_id)||"",rentAmount:(c==null?void 0:c.rent_amount)||"",rentAgreementDate:(c==null?void 0:c.rent_agreement_date)||"",isRentAgreement:(c==null?void 0:c.is_agreement_available)==""&&(c==null?void 0:c.occupancy_type_mstr_id)=="2"&&"0"||!(c!=null&&c.is_agreement_available)&&(c==null?void 0:c.occupancy_type_mstr_id)=="2"&&"0"||(c==null?void 0:c.is_agreement_available)&&(c==null?void 0:c.occupancy_type_mstr_id)=="2"&&"1"||"",checkBuiltUpArea:"1",builtUpArea:(c==null?void 0:c.builtup_area)||"",checkDateFrom:"1",dateFrom:(c==null?void 0:c.date_from)||"",checkDateTo:"1",dateTo:(c==null?void 0:c.date_upto)||""})):[]];if(((Y=(L=y==null?void 0:y.user)==null?void 0:L.roleWithId[0])==null?void 0:Y.role_id)==7)return[...((E=(U=(W=a==null?void 0:a.data)==null?void 0:W.data)==null?void 0:U.lastTcFloorVerificationData)==null?void 0:E.length)>0?(o=(O=(K=a==null?void 0:a.data)==null?void 0:K.data)==null?void 0:O.lastTcFloorVerificationData)==null?void 0:o.map(c=>({floorId:(c==null?void 0:c.saf_floor_id)||"",checkFloorNo:"1",floorNo:(c==null?void 0:c.floor_mstr_id)||"",checkUsagesType:"1",usageTypeId:(c==null?void 0:c.usage_type_id)||"",checkConstructionTypeId:"1",constructionTypeId:(c==null?void 0:c.construction_type_id)||"",checkOccupancyType:"1",occupancyTypeId:(c==null?void 0:c.occupancy_type_id)||"",rentAmount:(c==null?void 0:c.rent_amount)||"",rentAgreementDate:(c==null?void 0:c.rent_agreement_date)||"",isRentAgreement:(c==null?void 0:c.is_agreement_available)==""&&(c==null?void 0:c.occupancy_type_mstr_id)=="2"&&"0"||!(c!=null&&c.is_agreement_available)&&(c==null?void 0:c.occupancy_type_mstr_id)=="2"&&"0"||(c==null?void 0:c.is_agreement_available)&&(c==null?void 0:c.occupancy_type_mstr_id)=="2"&&"1"||"",checkBuiltUpArea:"1",builtUpArea:(c==null?void 0:c.builtup_area)||"",checkDateFrom:"1",dateFrom:(c==null?void 0:c.date_from)||"",checkDateTo:"1",dateTo:(c==null?void 0:c.date_upto)||""})):[]]},s=fa({enableReinitialize:!0,initialValues:{isFloorFromDB:!1,zoneCheck:"1",zoneId:((ys=(xs=a==null?void 0:a.data)==null?void 0:xs.data)==null?void 0:ys.zone_mstr_id)||"",wardNoCheck:"1",wardNo:((_s=(js=a==null?void 0:a.data)==null?void 0:js.data)==null?void 0:_s.ward_mstr_id)||"",propertyTypeCheck:"1",propertyType:((gs=(bs=a==null?void 0:a.data)==null?void 0:bs.data)==null?void 0:gs.prop_type_mstr_id)||"",areaOfPlotCheck:"1",areaOfPlot:((vs=(is=a==null?void 0:a.data)==null?void 0:is.data)==null?void 0:vs.area_of_plot)||"",categoryCheck:"1",category:((Ns=(Fs=a==null?void 0:a.data)==null?void 0:Fs.data)==null?void 0:Ns.category_id)||"",isHoardingBoardCheck:"1",isHoardingBoard:(fs=(ws=a==null?void 0:a.data)==null?void 0:ws.data)!=null&&fs.is_hoarding_board?"yes":"no",hoardingArea:((Vs=(As=a==null?void 0:a.data)==null?void 0:As.data)==null?void 0:Vs.hoarding_area)||"",hoardingInstallationDate:((Cs=(Bs=a==null?void 0:a.data)==null?void 0:Bs.data)==null?void 0:Cs.hoarding_installation_date)||"",isMobileTowerCheck:"1",isMobileTower:(qs=(Ts=a==null?void 0:a.data)==null?void 0:Ts.data)!=null&&qs.is_mobile_tower?"yes":"no",mobileTowerArea:((Rs=(Ss=a==null?void 0:a.data)==null?void 0:Ss.data)==null?void 0:Rs.tower_area)||"",mobileTowerInstallationDate:((Is=($s=a==null?void 0:a.data)==null?void 0:$s.data)==null?void 0:Is.tower_installation_date)||"",isPetrolPumpCheck:"1",isPetrolPump:(zs=(ks=a==null?void 0:a.data)==null?void 0:ks.data)!=null&&zs.is_petrol_pump?"yes":"no",petrolPumpArea:((Ys=(Ls=a==null?void 0:a.data)==null?void 0:Ls.data)==null?void 0:Ys.under_ground_area)||"",petrolPumpInstallationDate:((Us=(Ws=a==null?void 0:a.data)==null?void 0:Ws.data)==null?void 0:Us.petrol_pump_completion_date)||"",isRainWaterHarvestingCheck:"1",isRainWaterHarvesting:(Ks=(Es=a==null?void 0:a.data)==null?void 0:Es.data)!=null&&Ks.is_water_harvesting?"yes":"no",rainWaterHarvestingInstallationDate:((Qs=(Os=a==null?void 0:a.data)==null?void 0:Os.data)==null?void 0:Qs.rwh_date_from)||"",addFloor:[],floorFromDB:Ae(),remark:""},validationSchema:Ea,onSubmit:async r=>{if(console.log(r),C==="FORWARD"){Fa.fire({title:"Are you sure?",text:"You are going to verify of this property ",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Proceed!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(b=>{b.isConfirmed&&ls(r)}).catch(b=>{var N,F;console.log(b),G.error((F=(N=b==null?void 0:b.response)==null?void 0:N.data)==null?void 0:F.message)});return}if(C==="BACKWARD"){if((r==null?void 0:r.remark)=="")return G.error("Please enter the remark for backward!");Fa.fire({title:"Are you sure?",text:"You are going to backward of this application",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Proceed!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(b=>{b.isConfirmed&&as(r)}).catch(b=>{var N,F;console.log(b),G.error((F=(N=b==null?void 0:b.response)==null?void 0:N.data)==null?void 0:F.message)});return}}}),as=async r=>{var b,N,F;try{const d=await Fe.mutateAsync({api:De.safLevel,data:{applicationId:Q,receiverRoleId1:"",action:"backward",comment:(r==null?void 0:r.comment)||"No Comment"}});(b=d==null?void 0:d.data)!=null&&b.status?(G.success((N=d==null?void 0:d.data)==null?void 0:N.message),R("/amc-app/property/saf-verification-list",{replace:!0})):G.error(((F=d==null?void 0:d.data)==null?void 0:F.message)||"Something went wrong, Please try again")}catch(d){G.error(d==null?void 0:d.message),console.log(d)}},ls=async r=>{var d,t,k,z,L,Y,W,U,E,K,O;const b=(d=r==null?void 0:r.floorFromDB)==null?void 0:d.map(o=>({floorId:(o==null?void 0:o.floorId)||0,floorNo:o==null?void 0:o.floorNo,useType:o==null?void 0:o.usageTypeId,constructionType:o==null?void 0:o.constructionTypeId,occupancyType:o==null?void 0:o.occupancyTypeId,isRentAgreement:o==null?void 0:o.isRentAgreement,rentAmount:o==null?void 0:o.rentAmount,rentAgreementDate:o==null?void 0:o.rentAgreementDate,buildupArea:o==null?void 0:o.builtUpArea,dateFrom:o==null?void 0:o.dateFrom,dateUpto:o==null?void 0:o.dateTo})),N=(t=r==null?void 0:r.addFloor)==null?void 0:t.map(o=>({floorId:0,floorNo:o==null?void 0:o.floorNo,useType:o==null?void 0:o.usagesTypeId,constructionType:o==null?void 0:o.constructionTypeId,occupancyType:o==null?void 0:o.occupancyTypeId,isRentAgreement:o==null?void 0:o.isRentAgreement,rentAmount:o==null?void 0:o.rentAmount,rentAgreementDate:o==null?void 0:o.rentAgreementDate,buildupArea:o==null?void 0:o.builtUpArea,dateFrom:o==null?void 0:o.dateFrom,dateUpto:o==null?void 0:o.dateTo})),F={safId:parseInt(Q),propertyType:parseInt(r==null?void 0:r.propertyType),category:parseInt(r==null?void 0:r.category),areaOfPlot:parseInt(r==null?void 0:r.areaOfPlot),wardId:parseInt(r==null?void 0:r.wardNo),isMobileTower:(r==null?void 0:r.isMobileTower)=="yes"?1:0,mobileTower:{area:parseInt(r==null?void 0:r.mobileTowerArea),dateFrom:r==null?void 0:r.mobileTowerInstallationDate},isPetrolPump:(r==null?void 0:r.isPetrolPump)=="yes"?1:0,petrolPump:{area:parseInt(r==null?void 0:r.petrolPumpArea),dateFrom:r==null?void 0:r.petrolPumpInstallationDate},isHoardingBoard:(r==null?void 0:r.isHoardingBoard)=="yes"?1:0,hoardingBoard:{area:parseInt(r==null?void 0:r.hoardingArea),dateFrom:r==null?void 0:r.hoardingInstallationDate},isWaterHarvesting:(r==null?void 0:r.isRainWaterHarvesting)=="yes"?1:0,rainWaterHarvestingInstallationDate:r==null?void 0:r.rainWaterHarvestingInstallationDate,zone:r==null?void 0:r.zoneId,floor:[...b,...N]};if(w!=null&&w.create||((z=(k=y==null?void 0:y.user)==null?void 0:k.roleWithId[0])==null?void 0:z.role_id)==5)try{const o=await Fe.mutateAsync({api:De.safSiteVerification,data:F});(L=o==null?void 0:o.data)!=null&&L.status?(R("/amc-app/property/geo-tagging/".concat(Q),{replace:!0}),G.success((Y=o==null?void 0:o.data)==null?void 0:Y.message)):G.error(((W=o==null?void 0:o.data)==null?void 0:W.message)||"Something went wrong, Please try again")}catch(o){G.error(o==null?void 0:o.message),console.log(o)}if(w!=null&&w.update||((E=(U=y==null?void 0:y.user)==null?void 0:U.roleWithId[0])==null?void 0:E.role_id)==7)try{const o=await Fe.mutateAsync({api:De.safSiteVerification,data:F});(K=o==null?void 0:o.data)!=null&&K.status?R("/amc-app/property/naksha-verification/".concat(Q),{replace:!0}):G.error(((O=o==null?void 0:o.data)==null?void 0:O.message)||"Something went wrong, Please try again")}catch(o){G.error(o==null?void 0:o.message),console.log(o)}},{submitCount:Ve,isSubmitting:Be,errors:Ce,isValid:rs}=s,f=[{id:1,title:"Correct",value:"1"},{id:2,title:"Incorrect",value:"0"}],ds=r=>{var b,N,F,d,t,k,z,L,Y,W,U,E,K,O,o,J,c,M,P,H,Z,D,m,ee,se,ae,le,re,de,ne,ce,oe,te,ue,he,pe,xe,ye,je,_e,be,ge;if((r==null?void 0:r.id)===1)return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f.map((l,_)=>{var u;return e.jsx($,{formik:s,name:"zoneCheck",label:l==null?void 0:l.title,value:l==null?void 0:l.value,checked:((u=s==null?void 0:s.values)==null?void 0:u.zoneCheck)==(l==null?void 0:l.value),onChange:(l==null?void 0:l.value)=="1"?()=>{var h,p,ie,ve;s.setFieldValue("zoneId",(p=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:p.zone_mstr_id),s.setFieldValue("zoneCheck",l==null?void 0:l.value),s.setFieldValue("wardNoCheck","1"),s.setFieldValue("wardNo",(ve=(ie=a==null?void 0:a.data)==null?void 0:ie.data)==null?void 0:ve.ward_mstr_id)}:()=>{s.setFieldValue("zoneId",""),s.setFieldValue("zoneCheck",l==null?void 0:l.value),s.setFieldValue("wardNoCheck","0"),s.setFieldValue("wardNo","")}},_+1)})}),e.jsxs(S,{name:"zoneId",disabled:((b=s==null?void 0:s.values)==null?void 0:b.zoneCheck)=="1",formik:s,children:[e.jsx("option",{value:"",children:"Select"}),(d=(F=(N=v==null?void 0:v.data)==null?void 0:N.data)==null?void 0:F.zone)==null?void 0:d.map((l,_)=>{var u,h,p;return e.jsx("option",{value:l==null?void 0:l.id,selected:((u=s==null?void 0:s.values)==null?void 0:u.zoneCheck)=="1"&&l.id==((p=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:p.zone_mstr_id),children:l==null?void 0:l.zone_name},_+1)})]})]});if((r==null?void 0:r.id)===2)return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f.map((l,_)=>{var u;return e.jsx($,{formik:s,name:"wardNoCheck",label:l==null?void 0:l.title,value:l==null?void 0:l.value,checked:((u=s==null?void 0:s.values)==null?void 0:u.wardNoCheck)==(l==null?void 0:l.value),onChange:(l==null?void 0:l.value)=="1"?()=>{var h,p;s.setFieldValue("wardNo",(p=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:p.ward_mstr_id),s.setFieldValue("wardNoCheck",l==null?void 0:l.value)}:()=>{s.setFieldValue("wardNo",""),s.setFieldValue("wardNoCheck",l==null?void 0:l.value)}},_+1)})}),e.jsxs(S,{name:"wardNo",disabled:((t=s==null?void 0:s.values)==null?void 0:t.wardNoCheck)=="1",formik:s,children:[e.jsx("option",{value:"",children:"Select"}),(Y=(L=(z=(k=v==null?void 0:v.data)==null?void 0:k.data)==null?void 0:z.ward_master)==null?void 0:L.filter(l=>{var _;return(l==null?void 0:l.zone)==((_=s==null?void 0:s.values)==null?void 0:_.zoneId)}))==null?void 0:Y.map((l,_)=>{var u,h,p;return e.jsx("option",{value:l==null?void 0:l.id,selected:((u=s==null?void 0:s.values)==null?void 0:u.wardNoCheck)=="1"&&l.id==((p=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:p.ward_mstr_id),children:l==null?void 0:l.ward_name},_+1)})]})]});if((r==null?void 0:r.id)===3)return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f.map((l,_)=>{var u;return e.jsx($,{formik:s,name:"propertyTypeCheck",label:l==null?void 0:l.title,value:l==null?void 0:l.value,checked:((u=s==null?void 0:s.values)==null?void 0:u.propertyTypeCheck)==(l==null?void 0:l.value),onChange:(l==null?void 0:l.value)=="1"?()=>{var h,p;s.setFieldValue("propertyType",(p=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:p.prop_type_mstr_id),s.setFieldValue("propertyTypeCheck",l==null?void 0:l.value)}:()=>{s.setFieldValue("propertyType",""),s.setFieldValue("propertyTypeCheck",l==null?void 0:l.value)}},_+1)})}),e.jsxs(S,{name:"propertyType",formik:s,disabled:((W=s==null?void 0:s.values)==null?void 0:W.propertyTypeCheck)=="1",children:[e.jsx("option",{value:"",children:"Select"}),(K=(E=(U=v==null?void 0:v.data)==null?void 0:U.data)==null?void 0:E.property_type)==null?void 0:K.map((l,_)=>{var u,h,p;return e.jsx("option",{value:l==null?void 0:l.id,selected:((u=s==null?void 0:s.values)==null?void 0:u.propertyTypeCheck)=="1"&&l.id==((p=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:p.prop_type_mstr_id),children:l==null?void 0:l.property_type},_+1)})]})]});if((r==null?void 0:r.id)===4)return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f.map((l,_)=>{var u;return e.jsx($,{formik:s,name:"areaOfPlotCheck",label:l==null?void 0:l.title,value:l==null?void 0:l.value,checked:((u=s==null?void 0:s.values)==null?void 0:u.areaOfPlotCheck)==(l==null?void 0:l.value),onChange:(l==null?void 0:l.value)=="1"?()=>{var h,p;s.setFieldValue("areaOfPlot",(p=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:p.area_of_plot),s.setFieldValue("areaOfPlotCheck",l==null?void 0:l.value)}:()=>{s.setFieldValue("areaOfPlot",""),s.setFieldValue("areaOfPlotCheck",l==null?void 0:l.value)}},_+1)})}),e.jsx(q,{type:"number",name:"areaOfPlot",formik:s,disabled:((O=s==null?void 0:s.values)==null?void 0:O.areaOfPlotCheck)=="1"})]});if((r==null?void 0:r.id)===5)return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f.map((l,_)=>{var u;return e.jsx($,{formik:s,name:"categoryCheck",label:l==null?void 0:l.title,value:l==null?void 0:l.value,checked:((u=s==null?void 0:s.values)==null?void 0:u.categoryCheck)==(l==null?void 0:l.value),onChange:(l==null?void 0:l.value)=="1"?()=>{var h,p;s.setFieldValue("category",(p=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:p.category_id),s.setFieldValue("categoryCheck",l==null?void 0:l.value)}:()=>{s.setFieldValue("category",""),s.setFieldValue("categoryCheck",l==null?void 0:l.value)}},_+1)})}),e.jsxs(S,{name:"category",formik:s,disabled:((o=s==null?void 0:s.values)==null?void 0:o.categoryCheck)=="1",children:[e.jsx("option",{value:"",children:"Select"}),(M=(c=(J=v==null?void 0:v.data)==null?void 0:J.data)==null?void 0:c.categories)==null?void 0:M.map((l,_)=>{var u,h,p;return e.jsx("option",{value:l==null?void 0:l.id,selected:((u=s==null?void 0:s.values)==null?void 0:u.categoryCheck)=="1"&&l.id==((p=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:p.category_id),children:l==null?void 0:l.category},_+1)})]})]});if((r==null?void 0:r.id)===6)return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f.map((l,_)=>{var u;return e.jsx($,{formik:s,name:"isHoardingBoardCheck",label:l==null?void 0:l.title,value:l==null?void 0:l.value,checked:((u=s==null?void 0:s.values)==null?void 0:u.isHoardingBoardCheck)==(l==null?void 0:l.value),onChange:(l==null?void 0:l.value)=="1"?()=>{var h,p;s.setFieldValue("isHoardingBoard",(p=(h=a==null?void 0:a.data)==null?void 0:h.data)!=null&&p.is_hoarding_board?"yes":"no"),s.setFieldValue("isHoardingBoardCheck",l==null?void 0:l.value)}:()=>{s.setFieldValue("isHoardingBoard",""),s.setFieldValue("isHoardingBoardCheck",l==null?void 0:l.value)}},_+1)})}),e.jsxs(S,{name:"isHoardingBoard",formik:s,disabled:((P=s==null?void 0:s.values)==null?void 0:P.isHoardingBoardCheck)=="1",children:[e.jsx("option",{value:"",children:"Select"}),[{title:"Yes",value:"yes"},{title:"No",value:"no"}].map((l,_)=>{var u,h,p;return e.jsx("option",{value:l==null?void 0:l.value,selected:((u=s==null?void 0:s.values)==null?void 0:u.isHoardingBoardCheck)=="1"&&((p=(h=a==null?void 0:a.data)==null?void 0:h.data)!=null&&p.is_hoarding_board?"yes":l.value=="no"),children:l==null?void 0:l.title},_+1)})]}),((H=s==null?void 0:s.values)==null?void 0:H.isHoardingBoard)=="yes"&&e.jsxs("div",{className:"mt-5",children:[e.jsx(q,{type:"number",label:"Total Area(in Sq.Ft)",placeholder:"Total Area",name:"hoardingArea",formik:s}),e.jsx(q,{type:"date",max:(D=(Z=a==null?void 0:a.data)==null?void 0:Z.data)!=null&&D.application_date?(ee=(m=a==null?void 0:a.data)==null?void 0:m.data)==null?void 0:ee.application_date:"",label:"Hoarding Installation Date",name:"hoardingInstallationDate",formik:s})]})]});if((r==null?void 0:r.id)===7)return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f==null?void 0:f.map((l,_)=>{var u;return e.jsx($,{formik:s,name:"isMobileTowerCheck",label:l==null?void 0:l.title,value:l==null?void 0:l.value,checked:((u=s==null?void 0:s.values)==null?void 0:u.isMobileTowerCheck)==(l==null?void 0:l.value),onChange:(l==null?void 0:l.value)=="1"?()=>{var h,p;s.setFieldValue("isMobileTower",(p=(h=a==null?void 0:a.data)==null?void 0:h.data)!=null&&p.is_mobile_tower?"yes":"no"),s.setFieldValue("isMobileTowerCheck",l==null?void 0:l.value)}:()=>{s.setFieldValue("isMobileTower",""),s.setFieldValue("isMobileTowerCheck",l==null?void 0:l.value)}},_+1)})}),e.jsxs(S,{name:"isMobileTower",formik:s,disabled:((se=s==null?void 0:s.values)==null?void 0:se.isMobileTowerCheck)=="1",children:[e.jsx("option",{value:"",children:"Select"}),[{title:"Yes",value:"yes"},{title:"No",value:"no"}].map((l,_)=>{var u,h,p;return e.jsx("option",{value:l==null?void 0:l.value,selected:((u=s==null?void 0:s.values)==null?void 0:u.isMobileTowerCheck)=="1"&&((p=(h=a==null?void 0:a.data)==null?void 0:h.data)!=null&&p.is_mobile_tower?"yes":(l==null?void 0:l.value)=="no"),children:l==null?void 0:l.title},_+1)})]}),((ae=s==null?void 0:s.values)==null?void 0:ae.isMobileTower)=="yes"&&e.jsxs("div",{className:"mt-5",children:[e.jsx(q,{type:"number",label:"Total Area(in Sq.Ft)",placeholder:"Total Area",name:"mobileTowerArea",formik:s}),e.jsx(q,{type:"date",label:"Installation Date",name:"mobileTowerInstallationDate",formik:s,max:(re=(le=a==null?void 0:a.data)==null?void 0:le.data)!=null&&re.application_date?(ne=(de=a==null?void 0:a.data)==null?void 0:de.data)==null?void 0:ne.application_date:""})]})]});if((r==null?void 0:r.id)===8)return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f.map((l,_)=>{var u;return e.jsx($,{formik:s,name:"isPetrolPumpCheck",label:l==null?void 0:l.title,value:l==null?void 0:l.value,checked:((u=s==null?void 0:s.values)==null?void 0:u.isPetrolPumpCheck)==(l==null?void 0:l.value),onChange:(l==null?void 0:l.value)=="1"?()=>{var h,p;s.setFieldValue("isPetrolPump",(p=(h=a==null?void 0:a.data)==null?void 0:h.data)!=null&&p.is_petrol_pump?"yes":"no"),s.setFieldValue("isPetrolPumpCheck",l==null?void 0:l.value)}:()=>{s.setFieldValue("isPetrolPump",""),s.setFieldValue("isPetrolPumpCheck",l==null?void 0:l.value)}},_+1)})}),e.jsxs(S,{name:"isPetrolPump",formik:s,disabled:((ce=s==null?void 0:s.values)==null?void 0:ce.isPetrolPumpCheck)=="1",children:[e.jsx("option",{value:"",children:"Select"}),[{title:"Yes",value:"yes"},{title:"No",value:"no"}].map((l,_)=>{var u,h,p;return e.jsx("option",{value:l==null?void 0:l.value,selected:((u=s==null?void 0:s.values)==null?void 0:u.isPetrolPumpCheck)=="1"&&((p=(h=a==null?void 0:a.data)==null?void 0:h.data)!=null&&p.is_petrol_pump?"yes":(l==null?void 0:l.value)=="no"),children:l==null?void 0:l.title},_+1)})]}),((oe=s==null?void 0:s.values)==null?void 0:oe.isPetrolPump)=="yes"&&e.jsxs("div",{className:"mt-5",children:[e.jsx(q,{type:"number",label:"Total Area(in Sq.Ft)",placeholder:"Total Area",name:"petrolPumpArea",formik:s}),e.jsx(q,{type:"date",label:"Installation Date",name:"petrolPumpInstallationDate",formik:s,max:(ue=(te=a==null?void 0:a.data)==null?void 0:te.data)!=null&&ue.application_date?(pe=(he=a==null?void 0:a.data)==null?void 0:he.data)==null?void 0:pe.application_date:""})]})]});if((r==null?void 0:r.id)===9)return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f==null?void 0:f.map((l,_)=>{var u;return e.jsx($,{formik:s,name:"isRainWaterHarvestingCheck",label:l==null?void 0:l.title,value:l==null?void 0:l.value,checked:((u=s==null?void 0:s.values)==null?void 0:u.isRainWaterHarvestingCheck)==(l==null?void 0:l.value),onChange:(l==null?void 0:l.value)=="1"?()=>{var h,p;s.setFieldValue("isRainWaterHarvesting",(p=(h=a==null?void 0:a.data)==null?void 0:h.data)!=null&&p.is_water_harvesting?"yes":"no"),s.setFieldValue("isRainWaterHarvestingCheck",l==null?void 0:l.value)}:()=>{s.setFieldValue("isRainWaterHarvesting",""),s.setFieldValue("isRainWaterHarvestingCheck",l==null?void 0:l.value)}},_+1)})}),e.jsxs(S,{name:"isRainWaterHarvesting",formik:s,disabled:((xe=s==null?void 0:s.values)==null?void 0:xe.isRainWaterHarvestingCheck)=="1",children:[e.jsx("option",{value:"",children:"Select"}),[{title:"Yes",value:"yes"},{title:"No",value:"no"}].map((l,_)=>{var u,h,p;return e.jsx("option",{value:l==null?void 0:l.value,selected:((u=s==null?void 0:s.values)==null?void 0:u.isRainWaterHarvestingCheck)=="1"&&((p=(h=a==null?void 0:a.data)==null?void 0:h.data)!=null&&p.is_water_harvesting?"yes":l.value=="no"),children:l==null?void 0:l.title},_+1)})]}),((ye=s==null?void 0:s.values)==null?void 0:ye.isRainWaterHarvesting)=="yes"&&e.jsx("div",{className:"mt-5",children:e.jsx(q,{type:"date",label:"Installation Date",name:"rainWaterHarvestingInstallationDate",formik:s,max:(_e=(je=a==null?void 0:a.data)==null?void 0:je.data)!=null&&_e.application_date?(ge=(be=a==null?void 0:a.data)==null?void 0:be.data)==null?void 0:ge.application_date:""})})]})};return Na.useEffect(()=>{var r,b,N,F;(b=(r=a==null?void 0:a.data)==null?void 0:r.data)!=null&&b.is_agency_verified&&(w!=null&&w.create||((F=(N=y==null?void 0:y.user)==null?void 0:N.roleWithId[0])==null?void 0:F.role_id)==5)&&R("/amc-app/property/geo-tagging/".concat(Q),{replace:!0})},[(Js=(Gs=a==null?void 0:a.data)==null?void 0:Gs.data)==null?void 0:Js.is_agency_verified]),Na.useEffect(()=>{var r;((r=s.values)==null?void 0:r.propertyType)==4?(s.setFieldValue("floorFromDB",[]),s.setFieldValue("isFloorFromDB",!1)):(s.setFieldValue("floorFromDB",Ae()),s.setFieldValue("isFloorFromDB",!0))},[(Xs=s.values)==null?void 0:Xs.propertyType,(Ps=(Ms=a==null?void 0:a.data)==null?void 0:Ms.data)==null?void 0:Ps.floors]),me.useEffect(()=>{I({submitCount:Ve,isSubmitting:Be,errors:Ce,isValid:rs})},[Ce,Ve,Be]),a!=null&&a.isLoading||v!=null&&v.isLoading?e.jsx(Ta,{}):e.jsxs(ka,{title:"Saf Site Verification",children:[Fe.isLoading&&e.jsx(La,{}),e.jsx(Ua,{open:ss,setOpen:fe,addFloorData:s,safData:a,masterData:v}),e.jsxs("div",{className:"p-4 ",children:[e.jsx(A.Card,{className:"w-full",children:e.jsxs(A.CardBody,{children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-base font-semibold",children:"Details"})}),e.jsx("div",{className:"border border-gray-300 w-full my-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("h1",{className:"font-semibold text-sm",children:"Application No : "}),e.jsx("h1",{className:"text-sm",children:(Zs=(Hs=a==null?void 0:a.data)==null?void 0:Hs.data)==null?void 0:Zs.saf_no}),e.jsx("h1",{className:"font-semibold text-sm",children:"Application Type : "}),e.jsx("h1",{className:"text-sm",children:(ms=(Ds=a==null?void 0:a.data)==null?void 0:Ds.data)==null?void 0:ms.assessment_type}),e.jsx("h1",{className:"font-semibold text-sm",children:"Apply Date : "}),e.jsx("h1",{className:"text-sm",children:(sa=(ea=a==null?void 0:a.data)==null?void 0:ea.data)==null?void 0:sa.application_date}),e.jsx("h1",{className:"font-semibold text-sm",children:"Owner Name : "}),e.jsx("h1",{className:"text-sm",children:(la=(aa=a==null?void 0:a.data)==null?void 0:aa.data)==null?void 0:la.applicant_name}),e.jsx("h1",{className:"font-semibold text-sm",children:"Mobile No : "}),e.jsx("div",{className:"w-20 truncate",children:e.jsx("h1",{className:"text-sm",children:(na=(da=(ra=a==null?void 0:a.data)==null?void 0:ra.data)==null?void 0:da.owners)==null?void 0:na.map(r=>r==null?void 0:r.mobile_no).join(", ")})})]})]})}),e.jsxs(Aa,{formik:s,children:[e.jsx("div",{className:"grid grid-cols-1 gap-3 mt-4",children:X==null?void 0:X.map((r,b)=>{var N,F;return e.jsxs(A.Card,{className:"w-full",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-base font-semibold text-gray-100",children:r==null?void 0:r.title})}),e.jsxs(A.CardBody,{children:[e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Self Assessed :"," "]}),e.jsx("h1",{className:"text-sm",children:r==null?void 0:r.selfAssessedValue})]}),((w==null?void 0:w.update)||((F=(N=y==null?void 0:y.user)==null?void 0:N.roleWithId[0])==null?void 0:F.role_id)==7)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold mt-2",children:["Tc Verified :"," "]}),e.jsx("h1",{className:"text-sm mt-2",children:r==null?void 0:r.tcVerifiedValue})]}),(r==null?void 0:r.area)&&e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold mt-2",children:["Area ",e.jsx("small",{children:"(Tc Verified)"})," -:"]}),e.jsx("h1",{className:"text-sm mt-2",children:r==null?void 0:r.area})]}),(r==null?void 0:r.installationDate)&&e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold mt-2",children:["Date ",e.jsx("small",{children:"(Tc Verified)"})," -:"]}),e.jsx("h1",{className:"text-sm mt-2",children:r==null?void 0:r.installationDate})]}),r!=null&&r.has_hoarding||r!=null&&r.has_mobile_tower||r!=null&&r.has_petrol_pump||r!=null&&r.has_water_harvesting?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsx("h1",{className:"text-sm",children:"Area-: "}),e.jsx("h1",{className:"text-sm",children:r==null?void 0:r.area})]}),e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsx("h1",{className:"text-sm",children:"Date-: "}),e.jsx("h1",{className:"text-sm",children:r==null?void 0:r.installationDate})]})]}):null]}),ds(r)]})]},b)})}),e.jsx("div",{className:"border border-gray-300 w-full my-5"}),((ca=s==null?void 0:s.values)==null?void 0:ca.propertyType)!=4?e.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-4",children:[e.jsx("h1",{className:"text-sm font-semibold text-center",children:"Floor Details"}),e.jsx("div",{className:"border border-gray-300 w-full my-2"}),e.jsx($a,{name:"floorFromDB",children:r=>{var b,N,F;return e.jsx(e.Fragment,{children:(F=(N=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:N.floors)==null?void 0:F.map((d,t)=>{var k,z,L,Y,W,U,E,K,O,o,J,c,M,P,H,Z,D,m,ee,se,ae,le,re,de,ne,ce,oe,te,ue,he,pe,xe,ye,je,_e,be,ge,l,_,u,h,p,ie,ve,$e,Ie,ke,ze,Le,Ye,We,Ue,Ee,Ke,Oe,Qe,Ge,Je,Xe,Me,Pe,He,Ze;return e.jsx("div",{className:"py-3",children:e.jsxs(A.Card,{className:"w-full ",children:[e.jsxs("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:[e.jsx("h1",{className:"text-base font-semibold text-gray-100",children:(k=T("floor_type",d==null?void 0:d.floor_mstr_id))==null?void 0:k.floor_name}),(d==null?void 0:d.id)==0&&e.jsxs("div",{className:"relative grid items-center px-2 py-1 font-sans text-xs font-bold text-gray-200  rounded-md select-none whitespace-nowrap bg-blue-900/50",children:[e.jsx("div",{className:"absolute w-4 h-4 top-2/4 left-1 -translate-y-2/4",children:e.jsx("span",{className:"mx-auto mt-1 block h-2 w-2 rounded-full bg-blue-900 content-['']"})}),e.jsx("span",{className:"ml-4",children:"Add new floor by TC"})]})]}),e.jsxs("div",{className:"p-3",children:[e.jsxs(A.Card,{className:"w-full ",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-base font-semibold text-gray-100",children:"Floor"})}),e.jsxs(A.CardBody,{children:[e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Self Assessed :"," "]}),e.jsx("h1",{className:"text-sm",children:(z=T("floor_type",d==null?void 0:d.floor_mstr_id))==null?void 0:z.floor_name})]}),((w==null?void 0:w.update)||((Y=(L=y==null?void 0:y.user)==null?void 0:L.roleWithId[0])==null?void 0:Y.role_id)==7)&&e.jsxs("div",{className:"flex justify-start items-center mt-3 gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Verified by TC :"," "]}),e.jsx("h1",{className:"text-xs",children:(W=T("floor_type",d==null?void 0:d.tc_verified_floor_mstr_id))==null?void 0:W.floor_name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f.map((n,V)=>{var g,i;return e.jsx($,{formik:s,name:"floorFromDB[".concat(t,"].checkFloorNo"),label:n==null?void 0:n.title,value:n==null?void 0:n.value,checked:((i=(g=s==null?void 0:s.values)==null?void 0:g.floorFromDB[t])==null?void 0:i.checkFloorNo)==(n==null?void 0:n.value),onChange:(n==null?void 0:n.value)=="1"?()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkFloorNo"),"1"),s.setFieldValue("floorFromDB[".concat(t,"].floorNo"),d==null?void 0:d.floor_mstr_id)}:()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkFloorNo"),"0"),s.setFieldValue("floorFromDB[".concat(t,"].floorNo"),"")}},V+1)})}),e.jsxs(S,{isDynamic:!0,name:"floorFromDB.".concat(t,".floorNo"),formik:s,disabled:((E=(U=s==null?void 0:s.values)==null?void 0:U.floorFromDB[t])==null?void 0:E.checkFloorNo)=="1",children:[e.jsx("option",{value:"",children:"Select"}),(o=(O=(K=v==null?void 0:v.data)==null?void 0:K.data)==null?void 0:O.floor_type)==null?void 0:o.map((n,V)=>{var g,i;return e.jsx("option",{value:n==null?void 0:n.id,selected:((i=(g=s==null?void 0:s.values)==null?void 0:g.floorFromDB[t])==null?void 0:i.checkFloorNo)=="1"&&(n==null?void 0:n.id)==(d==null?void 0:d.floor_mstr_id),children:n==null?void 0:n.floor_name},V+1)})]})]})]})]}),e.jsx("div",{className:"border border-gray-300 w-full my-4"}),e.jsxs(A.Card,{className:"w-full ",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-base font-semibold text-gray-100",children:"Usages Type"})}),e.jsxs(A.CardBody,{children:[e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Self Assessed :"," "]}),e.jsx("h1",{className:"text-sm",children:(J=T("usage_type",d==null?void 0:d.usage_type_mstr_id))==null?void 0:J.usage_type})]}),((w==null?void 0:w.update)||((M=(c=y==null?void 0:y.user)==null?void 0:c.roleWithId[0])==null?void 0:M.role_id)==7)&&e.jsxs("div",{className:"flex justify-start items-center mt-2 gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Verified by TC :"," "]}),e.jsx("h1",{className:"text-sm",children:(P=T("usage_type",d==null?void 0:d.tc_verified_usage_type_mstr_id))==null?void 0:P.usage_type})]}),e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f==null?void 0:f.map((n,V)=>{var g,i;return e.jsx($,{formik:s,name:"floorFromDB[".concat(t,"].checkUsagesType"),label:n==null?void 0:n.title,value:n==null?void 0:n.value,checked:((i=(g=s==null?void 0:s.values)==null?void 0:g.floorFromDB[t])==null?void 0:i.checkUsagesType)==(n==null?void 0:n.value),onChange:(n==null?void 0:n.value)=="1"?()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkUsagesType"),"1"),s.setFieldValue("floorFromDB[".concat(t,"].usageTypeId"),d==null?void 0:d.usage_type_mstr_id)}:()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkUsagesType"),"0"),s.setFieldValue("floorFromDB[".concat(t,"].usageTypeId"),"")}},V+1)})}),e.jsxs(S,{isDynamic:!0,name:"floorFromDB.".concat(t,".usageTypeId"),formik:s,disabled:((Z=(H=s==null?void 0:s.values)==null?void 0:H.floorFromDB[t])==null?void 0:Z.checkUsagesType)=="1",children:[e.jsx("option",{value:"",children:"Select"}),(ee=(m=(D=v==null?void 0:v.data)==null?void 0:D.data)==null?void 0:m.usage_type)==null?void 0:ee.map((n,V)=>{var g,i;return e.jsx("option",{value:n==null?void 0:n.id,selected:((i=(g=s==null?void 0:s.values)==null?void 0:g.floorFromDB[t])==null?void 0:i.checkUsagesType)=="1"&&(n==null?void 0:n.id)==(d==null?void 0:d.usage_type_mstr_id),children:n==null?void 0:n.usage_type},V+1)})]})]})]}),e.jsx("div",{className:"border border-gray-300 w-full my-4"}),e.jsxs(A.Card,{className:"w-full ",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-base font-semibold text-gray-100",children:"Occupancy Type"})}),e.jsxs(A.CardBody,{children:[e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Self Assessed :"," "]}),e.jsx("h1",{className:"text-sm",children:(se=T("occupancy_type",d==null?void 0:d.occupancy_type_mstr_id))==null?void 0:se.occupancy_type})]}),((w==null?void 0:w.update)||((le=(ae=y==null?void 0:y.user)==null?void 0:ae.roleWithId[0])==null?void 0:le.role_id)==7)&&e.jsxs("div",{className:"flex justify-start items-center mt-2 gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Verified by TC :"," "]}),e.jsx("h1",{className:"text-sm",children:(re=T("occupancy_type",d==null?void 0:d.tc_verified_occupancy_type_mstr_id))==null?void 0:re.occupancy_type})]}),e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f.map((n,V)=>{var g,i;return e.jsx($,{formik:s,name:"floorFromDB[".concat(t,"].checkOccupancyType"),label:n==null?void 0:n.title,value:n==null?void 0:n.value,checked:((i=(g=s==null?void 0:s.values)==null?void 0:g.floorFromDB[t])==null?void 0:i.checkOccupancyType)==(n==null?void 0:n.value),onChange:(n==null?void 0:n.value)=="1"?()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkOccupancyType"),"1"),s.setFieldValue("floorFromDB[".concat(t,"].occupancyTypeId"),d==null?void 0:d.occupancy_type_mstr_id),s==null||s.setFieldValue("floorFromDB[".concat(t,"].isRentAgreement"),(d==null?void 0:d.is_agreement_available)&&(d==null?void 0:d.occupancy_type_mstr_id)=="2"&&"1"||!(d!=null&&d.is_agreement_available)&&(d==null?void 0:d.occupancy_type_mstr_id)=="2"&&"0"||(d==null?void 0:d.is_agreement_available)==""&&(d==null?void 0:d.occupancy_type_mstr_id)=="2"&&"0"||(d==null?void 0:d.is_agreement_available)==null&&(d==null?void 0:d.occupancy_type_mstr_id)=="2"&&"0"||""),s==null||s.setFieldValue("floorFromDB[".concat(t,"].rentAmount"),d==null?void 0:d.rent_amount),s==null||s.setFieldValue("floorFromDB[".concat(t,"].rentAgreementDate"),d==null?void 0:d.rent_agreement_date)}:()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkOccupancyType"),"0"),s.setFieldValue("floorFromDB[".concat(t,"].occupancyTypeId"),""),s==null||s.setFieldValue("floorFromDB[".concat(t,"].isRentAgreement"),(d==null?void 0:d.is_agreement_available)&&(d==null?void 0:d.occupancy_type_mstr_id)=="2"&&"1"||!(d!=null&&d.is_agreement_available)&&(d==null?void 0:d.occupancy_type_mstr_id)=="2"&&"0"||(d==null?void 0:d.is_agreement_available)==""&&(d==null?void 0:d.occupancy_type_mstr_id)=="2"&&"0"||(d==null?void 0:d.is_agreement_available)==null&&(d==null?void 0:d.occupancy_type_mstr_id)=="2"&&"0"||""),s==null||s.setFieldValue("floorFromDB[".concat(t,"].rentAmount"),""),s==null||s.setFieldValue("floorFromDB[".concat(t,"].rentAgreementDate"),"")}},V+1)})}),e.jsx("div",{children:e.jsxs(S,{isDynamic:!0,onChange:n=>{s.setFieldValue("floorFromDB[".concat(t,"].occupancyTypeId"),n.target.value),n.target.value==1&&s.setFieldValue("floorFromDB[".concat(t,"].isRentAgreement"),"")},value:(ne=(de=s==null?void 0:s.values)==null?void 0:de.floorFromDB[t])==null?void 0:ne.occupancyTypeId,disabled:((oe=(ce=s==null?void 0:s.values)==null?void 0:ce.floorFromDB[t])==null?void 0:oe.checkOccupancyType)=="1",children:[e.jsx("option",{value:"",children:"Select"}),(he=(ue=(te=v==null?void 0:v.data)==null?void 0:te.data)==null?void 0:ue.occupancy_type)==null?void 0:he.map((n,V)=>{var g,i;return e.jsx("option",{value:n==null?void 0:n.id,selected:((i=(g=s==null?void 0:s.values)==null?void 0:g.floorFromDB[t])==null?void 0:i.checkOccupancyType)=="1"&&(n==null?void 0:n.id)==(d==null?void 0:d.occupancy_type_mstr_id),children:n==null?void 0:n.occupancy_type},V+1)})]})}),((xe=(pe=s==null?void 0:s.values)==null?void 0:pe.floorFromDB[t])==null?void 0:xe.occupancyTypeId)==2&&e.jsx("div",{children:e.jsxs(S,{isDynamic:!0,name:"floorFromDB.".concat(t,".isRentAgreement"),formik:s,children:[e.jsx("option",{value:"",children:"Select"}),["0","1"].map((n,V)=>{var g,i;return e.jsx("option",{value:n,selected:((i=(g=s==null?void 0:s.values)==null?void 0:g.floorFromDB[t])==null?void 0:i.isRentAgreement)==n,children:n=="0"?"No":"Yes"},V+1)})]})}),((je=(ye=s==null?void 0:s.values)==null?void 0:ye.floorFromDB[t])==null?void 0:je.isRentAgreement)=="1"&&((be=(_e=s==null?void 0:s.values)==null?void 0:_e.floorFromDB[t])==null?void 0:be.occupancyTypeId)==2&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{children:e.jsx(q,{type:"number",label:"Rent amount",placeholder:"Rent amount",name:"floorFromDB[".concat(t,"].rentAmount"),formik:s})}),e.jsx("div",{children:e.jsx(q,{type:"date",max:new Date().toISOString().split("T")[0],label:"Rent Agreement Date",placeholder:"Rent Agreement Date",name:"floorFromDB[".concat(t,"].rentAgreementDate"),formik:s})})]})]})]}),e.jsx("div",{className:"border border-gray-300 w-full my-4"}),e.jsxs(A.Card,{className:"w-full ",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-base font-semibold text-gray-100",children:"Construction Type"})}),e.jsxs(A.CardBody,{children:[e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Self Assessed :"," "]}),e.jsx("h1",{className:"text-sm",children:(ge=T("construction_type",d==null?void 0:d.const_type_mstr_id))==null?void 0:ge.construction_type})]}),((w==null?void 0:w.update)||((_=(l=y==null?void 0:y.user)==null?void 0:l.roleWithId[0])==null?void 0:_.role_id)==7)&&e.jsxs("div",{className:"flex justify-start items-center mt-2 gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Verified by TC :"," "]}),e.jsx("h1",{className:"text-sm",children:(u=T("construction_type",d==null?void 0:d.tc_verified_const_type_mstr_id))==null?void 0:u.construction_type})]}),e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f==null?void 0:f.map((n,V)=>{var g,i;return e.jsx($,{formik:s,name:"floorFromDB[".concat(t,"].checkConstructionTypeId"),label:n==null?void 0:n.title,value:n==null?void 0:n.value,checked:((i=(g=s==null?void 0:s.values)==null?void 0:g.floorFromDB[t])==null?void 0:i.checkConstructionTypeId)==(n==null?void 0:n.value),onChange:(n==null?void 0:n.value)=="1"?()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkConstructionTypeId"),"1"),s.setFieldValue("floorFromDB[".concat(t,"].constructionTypeId"),d==null?void 0:d.const_type_mstr_id)}:()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkConstructionTypeId"),"0"),s.setFieldValue("floorFromDB[".concat(t,"].constructionTypeId"),"")}},V+1)})}),e.jsxs(S,{isDynamic:!0,name:"floorFromDB.".concat(t,".constructionTypeId"),formik:s,disabled:((p=(h=s==null?void 0:s.values)==null?void 0:h.floorFromDB[t])==null?void 0:p.checkConstructionTypeId)=="1",children:[e.jsx("option",{value:"",children:"Select"}),($e=(ve=(ie=v==null?void 0:v.data)==null?void 0:ie.data)==null?void 0:ve.construction_type)==null?void 0:$e.map((n,V)=>{var g,i;return e.jsx("option",{value:n==null?void 0:n.id,selected:((i=(g=s==null?void 0:s.values)==null?void 0:g.floorFromDB[t])==null?void 0:i.checkConstructionTypeId)=="1"&&(n==null?void 0:n.id)==(d==null?void 0:d.const_type_mstr_id),children:n==null?void 0:n.construction_type},V+1)})]})]})]}),e.jsx("div",{className:"border border-gray-300 w-full my-4"}),e.jsxs(A.Card,{className:"w-full ",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-sm font-semibold text-gray-100",children:"Build Up Area (in Sq.Ft)"})}),e.jsxs(A.CardBody,{children:[e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Self Assessed :"," "]}),e.jsx("h1",{className:"text-sm",children:d==null?void 0:d.builtup_area})]}),((w==null?void 0:w.update)||((ke=(Ie=y==null?void 0:y.user)==null?void 0:Ie.roleWithId[0])==null?void 0:ke.role_id)==7)&&e.jsxs("div",{className:"flex justify-start items-center mt-2 gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Verified by TC :"," "]}),e.jsx("h1",{className:"text-sm",children:d==null?void 0:d.tc_verified_builtup_area})]}),e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f.map((n,V)=>{var g,i;return e.jsx($,{formik:s,name:"floorFromDB[".concat(t,"].checkBuiltUpArea"),label:n==null?void 0:n.title,value:n==null?void 0:n.value,checked:((i=(g=s==null?void 0:s.values)==null?void 0:g.floorFromDB[t])==null?void 0:i.checkBuiltUpArea)==(n==null?void 0:n.value),onChange:(n==null?void 0:n.value)=="0"?()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkBuiltUpArea"),"0"),s.setFieldValue("floorFromDB[".concat(t,"].builtUpArea"),"")}:()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkBuiltUpArea"),"1"),s.setFieldValue("floorFromDB[".concat(t,"].builtUpArea"),d==null?void 0:d.builtup_area)}},V+1)})}),e.jsx(q,{isDynamic:!0,type:"number",name:"floorFromDB.".concat(t,".builtUpArea"),formik:s,disabled:((Le=(ze=s==null?void 0:s.values)==null?void 0:ze.floorFromDB[t])==null?void 0:Le.checkBuiltUpArea)=="1"})]})]}),e.jsx("div",{className:"border border-gray-300 w-full my-4"}),e.jsxs(A.Card,{className:"w-full ",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-sm font-semibold text-gray-100",children:"Date From"})}),e.jsxs(A.CardBody,{children:[e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Self Assessed :"," "]}),e.jsx("h1",{className:"text-sm",children:d==null?void 0:d.date_from})]}),((w==null?void 0:w.update)||((We=(Ye=y==null?void 0:y.user)==null?void 0:Ye.roleWithId[0])==null?void 0:We.role_id)==7)&&e.jsxs("div",{className:"flex justify-start items-center mt-2 gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Verified by TC :"," "]}),e.jsx("h1",{className:"text-sm",children:d==null?void 0:d.tc_verified_date_from})]}),e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f.map((n,V)=>{var g,i;return e.jsx($,{formik:s,name:"floorFromDB[".concat(t,"].checkDateFrom"),label:n==null?void 0:n.title,value:n==null?void 0:n.value,checked:((i=(g=s==null?void 0:s.values)==null?void 0:g.floorFromDB[t])==null?void 0:i.checkDateFrom)==(n==null?void 0:n.value),onChange:(n==null?void 0:n.value)=="0"?()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkDateFrom"),"0"),s.setFieldValue("floorFromDB[".concat(t,"].dateFrom"),"")}:()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkDateFrom"),"1"),s.setFieldValue("floorFromDB[".concat(t,"].dateFrom"),d==null?void 0:d.date_from)}},V+1)})}),e.jsx(q,{isDynamic:!0,type:"date",name:"floorFromDB.".concat(t,".dateFrom"),formik:s,disabled:((Ee=(Ue=s==null?void 0:s.values)==null?void 0:Ue.floorFromDB[t])==null?void 0:Ee.checkDateFrom)=="1",max:(Oe=(Ke=a==null?void 0:a.data)==null?void 0:Ke.data)!=null&&Oe.application_date?(Ge=(Qe=a==null?void 0:a.data)==null?void 0:Qe.data)==null?void 0:Ge.application_date:""})]})]}),e.jsx("div",{className:"border border-gray-300 w-full my-4"}),e.jsxs(A.Card,{className:"w-full ",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-sm font-semibold text-gray-100",children:"Date Upto"})}),e.jsxs(A.CardBody,{children:[e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Self Assessed :"," "]}),e.jsx("h1",{className:"text-sm",children:d==null?void 0:d.date_upto})]}),e.jsxs("div",{className:"flex justify-start items-center mt-2 gap-5",children:[e.jsxs("h1",{className:"text-sm font-semibold",children:["Verified by TC :"," "]}),e.jsx("h1",{className:"text-sm",children:d==null?void 0:d.tc_verified_date_upto})]}),e.jsx("div",{className:"flex justify-between items-center gap-2 mb-5 mt-5",children:f==null?void 0:f.map((n,V)=>{var g,i;return e.jsx($,{formik:s,name:"floorFromDB[".concat(t,"].checkDateTo"),label:n==null?void 0:n.title,value:n==null?void 0:n.value,checked:((i=(g=s==null?void 0:s.values)==null?void 0:g.floorFromDB[t])==null?void 0:i.checkDateTo)==(n==null?void 0:n.value),onChange:(n==null?void 0:n.value)=="0"?()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkDateTo"),"0"),s.setFieldValue("floorFromDB[".concat(t,"].dateTo"),"")}:()=>{s.setFieldValue("floorFromDB[".concat(t,"].checkDateTo"),"1"),s.setFieldValue("floorFromDB[".concat(t,"].dateTo"),d==null?void 0:d.date_upto)}},V+1)})}),e.jsx(q,{isDynamic:!0,type:"date",name:"floorFromDB.".concat(t,".dateTo"),formik:s,disabled:((Xe=(Je=s==null?void 0:s.values)==null?void 0:Je.floorFromDB[t])==null?void 0:Xe.checkDateTo)=="1",max:(Pe=(Me=a==null?void 0:a.data)==null?void 0:Me.data)!=null&&Pe.application_date?(Ze=(He=a==null?void 0:a.data)==null?void 0:He.data)==null?void 0:Ze.application_date:""})]})]})]})]})},t+1)})})}}),((ta=(oa=a==null?void 0:a.data)==null?void 0:oa.data)==null?void 0:ta.assessment_type)!="Bifurcation"?e.jsx(A.Card,{className:"w-full",children:e.jsxs(A.CardBody,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Add Floor"}),e.jsx(A.Button,{size:"sm",onClick:()=>fe(!0),children:"Add Floor"})]}),e.jsx("div",{className:"border border-gray-300 w-full my-2"}),e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-sm",children:[e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"Floor No"}),e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"Usage Type"}),e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"Occupancy Type"}),e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"Construction Type"}),e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"Build Up Area"}),e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"Date From"}),e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"Date Upto"}),e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"Action"})]})}),e.jsx("tbody",{children:(ha=(ua=s==null?void 0:s.values)==null?void 0:ua.addFloor)==null?void 0:ha.map((r,b)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-xs font-semibold p-4 border border-slate-300",children:r==null?void 0:r.floorName}),e.jsx("td",{className:"text-xs font-semibold p-4 border border-slate-300",children:r==null?void 0:r.usagesTypeName}),e.jsx("td",{className:"text-xs font-semibold p-4 border border-slate-300",children:r==null?void 0:r.occupancyTypeName}),e.jsx("td",{className:"text-xs font-semibold p-4 border border-slate-300",children:r==null?void 0:r.constructionTypeName}),e.jsx("td",{className:"text-xs font-semibold p-4 border border-slate-300",children:r==null?void 0:r.builtUpArea}),e.jsx("td",{className:"text-xs font-semibold p-4 border border-slate-300",children:r==null?void 0:r.dateFrom}),e.jsx("td",{className:"text-xs font-semibold p-4 border border-slate-300",children:r==null?void 0:r.dateTo}),e.jsx("td",{className:"text-xs font-semibold p-4 border border-slate-300",children:e.jsx("button",{onClick:()=>{var N,F;s.setFieldValue("addFloor",(F=(N=s==null?void 0:s.values)==null?void 0:N.addFloor)==null?void 0:F.filter((d,t)=>t!==b))},type:"button",className:"text-xs font-semibold p-1 border border-slate-300 rounded-md bg-red-600 text-white",children:"Remove"})})]},b))})]})})]})}):null]}):null,e.jsx("div",{className:"border border-gray-300 w-full my-5"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 mt-4",children:e.jsx(A.Card,{className:"w-full",children:e.jsxs(A.CardBody,{children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("div",{children:e.jsx("div",{className:"flex justify-start items-center gap-2 mb-1",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Remark"})})})}),e.jsx(q,{name:"remark",formik:s,placeholder:"Remark"})]})})}),e.jsx("div",{className:"border border-gray-300 w-full mt-5"}),e.jsxs("div",{className:"flex justify-center items-center py-5 gap-2",children:[e.jsx(A.Button,{size:"sm",type:"submit",className:"bg-red-500 text-white px-4 py-2 rounded-md mt-4",onClick:()=>es("BACKWARD"),children:((xa=(pa=y==null?void 0:y.user)==null?void 0:pa.roleWithId[0])==null?void 0:xa.role_id)==7?e.jsx("small",{children:" Back To Agency Engineer"}):((ja=(ya=y==null?void 0:y.user)==null?void 0:ya.roleWithId[0])==null?void 0:ja.role_id)==5?e.jsx("small",{children:"Back To Lipik"}):e.jsx("small",{children:"Backward"})}),((ga=(ba=(_a=we==null?void 0:we.data)==null?void 0:_a.data)==null?void 0:ba.permissions)==null?void 0:ga.can_forward)&&e.jsx(A.Button,{size:"sm",type:"submit",onClick:()=>es("FORWARD"),className:"bg-blue-500 text-white px-4 py-2 rounded-md mt-4 ",children:e.jsx("small",{children:"Save & Next"})})]})]})]})]})}export{ol as default};
