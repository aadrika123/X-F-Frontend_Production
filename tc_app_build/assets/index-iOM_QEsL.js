import{d as V,f as F,Q as U,j as e,c as $,I as Y}from"./index-dL_EjbSt.js";import{d as L,u as G,e as W}from"./router-5yjtezO8.js";import{r as x}from"./tailwind-6U-kYQAu.js";import{P as q}from"./index-vQju75AN.js";import"./module-fKnwz8NQ.js";import{u as Q}from"./formik.esm-BnzrXcQN.js";import{c as H,a as J}from"./index.esm-uHa2PMRf.js";import{F as K}from"./FormProvider-YtxP4ZK3.js";import{T as X}from"./TextField-dPnkdtDO.js";import"./index-iFVn5AxS.js";import{h as Z}from"./moment-UBOc2Xni.js";import{M as w}from"./MyPDFViewer-PRql9kwq.js";import"./reactQuery-QTVGT_ni.js";import"./axios-lPgvryBG.js";import"./reactIcons-ElHvrKTF.js";import"./headlessui-iZReL1Rn.js";import"./customInputValidation-jhKsg103.js";/* empty css              */import"./reactPdfViewerCore-_DhfwgKt.js";import"./reactPdfViewerDefaultLayout-2IVdmRVg.js";const D=H().shape({mobileNo:J().required("Mobile No is required").min(10).max(10)});function ee({open:s,setOpen:o,wtrDetail:d}){var z,I,T,E,B,t,l,i,m,h,j,g,u,p,y,N,b,f,v,C,a,_,k,M,O,P;const r=()=>o(!s),c=V({}),n=Q({enableReinitialize:!0,initialValues:{consumerId:(I=(z=d==null?void 0:d.data)==null?void 0:z.data)==null?void 0:I.id,property_no:((E=(T=d==null?void 0:d.data)==null?void 0:T.data)==null?void 0:E.folio_no)||"N/A",consumer_no:((t=(B=d==null?void 0:d.data)==null?void 0:B.data)==null?void 0:t.consumer_no)||"N/A",applicant_name:((i=(l=d==null?void 0:d.data)==null?void 0:l.data)==null?void 0:i.applicant_name)||"N/A",guardian_name:((h=(m=d==null?void 0:d.data)==null?void 0:m.data)==null?void 0:h.guardian_name)||"N/A",mobileNo:((g=(j=d==null?void 0:d.data)==null?void 0:j.data)==null?void 0:g.mobile_no)||"N/A",email:((p=(u=d==null?void 0:d.data)==null?void 0:u.data)==null?void 0:p.email)||"N/A",dtc_code:((N=(y=d==null?void 0:d.data)==null?void 0:y.data)==null?void 0:N.dtc_code)||"N/A",zoneId:((f=(b=d==null?void 0:d.data)==null?void 0:b.data)==null?void 0:f.zone_mstr_id)||"N/A",address:((C=(v=d==null?void 0:d.data)==null?void 0:v.data)==null?void 0:C.address)||"N/A",landmark:((_=(a=d==null?void 0:d.data)==null?void 0:a.data)==null?void 0:_.landmark)||"N/A",wardId:((M=(k=d==null?void 0:d.data)==null?void 0:k.data)==null?void 0:M.ward_mstr_id)||0,ownerId:((P=(O=d==null?void 0:d.data)==null?void 0:O.data)==null?void 0:P.ownerId)||""},validationSchema:D,onSubmit:async S=>{var R;try{const{data:A}=await c.mutateAsync({api:(R=F)==null?void 0:R.updateMobileApi,data:S});A!=null&&A.status&&(U.success(A==null?void 0:A.message),d==null||d.refetch(),r())}catch(A){U.error(A.message)}}});return e.jsxs(K,{formik:n,children:[s&&e.jsx("div",{onClick:r,className:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40"}),e.jsx("div",{id:"authentication-modal",tabIndex:-1,"aria-hidden":"true",className:"".concat(s?"flex":"hidden"," overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"),children:e.jsx("div",{className:"relative p-4 w-full max-w-md max-h-full",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Update Details"}),e.jsxs("button",{onClick:r,type:"button",className:"end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"authentication-modal",children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),e.jsxs("div",{className:"p-4 md:p-5",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsx("div",{children:e.jsx(X,{inputValidation:["mobile","number"],name:"mobileNo",label:"Mobile No",formik:n,placeholder:"Enter Mobile No"})})}),e.jsxs("div",{className:"flex items-center justify-end mt-4 gap-5",children:[e.jsx(x.Button,{type:"button",size:"sm",variant:"text",color:"red",onClick:r,className:"mr-1 bg-gray-300",children:e.jsx("span",{children:"Cancel"})}),e.jsx(x.Button,{type:"submit",size:"sm",loading:c.isLoading,disabled:c.isLoading,children:e.jsx("span",{children:"Update"})})]})]})]})})})]})}function se({wtrDetail:s,setOpen:o,open:d}){var r,c,n,z,I,T,E,B,t,l,i,m,h,j,g,u,p,y,N,b,f,v,C,a,_,k,M,O,P,S;return e.jsxs("div",{className:"p-4",children:[e.jsxs(x.Card,{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:[e.jsx("h1",{className:"text-sm font-semibold text-gray-100",children:"Basic Details"}),e.jsx("div",{children:e.jsx(x.Button,{size:"sm",onClick:()=>o(!0),children:e.jsx("small",{children:"Edit Mobile No"})})})]}),e.jsx(x.CardBody,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 items-center",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Property No :"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs  text-gray-900",children:((c=(r=s==null?void 0:s.data)==null?void 0:r.data)==null?void 0:c.folio_no)||"--"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Consumer No :"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:(z=(n=s==null?void 0:s.data)==null?void 0:n.data)==null?void 0:z.consumer_no}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Tap Size:"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:((T=(I=s==null?void 0:s.data)==null?void 0:I.data)==null?void 0:T.tab_size)||"--"}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Cycle :"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:e.jsx("h1",{className:"text-xs  text-gray-900",children:((B=(E=s==null?void 0:s.data)==null?void 0:E.data)==null?void 0:B.cycle)||"--"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Category :"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:e.jsx("h1",{className:"text-xs  text-gray-900",children:((l=(t=s==null?void 0:s.data)==null?void 0:t.data)==null?void 0:l.category)||"--"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Property Type :"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:e.jsx("h1",{className:"text-xs  text-gray-900",children:(m=(i=s==null?void 0:s.data)==null?void 0:i.data)==null?void 0:m.property_type})})]})})]}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs(x.Card,{className:"w-full",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-sm font-semibold text-gray-100",children:"Property Address & Details"})}),e.jsx(x.CardBody,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 items-center",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Address :"})}),e.jsx("div",{className:"w-42 ",children:e.jsx("h1",{className:"text-xs  text-gray-900 truncate",children:((j=(h=s==null?void 0:s.data)==null?void 0:h.data)==null?void 0:j.address)||"--"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"zone:"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:((u=(g=s==null?void 0:s.data)==null?void 0:g.data)==null?void 0:u.zone_name)||"--"}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Ward No:"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:((y=(p=s==null?void 0:s.data)==null?void 0:p.data)==null?void 0:y.ward_number)||"--"}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Cycle :"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:e.jsx("h1",{className:"text-xs  text-gray-900",children:((b=(N=s==null?void 0:s.data)==null?void 0:N.data)==null?void 0:b.cycle)||"--"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Land Mark :"})}),e.jsx("div",{className:"w-44 text-xs  text-gray-900",children:e.jsx("h1",{className:"text-xs  text-gray-900 truncate",children:((v=(f=s==null?void 0:s.data)==null?void 0:f.data)==null?void 0:v.landmark)||"--"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Property Type :"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:e.jsx("h1",{className:"text-xs  text-gray-900",children:(a=(C=s==null?void 0:s.data)==null?void 0:C.data)==null?void 0:a.property_type})})]})})]}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs(x.Card,{className:"w-full",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-sm font-semibold text-gray-100",children:"Owner Details"})}),e.jsx(x.CardBody,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 items-center",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Owner Name :"})}),e.jsx("div",{className:"w-42 ",children:e.jsx("h1",{className:"text-xs  text-gray-900 truncate",children:((k=(_=s==null?void 0:s.data)==null?void 0:_.data)==null?void 0:k.applicant_name)||"--"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Mobile No:"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:((O=(M=s==null?void 0:s.data)==null?void 0:M.data)==null?void 0:O.mobile_no)||"--"}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Email:"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:((S=(P=s==null?void 0:s.data)==null?void 0:P.data)==null?void 0:S.email)||"--"})]})})]})]})}function de({open:s,setOpen:o,url:d,ext:r,title:c}){const n=()=>o(!s);return e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{onClick:n,className:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40"}),e.jsx("div",{id:"authentication-modal",tabIndex:-1,"aria-hidden":"true",className:"".concat(s?"flex":"hidden"," overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"),children:e.jsx("div",{className:"relative p-4 w-full max-w-md max-h-full ",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700 h-[500px]",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 md:p-5 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:c}),e.jsxs("button",{onClick:n,type:"button",className:"end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"authentication-modal",children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),r==="pdf"?e.jsx(w,{fileUrl:d}):e.jsx("img",{src:d,alt:"Document",className:"w-full h-full",loading:"lazy"}),e.jsx("div",{className:"p-4 md:p-5",children:e.jsx("div",{className:"flex items-center justify-end mt-4 gap-5",children:e.jsx(x.Button,{type:"button",size:"sm",variant:"text",color:"red",onClick:n,className:"mr-1 bg-gray-300",children:e.jsx("span",{children:"Close"})})})})]})})})]})}function ae({wtrDetail:s,setOpen:o,open:d,id:r}){var l,i,m,h,j,g,u,p,y,N,b,f,v,C;const[c,n]=L.useState(!1),[z,I]=L.useState(""),[T,E]=L.useState(""),B=G(),t=$({api:F.meterList,config:{consumerId:r},options:{enabled:!!r}});return e.jsxs("div",{className:"p-4",children:[e.jsx(de,{open:c,setOpen:n,ext:z,url:T,title:"Meter Document"}),e.jsxs(x.Card,{className:"w-full",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-sm font-semibold text-gray-100",children:"Basic Details"})}),e.jsx(x.CardBody,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 items-center",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Consumer name :"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:(i=(l=s==null?void 0:s.data)==null?void 0:l.data)==null?void 0:i.applicant_name}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Consumer No :"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:(h=(m=s==null?void 0:s.data)==null?void 0:m.data)==null?void 0:h.consumer_no}),((g=(j=s==null?void 0:s.data)==null?void 0:j.data)==null?void 0:g.connection_type)==1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Meter Reading:"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:e.jsx("h1",{className:"text-xs  text-gray-900",children:((p=(u=s==null?void 0:s.data)==null?void 0:u.data)==null?void 0:p.meter_reading)||"--"})})]}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Connection Type:"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:e.jsx("h1",{className:"text-xs  text-gray-900",children:((N=(y=s==null?void 0:s.data)==null?void 0:y.data)==null?void 0:N.connection_type)==1?"Meter":"Fixed"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xs font-semibold text-gray-900",children:"Apply Date :"})}),e.jsx("div",{className:"text-xs  text-gray-900",children:e.jsx("h1",{className:"text-xs  text-gray-900",children:((f=(b=s==null?void 0:s.data)==null?void 0:b.data)==null?void 0:f.application_apply_date)||"--"})})]})})]}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsxs(x.Card,{className:"w-full",children:[e.jsx("div",{className:"flex justify-between items-center px-5 bg-blue-gray-400 py-2 rounded-tl-lg rounded-tr-lg",children:e.jsx("h1",{className:"text-sm font-semibold text-gray-100",children:"Consumer meter list"})}),e.jsx(x.CardBody,{children:e.jsx("div",{className:"relative overflow-x-auto  sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-xs text-left  border-slate-400 border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"# Sno."}),e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"CONNECTION TYPE"}),e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"METER NO"}),e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"INITIAL METER READING"}),e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"METER CONNECTION DATE"}),e.jsx("th",{className:"text-xs font-semibold p-4 border border-slate-300",children:"Document"})]})}),e.jsx("tbody",{children:(C=(v=t==null?void 0:t.data)==null?void 0:v.data)==null?void 0:C.map((a,_)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-xs p-4 border border-slate-300",children:_+1}),e.jsx("td",{className:"text-xs p-4 border border-slate-300",children:a==null?void 0:a.meter_connection_type}),e.jsx("td",{className:"text-xs p-4 border border-slate-300",children:(a==null?void 0:a.meter_no)!=""?a==null?void 0:a.meter_no:"--"}),e.jsx("td",{className:"text-xs p-4 border border-slate-300",children:(a==null?void 0:a.initial_reading)!=""?a==null?void 0:a.initial_reading:"--"}),e.jsx("td",{className:"text-xs p-4 border border-slate-300",children:(a==null?void 0:a.connection_date)!=""?Z(a==null?void 0:a.connection_date).format("DD-MM-YYYY"):"--"}),e.jsx("td",{className:"text-xs p-4 border border-slate-300",children:e.jsx("button",{className:"text-blue-500",onClick:()=>{var k,M;I((M=(k=a==null?void 0:a.doc_path)==null?void 0:k.split("."))==null?void 0:M.pop()),E(a==null?void 0:a.doc_path),n(!0)},children:"View"})})]},_))})]})})})]}),e.jsx("div",{className:"my-3 border-b-2"}),e.jsx("div",{className:"flex justify-center",children:e.jsx(x.Button,{color:"blue",size:"sm",onClick:()=>B("/amc-app/water/update-meters/".concat(r)),children:"Update Connection Type"})})]})}function _e(){const[s,o]=L.useState("consumer"),[d,r]=L.useState(!1),{id:c}=W(),n=$({api:F.waterGetDetails,config:{applicationId:c},options:{enabled:!!c}});return n!=null&&n.isLoading?e.jsx(Y,{}):e.jsxs(q,{title:"Consumer Details",children:[e.jsx(ee,{open:d,setOpen:r,wtrDetail:n}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("button",{onClick:()=>o("consumer"),className:" rounded-md font-bold text-xs px-3 py-2 ".concat(s==="consumer"?"bg-blue-gray-400":"bg-blue-gray-200"),children:"Consumer Details"}),e.jsx("button",{onClick:()=>o("meter"),className:" rounded-md font-bold text-xs px-3 py-2 ".concat(s==="meter"?"bg-blue-gray-400":"bg-blue-gray-200"),children:"Meter Details"})]})}),{consumer:e.jsx(se,{wtrDetail:n,setOpen:r,open:d}),meter:e.jsx(ae,{wtrDetail:n,setOpen:r,open:d,id:c})}[s]]})}export{_e as default};
