import{c as F,b as I,p as S,j as s}from"./index-JPdk8MYx.js";import{e as H}from"./router-vSHQYlWC.js";import{I as C}from"./index.esm-ad4jnpi1.js";import{u as _}from"./formik.esm-feHG9Gj_.js";import{c as Z,a as A}from"./index.esm-YegZWto1.js";import{r as o}from"./tailwind-nPCoKmcy.js";import{U as D,P as $}from"./index-ZOEHJXjh.js";import{F as k}from"./FormProvider-hakOsLcM.js";import{T as E}from"./TextField-pTzzJrTl.js";import{L}from"./LoaderButton-MRpyEB_5.js";import{S as i}from"./SelectField-HeY0cYhO.js";import"./TranslateField-ZxvkbHLJ.js";import{S as O}from"./index-SlmWC0sk.js";import"./reactQuery-xwoMMF6K.js";import"./axios-lPgvryBG.js";import"./reactIcons-jqXmw8S_.js";import"./headlessui-kWR29u24.js";import"./customInputValidation-jhKsg103.js";import"./ArrowRightIcon-FriVY7EG.js";const c=[{id:1,label:"Old Property No",value:"propertyNo"},{id:2,label:"Holding No",value:"holdingNo"},{id:3,label:"Mobile",value:"mobileNo"},{id:4,label:"Owner Name",value:"ownerName"}],R=[{id:1,label:"Zone A-East",value:"1"},{id:2,label:"Zone B-West",value:"2"},{id:3,label:"Zone C-North",value:"3"},{id:4,label:"Zone D-South",value:"4"}],W=Z().shape({filteredBy:A().required("Filter By is required")});function Ne(){var h,b,j,f,y,N,m,g,P,v,w,u,z;const l=H(),r=F();D("Search Holding");const{data:a,isPending:M,isLoading:B,isError:T,error:q,refetch:U,isRefetching:G,isFetching:x,isFetched:J,isPreviousData:K}=I({api:S.getFilterPropDetails,config:r==null?void 0:r.searchProperty,value:[(h=r==null?void 0:r.searchProperty)==null?void 0:h.filteredBy,(b=r==null?void 0:r.searchProperty)==null?void 0:b.parameter,(j=r==null?void 0:r.searchProperty)==null?void 0:j.zoneId,(f=r==null?void 0:r.searchProperty)==null?void 0:f.wardId,(y=r==null?void 0:r.searchProperty)==null?void 0:y.page,(N=r==null?void 0:r.searchProperty)==null?void 0:N.perPage],options:{enabled:!!((m=r==null?void 0:r.searchProperty)!=null&&m.filteredBy)}}),d=_({enableReinitialize:!0,initialValues:r==null?void 0:r.searchProperty,validationSchema:W,onSubmit:async e=>{r==null||r.setSearchProperty({...r==null?void 0:r.searchProperty,filteredBy:e==null?void 0:e.filteredBy,parameter:e==null?void 0:e.parameter,zoneId:e==null?void 0:e.zoneId,wardId:e!=null&&e.zoneId?e==null?void 0:e.wardId:""})}}),{values:n}=d,{data:t,isPending:Q,isError:X,error:Y,isLoading:p}=I({api:S.getWardByZone,config:{zoneId:n==null?void 0:n.zoneId},value:[n==null?void 0:n.zoneId],options:{enabled:!!(n!=null&&n.zoneId)}});return s.jsx($,{title:"Search Holding",children:s.jsx("div",{className:"px-4 py-4 flex-1",children:s.jsxs(k,{formik:d,children:[s.jsx(o.Card,{className:"w-full",children:s.jsxs(o.CardBody,{children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-xs font-semibold",children:"Search Holding"}),s.jsxs("div",{className:"items-center flex justify-start px-2 py-1 border rounded-lg gap-1 cursor-pointer",onClick:()=>{r==null||r.setSearchProperty({filteredBy:"",parameter:"",zoneId:"",wardId:"",page:1,perPage:10}),d==null||d.resetForm()},children:[s.jsx(C,{className:"text-blue-600",size:"1.2rem"}),s.jsx("small",{className:"text-blue-600",children:"Reset"})]})]}),s.jsx("div",{className:"my-4 border-b-2"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(i,{label:"Filter By",name:"filteredBy",formik:d,children:[s.jsx("option",{value:"",children:"select"}),c==null?void 0:c.map(e=>s.jsx("option",{value:e==null?void 0:e.value,children:e==null?void 0:e.label},e==null?void 0:e.id))]}),s.jsxs(i,{label:"Zone",name:"zoneId",formik:d,children:[s.jsx("option",{value:"",children:"select"}),R.map(e=>s.jsx("option",{value:e==null?void 0:e.value,children:e==null?void 0:e.label},e==null?void 0:e.id))]}),s.jsxs("div",{children:[s.jsxs(i,{label:"Ward",formik:d,name:"wardId",disabled:p,children:[s.jsx("option",{value:"",children:"select"}),(g=t==null?void 0:t.data)==null?void 0:g.map(e=>s.jsx("option",{value:e==null?void 0:e.id,children:e==null?void 0:e.ward_name},e==null?void 0:e.id))]}),s.jsx("small",{className:"text-blue-500",children:p?"Please wait...":""})]}),s.jsx(E,{label:"Parameter",name:"parameter",type:"text",formik:d})]}),s.jsx("div",{className:"flex justify-center mt-2",children:s.jsx(L,{type:"submit",disabled:x,loading:B,children:"Search"})})]})}),x?s.jsx("div",{className:"text-center py-40 text-blue-600",children:"Please Wait...."}):s.jsx(s.Fragment,{children:((v=(P=a==null?void 0:a.data)==null?void 0:P.data)==null?void 0:v.length)>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"my-4 border-b-2"}),(u=(w=a==null?void 0:a.data)==null?void 0:w.data)==null?void 0:u.map(e=>s.jsx(o.Card,{className:"w-full mb-5",children:s.jsxs(o.CardBody,{children:[s.jsx("div",{className:"flex items-center justify-between -mt-1",children:s.jsx("div",{className:"flex items-center",children:s.jsx("h1",{className:"font-bold text-xs",children:"Details"})})}),s.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-xs font-semibold",children:"Holding No:"}),s.jsx("p",{className:"text-xs text-end",children:e==null?void 0:e.holding_no})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-xs font-semibold",children:"Property No:"}),s.jsx("p",{className:"text-xs text-end",children:e==null?void 0:e.property_no})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-xs font-semibold",children:"Zone:"}),s.jsx("p",{className:"text-xs text-end",children:e==null?void 0:e.zone_name})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-xs font-semibold",children:"Address:"}),s.jsx("p",{className:"text-xs text-end truncate w-60",children:e==null?void 0:e.prop_address})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-xs font-semibold",children:"Mobile No:"}),s.jsx("p",{className:"text-xs text-end",children:e==null?void 0:e.mobile_no})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-xs font-semibold",children:"Owner Name:"}),s.jsx("p",{className:"text-xs text-end truncate w-60",children:e==null?void 0:e.owner_name})]}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h1",{className:"text-xs font-semibold",children:"Payment Status:"}),s.jsx("p",{className:"text-xs font-semibold ".concat((e==null?void 0:e.paid_status)==1?"text-green-500":"text-red-500"),children:(e==null?void 0:e.paid_status)===1?"Paid":"Pending"})]}),s.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),s.jsxs("div",{className:"flex items-center justify-around mt-4 mb-4 gap-6",children:[s.jsx("div",{onClick:()=>l("/amc-app/property/pro-basic-details/".concat(e==null?void 0:e.id)),className:"text-xs font-bold text-blue-600",children:"Basic Details"}),s.jsx("div",{onClick:()=>l("/amc-app/property/demand-details/".concat(e==null?void 0:e.id)),className:"text-xs font-bold text-blue-600",children:"Demand Details"}),s.jsx("div",{onClick:()=>l("/amc-app/property/payment-history/".concat(e==null?void 0:e.id)),className:"text-xs font-bold text-blue-600",children:"Payment History"})]}),s.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600 mb-3"}),s.jsx("div",{className:"flex items-center justify-center mt-4 gap-2",children:s.jsx(o.Button,{variant:"filled",size:"sm",className:"px-4 py-1.5 capitalize text-xs bg-[#60a5fa] text-white",onClick:()=>l("/amc-app/property/add-tc-visit?id=".concat(e==null?void 0:e.id)),children:"Add Field Visit"})})]})},e==null?void 0:e.id)),s.jsx("div",{className:"my-4 border-b-2"}),s.jsx(O,{active:r==null?void 0:r.searchProperty,setActive:r==null?void 0:r.setSearchProperty,noOfPage:(z=a==null?void 0:a.data)==null?void 0:z.last_page})]}):s.jsx("div",{className:"flex items-center justify-center py-52",children:s.jsx(o.Typography,{color:"gray",className:"text-center text-xs",children:"No Record Found!"})})})]})})})}export{Ne as default};
