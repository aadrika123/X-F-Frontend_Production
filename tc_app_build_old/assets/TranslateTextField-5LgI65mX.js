import{j as p}from"./index-69AkISz-.js";import{g as D}from"./formik.esm-feHG9Gj_.js";import{r as i}from"./router-vSHQYlWC.js";import{$ as ct}from"./TranslateField-WhUfGY_x.js";import{c as lt}from"./customInputValidation-jhKsg103.js";function dt(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function ut(s){return s?typeof s.selectionStart=="number"&&typeof s.selectionEnd=="number"?{start:s.selectionStart,end:s.selectionEnd}:{start:0,end:0}:{start:0,end:0}}function pt(s,o){s&&(s.selectionStart?(s.focus(),s.setSelectionRange(o,o)):s.focus())}const m={KEY_RETURN:"Enter",KEY_ENTER:"Enter",KEY_TAB:"Tab",KEY_SPACE:" "},M="https://xlit-api.ai4bharat.org/",ft=async(s,o)=>{const{showCurrentWordAsLastSuggestion:r,lang:u}=o||{numOptions:5,showCurrentWordAsLastSuggestion:!0,lang:"hi"},d={method:"GET"};try{const l=await(await fetch(M+"tl/".concat(u,"/").concat(s==="."||s===".."?" "+s.replace(".","%2E"):encodeURIComponent(s).replace(".","%2E")),d)).json();return console.log("library data",l),l&&l.result.length>0?r?[...l.result,s]:l.result:r?[s]:[]}catch(f){return console.error("There was an error with transliteration",f),[]}},gt=async()=>{if(sessionStorage.getItem("indic_transliterate__supported_languages"))return JSON.parse(sessionStorage.getItem("indic_transliterate__supported_languages")||"");{const s="".concat(M,"languages");new Headers().append("Content-Type","application/json");const r={method:"GET"};try{const d=await(await fetch(s,r)).json();return sessionStorage.setItem("indic_transliterate__supported_languages",JSON.stringify(d)),d}catch(u){return console.error("There was an error with transliteration",u),[]}}},ht="ArrowUp",$t="ArrowDown",bt="Escape",xt=10,St=100,wt=({renderComponent:s=c=>p.jsx("input",{...c}),lang:o="hi",offsetX:r=0,offsetY:u=10,onChange:d,onChangeText:f,onBlur:l,value:b,onKeyDown:h,containerClassName:P="",containerStyles:z={},activeItemStyles:Et={},maxOptions:I=5,hideSuggestionBoxOnMobileDevices:O=!1,hideSuggestionBoxBreakpoint:C=450,triggerKeys:B=[m.KEY_SPACE,m.KEY_ENTER,m.KEY_RETURN,m.KEY_TAB],insertCurrentSelectionOnBlur:F=!0,showCurrentWordAsLastSuggestion:N=!0,enabled:H=!0,...U})=>{const[c,R]=i.useState([]),[q,G]=i.useState(0),[V,J]=i.useState(0),[$,x]=i.useState(0),[v,X]=i.useState(-1),[k,Q]=i.useState(-1),S=i.useRef(null),[j,A]=i.useState({width:0,height:0}),[Z,tt]=i.useState("ltr"),[w,L]=i.useState(null),_=i.useMemo(()=>O?j.width>C:!0,[j,C,O]),E=()=>{x(0),R([])},T=(t,e=" ")=>{var n;const a=b,g=a.substring(0,v)+c[t]+" "+a.substring(k+1,a.length);setTimeout(()=>{pt(S.current,e==="Enter"?v+c[t].length:v+c[t].length+1)},1);const y={target:{value:g}};return f(g),d&&d(y),E(),(n=S.current)===null||n===void 0?void 0:n.focus()},et=async t=>{if(!_)return;const e=N?I-1:I,n=await ft(t,{numOptions:e,showCurrentWordAsLastSuggestion:N,lang:o});R(n!=null?n:[])},nt=async t=>{const e=await gt(),n=e==null?void 0:e.find(g=>g.LangCode===t);var a;return[(a=n==null?void 0:n.Direction)!==null&&a!==void 0?a:"ltr",n==null?void 0:n.GoogleFont,n==null?void 0:n.FallbackFont]},st=t=>{const e=t.currentTarget.value;if(d&&d(t),f(e),!_)return;const n=ut(t.target).end,a=S.current;if(!a)return;const g=ct(a,n),y=e.lastIndexOf(" ",n-1)<e.lastIndexOf("\n",n-1)?e.lastIndexOf("\n",n-1):e.lastIndexOf(" ",n-1);X(y+1),Q(n-1);const K=e.slice(y+1,n);if(K&&H){et(K);const W=a.getBoundingClientRect(),at=Math.min(g.left,W.width-St/2),it=Math.min(g.top+xt,W.height);J(it),G(at)}else E()},rt=t=>{if(c.length>0)if(B.includes(t.key))t.preventDefault(),T($,t.key);else switch(t.key){case bt:t.preventDefault(),E();break;case ht:t.preventDefault(),x((c.length+$-1)%c.length);break;case $t:t.preventDefault(),x(($+1)%c.length);break;default:h&&h(t);break}else h&&h(t)},ot=t=>{dt()||(F&&c[$]?T($):E()),l&&l(t)},Y=()=>{const t=window.innerWidth,e=window.innerHeight;A({width:t,height:e})};return i.useEffect(()=>{window.addEventListener("resize",Y);const t=window.innerWidth,e=window.innerHeight;return A({width:t,height:e}),()=>{window.removeEventListener("resize",Y)}},[]),i.useEffect(()=>{nt(o).then(([t,e,n])=>{if(tt(t),e){if(!document.getElementById("font-".concat(e))){const a=document.createElement("link");a.id="font-".concat(e),a.href="https://fonts.googleapis.com/css?family=".concat(e),a.rel="stylesheet",document.head.appendChild(a)}L("".concat(e,", ").concat(n!=null?n:"sans-serif"))}else L(null)})},[o]),p.jsxs("div",{style:{...z,position:"relative"},className:P,children:[s({onChange:st,onKeyDown:rt,onBlur:ot,ref:S,value:b,"data-testid":"rt-input-component",lang:o,style:{direction:Z,...w&&{fontFamily:w}},...U}),_&&c.length>0&&p.jsx("ul",{style:{backgroundClip:"padding-box",backgroundColor:"#fff",border:"1px solid rgba(0, 0, 0, 0.15)",boxShadow:"0 6px 12px rgba(0, 0, 0, 0.175)",display:"block",fontSize:"14px",listStyle:"none",padding:"1px",textAlign:"left",zIndex:2e4,left:"".concat(q+r,"px"),top:"".concat(V+u,"px"),position:"absolute",width:"auto",...w&&{fontFamily:w}},"data-testid":"rt-suggestions-list",lang:o,children:Array.from(new Set(c)).map((t,e)=>p.jsx("li",{style:e===$?{cursor:"pointer",padding:"10px",minWidth:"100px",backgroundColor:"#65c3d7",color:"#fff"}:{cursor:"pointer",padding:"10px",minWidth:"100px",backgroundColor:"#fff"},onMouseEnter:()=>{x(e)},onClick:()=>T(e),children:t},t))})]})};function It({label:s,name:o,formik:r,isDynamic:u,isRequiredLabel:d=!1,className:f,inputValidation:l,...b}){return p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:o,className:"block text-gray-600 text-sm mb-1",children:s}),p.jsx(wt,{...b,name:o,className:"".concat(f," w-full leading-5 relative py-2 px-4 rounded text-gray-800 bg-white border border-gray-300 overflow-x-auto focus:outline-none focus:border-gray-400 focus:ring-0 darks:text-gray-300 darks:bg-gray-700 darks:border-gray-700 darks:focus:border-gray-600"),placeholder:s,onInput:h=>{l&&lt(h,l)}}),p.jsx("span",{className:"text-red-600  text-xs",children:u?D(r==null?void 0:r.touched,o)&&D(r==null?void 0:r.errors,o):(r==null?void 0:r.touched[o])&&(r==null?void 0:r.errors[o])})]})}export{It as T};
