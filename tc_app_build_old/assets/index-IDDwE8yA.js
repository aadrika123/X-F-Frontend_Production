import{a as N,u as g,b as f,p as y,j as e,r as i}from"./index-97iCPWLP.js";import{u as v}from"./formik.esm-R8Mvjfpr.js";import{c as u,a as P}from"./index.esm-sU9gufl_.js";import{U as w,P as S}from"./index-fOrkBWLW.js";import{F as B}from"./FormProvider-DGtSSwzC.js";import{T as H}from"./TextField-gZBGFbQd.js";import{L as F}from"./LoaderButton-7Kjle9HV.js";import{S as c}from"./SelectField-zEYhsvL7.js";import"./index-p4M61wA7.js";import{S as I}from"./index-E7BxovEf.js";import"./ArrowRightIcon-gFB2HtTz.js";const _=[{id:1,label:"Old Property No",value:"propertyNo"},{id:2,label:"Holding No",value:"holdingNo"},{id:3,label:"Mobile",value:"mobileNo"},{id:4,label:"Owner Name",value:"ownerName"}],z=[{id:1,label:"Zone A-East",value:"1"},{id:2,label:"Zone B-West",value:"2"},{id:3,label:"Zone C-North",value:"3"},{id:4,label:"Zone D-South",value:"4"}],C=u().shape({filteredBy:P().required("Filter By is required")});function V(){var m,p,x,h,b,j;const n=N(),s=g();w("Search Holding");const{data:a,isPending:Z,isLoading:d,isError:E,refetch:A,isRefetching:L,isFetching:$}=f({api:y.getFilterPropDetails,config:s==null?void 0:s.searchProperty,value:[s==null?void 0:s.searchProperty.filteredBy,s==null?void 0:s.searchProperty.parameter,s==null?void 0:s.searchProperty.zoneId,s==null?void 0:s.searchProperty.wardId,s==null?void 0:s.searchProperty.page,s==null?void 0:s.searchProperty.perPage],options:{enabled:!!(s!=null&&s.searchProperty.filteredBy)}}),t=v({enableReinitialize:!0,initialValues:s==null?void 0:s.searchProperty,validationSchema:C,onSubmit:async r=>{s==null||s.setSearchProperty({...s==null?void 0:s.searchProperty,filteredBy:r.filteredBy,parameter:r.parameter,zoneId:r.zoneId,wardId:r.wardId})}}),{values:l}=t,{data:o,isPending:k,isError:D,error:O,isLoading:R}=f({api:y.getWardByZone,config:{zoneId:l.zoneId},value:[l.zoneId],options:{enabled:!!l.zoneId}});return e.jsx(S,{title:"Search Holding",description:"Search Holding",name:"Search Holding",type:"Search Holding",children:e.jsx("div",{className:"px-4 py-4 flex-1",children:e.jsxs(B,{formik:t,children:[e.jsx(i.Card,{className:"w-full",children:e.jsxs(i.CardBody,{children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-sm font-semibold",children:"Search Holding"})}),e.jsx("div",{className:"my-4 border-b-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(c,{label:"Filter By",name:"filteredBy",formik:t,children:[e.jsx("option",{value:"",children:"select"}),_.map(r=>e.jsx("option",{value:r.value,children:r.label},r.id))]}),e.jsxs(c,{label:"Zone",name:"zoneId",formik:t,children:[e.jsx("option",{value:"",children:"select"}),z.map(r=>e.jsx("option",{value:r.value,children:r.label},r.id))]}),e.jsxs(c,{label:"select",formik:t,name:"wardId",children:[e.jsx("option",{value:"1",children:"select"}),(m=o==null?void 0:o.data)==null?void 0:m.map(r=>e.jsx("option",{value:r.id,children:r.ward_name},r.id))]}),e.jsx(H,{label:"Parameter",name:"parameter",type:"text",formik:t})]}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx(F,{type:"submit",disabled:d,loading:d,children:"Search"})})]})}),d?e.jsx("div",{className:"text-center py-52",children:"Loading..."}):e.jsx(e.Fragment,{children:((x=(p=a==null?void 0:a.data)==null?void 0:p.data)==null?void 0:x.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-4 border-b-2"}),(b=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:b.map(r=>e.jsx(i.Card,{className:"w-full mb-5",children:e.jsxs(i.CardBody,{children:[e.jsx("div",{className:"flex items-center justify-between -mt-1",children:e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"font-bold text-sm",children:"Details"})})}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Holding No:"}),e.jsx("p",{className:"text-sm text-end",children:r.holding_no})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Property No:"}),e.jsx("p",{className:"text-sm text-end",children:r.property_no})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Zone:"}),e.jsx("p",{className:"text-sm text-end",children:r.zone_name})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Address:"}),e.jsx("p",{className:"text-sm text-end truncate w-60",children:r.prop_address})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Mobile No:"}),e.jsx("p",{className:"text-sm text-end",children:r.mobile_no})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Owner Name:"}),e.jsx("p",{className:"text-sm text-end truncate w-60",children:r.owner_name})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Payment Status:"}),e.jsx("p",{className:"text-sm font-semibold ".concat(r.paid_status===1?"text-green-500":"text-red-500"),children:r.paid_status===1?"Paid":"Pending"})]}),e.jsx("div",{className:"my-2 border-b-2 bg-indigo-800 text-blue-gray-600"}),e.jsxs("div",{className:"flex items-center justify-around mt-4 -mb-1 gap-6",children:[e.jsx("div",{onClick:()=>n("/amc-app/property/pro-basic-details/".concat(r.id)),className:"text-xs font-bold text-blue-600",children:"Basic Details"}),e.jsx("div",{onClick:()=>n("/amc-app/property/demand-details/".concat(r.id)),className:"text-xs font-bold text-blue-600",children:"Demand Details"}),e.jsx("div",{onClick:()=>n("/amc-app/property/payment-history/".concat(r.id)),className:"text-xs font-bold text-blue-600",children:"Payment History"})]})]})},r.id)),e.jsx("div",{className:"my-4 border-b-2"}),e.jsx(I,{active:s==null?void 0:s.searchProperty,setActive:s==null?void 0:s.setSearchProperty,noOfPage:(j=a==null?void 0:a.data)==null?void 0:j.last_page})]}):e.jsx("div",{className:"text-center py-52",children:"No Record Found!"})})]})})})}export{V as default};
