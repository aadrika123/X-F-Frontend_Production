import{r as l,cM as E,j as t,az as Q,dR as U,dQ as X,dM as Y,L as Z,A as W,b as J}from"./index-af46def9.js";function $(e){const[f,u]=l.useState("hidden"),P=l.useMemo(()=>e.columns,[]),r=l.useMemo(()=>e.dataList,[e.dataList,e==null?void 0:e.totalCount]),[x,k]=l.useState(1),[D,N]=l.useState(!0),[j,y]=l.useState(!0),[I,H]=l.useState(e==null?void 0:e.perPage),[R,v]=l.useState();l.useEffect(()=>{k(1),v(0),H(e==null?void 0:e.perPage)},[e==null?void 0:e.totalCount]),l.useEffect(()=>{N(!0),y(!0);let a=(e==null?void 0:e.totalCount)/(e==null?void 0:e.perPage);(e==null?void 0:e.totalCount)%(e==null?void 0:e.perPage)!=0?F(parseInt(a)+1):F(parseInt(a)),n==x&&N(!1),(n==x||x==1)&&y(!1)},[e==null?void 0:e.totalCount]);const{getTableProps:L,getTableBodyProps:o,headerGroups:g,page:M,nextPage:S,previousPage:b,canNextPage:O,canPreviousPage:_,prepareRow:w,pageOptions:q,gotoPage:z,pageCount:G,setPageSize:F,state:T,rows:C,setGlobalFilter:A}=E.useTable({columns:P,data:r,initialState:{pageIndex:0}},E.useGlobalFilter,E.useSortBy,E.usePagination),{globalFilter:B,pageIndex:V,pageSize:n}=T,d=()=>{var s;const a=window.open("","_blank");a.document.write("<html><head><title>Print</title>"),a.document.write("<style>"),a.document.write("table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }"),a.document.write("th, td { border: 1px solid #ddd; padding: 4px; text-align: center; }"),a.document.write("th { background-color: #f2f2f2; }"),a.document.write("tr:nth-child(even) { background-color: #f2f2f2;; }"),a.document.write("</style></head><body>"),a.document.write("<table>"),a.document.write("<tr>"),(s=g[0])==null||s.headers.forEach(i=>{i.render("Header")!=="Action"&&i.render("Header")!=="Image"&&a.document.write("<th>"+i.render("Header")+"</th>")}),a.document.write("</tr>"),C.forEach((i,h)=>{var c;a.document.write("<tr>"),(c=i==null?void 0:i.cells)==null||c.forEach((m,K)=>{K==0?a.document.write("<td>"+(h+1)+"</td>"):m.column.render("Header")!=="Action"&&m.column.render("Header")!=="Image"&&a.document.write("<td>"+(i==null?void 0:i.original[m.column.id])+"</td>")}),a.document.write("</tr>")}),a.document.write("</table>"),a.document.write("</body></html>"),a.document.close(),a.print()};return t.jsxs(t.Fragment,{children:[(e==null?void 0:e.search)==!1?t.jsxs("div",{className:"absolute -mt-[6.5vh] right-[2vw]",children:[t.jsx("div",{className:"flex-initial ml-2",children:t.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>u(""),onMouseLeave:()=>u("hidden"),onClick:e.exportDataF,children:["Export",t.jsx("div",{className:f+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:t.jsx(Q,{})})]})}),t.jsx("div",{className:"flex-1",children:e.children})]}):t.jsxs("div",{className:"flex mb-2 pb-2",children:[t.jsx("div",{className:"flex-initial opacity-50",children:t.jsx(U,{filter:B,setFilter:A})}),t.jsx("div",{className:"flex-initial ml-2",children:t.jsxs("button",{className:"bg-sky-400 px-3 pr-3  shadow-lg rounded py-1 text-white hover:shadow-2xl hover:bg-green-600 text-center relative",onMouseEnter:()=>u(""),onMouseLeave:()=>u("hidden"),onClick:e.exportDataF,children:["Export",t.jsx("div",{className:f+" absolute h-full top-3 text-sm left-0 text-center animate-bounce",children:t.jsx(Q,{})})]})}),t.jsx("div",{className:"flex-1",children:e.children}),t.jsx("div",{className:"flex-1",children:e.children}),t.jsx("button",{onClick:d,className:"bg-red-500 hover:bg-red-700 text-white font-normal py-0 px-2 rounded-sm",children:"Export PDF"})]}),t.jsx("div",{className:"flex w-full",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"opacity-50",children:"Total Result : "}),t.jsx("span",{className:"font-semibold",children:e==null?void 0:e.totalCount})," "]})}),(e==null?void 0:e.feedback)!=null&&t.jsx("div",{children:t.jsxs("span",{className:"text-xs bg-gray-200 opacity-50 pr-2 pl-1 py-1 rounded-sm",children:[t.jsx(X,{className:"inline text-xs text-gray-400 mr-2"}),e.feedback]})}),t.jsx("div",{className:" py-2 overflow-x-auto bg-white",children:t.jsx("div",{className:"inline-block min-w-full rounded-lg overflow-hidden bg-white",children:t.jsxs("table",{...o,className:"min-w-full leading-normal",id:"printableArea",children:[t.jsx("thead",{className:"font-bold text-left text-sm bg-sky-50",children:g==null?void 0:g.map(a=>t.jsx("tr",{...a.getHeaderGroupProps(),children:a.headers.map(s=>t.jsxs("th",{...s.getHeaderProps(s.getSortByToggleProps()),className:(s==null?void 0:s.className)+" px-2 py-3 border-b border-gray-200 text-gray-800  text-left text-xs uppercase ",children:[s.render("Header"),t.jsx("span",{children:s.isSorted?s.isSortedDesc?"⬆️":"⬇️":""})]}))}))}),t.jsxs("tbody",{...o(),className:"text-sm",children:[C.map((a,s)=>(w(a),t.jsxs("tr",{...a.getRowProps(),className:"bg-white shadow-lg border-b border-gray-200",children:[t.jsx("td",{...a.cells[0].getCellProps(),className:"px-2 py-2 text-sm text-left",children:(e==null?void 0:e.startSerialNumber)+s}),a==null?void 0:a.cells.slice(1).map((i,h)=>t.jsx("td",{...i.getCellProps(),className:"px-2 py-2 text-sm text-left",children:i.render("Cell")}))]}))),t.jsx("tr",{children:t.jsx("td",{})})]})]})})})]})}const ee=e=>{const[f,u]=l.useState(50),[P,r]=l.useState(1),[x,k]=l.useState(0),[D,N]=l.useState(0),[j,y]=l.useState(0),[I,H]=l.useState(),[R,v]=l.useState(!1),[L,o]=l.useState(!1),[g,M]=l.useState([]),[S,b]=l.useState(!1),[O,_]=l.useState(1),w=()=>{o(!1),b(!0);const n=(P-1)*f+1;_(n),W.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:50,page:P},J()).then(d=>{var a,s,i,h,c;((a=d==null?void 0:d.data)==null?void 0:a.status)==!0?(e!=null&&e.getData&&(e==null||e.allData((s=d==null?void 0:d.data)==null?void 0:s.data)),M((c=(h=(i=d==null?void 0:d.data)==null?void 0:i.data)==null?void 0:h.data)==null?void 0:c.filter(m=>m.user_name=="Er.Pratik Pandav (Engineer)"||m.user_name=="Mayur Badwe (Engineer)"||m.user_name=="Vikash jain (Engineer)"||m.user_name=="Mahesh Sunil Thorat (Engineer)")),y(4),k(1),N(1),o(!1)):(o(!0),M([]))}).catch(d=>o(!0)).finally(()=>{b(!1),o(!1)})},q=()=>{r(x+1)},z=()=>{r(x-1)},G=n=>{let d=parseInt(j/n),a=parseInt(j%n);if(a==0){d<x&&r(d),u(n);return}if(a!=0){d+1<x&&r(d+1),u(n);return}u(n)},F=()=>{r(1)},T=()=>{r(D)},C=n=>{r(n)},A=n=>n==null?void 0:n.map((a,s)=>{var h;const i=(h=e==null?void 0:e.columns)==null?void 0:h.map((c,m)=>(c==null?void 0:c.Header)!="Action"&&{[c==null?void 0:c.Header]:c!=null&&c.accessor?a[c==null?void 0:c.accessor]:s+1});return Object.assign({},...i)}),B=()=>{b(!0),v(!1),W.post(e==null?void 0:e.api,{...e==null?void 0:e.requestBody,perPage:j},J()).then(n=>{var d,a,s;((d=n==null?void 0:n.data)==null?void 0:d.status)==!0&&(H(A((s=(a=n==null?void 0:n.data)==null?void 0:a.data)==null?void 0:s.data)),V()),b(!1)}).catch(n=>{b(!1)})},V=()=>{v(!0)};return l.useEffect(()=>{(e==null?void 0:e.requestBody)!=null&&(r(1),u(10),w())},[e==null?void 0:e.changeData]),l.useEffect(()=>{b(!0),w()},[P,f]),t.jsxs(t.Fragment,{children:[L&&t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[t.jsx("strong",{className:"font-bold",children:"Sorry! "}),t.jsx("span",{className:"block sm:inline",children:"Some error occured while fetching list. Please try again later."}),t.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]}),R&&t.jsx(Y,{data:I}),S&&t.jsx(Z,{}),!S&&(g==null?void 0:g.length)>0?t.jsx(t.Fragment,{children:t.jsx($,{search:e==null?void 0:e.search,currentPage:x,lastPage:D,goFirst:F,goLast:T,count1:j,columns:e==null?void 0:e.columns,dataList:g,exportStatus:!0,perPage:f,perPageC:G,totalCount:j,nextPage:q,prevPage:z,exportDataF:B,exportData:I,gotoPage:n=>C(n),startSerialNumber:O})}):t.jsx(t.Fragment,{children:!S&&t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 pl-4 pr-16 py-3 rounded relative text-center",role:"alert",children:[t.jsx("span",{className:"block sm:inline",children:"Oops! No data available."}),t.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3"})]})})]})};export{ee as default};
