import{H as g,ag as W,r,q as De,s as y,w as Ie,ac as f,b as Fe,j as e,ai as P,ad as Le,L as Z,V as _e,cb as We,ay as Ee,cc as U,cd as le,Q as _,f as Me,ce as Re,cf as $e,cg as qe,ch as Oe,bn as ee,ci as Be,cj as Te,aF as Ae}from"./index-fcf3fc3d.js";import{u as Pe}from"./useQuery-784b2a3f.js";import{E as Ue}from"./EmptyDetailsIllustration-8f993cc9.js";import{B as N,T as ae,a as H}from"./Tabs-aa175d28.js";import{T as re}from"./Typography-95c7eb16.js";import"./notfound1-b58e95b5.js";import"./react-is.production.min-4158daaa.js";import"./useTimeout-3b5c0cba.js";g.node,g.number.isRequired,g.number.isRequired;const He="/assets/ill-7e2029c8.svg",Ve="/assets/delete-85371ce6.svg",te={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"none"}};W.setAppElement("#modal");function Ge(a){r.useState(0);const[i,n]=r.useState(!1),[o,d]=r.useState(!1),[c,u]=r.useState(!1);r.useState([]);const[m,k]=r.useState(""),[ne,G]=r.useState(""),[j,J]=r.useState(null),[E,ie]=r.useState([]),[M,de]=r.useState(),[R,ce]=r.useState(),[$,ue]=r.useState([]);r.useState([]);const[v,S]=r.useState([]),[me,Q]=r.useState(""),[C,D]=r.useState([]),[I,F]=r.useState([]),[xe,z]=r.useState([]),[st,he]=r.useState([]),q=(t,s)=>{_.dismiss(),s=="delete"&&_.error(t),s=="update"&&_.info(t),s=="save"&&_.success(t)},be=De({workflowName:y().required("Enter Workflow Name").max(50,"Enter maximum 50 characters"),ulb:y().required("Select ulb"),module:y().required("Select module"),initiator:y().required("Select Initiator"),finisher:y().required("Select Finisher")}),l=Ie({initialValues:{workflowName:"",ulb:"",module:"",initiator:"",finisher:""},onSubmit:(t,s)=>{u(!0),we()},validationSchema:be});function fe(){n(!0)}function ge(t,s){document.getElementById("root").style.filter="blur(3px)",k(s),G(t),d(!0)}function O(){document.getElementById("root").style.filter="none",n(!1),l.resetForm(),u(!1)}function B(){document.getElementById("root").style.filter="none",d(!1)}const we=()=>{const t={ulbID:l.values.ulb,moduleID:l.values.module,workflowID:l.values.workflowName,initiator:l.values.initiator,finisher:l.values.finisher,candidates:l.values.candidateInputList};j!=null?f.put(`http://192.168.0.166/api/crud/ulb-workflow-masters/${j}`,t,x).then(function(s){u(!1),q("Worflow Update Successfully","update"),O(),A()}).catch(function(s){}).then(function(){}):f.post("http://192.168.0.166/api/crud/ulb-workflow-masters",t,x).then(function(s){u(!1),q("Worflow Saved Successfully","save"),A(),O()}).catch(function(s){}).then(function(){})},x=Fe(),T=(t=null)=>{document.getElementById("root").style.filter="blur(4px)",l.resetForm(),l.values.workflowName="",l.values.ulb="",l.values.module="",l.values.initiator="",l.values.finisher="",S([]),D([]),F([]),fe(),J(null),t!=null&&(J(t),f.get(`http://192.168.0.166/api/crud/ulb-workflow-masters/${t}`,x).then(function(s){l.values.workflowName=s.data[0].workflow_id,l.values.ulb=s.data[0].ulb_id,l.values.module=s.data[0].module_id,l.values.initiator=s.data[0].initiator,l.values.finisher=s.data[0].finisher;const h=s.data[0].candidate_id.map(p=>({id:p})),b=s.data[0].candidate_name.map(p=>({name:p})),w=h.map((p,Ce)=>({id:p.id,name:b[Ce].name}));S(w),D(w),F(w)}).catch(function(s){}).then(function(){})),f.get("http://192.168.0.166/api/all-workflows",x).then(function(s){ie(s.data)}).catch(function(s){}).then(function(){}),f.get("http://192.168.0.166/api/get-all-ulb",x).then(function(s){de(s.data)}).catch(function(s){}).then(function(){}),f.get("http://192.168.0.166/api/crud/module-masters/create",x).then(function(s){ce(s.data)}).catch(function(s){}).then(function(){}),f.get(Me+"/api/get-all-users",x).then(function(s){const h=s.data.filter(b=>b.user_name!=null).map(b=>({id:b.id,name:b.user_name}));ue({options:h})}).catch(function(s){}).then(function(){})},pe=()=>{f.delete(`http://192.168.0.166/api/crud/ulb-workflow-masters/${ne}`,x).then(function(t){u(!1),q(`${m} Worflow Deleted Successfully`,"delete"),B(),A(),k(null),G(null)}).catch(function(t){}).then(function(){})},je=t=>{const s=L.data.filter(h=>h.id==t);a.fun(s[0])},ve=[{Header:"#",Cell:({row:t})=>e.jsx("div",{children:t.index+1})},{Header:"Workflow Name",accessor:"workflow_name"},{Header:"Ulb",accessor:"ulb_name"},{Header:"Initiator",accessor:"initiator_name"},{Header:"Finisher",accessor:"finisher_name"},{Header:"Action",accessor:"id",Cell:({cell:t})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>T(t.row.values.id),className:"flex-initial bg-green-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-green-800 hover:text-white text-black flex items-center",children:[e.jsx(Re,{className:"inline"}),"Â Edit"]}),e.jsxs("button",{onClick:()=>ge(t.row.values.id,t.row.values.workflowName),className:"flex-initial bg-red-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-red-800 hover:text-white text-black items-center flex",children:[e.jsx(U,{className:"inline"}),"Delete"]}),e.jsxs("button",{onClick:()=>je(t.row.values.id),className:"flex-initial bg-sky-200 px-3 py-1 rounded-lg shadow-lg hover:shadow-xl hover:bg-sky-800 hover:text-white text-black items-center flex",children:[e.jsx($e,{className:"inline text-lg"}),"View"]})]})}],Ne=t=>{he(t.data)},{isLoading:K,data:L,isError:X,error:lt,refetch:A}=Pe("workflow-list",()=>f.get("http://192.168.0.166/api/crud/ulb-workflow-masters/create",x),{onSuccess:Ne});function ye(t,s){S([...v,s]),Q(""),D([...C,s]),F([...I,s]),z([...xe,s])}function ke(t,s){let h=v.indexOf(s),b=[...v];const w=b.filter(p=>{if(b.indexOf(p)!=h)return p});S(w),D(w),F(w),z(w)}const Y=t=>{if(t.preventDefault(),v==""){Q("Select candidate");return}const s=v.map(h=>h.id);l.values.candidateInputList=s,l.handleSubmit()},Se=t=>{};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>T(),className:"float-right bg-green-500 px-3 py-1 rounded-sm shadow-lg hover:shadow-xl hover:bg-green-800 hover:text-white text-white flex items-center",children:[e.jsx(P,{}),"Add"]}),e.jsx(Le,{position:"top-right",autoClose:2e3}),K&&e.jsx(Z,{}),X&&e.jsx(ErrorPage,{}),!K&&!X&&e.jsx(_e,{columns:ve,dataList:L==null?void 0:L.data,children:e.jsxs("button",{onClick:()=>T(),className:"float-right bg-green-500 px-3 py-1 rounded-sm shadow-lg hover:shadow-xl hover:bg-green-800 hover:text-white text-white flex items-center",children:[e.jsx(P,{}),"Add"]})}),e.jsx(W,{isOpen:i,onRequestClose:O,style:te,contentLabel:"Example Modal",children:e.jsxs("div",{className:"relative rounded-lg shadow-xl border-8 border-white z-50",children:[j==null&&e.jsxs("h1",{className:"text-center bg-white text-gray-800 border-t border-gray-400 text-lg font-semibold py-1",children:[e.jsx(P,{className:"inline text-3xl"})," Add Worflow"]}),j!=null&&e.jsxs("h1",{className:"text-center bg-white text-gray-800 border-t border-gray-400 text-lg font-semibold py-1 ",children:[e.jsx(We,{className:"inline text-xl"})," Update Worflow"]}),e.jsx("div",{className:`p-10 px-10 pb-32 ${j==null?"bg-green-400":"bg-gray-400"}   text-white`,style:{width:"60vw"},children:e.jsxs("form",{className:" md:w-full md:grid md:grid-cols-2 md:gap-x-8",onChange:Se,onSubmit:l.handleSubmit,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium ",children:"Select Workflow"}),e.jsxs("select",{...l.getFieldProps("workflowName"),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 shadow-lg cursor-pointer",children:[e.jsx("option",{value:"",disabled:!0,children:"== select =="}),E==null?void 0:E.map(t=>e.jsx("option",{value:t.id,children:t.workflow_name}))]}),e.jsx("span",{className:"text-red-600 absolute",children:l.touched.workflowName&&l.errors.workflowName?l.errors.workflowName:null})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Select ULB"}),e.jsxs("select",{...l.getFieldProps("ulb"),className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 shadow-lg cursor-pointer",children:[e.jsx("option",{value:"_",children:"== Select =="}),M==null?void 0:M.map(t=>e.jsx("option",{value:t.id,children:t.ulb_name}))]}),e.jsx("span",{className:"text-red-600 absolute",children:l.touched.ulb&&l.errors.ulb?l.errors.ulb:null})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Select Module"}),e.jsxs("select",{...l.getFieldProps("module"),className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 shadow-lg cursor-pointer",children:[e.jsx("option",{value:"_",children:"== Select =="}),R==null?void 0:R.map(t=>e.jsx("option",{value:t.id,children:t.module_name}))]}),e.jsx("span",{className:"text-red-600 absolute",children:l.touched.module&&l.errors.module?l.errors.module:null})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Select Canidates"}),e.jsx("div",{className:"bg-white text-black cursor-pointer rounded-lg shadow-lg",children:e.jsx(Ee,{options:$==null?void 0:$.options,selectedValues:v,onSelect:ye,onRemove:ke,displayValue:"name"})}),e.jsx("span",{className:"text-red-600",children:me})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Select Initiator"}),e.jsxs("select",{...l.getFieldProps("initiator"),className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 shadow-lg cursor-pointer",children:[e.jsx("option",{value:"_",children:"== Select =="}),C==null?void 0:C.map(t=>e.jsx("option",{value:t.id,children:t.name}))]}),e.jsx("span",{className:"text-red-600",children:l.touched.initiator&&l.errors.initiator?l.errors.initiator:null})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Select Finisher"}),e.jsxs("select",{...l.getFieldProps("finisher"),className:"h-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 shadow-lg cursor-pointer",children:[e.jsx("option",{value:"_",children:"== Select =="}),I==null?void 0:I.map(t=>e.jsx("option",{value:t.id,children:t.name}))]}),e.jsx("span",{className:"text-red-600",children:l.touched.finisher&&l.errors.finisher?l.errors.finisher:null})]}),e.jsx("div",{className:"text-left col-span-2 relative top-20",children:e.jsxs("div",{className:"col-span-2",children:[j==null&&!c&&e.jsx("button",{onClick:Y,type:"button",className:"text-white bg-green-700 border-2 border-white focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center hover:bg-green-400 hover:shadow-2xl",children:"Submit"}),j!=null&&!c&&e.jsx("button",{onClick:Y,type:"button",className:"text-white bg-blue-700 border-2 border-white focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center hover:bg-blue-500 hover:shadow-2xl",children:"Update"}),c&&e.jsx(Z,{})]})})]})}),e.jsx("img",{src:He,className:" w-40 absolute bottom-0 right-10",alt:"image"})]})}),e.jsx(W,{isOpen:o,onRequestClose:B,style:te,contentLabel:"Example Modal",children:e.jsx("div",{className:"relative bg-white rounded-lg shadow-2xl border-2 border-gray-50 rounded",children:e.jsxs("div",{className:"p-10 px-10 md:w-96 bg-red-500  text-center",children:[e.jsxs("h1",{className:"text-white text-lg",children:["Do you want to delete"," ",e.jsx("b",{children:e.jsx("i",{children:m})})," ","workflow ?"]}),e.jsx("img",{src:Ve,alt:"deleteImage"}),e.jsxs("button",{onClick:pe,className:"bg-white text-red-800 border border-white shadow-lg rounded-lg px-2 py-1 text-white  mt-5 text-lg hover:bg-red-900 hover:text-white hover:shadow-3xl md:mr-3 font-semibold",children:[e.jsx(U,{className:"inline"}),"Delete"]}),e.jsxs("button",{onClick:B,className:"bg-gray-400 border border-white shadow-lg rounded-lg px-2 py-1 text-white  mt-5 text-lg hover:bg-gray-700 hover:shadow-2xl md:ml-3",children:[e.jsx(le,{className:"inline text-2xl"}),"Cancel"]})]})})})]})}const Je="/assets/flow-425ed729.svg";function Qe(a){var i,n,o,d,c,u,m;return r.useState({}),r.useState(0),e.jsx(e.Fragment,{children:e.jsx("div",{className:"bg-gray-100",children:e.jsx("div",{className:"container mx-auto my-0 p-2",children:e.jsx("div",{className:"md:flex no-wrap md:-mx-2 ",children:e.jsxs("div",{className:"w-full md:w-12/12 mx-2 h-auto",children:[e.jsxs("div",{className:"bg-white p-3 shadow-xl rounded-sm relative",children:[e.jsxs("div",{className:"shadow-xl bg-sky-200 flex items-center pl-4 space-x-2 font-semibold text-gray-900 leading-8 mb-5 py-2 relative",children:[e.jsx("div",{className:"flex-initial",children:e.jsx(qe,{className:"text-black"})}),e.jsx("div",{className:"tracking-wide font-bold text-lg text-gray-900 flex-initial",children:(i=a.workflowDetailsData)==null?void 0:i.workflow_name}),e.jsx("div",{className:"flex-1 absolute right-6",children:e.jsx(Oe,{className:"text-xl text-sky-900"})})]}),e.jsx("div",{className:"text-gray-700",children:e.jsxs("div",{className:"grid md:grid-cols-2 text-sm pb-6",children:[e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:"ULB Name"}),e.jsx("div",{className:"px-4 py-2",children:((n=ee())==null?void 0:n.brand_tag)=="AMC"?(o=ee())==null?void 0:o.ulb_name:(d=a.workflowDetailsData)==null?void 0:d.ulb_name})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:"Module Name"}),e.jsx("div",{className:"px-4 py-2",children:(c=a.workflowDetailsData)==null?void 0:c.module_name})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:"Initiator"}),e.jsx("div",{className:"px-4 py-2",children:(u=a.workflowDetailsData)==null?void 0:u.initiator_name})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:"Finisher"}),e.jsx("div",{className:"px-4 py-2",children:(m=a.workflowDetailsData)==null?void 0:m.finisher_name})]})]})}),e.jsx("img",{className:"w-1/5 absolute top-20 right-2",src:Je,alt:"flowImage"})]}),e.jsx("div",{className:"md:my-4"})]})})})})})}const ze={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"none"}};function Ke(a){const[i,n]=r.useState(!1),[o,d]=r.useState("");function c(k){d(k),n(!0)}function u(){n(!1)}function m(){}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex shadow-xl border border-white md:w-2/4 items-center rounded-lg bg-gray-100 mt-3 relative",children:[e.jsx("div",{className:"absolute -left-5 text-sm",children:a.index}),e.jsx("div",{className:"flex-initial",children:e.jsx("img",{className:"h-10 w-10 rounded-full",src:Be,alt:""})}),e.jsx("div",{className:"flex-1 ml-2 font-mono font-semibold text-sm",children:a.name}),e.jsx("div",{className:"flex-1 text-sm",children:e.jsx("span",{className:"bg-indigo-200 px-2 rounded-lg text-gray-800",children:"general"})}),e.jsx("div",{className:"flex-initial md:mr-5 shadow-xl cursor-pointer",onClick:()=>c(a.name),children:e.jsx(Te,{className:"text-red-500 text-2xl"})})," "]}),e.jsx(W,{isOpen:i,onAfterOpen:m,onRequestClose:u,style:ze,contentLabel:"Example Modal",children:e.jsx("div",{className:"relative bg-white rounded-lg shadow-xl border-2 border-gray-50",children:e.jsxs("div",{className:"p-10 px-10 md:w-96 bg-red-600  text-center",children:[e.jsxs("h1",{className:"text-white",children:["Do you want to remove ",e.jsx("b",{children:e.jsx("i",{children:o})})," from workflow ?"]}),e.jsxs("button",{className:"bg-white text-red-800 border border-white shadow-lg rounded-lg px-2 py-1 text-white  mt-5 text-lg hover:bg-red-900 hover:text-white hover:shadow-3xl md:mr-3 font-semibold",children:[e.jsx(U,{className:"inline"}),"Delete"]}),e.jsxs("button",{onClick:u,className:"bg-gray-400 border border-white shadow-lg rounded-lg px-2 py-1 text-white  mt-5 text-lg hover:bg-gray-700 hover:shadow-2xl md:ml-3",children:[e.jsx(le,{className:"inline text-2xl"}),"Cancel"]})]})})})]})}function Xe(a){var i;return r.useState([]),e.jsx(e.Fragment,{children:(i=a.workflowDetailsData)==null?void 0:i.candidate_name.map((n,o)=>e.jsx(Ke,{name:n,index:o+1}))})}function oe(a){const{children:i,value:n,index:o,...d}=a;return e.jsx("div",{role:"tabpanel",hidden:n!==o,id:`simple-tabpanel-${o}`,"aria-labelledby":`simple-tab-${o}`,...d,children:n===o&&e.jsx(N,{sx:{p:3},children:e.jsx(re,{children:i})})})}oe.propTypes={children:g.node,index:g.number.isRequired,value:g.number.isRequired};function Ye(a){return{id:`simple-tab-${a}`,"aria-controls":`simple-tabpanel-${a}`}}function Ze(a){const[i,n]=r.useState(0);if(r.useState(""),r.useState({}),a.workflowDetails=="")return e.jsx(e.Fragment,{children:e.jsx(Ue,{fun:a.fun,title:"No Workflow Selected !"})});const o=(d,c)=>{n(c)};return e.jsxs(e.Fragment,{children:[e.jsx(Qe,{workflowDetailsData:a.workflowDetails}),e.jsxs(N,{sx:{width:"100%"},children:[e.jsx(N,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsx(ae,{value:i,onChange:o,"aria-label":"basic tabs example",children:e.jsx(H,{label:"Candidates",...Ye(0)})})}),e.jsx(oe,{value:i,index:0,children:e.jsx(Xe,{workflowDetailsData:a.workflowDetails})})]})]})}function V(a){const{children:i,value:n,index:o,...d}=a;return e.jsx("div",{role:"tabpanel",hidden:n!==o,id:`simple-tabpanel-${o}`,"aria-labelledby":`simple-tab-${o}`,...d,children:n===o&&e.jsx(N,{sx:{p:3},children:e.jsx(re,{children:i})})})}V.propTypes={children:g.node,index:g.number.isRequired,value:g.number.isRequired};function se(a){return{id:`simple-tab-${a}`,"aria-controls":`simple-tabpanel-${a}`}}function et(){const[a,i]=r.useState(0),[n,o]=r.useState(""),d=u=>{o(u),c(null,1)},c=(u,m)=>{i(m)};return e.jsxs(N,{sx:{width:"100%"},children:[e.jsx(N,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(ae,{value:a,onChange:c,"aria-label":"basic tabs example",children:[e.jsx(H,{label:"List",...se(0)}),e.jsx(H,{label:"Details",...se(1)})]})}),e.jsx(V,{value:a,index:0,children:e.jsx(Ge,{fun:d})}),e.jsx(V,{value:a,index:1,children:e.jsx(Ze,{fun:c,workflowDetails:n})})]})}function tt(){const[a,i]=r.useState(0),n=[{title:"Workflow",tabIndex:0},{title:"..............",tabIndex:1},{title:".......................",tabIndex:2}],o=d=>{i(d)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 rounded-lg mt-4 -ml-10 shadow-xl broder-2 border-sky-200 bg-gray-200",children:[e.jsxs("div",{className:"col-span-12 sm:col-span-2 ",children:[" ",e.jsx(Ae,{tabs:n,fun:o})]}),a==0&&e.jsx("div",{className:"col-span-12 sm:col-span-10 shadow-lg bg-white overflow-y-scroll",style:{height:"90vh"},children:e.jsx(et,{})}),"       ",a==1&&e.jsx("div",{className:"col-span-12 sm:col-span-10 shadow-lg bg-white overflow-y-scroll",style:{height:"90vh"},children:"........."}),"       ",a==2&&e.jsx("div",{className:"col-span-12 sm:col-span-10 shadow-lg bg-white overflow-y-scroll",style:{height:"90vh"},children:"........."}),"       "]})})}function mt(){return e.jsx(tt,{})}export{mt as default};
