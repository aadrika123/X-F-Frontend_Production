import{r as o,a as k,Y as B,u as R,e as $,q,s as v,w as E,av as _,A as w,b as U,j as e,B as V,S as O,n as r,am as M,P as Y}from"./index-de9ac7f1.js";import{T as W}from"./TopTabs-eb209b86.js";function Q(Z){var N,j,u;const[i,H]=o.useState([]),[P,c]=o.useState(!1),[t,S]=o.useState(),[G,T]=o.useState(!0),[J,a]=o.useState(!1),[z,g]=o.useState(!1);k("Holding Payment History");const{t:n}=B(),{id:h}=R(),p=$(),{api_getSpecificHoldingTranscationHistory:y}=M(),{api_getPropHoldingDetailsById:A}=Y(),d={api:{api_getTranscationHistory:{method:"get",url:y}},transactionInfo:{title:""},tableColumns:[{Header:"#",Cell:({row:s})=>e.jsx("div",{className:"pr-2",children:s.index+1})},{Header:"Application No.",accessor:"saf_no"},{Header:"Transaction No.",accessor:"tran_no"},{Header:"Payment Mode",accessor:"payment_mode"},{Header:"Transaction Date",accessor:"created_at"},{Header:"Amount",accessor:"amount"}],filters:{applicationNo:!0}};[...d==null?void 0:d.tableColumns];const C=q({fromDate:v().required("Select from date"),toDate:v().required("Select to date")}),f=E({initialValues:{fromDate:_(new Date).format("yy-MM-DD"),toDate:_(new Date).format("yy-MM-DD"),consumerCategory:"",consumerType:"",buildingType:"",paymentMode:"",wardNo:"",tcId:""},onSubmit:s=>{T(!1),b(f.values.fromDate,f.values.toDate)},validationSchema:C});o.useEffect(()=>{b()},[]);const b=()=>{a(!1),g(!1),c(!0);let s={propId:h};w.post(y,s,U()).then(function(l){var x,m;(x=l==null?void 0:l.data)!=null&&x.status&&(H((m=l==null?void 0:l.data)==null?void 0:m.data),a(!0)),c(!1)}).catch(function(l){a(!0),g(!0),c(!1)})},I=()=>{c(!0);const l={headers:{Authorization:`Bearer ${window.localStorage.getItem("token")}`,Accept:"application/json"}};w.post(`${A}`,{propertyId:h},l).then(function(x){var m;S((m=x==null?void 0:x.data)==null?void 0:m.data),c(!1)}).catch(function(x){c(!1)})};return o.useEffect(()=>{I()},[]),P?e.jsx(e.Fragment,{children:e.jsx(V,{})}):z?e.jsx(O,{title:"Server is busy",desc:"Server is too busy to respond. Please try again later.",buttonText:"View Dashboard",buttonUrl:"/propertyDashboard"}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-ful md:px-10 md:pt-5 mx-auto",children:[(d==null?void 0:d.transactionInfo.title)!="",e.jsx(W,{title:`${n("mainHoldingPage.paymentHomeHeadingText.label")}`,type:"holding",id:h,safNo:"",active:"payment"}),e.jsx("div",{className:"",children:e.jsxs("div",{className:"py-6 mt-2 bg-white rounded-lg shadow-lg p-4",children:[e.jsxs("div",{className:"flex space-x-5 pl-4 ",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:r((t==null?void 0:t.owner_names_marathi)??(t==null?void 0:t.owner_name))}),e.jsx("div",{className:"text-gray-500 text-xs",children:n("mainHoldingPage.filterByOwnerName.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:r(t==null?void 0:t.corr_address)}),e.jsx("div",{className:"text-gray-500 text-xs",children:n("mainHoldingPage.paymentCitizenAddress.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:r(t==null?void 0:t.holding_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:n("mainHoldingPage.propertyHoldingNumber.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:r(t==null?void 0:t.zone_name)}),e.jsx("div",{className:"text-gray-500 text-xs",children:n("mainHoldingPage.propertyZone.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:r(t==null?void 0:t.ward_no)}),e.jsx("div",{className:"text-gray-500 text-xs",children:n("mainHoldingPage.propertyWardNumber.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:r(t==null?void 0:t.ownership_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:n("mainHoldingPage.propertyOwnershipType.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:r(t==null?void 0:t.property_type)}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[n("mainHoldingPage.propertyType.label"),n("mainHoldingPage.propertyType.label")]})]})]}),e.jsxs("div",{className:"flex space-x-10  pl-4 mt-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:r(t==null?void 0:t.holding_type)}),e.jsx("div",{className:"text-gray-500 text-xs",children:n("mainHoldingPage.propertyHoldingType.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:r(t==null?void 0:t.is_mobile_tower)}),e.jsx("div",{className:"text-gray-500 text-xs",children:n("mainHoldingPage.propertyMobileTower.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-md",children:[r(t==null?void 0:t.is_hoarding_board)," "]}),e.jsx("div",{className:"text-gray-500 text-xs",children:n("mainHoldingPage.propertyHoardingBoard.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-md",children:r(t==null?void 0:t.is_petrol_pump)}),e.jsx("div",{className:"text-gray-500 text-xs",children:n("mainHoldingPage.propertyPetrolPump.label")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm",children:r(t==null?void 0:t.is_water_harvesting)}),e.jsx("div",{className:"text-gray-500 text-xs",children:n("mainHoldingPage.propertyRainwaterHarvest.label")})]})]})]})}),(i==null?void 0:i.length)==0&&e.jsx("div",{className:"text-center mt-10",children:e.jsx("span",{className:"text-red-600 font-bold text-lg px-4 py-2 border border-red-500  shadow-xl ",children:n("mainHoldingPage.noPaymentsFoundYet.label")})}),(i==null?void 0:i.length)!=0&&e.jsx("div",{className:"mt-10 bg-white shadow-xl  rounded-lg",children:e.jsxs("table",{className:"min-w-full leading-normal mt-2",children:[e.jsx("thead",{className:"font-bold text-left text-sm bg-white text-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:"#"}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:n("mainHoldingPage.paymentTransactionNum.label")}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:n("mainHoldingPage.paymentMode.label")}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:n("mainHoldingPage.paymentDate.label")}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:n("mainHoldingPage.paymentDateFrom.label")}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:n("mainHoldingPage.paymentUptoDate.label")}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:n("mainHoldingPage.paymentAmount.label")}),e.jsx("th",{className:"px-2 py-3 border-b border-gray-200  text-xs capitalize text-left",children:n("mainHoldingPage.paymentReceipt1.label")})]})}),e.jsxs("tbody",{className:"text-sm",children:[(N=i==null?void 0:i.Holding)==null?void 0:N.map((s,l)=>e.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:l+1}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(s==null?void 0:s.tran_no)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(s==null?void 0:s.payment_mode)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(s==null?void 0:s.tran_date)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(s==null?void 0:s.from_fyear)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(s==null?void 0:s.to_fyear)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(s==null?void 0:s.amount)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:e.jsx("button",{onClick:()=>p(`/paymentReceipt/${encodeURIComponent(s==null?void 0:s.id)}/holding`,{state:{property_id:t==null?void 0:t.id,transactionData:s}}),type:"button",className:"cypress_owner_add_update px-2 py-2.5 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight capitalize rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View Receipt"})})]})),(j=i==null?void 0:i.Saf)==null?void 0:j.map((s,l)=>e.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:l+1}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[r(s==null?void 0:s.tran_no),e.jsx("span",{className:"bg-indigo-500 text-white text-xs px-2 rounded-sm ml-2",children:"SAF"})]}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(s==null?void 0:s.payment_mode)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(s==null?void 0:s.tran_date)}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[r(s==null?void 0:s.from_qtr),"/",r(s==null?void 0:s.from_fyear)]}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[r(s==null?void 0:s.to_qtr),"/",r(s==null?void 0:s.to_fyear)]}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[r(s==null?void 0:s.amount),".00"]}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",colSpan:2,children:e.jsx("button",{onClick:()=>p(`/transfer-fee-receipt/${encodeURIComponent(s==null?void 0:s.id)}`),type:"button",className:"cypress_owner_add_update px-2 py-2.5 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight capitalize rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View Receipt"})})]})),(u=i==null?void 0:i.PreviousHolding)==null?void 0:u.map((s,l)=>e.jsxs("tr",{className:"bg-white shadow-lg border-b border-gray-200",children:[e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:l+1}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[r(s==null?void 0:s.tran_no),e.jsx("span",{className:"bg-orange-500 text-white text-xs px-2 rounded-sm ml-2",children:"Old"})]}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(s==null?void 0:s.payment_mode)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(s==null?void 0:s.tran_date)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(s==null?void 0:s.from_fyear)}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:r(s==null?void 0:s.to_fyear)}),e.jsxs("td",{className:"px-2 py-2 text-sm text-left",children:[r(s==null?void 0:s.amount),".00"]}),e.jsx("td",{className:"px-2 py-2 text-sm text-left",children:e.jsx("button",{onClick:()=>p(`/paymentReceipt/${encodeURIComponent(s==null?void 0:s.id)}/holding`,{state:{property_id:t==null?void 0:t.id,transactionData:s}}),type:"button",className:"cypress_owner_add_update px-2 py-2.5 border border-indigo-500 text-indigo-500 font-medium text-xs leading-tight capitalize rounded shadow-xl hover:bg-indigo-700 hover:text-white hover:shadow-lg  active:shadow-lg transition duration-150 ease-in-out cursor-pointer",children:"View Receipt"})})]}))]})]})}),e.jsx("div",{className:"w-full mt-52"})]})})}export{Q as default};
