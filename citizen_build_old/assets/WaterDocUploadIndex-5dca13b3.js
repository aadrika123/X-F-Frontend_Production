import{v as da,r as o,b2 as ra,u as la,a as ca,A,h as na,j as e,cC as ia,cw as pa,cq as xa,cr as ma,cs as ha,cD as O,ct as ba,cu as ua,cv as m}from"./index-96a3c0eb.js";const Da=P=>{var f,j,D,y;const{t:s}=da(),[C,E]=o.useState(0),[V,ga]=o.useState(0),[p,R]=o.useState(),[fa,B]=o.useState(),[F,T]=o.useState(0),[h,$]=o.useState(),[q,z]=o.useState(),[G,n]=o.useState(!1),[H,J]=o.useState(!1),[d,K]=o.useState(!1),[Q,b]=o.useState(!1),[r,X]=o.useState(),{api_waterViewDocumetTobeuploaded:Y,api_waterViewPendingApplication:Z,header:u}=ra(),{id:g}=la();ca(),o.useEffect(()=>{x()},[(f=r==null?void 0:r.applicationDetails)==null?void 0:f.applicationId]),o.useEffect(()=>{n(!0),A.post(Z,{applicationId:g},u).then(a=>{var t;console.log("Application Full Data ............",a.data.data),X(a.data.data),console.log("chandname",(t=r==null?void 0:r.applicationDetails)==null?void 0:t.applicationId),n(!1)}).catch(a=>{console.log("ERROR : Pending Application Data",a),n(!1)})},[P.openModal]);const{setBreadCrumbData:aa}=o.useContext(na);o.useEffect(()=>{aa(["Water Dashboard","Upload Document"])},[]);const x=()=>{var a;n(!0),A.post(Y,{applicationId:(a=r==null?void 0:r.applicationDetails)==null?void 0:a.applicationId},u).then(t=>{var l,i,c;n(!1),console.log("LIst of document to be uploaded in water",t),R(t.data.data.documentsList),B(t.data.data.ownersDocList),J((i=(l=t==null?void 0:t.data)==null?void 0:l.data)==null?void 0:i.doc_upload_status),K((c=t==null?void 0:t.data)==null?void 0:c.data)}).catch(t=>{n(!1),console.log("ERror while fetching list of water doc to be upladed",t)})},ea=(a,t,l)=>{$({docName:a,applicationId:g,docVal:t,refDocName:l}),E(c=>c+1)},ta=a=>{a&&(z(a),T(t=>t+1))},oa=()=>{b(!0)},sa=(j=d==null?void 0:d.connectionCharges)==null?void 0:j.charge_category;return console.log("connectionCharges"),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-3",children:e.jsx(ia,{active:"document",title:`${s("tranWaterDashboardIndex.waterApplicationDocumentUploadLabel.label")}`,applicationNo:(D=d==null?void 0:d.connectionCharges)==null?void 0:D.applicationNo})}),Q&&e.jsx(pa,{openPaymentModal:b,category:sa,paymentData:d}),e.jsx(xa,{openDocumentModal:C,payloadData:h,refetch:x}),e.jsx(ma,{openDocumentModal:V,payloadData:h,refetch:x}),e.jsx(ha,{openDocviewModal:F,documentUrl:q}),e.jsx("div",{className:"grid grid-cols-12 bg-white poppins animate__animated animate__fadeIn animate__faster",children:e.jsx("div",{className:"col-span-12 pt-4 2xl:h-full md:h-screen overflow-y-auto pb-2",children:e.jsxs("div",{className:"md:px-2 col-span-12",children:[e.jsx("div",{className:"float-right m-3 space-x-3",children:H==!0?((y=d==null?void 0:d.connectionCharges)==null?void 0:y.paid_status)==!1&&e.jsx("button",{onClick:()=>oa(),class:"py-2 px-4 inline-block text-center mb-3 leading-5 text-gray-100 bg-green-500 border border-green-500 hover:text-white hover:bg-green-600 hover:ring-0 hover:border-indigo-600 focus:bg-indigo-600 focus:border-indigo-600 focus:outline-none focus:ring-0",children:s("tranWaterDashboardIndex.payNowLabel.label")}):e.jsx("div",{})}),e.jsx("div",{children:e.jsx("h1",{class:"text-base md:text-xl font-bold md:my-3 text-gray-600 text-center",children:s("tranWaterDashboardIndex.waterConnectionDocumentListLabel.label")})}),e.jsx("div",{className:"",children:e.jsx("div",{className:"md:inline-block min-w-full overflow-hidden",children:G?e.jsxs(e.Fragment,{children:[" ",e.jsx(O,{})," ",e.jsx(O,{})," "]}):e.jsx(e.Fragment,{children:e.jsxs("table",{className:"min-w-full leading-normal border",children:[e.jsx("thead",{className:"bg-sky-100",children:e.jsxs("tr",{className:"font-semibold ",children:[e.jsx("th",{scope:"col",className:"px-1 md:px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:"#"}),e.jsx("th",{scope:"col",className:"px-1 md:px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:s("tranWaterDashboardIndex.documentNameLabel.label")}),e.jsx("th",{scope:"col",className:"px-1 md:px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:s("tranWaterDashboardIndex.viewLabel.label")}),e.jsx("th",{scope:"col",className:"px-1 md:px-5 py-2 border-b border-gray-200 text-gray-800 text-center text-sm uppercase",children:s("tranWaterDashboardIndex.statusLabel.label")}),e.jsx("th",{scope:"col",className:"px-1 md:px-5 py-2 border-b border-gray-200 text-gray-800  text-left text-sm uppercase",children:s("tranWaterDashboardIndex.uploadLabel.label")})]})}),e.jsx("tbody",{children:p==null?void 0:p.map((a,t=1)=>{var l,i,c,w,N,v,I,_,L,W,M,S,U;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-1 md:px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-gray-900 whitespace-no-wrap",children:t+1})}),e.jsx("td",{className:"px-1 md:px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsxs("p",{className:"text-gray-900 whitespace-no-wrap",children:[a==null?void 0:a.refDocName,(a==null?void 0:a.isMadatory)==1&&e.jsx("span",{className:"text-red-500 font-semibold mx-1",children:"*"})]})}),e.jsx("td",{onClick:()=>{var k;return ta((k=a==null?void 0:a.uploadDoc)==null?void 0:k.doc_path)},className:"px-1 md:px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("a",{href:"#",className:"block relative",children:[(a==null?void 0:a.uploadDoc)==""&&e.jsx("img",{alt:"profil",src:ba,className:"mx-auto object-cover rounded-none cursor-not-allowed md:h-10 h-8 md:w-10 w-8"}),((i=(l=a==null?void 0:a.uploadDoc)==null?void 0:l.doc_path)==null?void 0:i.split(".").pop())=="pdf"&&e.jsx("img",{alt:"profil",src:ua,className:"mx-auto object-cover rounded-none md:h-10 h-8 md:w-10 w-8 "}),((w=(c=a==null?void 0:a.uploadDoc)==null?void 0:c.doc_path)==null?void 0:w.split(".").pop())=="jpg"&&e.jsx("img",{alt:"profil",src:m,className:"mx-auto object-cover rounded-none md:h-10 h-8 md:w-10 w-8 "}),((v=(N=a==null?void 0:a.uploadDoc)==null?void 0:N.doc_path)==null?void 0:v.split(".").pop())=="jpeg"&&e.jsx("img",{alt:"profil",src:m,className:"mx-auto object-cover rounded-none md:h-10 h-8 md:w-10 w-8 "}),((_=(I=a==null?void 0:a.uploadDoc)==null?void 0:I.doc_path)==null?void 0:_.split(".").pop())=="png"&&e.jsx("img",{alt:"profil",src:m,className:"mx-auto object-cover rounded-none md:h-10 h-8 md:w-10 w-8 "})]})})})}),e.jsx("td",{className:"px-1 md:px-5 py-2 border-b border-gray-200 bg-white text-sm",children:e.jsx("p",{className:"text-center text-black md:font-medium text-xs md:text-sm",children:(a==null?void 0:a.uploadDoc)==""?e.jsx("p",{className:"text-red-500",children:s("tranWaterDashboardIndex.notUploadLabel.label")}):e.jsxs("div",{children:[((L=a==null?void 0:a.uploadDoc)==null?void 0:L.verify_status)==0&&e.jsx("p",{className:"text-yellow-700",children:s("tranWaterDashboardIndex.pendingLabel.label")}),((W=a==null?void 0:a.uploadDoc)==null?void 0:W.verify_status)==1&&e.jsx("p",{className:"text-green-700",children:s("tranWaterDashboardIndex.verifiedLabel.label")}),((M=a==null?void 0:a.uploadDoc)==null?void 0:M.verify_status)==2&&e.jsx("p",{className:"text-red-700",children:s("tranWaterDashboardIndex.rejectedLabel.label")})]})})}),e.jsx("td",{className:"px-1 md:px-5 py-2 border-b border-gray-200 bg-white text-sm ",children:((S=a==null?void 0:a.uploadDoc)==null?void 0:S.verify_status)!=1&&e.jsx("button",{onClick:()=>ea(a.docName,a.docVal,a.refDocName),className:"border px-2 md:px-4 py-1 md:py-2 hover:text-white hover:bg-indigo-500",children:((U=a==null?void 0:a.uploadDoc)==null?void 0:U.verify_status)==2?"Re-Upload":`${s("tranWaterDashboardIndex.uploadLabel.label")}`})})]})})})]})})})}),e.jsx("div",{})]})})})]})};export{Da as default};
