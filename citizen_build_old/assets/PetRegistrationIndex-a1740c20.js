import{a as ae,j as r,aJ as le,r as o,g as $,aK as te,c2 as ie,c as oe,d as i,b as ce,A as g}from"./index-f2cfd069.js";const ne=c=>{var x,b;const d=ae();return console.log("3",(x=c==null?void 0:c.data)==null?void 0:x.applicationNo),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-center",children:" Your Application has submitted successfully"}),r.jsxs("p",{className:"text-center",children:["Application No.  ",r.jsxs("span",{className:"font-semibold text-lg",children:[" ",(b=c==null?void 0:c.data)==null?void 0:b.applicationNo]})]}),r.jsxs("div",{className:"flex justify-center gap-x-5",children:[r.jsx("button",{onClick:()=>d("/pet-registration-dashboard"),className:"border border-indigo-600 px-2 py-1 rounded shadow hover:bg-indigo-500 hover:text-white",children:"Dashboard"}),r.jsx("button",{onClick:()=>{var u;return d(`/apply-pet-registration/document-upload/${(u=c==null?void 0:c.data)==null?void 0:u.id}`)},className:"bg-indigo-500 px-2 py-1 rounded shadow text-white hover:bg-indigo-700",children:"Upload Document"})]})]})};le.createContext({});const e={required:"text-red-700 font-semibold",label:"text-sm",textFiled:"block w-full h-9 border px-2 border-gray-300 rounded shadow text-gray-700",textArea:"block w-full border px-2 border-gray-300 rounded shadow"},de=c=>{var P,L,T,I,O;const[d,x]=o.useState(),[b,u]=o.useState(),[n,U]=o.useState(),[v,S]=o.useState(!1),[W,q]=o.useState(!1),[A,w]=o.useState(!1),{notify:R}=o.useContext($),[F,z]=o.useState(),[N,H]=o.useState(),{api_ulbList:Z,header:j,api_wardList:K}=te(),{api_PetRegistrationApplyForm:J,api_PetRegistrationMaster:Y,api_ListOfSafHolding:Q,api_getUserDetailsByHoldingSaf:X,header1:y}=ie(),ee=oe({ulb:i().required("Require"),applicantName:i().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Only text is allowed").required("Require"),applyThrough:i().required("Require"),holdingNo:i().required("Require"),categoryApplication:i().required("Require"),ward:i().required("Require"),mobileNo:i().matches(/^\d{10}$/,"Mobile number must be exactly 10 digits").required("Require"),panNo:i().matches(/^[A-Za-z0-9]{10}$/,"Enter 10 Character PAN No.").required("Require"),address:i().matches(/^[a-zA-Z0-9\s,.:-]+$/,"Special characters are not allowed").required("Require"),petType:i().required("Require"),petName:i().required("Require"),petGender:i().required("Require"),petBirthDate:i().required("Require"),petIdentity:i().required("Require"),breed:i().required("Require"),color:i().required("Require"),doctorName:i().required("Require"),doctorRegNo:i().required("Require"),dateOfRabies:i().required("Require"),dateOfLepVaccine:i().required("Require"),petFrom:i().required("Require")}),a=ce({initialValues:{ulb:"",applicantName:"",applyThrough:"",holdingNo:"",categoryApplication:"",ward:"",mobileNo:"",email:"",panNo:"",address:"",petType:"",petName:"",petGender:"",petBirthDate:"",petIdentity:"",breed:"",color:"",doctorName:"",doctorRegNo:"",dateOfRabies:"",dateOfLepVaccine:"",petFrom:""},enableReinitialize:!0,onSubmit:(s,l)=>{se(s)},validationSchema:ee}),re=s=>{s.target.name,s.target.value,w(!1)},se=s=>{q(!0);const l={address:s==null?void 0:s.address,applyThrough:s==null?void 0:s.applyThrough,propertyNo:s==null?void 0:s.holdingNo,breed:s==null?void 0:s.breed,ownerCategory:s==null?void 0:s.categoryApplication,color:s==null?void 0:s.color,dateOfLepVaccine:s==null?void 0:s.dateOfLepVaccine,dateOfRabies:s==null?void 0:s.dateOfRabies,doctorName:s==null?void 0:s.doctorName,doctorRegNo:s==null?void 0:s.doctorRegNo,panNo:s==null?void 0:s.panNo,petBirthDate:s==null?void 0:s.petBirthDate,petFrom:s==null?void 0:s.petFrom,petGender:s==null?void 0:s.petGender,petIdentity:s==null?void 0:s.petIdentity,petName:s==null?void 0:s.petName,petType:s==null?void 0:s.petType,ulbId:s==null?void 0:s.ulb,ward:s==null?void 0:s.ward,applicantName:s==null?void 0:s.applicantName,mobileNo:s==null?void 0:s.mobileNo,email:s==null?void 0:s.email,panNo:s==null?void 0:s.panNo};console.log("complete payload",l),g.post(J,l,j).then(t=>{var p,m,h;q(!1),t.data.status?(console.log("Form applied successfully"),c.data(t.data.data),console.log("1",t.data.data),c.screen(2),R((p=t==null?void 0:t.data)==null?void 0:p.message,"success")):(R((m=t==null?void 0:t.data)==null?void 0:m.message,"error"),w((h=t==null?void 0:t.data)==null?void 0:h.message),console.log("Failed to apply pet registration"))}).catch(t=>{var p,m,h,f;w((m=(p=t==null?void 0:t.response)==null?void 0:p.data)==null?void 0:m.error),R("Something Went wrong","error"),q(!1),console.log("Error while applying for pet registration..",(f=(h=t==null?void 0:t.response)==null?void 0:h.data)==null?void 0:f.error)})};return o.useEffect(()=>{g.post(Y,{},y).then(s=>{s.data.status?(U(s.data.data),console.log("pet master data",s.data)):console.log("Error fetching pet master list")}).catch(s=>{console.log("Error while getting pet master list")})},[]),o.useEffect(()=>{g.get(Z,j).then(s=>{s.data.status?(x(s.data.data),console.log("ULB List",s.data)):console.log("Error fetching ulb list")}).catch(s=>{console.log("Error while getting ulb list")})},[]),o.useEffect(()=>{g.post(K,{ulbId:a.values.ulb},j).then(s=>{s.data.status?(u(s.data.data),console.log("Ward List",s.data)):console.log("Error fetching Ward list")}).catch(s=>{console.log("Error while getting Ward list")})},[a.values.ulb]),o.useEffect(()=>{let s;a.values.applyThrough==1&&(s="holding"),a.values.applyThrough==2&&(s="saf");const l={type:s,ulbId:a.values.ulb};g.post(Q,l,j).then(t=>{t.data.status?(z(t.data.data),console.log("List of holding saf",t.data)):console.log("Error fetching saf holding")}).catch(t=>{console.log("Error while getting saf holding")})},[a.values.ulb,a.values.applyThrough]),o.useEffect(()=>{const s={connectionThrough:a.values.applyThrough,id:a.values.holdingNo,ulbId:a.values.ulb};g.post(X,s,j).then(l=>{var t,p,m,h,f,E,D,V,_,C,B,k,G,M;l.data.status?(H(l.data.data),console.log("User Details",l.data),a.setFieldValue("address",(p=(t=l==null?void 0:l.data)==null?void 0:t.data)==null?void 0:p.prop_address),a.setFieldValue("ward",(f=(h=(m=l==null?void 0:l.data)==null?void 0:m.data)==null?void 0:h.wardDetails)==null?void 0:f.wardId),a.setFieldValue("applicantName",(V=(D=(E=l==null?void 0:l.data)==null?void 0:E.data)==null?void 0:D.owners[0])==null?void 0:V.ownerName),a.setFieldValue("mobileNo",(B=(C=(_=l==null?void 0:l.data)==null?void 0:_.data)==null?void 0:C.owners[0])==null?void 0:B.mobileNo),a.setFieldValue("email",(M=(G=(k=l==null?void 0:l.data)==null?void 0:k.data)==null?void 0:G.owners[0])==null?void 0:M.email)):console.log("Error fetching user Details")}).catch(l=>{console.log("Error while getting user Details")})},[a.values.holdingNo,a.values.applyThrough]),console.log("formik.values.owner_type",a.values.categoryApplication),r.jsx(r.Fragment,{children:r.jsxs("form",{onSubmit:a.handleSubmit,onChange:re,children:[r.jsxs("div",{className:"overflow-y-auto",children:[r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Property Details"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ulb",children:["Select ULB ",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...a.getFieldProps("ulb"),name:"ulb",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),d==null?void 0:d.map((s,l)=>r.jsx("option",{value:s.id,children:s.ulb_name},l))]}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.ulb&&a.errors.ulb?a.errors.ulb:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applyThrough",children:["Apply Through",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...a.getFieldProps("applyThrough"),name:"applyThrough",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(P=n==null?void 0:n.registrationThrough)==null?void 0:P.map((s,l)=>r.jsx("option",{value:s.id,children:s.registration_through},l))]}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.applyThrough&&a.errors.applyThrough?a.errors.applyThrough:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"holdingNo",children:["Holding / SAF No.",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...a.getFieldProps("holdingNo"),name:"holdingNo",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),F&&(F==null?void 0:F.map((s,l)=>r.jsx("option",{value:(s==null?void 0:s.saf_no)||(s==null?void 0:s.new_holding_no),children:(s==null?void 0:s.saf_no)||(s==null?void 0:s.new_holding_no)},l)))]}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.holdingNo&&a.errors.holdingNo?a.errors.holdingNo:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"categoryApplication",children:["Category of Application",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...a.getFieldProps("categoryApplication"),name:"categoryApplication",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(n==null?void 0:n.ownertype)&&((L=n==null?void 0:n.ownertype)==null?void 0:L.map((s,l)=>l===0?r.jsx("option",{value:s.id,children:s.owner_type},l):l===1&&(N!=null&&N.tenanted)?r.jsx("option",{value:s.id,children:s.owner_type},l):null))]}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.categoryApplication&&a.errors.categoryApplication?a.errors.categoryApplication:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"ward",children:["Ward Number",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{type:"text",disabled:!0,...a.getFieldProps("ward"),value:(T=N==null?void 0:N.wardDetails)==null?void 0:T.wardNo,name:"ward",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.ward&&a.errors.ward?a.errors.ward:null})]})]}),r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Applicant Details"})}),r.jsxs("div",{className:"bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 ",children:[r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"applicantName",children:["Name of Applicant",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{disabled:a.values.categoryApplication!=2,...a.getFieldProps("applicantName"),maxLength:"70",type:"text",name:"applicantName",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.applicantName&&a.errors.applicantName?a.errors.applicantName:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"mobileNo",children:["Mobile No",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{disabled:a.values.categoryApplication!=2,...a.getFieldProps("mobileNo"),type:"number",maxLength:"10",name:"mobileNo",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.mobileNo&&a.errors.mobileNo?a.errors.mobileNo:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"email",children:["Email",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{disabled:a.values.categoryApplication!=2,...a.getFieldProps("email"),type:"email",maxLength:"70",name:"email",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.email&&a.errors.email?a.errors.email:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"panNo",children:["PAN No.",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("panNo"),maxLength:"10",type:"text",name:"panNo",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.panNo&&a.errors.panNo?a.errors.panNo:null})]})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"address",children:["Address",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("textarea",{disabled:a.values.categoryApplication!=2,...a.getFieldProps("address"),name:"address",maxLength:"500",rows:"3",className:e==null?void 0:e.textArea}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.address&&a.errors.address?a.errors.address:null})]})]}),r.jsx("div",{className:"col-span-12 ml-2 my-2",children:r.jsx("div",{className:"text-lg text-left text-gray-600 font-semibold",children:"# Pet Details"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 bg-white shadow-md rounded-md py-2",children:[r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petType",children:["Pet Type",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...a.getFieldProps("petType"),type:"text",name:"petType",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"1",children:"Dog"})]}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petType&&a.errors.petType?a.errors.petType:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petName",children:["Name of Pet",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("petName"),maxLength:"50",type:"text",name:"petName",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petName&&a.errors.petName?a.errors.petName:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petGender",children:["Gender",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...a.getFieldProps("petGender"),type:"text",name:"petGender",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(I=n==null?void 0:n.petGender)==null?void 0:I.map((s,l)=>r.jsx("option",{value:s.id,children:s.pet_gender},l))]}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petGender&&a.errors.petGender?a.errors.petGender:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petBirthDate",children:["Date of Birth",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("petBirthDate"),type:"date",name:"petBirthDate",max:new Date().toISOString().split("T")[0],className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petBirthDate&&a.errors.petBirthDate?a.errors.petBirthDate:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petIdentity",children:["Identity MarK",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("petIdentity"),maxLength:"50",type:"text",name:"petIdentity",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petIdentity&&a.errors.petIdentity?a.errors.petIdentity:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"breed",children:["Breed",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("breed"),type:"text",maxLength:"20",name:"breed",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.breed&&a.errors.breed?a.errors.breed:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"color",children:["Color",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("color"),type:"text",maxLength:"20",name:"color",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.color&&a.errors.color?a.errors.color:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"doctorName",children:["Veterinary Doctor Name",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("doctorName"),type:"text",maxLength:"70",name:"doctorName",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.doctorName&&a.errors.doctorName?a.errors.doctorName:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"doctorRegNo",children:["Doctorâ€™s MSVC/VCI number ",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("doctorRegNo"),type:"text",maxLength:"70",name:"doctorRegNo",className:e==null?void 0:e.textFiled}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.doctorRegNo&&a.errors.doctorRegNo?a.errors.doctorRegNo:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"dateOfRabies",children:["Date of Rabies",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("dateOfRabies"),type:"date",name:"dateOfRabies",className:e==null?void 0:e.textFiled,max:new Date().toISOString().split("T")[0]}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.dateOfRabies&&a.errors.dateOfRabies?a.errors.dateOfRabies:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"dateOfLepVaccine",children:["Leptospirosis Vaccination Date",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsx("input",{...a.getFieldProps("dateOfLepVaccine"),type:"date",name:"dateOfLepVaccine",className:e==null?void 0:e.textFiled,max:new Date().toISOString().split("T")[0]}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.dateOfLepVaccine&&a.errors.dateOfLepVaccine?a.errors.dateOfLepVaccine:null})]}),r.jsxs("div",{className:"m-3",children:[r.jsxs("label",{className:e==null?void 0:e.label,htmlFor:"petFrom",children:["Pet From",r.jsx("span",{className:e==null?void 0:e.required,children:"*"})]}),r.jsxs("select",{...a.getFieldProps("petFrom"),name:"petFrom",className:e==null?void 0:e.textFiled,children:[r.jsx("option",{value:"",children:"Select"}),(O=n==null?void 0:n.occurenceType)==null?void 0:O.map((s,l)=>r.jsx("option",{value:s.id,children:s.occurrence_types},l))]}),r.jsx("p",{className:"text-red-500 text-xs",children:a.touched.petFrom&&a.errors.petFrom?a.errors.petFrom:null})]})]})]}),r.jsxs("p",{className:"flex mt-3 gap-x-3",children:[r.jsx("input",{type:"checkbox",checked:v,name:"",id:"",onChange:s=>S(s.target.checked)}),r.jsx("p",{className:"cursor-pointer select-none",onClick:()=>S(!v),children:"I have entered the correct information and agree to the terms and conditions."})]}),r.jsx("p",{className:"text-red-500 font-semibold text-center mt-3",children:A&&"Error : "+A}),r.jsx("div",{className:"flex justify-center my-5",children:W?r.jsx("p",{children:"Form Submitting.."}):r.jsx("button",{type:"submit",disabled:!v,className:"disabled:opacity-40 bg-indigo-600 hover:bg-indigo-700 px-8 py-2 text-white rounded shadow",children:"Submit Application"})})]})})},he=()=>{const[c,d]=o.useState(1),[x,b]=o.useState(),{setBreadCrumbData:u}=o.useContext($);return o.useEffect(()=>{u(["Apply Pet Registration"])},[]),r.jsx(r.Fragment,{children:r.jsx("div",{className:"grid grid-cols-9 space-x-6 my-2 mx-8",children:r.jsxs("div",{className:"col-span-9 border border-gray-400 rounded",children:[r.jsx("p",{className:"border-b border-indigo-300 bg-indigo-200 p-1 text-center text-xl shadow-md font-semibold",children:"Pet Registration Application"}),r.jsxs("div",{className:"p-5",children:[r.jsxs("p",{className:`${c==1?"block":"hidden"}`,children:[" ",r.jsx(de,{screen:d,data:b})," "]}),r.jsxs("p",{className:`${c==2?"block":"hidden"}`,children:[" ",r.jsx(ne,{screen:d,data:x})]})]})]})})})};export{he as default};
